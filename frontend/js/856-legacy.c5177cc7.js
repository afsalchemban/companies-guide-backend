(self["webpackChunkcompany_guide"]=self["webpackChunkcompany_guide"]||[]).push([[856],{5856:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return wT}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container mx-auto mt-5 sm:mt-10 sm:mt-20 mb-16"},[n("ProjectHeader",{attrs:{singleProjectHeader:t.singleProjectHeader}}),n("Swiper"),n("ProjectInfo",{attrs:{projectInfo:t.projectInfo,categoryInfo:t.categoryInfo}})],1)},i=[],o=(n(4916),n(5306),n(775)),s=n.n(o),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"flex items-center"},[n("div",{staticClass:"w-7 h-7 sm:w-14 sm:h-14 rounded-lg sm:rounded-xl flex items-center justify-center Clogo cursor-pointer shadow-lg font-general-medium text-left text-md sm:text-3xl font-bold text-primary-dark dark:text-primary-light mt-14 sm:mt-20 mb-7 mr-2 sm:mr-5"},[t._v(" R ")]),n("p",{staticClass:"font-general-medium text-left xl-text-4xl lg:text-3xl md:text-xl sm:text-md font-bold text-primary-dark dark:text-primary-light mt-14 sm:mt-20 mb-7"},[t._v(" "+t._s(t.singleProjectHeader.singleProjectTitle)+" ")]),t._m(0)]),n("div",{staticClass:"flex"},[n("div",{staticClass:"flex items-center mr-10"},[n("i",{staticClass:"w-4 h-4 text-ternary-dark dark:text-ternary-light",attrs:{"data-feather":"clock"}}),n("span",{staticClass:"font-general-medium ml-1 sm:ml-2 text-xs sm:text-md txt-mobile2 leading-none text-primary-dark dark:text-primary-light"},[t._v(t._s(t.singleProjectHeader.singleProjectDate))])]),n("div",{staticClass:"flex items-center"},[n("i",{staticClass:"w-4 h-4 text-ternary-dark dark:text-ternary-light",attrs:{"data-feather":"tag"}}),n("span",{staticClass:"font-general-medium ml-1 sm:ml-2 text-xs sm:text-md txt-mobile2 leading-none text-primary-dark dark:text-primary-light"},[t._v(t._s(t.singleProjectHeader.singleProjectTag))])]),n("div",{staticClass:"ml-10 flex items-center",attrs:{role:"button"}},[n("router-link",{staticClass:"flex items-center",attrs:{to:"/settings"}},[n("i",{staticClass:"w-4 h-4 text-ternary-dark dark:text-ternary-light",attrs:{"data-feather":"settings"}}),n("span",{staticClass:"font-general-medium ml-1 sm:ml-2 text-xs sm:text-md txt-mobile2 leading-none text-primary-dark dark:text-primary-light"},[t._v("Settings")])])],1),n("div",{staticClass:"flex items-center ml-10 chat-box rounded-xl",on:{click:function(e){return t.openChat()}}},[n("i",{staticClass:"w-4 h-4 text-ternary-dark dark:text-ternary-light",attrs:{"data-feather":"message-circle"}}),n("span",{staticClass:"font-general-medium ml-1 sm:ml-2 text-xs sm:text-md txt-mobile2 leading-none text-primary-dark dark:text-primary-light"},[t._v("Chat")])])]),n("Chat",{ref:"open"})],1)},u=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"verified mt-9 sm:mt-16 ml-1 sm:ml-3"},[n("span",[t._v("âœ”")])])}],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("beautiful-chat",{attrs:{participants:t.participants,titleImageUrl:t.titleImageUrl,onMessageWasSent:t.onMessageWasSent,messageList:t.messageList,newMessagesCount:t.newMessagesCount,isOpen:t.isChatOpen,close:t.closeChat,icons:t.icons,open:t.openChat,showEmoji:!0,showFile:!0,showEdition:!0,showDeletion:!0,showTypingIndicator:t.showTypingIndicator,showLauncher:!1,showCloseButton:!0,colors:t.colors,alwaysScrollToBottom:t.alwaysScrollToBottom,disableUserListToggle:!1,messageStyling:t.messageStyling},on:{onType:t.handleOnType,edit:t.editMessage}})],1)},h=[];function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t){if(Array.isArray(t))return l(t)}n(2526),n(1817),n(1539),n(2165),n(8783),n(3948),n(1038);function p(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n(7042),n(8309),n(7601);function d(t,e){if(t){if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}n(1703);function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(t){return f(t)||p(t)||d(t)||v()}n(2222),n(9826),n(4747),n(7941);var y=n(9669),m=n(9726);n(5837),n(3123),n(9714),n(3753),n(7327),n(1249),n(561),n(3210),n(8862),n(4723),n(9600),n(9653),n(4633),n(3371),n(2707),n(86),n(2472),n(8675),n(2990),n(8927),n(3105),n(5035),n(4345),n(7174),n(2846),n(4731),n(7209),n(6319),n(8867),n(7789),n(3739),n(9368),n(4483),n(2056),n(3462),n(678),n(7462),n(3824),n(5021),n(2974),n(5016),n(4603),n(8450),n(8386),n(5125);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function r(t){t=["object"==("undefined"===typeof window?"undefined":(0,m.Z)(window))&&window,"object"==("undefined"===typeof self?"undefined":(0,m.Z)(self))&&self,"object"==("undefined"===typeof n.g?"undefined":(0,m.Z)(n.g))&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}var i=r(this);function o(t,n){if(n){var r=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in r||(r[s]={}),r=r[s]}t=t[t.length-1],o=r[t],n=n(o),n!=o&&null!=n&&e(r,t,{configurable:!0,writable:!0,value:n})}}function s(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:s(t)}}o("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(M){this.f(M)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch((0,m.Z)(t)){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(M){n.reject(M)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(hr){o(hr)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=a(t),o=i.next();!o.done;o=i.next())r(o.value).Qa(e,n)}))},e.all=function(t){var n=a(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){s[e]=n,a--,0==a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,r(i.value).Qa(o(s.length-1),e),i=n.next()}while(!i.done)}))},e}));var u=u||{},c=this||self,h=/^[\w+/_-]+[=]{0,2}$/,l=null;function f(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&h.test(t)?t:""}function p(){}function d(t){var e=(0,m.Z)(t);return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function v(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function g(t){return"function"==d(t)}function b(t){var e=(0,m.Z)(t);return"object"==e&&null!=t||"function"==e}function _(t){return Object.prototype.hasOwnProperty.call(t,w)&&t[w]||(t[w]=++I)}var w="closure_uid_"+(1e9*Math.random()>>>0),I=0;function E(t,e,n){return t.call.apply(t.bind,arguments)}function S(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function C(t,e,n){return C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?E:S,C.apply(null,arguments)}function k(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var N=Date.now;function A(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function P(t){return t}function x(t,e,n){this.code=D+t,this.message=e||L[t]||"",this.a=n||null}function O(t){var e=t&&t.code;return e?new x(e.substring(D.length),t.message,t.serverResponse):null}A(x,Error),x.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},x.prototype.toJSON=function(){return this.w()};var R,D="auth/",L={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},j={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function F(t){for(var e in j)if(j[e].id===t)return t=j[e],{firebaseEndpoint:t.Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function U(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function V(t){if(Error.captureStackTrace)Error.captureStackTrace(this,V);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function q(t,e){t=t.split("%s");for(var n="",r=t.length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");V.call(this,n+t[r])}function B(t,e){throw new q("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function H(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function W(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function z(){this.b=this.a=null}R=F("__EID__")?"__EID__":void 0,A(V,Error),V.prototype.name="CustomError",A(q,V),q.prototype.name="AssertionError",H.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var G=new H((function(){return new Q}),(function(t){t.reset()}));function K(){var t=De,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Q(){this.next=this.b=this.a=null}z.prototype.add=function(t,e){var n=G.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Q.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Q.prototype.reset=function(){this.next=this.b=this.a=null};var Y=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},X=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Z(t,e){for(var n="string"===typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}var J=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"===typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},$=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"===typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},tt=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function et(t){t:{for(var e=ca,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}function nt(t,e){return 0<=Y(t,e)}function rt(t,e){var n;return e=Y(t,e),(n=0<=e)&&Array.prototype.splice.call(t,e,1),n}function it(t,e){Z(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function ot(t){return Array.prototype.concat.apply([],arguments)}function st(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var at,ut=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},ct=/&/g,ht=/</g,lt=/>/g,ft=/"/g,pt=/'/g,dt=/\x00/g,vt=/[\x00&<>"']/;function gt(t,e){return-1!=t.indexOf(e)}function yt(t,e){return t<e?-1:t>e?1:0}t:{var mt=c.navigator;if(mt){var bt=mt.userAgent;if(bt){at=bt;break t}}at=""}function _t(t){return gt(at,t)}function wt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function It(t){for(var e in t)return!1;return!0}function Et(t){var e,n={};for(e in t)n[e]=t[e];return n}var Tt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function St(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(var o=0;o<Tt.length;o++)n=Tt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ct(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if(r=r||c,r.Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&"undefined"!=typeof i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(b(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":(0,m.Z)(t);B("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function kt(t,e){this.a=t===xt&&e||"",this.b=Pt}function Nt(t){return t instanceof kt&&t.constructor===kt&&t.b===Pt?t.a:(B("expected object of type Const, got '"+t+"'"),"type_error:Const")}kt.prototype.sa=!0,kt.prototype.ra=function(){return this.a},kt.prototype.toString=function(){return"Const{"+this.a+"}"};var At,Pt={},xt={};function Ot(){if(void 0===At){var t=null,e=c.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:P,createScript:P,createScriptURL:P})}catch(n){c.console&&c.console.error(n.message)}At=t}else At=t}return At}function Rt(t,e){this.a=e===Ft?t:""}function Dt(t){return t instanceof Rt&&t.constructor===Rt?t.a:(B("expected object of type TrustedResourceUrl, got '"+t+"' of type "+d(t)),"type_error:TrustedResourceUrl")}function Lt(t,e){var n=Nt(t);if(!jt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(Mt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return t=e[r],t instanceof kt?Nt(t):encodeURIComponent(String(t))})),Ut(t)}Rt.prototype.sa=!0,Rt.prototype.ra=function(){return this.a.toString()},Rt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Mt=/%{(\w+)}/g,jt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ft={};function Ut(t){var e=Ot();return t=e?e.createScriptURL(t):t,new Rt(t,Ft)}function Vt(t,e){this.a=e===Kt?t:""}function qt(t){return t instanceof Vt&&t.constructor===Vt?t.a:(B("expected object of type SafeUrl, got '"+t+"' of type "+d(t)),"type_error:SafeUrl")}Vt.prototype.sa=!0,Vt.prototype.ra=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Bt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Ht=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Wt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function zt(t){if(t instanceof Vt)return t;if(t="object"==(0,m.Z)(t)&&t.sa?t.ra():String(t),Wt.test(t))t=new Vt(t,Kt);else{t=String(t),t=t.replace(/(%0A|%0D)/g,"");var e=t.match(Ht);t=e&&Bt.test(e[1])?new Vt(t,Kt):null}return t}function Gt(t){return t instanceof Vt?t:(t="object"==(0,m.Z)(t)&&t.sa?t.ra():String(t),Wt.test(t)||(t="about:invalid#zClosurez"),new Vt(t,Kt))}var Kt={},Qt=new Vt("about:invalid#zClosurez",Kt);function Yt(t,e,n){this.a=n===Zt?t:""}function Xt(t){return t instanceof Yt&&t.constructor===Yt?t.a:(B("expected object of type SafeHtml, got '"+t+"' of type "+d(t)),"type_error:SafeHtml")}Yt.prototype.sa=!0,Yt.prototype.ra=function(){return this.a.toString()},Yt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Zt={};function Jt(t,e){Ct(t,"HTMLScriptElement"),t.src=Dt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=c?e=f(e.document):(null===l&&(l=f(c.document)),e=l),e&&t.setAttribute("nonce",e)}function $t(t,e,n,r){return t=t instanceof Vt?t:Gt(t),e=e||c,n=n instanceof kt?Nt(n):n||"",e.open(qt(t),n,r,void 0)}function te(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function ee(t){return vt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(ct,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(ht,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(lt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ft,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(pt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(dt,"&#0;"))),t}function ne(t){return ne[" "](t),t}function re(t,e){var n=ge;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}ne[" "]=p;var ie,oe=_t("Opera"),se=_t("Trident")||_t("MSIE"),ae=_t("Edge"),ue=ae||se,ce=_t("Gecko")&&!(gt(at.toLowerCase(),"webkit")&&!_t("Edge"))&&!(_t("Trident")||_t("MSIE"))&&!_t("Edge"),he=gt(at.toLowerCase(),"webkit")&&!_t("Edge");function le(){var t=c.document;return t?t.documentMode:void 0}t:{var fe="",pe=function(){var t=at;return ce?/rv:([^\);]+)(\)|;)/.exec(t):ae?/Edge\/([\d\.]+)/.exec(t):se?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):he?/WebKit\/(\S+)/.exec(t):oe?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(pe&&(fe=pe?pe[1]:""),se){var de=le();if(null!=de&&de>parseFloat(fe)){ie=String(de);break t}}ie=fe}var ve,ge={};function ye(t){return re(t,(function(){for(var e=0,n=ut(String(ie)).split("."),r=ut(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=yt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||yt(0==s[2].length,0==a[2].length)||yt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(c.document&&se){var me=le();ve=me||(parseInt(ie,10)||void 0)}else ve=void 0;var be=ve;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(rd){}var _e=!se||9<=Number(be);function we(t){var e=document;return"string"===typeof t?e.getElementById(t):t}function Ie(t,e){wt(e,(function(e,n){e&&"object"==(0,m.Z)(e)&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Se.hasOwnProperty(n)?t.setAttribute(Se[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var Ee,Te,Se={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Ce(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!_e&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',ee(s.name),'"'),s.type){o.push(' type="',ee(s.type),'"');var a={};St(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=Ne(i,o),s&&("string"===typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):Ie(o,s)),2<r.length&&ke(i,o,r),o}function ke(t,e,n){function r(n){n&&e.appendChild("string"===typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!v(o)||b(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(b(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(g(o)){s="function"==typeof o.item;break t}}s=!1}X(s?st(o):o,r)}}}function Ne(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function Ae(t){c.setTimeout((function(){throw t}),0)}function Pe(){var t=c.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!_t("Presto")&&(t=function(){var t=Ne(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;t=e.document,t.open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=C((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!_t("Trident")&&!_t("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var t=n.Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){c.setTimeout(t,0)}}function xe(t,e){Te||Oe(),Re||(Te(),Re=!0),De.add(t,e)}function Oe(){if(c.Promise&&c.Promise.resolve){var t=c.Promise.resolve(void 0);Te=function(){t.then(Le)}}else Te=function(){var t=Le;!g(c.setImmediate)||c.Window&&c.Window.prototype&&!_t("Edge")&&c.Window.prototype.setImmediate==c.setImmediate?(Ee||(Ee=Pe()),Ee(t)):c.setImmediate(t)}}var Re=!1,De=new z;function Le(){for(var t;t=K();){try{t.a.call(t.b)}catch(e){Ae(e)}W(G,t)}Re=!1}function Me(t,e){if(this.a=je,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=p)try{var n=this;t.call(e,(function(t){Ze(n,Fe,t)}),(function(t){if(!(t instanceof an))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}Ze(n,Ue,t)}))}catch(r){Ze(this,Ue,r)}}var je=0,Fe=2,Ue=3;function Ve(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ve.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var qe=new H((function(){return new Ve}),(function(t){t.reset()}));function Be(t,e,n){var r=qe.get();return r.g=t,r.b=e,r.f=n,r}function He(t){if(t instanceof Me)return t;var e=new Me(p);return Ze(e,Fe,t),e}function We(t){return new Me((function(e,n){n(t)}))}function ze(t,e,n){Je(t,e,n,null)||xe(k(e,t))}function Ge(t){return new Me((function(e,n){var r=t.length,i=[];if(r)for(var o,s=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},u=0;u<t.length;u++)o=t[u],ze(o,k(s,u),a);else e(i)}))}function Ke(t){return new Me((function(e){var n=t.length,r=[];if(n)for(var i,o=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},s=0;s<t.length;s++)i=t[s],ze(i,k(o,s,!0),k(o,s,!1));else e(r)}))}function Qe(t,e){if(t.a==je)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==je&&1==r?Qe(n,e):(o?(r=o,r.next==n.f&&(n.f=r),r.next=r.next.next):en(n),nn(n,i,Ue,e)))}t.c=null}else Ze(t,Ue,e)}function Ye(t,e){t.b||t.a!=Fe&&t.a!=Ue||tn(t),t.f?t.f.next=e:t.b=e,t.f=e}function Xe(t,e,n,r){var i=Be(null,null,null);return i.a=new Me((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(M){o(M)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof an?o(e):t(i)}catch(M){o(M)}}:o})),i.a.c=t,Ye(t,i),i.a}function Ze(t,e,n){t.a==je&&(t===n&&(e=Ue,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Je(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,tn(t),e!=Ue||n instanceof an||on(t,n)))}function Je(t,e,n,r){if(t instanceof Me)return Ye(t,Be(e||p,n||null,r)),!0;if(U(t))return t.then(e,n,r),!0;if(b(t))try{var i=t.then;if(g(i))return $e(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function $e(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(u){o(u)}}function tn(t){t.h||(t.h=!0,xe(t.gc,t))}function en(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function nn(t,e,n,r){if(n==Ue&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,rn(e,n,r);else try{e.c?e.g.call(e.f):rn(e,n,r)}catch(i){sn.call(null,i)}W(qe,e)}function rn(t,e,n){e==Fe?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}function on(t,e){t.g=!0,xe((function(){t.g&&sn.call(null,e)}))}Me.prototype.then=function(t,e,n){return Xe(this,g(t)?t:null,g(e)?e:null,n)},Me.prototype.$goog_Thenable=!0,t=Me.prototype,t.oa=function(t,e){return t=Be(t,t,e),t.c=!0,Ye(this,t),this},t.o=function(t,e){return Xe(this,null,t,e)},t.cancel=function(t){if(this.a==je){var e=new an(t);xe((function(){Qe(this,e)}),this)}},t.$c=function(t){this.a=je,Ze(this,Fe,t)},t.ad=function(t){this.a=je,Ze(this,Ue,t)},t.gc=function(){for(var t;t=en(this);)nn(this,t,this.a,this.i);this.h=!1};var sn=Ae;function an(t){V.call(this,t)}function un(){0!=cn&&(hn[_(this)]=this),this.xa=this.xa,this.pa=this.pa}A(an,V),an.prototype.name="cancel";var cn=0,hn={};function ln(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=cn)){var e=_(t);if(0!=cn&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete hn[e]}}un.prototype.xa=!1,un.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var fn=Object.freeze||function(t){return t},pn=!se||9<=Number(be),dn=se&&!ye("9"),vn=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{c.addEventListener("test",p,e),c.removeEventListener("test",p,e)}catch(n){}return t}();function gn(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function yn(t,e){if(gn.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(ce){t:{try{ne(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:mn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}gn.prototype.preventDefault=function(){this.defaultPrevented=!0},A(yn,gn);var mn=fn({2:"touch",3:"pen",4:"mouse"});yn.prototype.preventDefault=function(){yn.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,dn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},yn.prototype.g=function(){return this.a};var bn="closure_listenable_"+(1e6*Math.random()|0),_n=0;function wn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++_n,this.va=this.Pa=!1}function In(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function En(t){this.src=t,this.a={},this.b=0}function Tn(t,e){var n=e.type;n in t.a&&rt(t.a[n],e)&&(In(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Sn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}En.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var s=Sn(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):(e=new wn(e,this.src,o,!!r,i),e.Pa=n,t.push(e)),e};var Cn="closure_lm_"+(1e6*Math.random()|0),kn={};function Nn(t,e,n,r,i){if(r&&r.once)xn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Nn(t,e[o],n,r,i);else n=Vn(n),t&&t[bn]?Bn(t,e,n,b(r)?!!r.capture:!!r,i):An(t,e,n,!1,r,i)}function An(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=b(i)?!!i.capture:!!i,a=Fn(t);if(a||(t[Cn]=a=new En(t)),n=a.add(e,n,r,s,o),!n.proxy){if(r=Pn(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)vn||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Dn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function Pn(){var t=jn,e=pn?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function xn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)xn(t,e[o],n,r,i);else n=Vn(n),t&&t[bn]?Hn(t,e,n,b(r)?!!r.capture:!!r,i):An(t,e,n,!0,r,i)}function On(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)On(t,e[o],n,r,i);else r=b(r)?!!r.capture:!!r,n=Vn(n),t&&t[bn]?(t=t.v,e=String(e).toString(),e in t.a&&(o=t.a[e],n=Sn(o,n,r,i),-1<n&&(In(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Fn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Sn(e,n,r,i)),(n=-1<t?e[t]:null)&&Rn(n))}function Rn(t){if("number"!==typeof t&&t&&!t.va){var e=t.src;if(e&&e[bn])Tn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Dn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Fn(e))?(Tn(n,t),0==n.b&&(n.src=null,e[Cn]=null)):In(t)}}}function Dn(t){return t in kn?kn[t]:kn[t]="on"+t}function Ln(t,e,n,r){var i=!0;if((t=Fn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=Mn(o,r),i=i&&!1!==o)}return i}function Mn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&Rn(t),n.call(r,e)}function jn(t,e){if(t.va)return!0;if(!pn){if(!e)t:{e=["window","event"];for(var n=c,r=0;r<e.length;r++)if(n=n[e[r]],null==n){e=null;break t}e=n}if(r=e,e=new yn(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=Ln(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=Ln(r[i],t,!1,e),n=n&&o}return n}return Mn(t,new yn(e,this))}function Fn(t){return t=t[Cn],t instanceof En?t:null}var Un="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vn(t){return g(t)?t:(t[Un]||(t[Un]=function(e){return t.handleEvent(e)}),t[Un])}function qn(){un.call(this),this.v=new En(this),this.ac=this,this.gb=null}function Bn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Hn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Wn(t,e,n,r){if(e=t.v.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Va||s.src;s.Pa&&Tn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function zn(t,e,n){if(g(t))n&&(t=C(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=C(t.handleEvent,t)}return 2147483647<Number(e)?-1:c.setTimeout(t,e||0)}function Gn(t){var e=null;return new Me((function(n,r){e=zn((function(){n(void 0)}),t),-1==e&&r(Error("Failed to schedule timer."))})).o((function(t){throw c.clearTimeout(e),t}))}function Kn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"===typeof t)return t.split("");if(v(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Qn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(v(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Yn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(v(t)||"string"===typeof t)X(t,e,void 0);else for(var n=Qn(t),r=Kn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}function Xn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Xn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Zn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Jn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Jn(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Jn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}A(qn,un),qn.prototype[bn]=!0,qn.prototype.addEventListener=function(t,e,n,r){Nn(this,t,e,n,r)},qn.prototype.removeEventListener=function(t,e,n,r){On(this,t,e,n,r)},qn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"===typeof t)t=new gn(t,n);else if(t instanceof gn)t.target=t.target||n;else{var i=t;t=new gn(r,n),St(t,i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=Wn(s,r,!0,t)&&i}if(s=t.b=n,i=Wn(s,r,!0,t)&&i,i=Wn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)s=t.b=e[o],i=Wn(s,r,!1,t)&&i;return i},qn.prototype.Da=function(){if(qn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)In(n[r]);delete e.a[t],e.b--}}this.gb=null},t=Xn.prototype,t.W=function(){Zn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Zn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Jn(this.b,t)?this.b[t]:e},t.set=function(t,e){Jn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var $n=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tr(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function er(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof er?(this.i=void 0!==e?e:t.i,nr(this,t.c),this.l=t.l,this.a=t.a,rr(this,t.g),this.f=t.f,ir(this,Tr(t.b)),this.h=t.h):t&&(n=String(t).match($n))?(this.i=!!e,nr(this,n[1]||"",!0),this.l=cr(n[2]||""),this.a=cr(n[3]||"",!0),rr(this,n[4]),this.f=cr(n[5]||"",!0),ir(this,n[6]||"",!0),this.h=cr(n[7]||"")):(this.i=!!e,this.b=new mr(null,this.i))}function nr(t,e,n){t.c=n?cr(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function rr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function ir(t,e,n){e instanceof mr?(t.b=e,Cr(t.b,t.i)):(n||(e=lr(e,gr)),t.b=new mr(e,t.i))}function or(t,e,n){t.b.set(e,n)}function sr(t,e){return t.b.get(e)}function ar(t){return t instanceof er?new er(t):new er(t,void 0)}function ur(t,e,n,r){var i=new er(null,void 0);return t&&nr(i,t),e&&(i.a=e),n&&rr(i,n),r&&(i.f=r),i}function cr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function lr(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,fr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function fr(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}er.prototype.toString=function(){var t=[],e=this.c;e&&t.push(lr(e,pr,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(lr(e,pr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.g,null!=n&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(lr(n,"/"==n.charAt(0)?vr:dr,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",lr(n,yr)),t.join("")},er.prototype.resolve=function(t){var e=new er(this),n=!!t.c;n?nr(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)rr(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(i=r,".."==i||"."==i)r="";else if(gt(i,"./")||gt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?ir(e,Tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var pr=/[#\/\?@]/g,dr=/[#\?:]/g,vr=/[#\?]/g,gr=/[#\?@]/g,yr=/#/g;function mr(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function br(t){t.a||(t.a=new Xn,t.b=0,t.c&&tr(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function _r(t){var e=Qn(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new mr(null,void 0);t=Kn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Er(n,i,o):n.add(i,o)}return n}function wr(t,e){br(t),e=Sr(t,e),Jn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Jn(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Zn(t)))}function Ir(t,e){return br(t),e=Sr(t,e),Jn(t.a.b,e)}function Er(t,e,n){wr(t,e),0<n.length&&(t.c=null,t.a.set(Sr(t,e),st(n)),t.b+=n.length)}function Tr(t){var e=new mr;return e.c=t.c,t.a&&(e.a=new Xn(t.a),e.b=t.b),e}function Sr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Cr(t,e){e&&!t.f&&(br(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(wr(this,e),Er(this,n,t))}),t)),t.f=e}function kr(t){var e=[];return Ar(new Nr,t,e),e.join("")}function Nr(){}function Ar(t,e,n){if(null==e)n.push("null");else{if("object"==(0,m.Z)(e)){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),Ar(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&(o=e[r],"function"!=typeof o&&(n.push(i),Or(r,n),n.push(":"),Ar(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch((0,m.Z)(e)){case"string":Or(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+(0,m.Z)(e))}}}t=mr.prototype,t.add=function(t,e){br(this),this.c=null,t=Sr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){br(this),this.a.forEach((function(n,r){X(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){br(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){br(this);var e=[];if("string"===typeof t)Ir(this,t)&&(e=ot(e,this.a.get(Sr(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=ot(e,t[n])}return e},t.set=function(t,e){return br(this),this.c=null,t=Sr(this,t),Ir(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Pr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},xr=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Or(t,e){e.push('"',t.replace(xr,(function(t){var e=Pr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Pr[t]=e),e})),'"')}function Rr(){var t=ri();return se&&!!be&&11==be||/Edge\/\d+/.test(t)}function Dr(){return c.window&&c.window.location.href||self&&self.location&&self.location.href||""}function Lr(t,e){e=e||c.window;var n="about:blank";t&&(n=qt(zt(t)||Qt)),e.location.href=n}function Mr(t,e){var n,r=[];for(n in t)n in e?(0,m.Z)(t[n])!=(0,m.Z)(e[n])?r.push(n):"object"==(0,m.Z)(t[n])&&null!=t[n]&&null!=e[n]?0<Mr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function jr(){var t=ri();return t=ti(t)!=$r?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null,!(t&&30>t)&&(!se||!be||9<be)}function Fr(t){return t=(t||ri()).toLowerCase(),!!(t.match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Ur(t){t=t||c.window;try{t.close()}catch(e){}}function Vr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=ri().toLowerCase(),r&&(e.target=r,gt(n,"crios/")&&(e.target="_blank")),ti(ri())==Jr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Vt?n:zt("undefined"!=typeof n.href?n.href:String(n))||Qt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((_t("iPhone")&&!_t("iPod")&&!_t("iPad")||_t("iPad")||_t("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(s=Ne(document,"A"),Ct(s,"HTMLAnchorElement"),e=e instanceof Vt?e:Gt(e),s.href=qt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),t=document.createEvent("MouseEvent"),t.initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=$t("",r,n,s),t=qt(e),s&&(ue&&gt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+ee(t)+'">',t=(r=Ot())?r.createHTML(t):t,t=new Yt(t,null,Zt),r=s.document)&&(r.write(Xt(t)),r.close())):(s=$t(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(T){}return s}function qr(t){return new Me((function(e){function n(){Gn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}return n()}))}var Br=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hr=/^[^@]+@[^@]+$/;function Wr(){var t=null;return new Me((function(e){"complete"==c.document.readyState?e():(t=function(){e()},xn(window,"load",t))})).o((function(e){throw On(window,"load",t),e}))}function zr(){return Gr(void 0)?Wr().then((function(){return new Me((function(t,e){var n=c.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):We(Error("Cordova must run in an Android or iOS file scheme."))}function Gr(t){return t=t||ri(),!("file:"!==ui()&&"ionic:"!==ui()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kr(){var t=c.window;try{return!(!t||t==t.top)}catch(e){return!1}}function Qr(){return"undefined"!==typeof c.WorkerGlobalScope&&"function"===typeof c.importScripts}function Yr(){return y.Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":y.Z.INTERNAL.hasOwnProperty("node")?"Node":Qr()?"Worker":"Browser"}function Xr(){var t=Yr();return"ReactNative"===t||"Node"===t}function Zr(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}var Jr="Firefox",$r="Chrome";function ti(t){var e=t.toLowerCase();return gt(e,"opera/")||gt(e,"opr/")||gt(e,"opios/")?"Opera":gt(e,"iemobile")?"IEMobile":gt(e,"msie")||gt(e,"trident/")?"IE":gt(e,"edge/")?"Edge":gt(e,"firefox/")?Jr:gt(e,"silk/")?"Silk":gt(e,"blackberry")?"Blackberry":gt(e,"webos")?"Webos":!gt(e,"safari/")||gt(e,"chrome/")||gt(e,"crios/")||gt(e,"android")?!gt(e,"chrome/")&&!gt(e,"crios/")||gt(e,"edge/")?gt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":$r:"Safari"}var ei={md:"FirebaseCore-web",od:"FirebaseUI-web"};function ni(t,e){e=e||[];var n,r=[],i={};for(n in ei)i[ei[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),e=r,e.length||(e=["FirebaseCore-web"]),r=Yr(),"Browser"===r?(i=ri(),r=ti(i)):"Worker"===r&&(i=ri(),r=ti(i)+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function ri(){return c.navigator&&c.navigator.userAgent||""}function ii(t,e){t=t.split("."),e=e||c;for(var n=0;n<t.length&&"object"==(0,m.Z)(e)&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function oi(){try{var t=c.localStorage,e=pi();if(t)return t.setItem(e,"1"),t.removeItem(e),!Rr()||!!c.indexedDB}catch(n){return Qr()&&!!c.indexedDB}return!1}function si(){return(ai()||"chrome-extension:"===ui()||Gr())&&!Xr()&&oi()&&!Qr()}function ai(){return"http:"===ui()||"https:"===ui()}function ui(){return c.location&&c.location.protocol||null}function ci(t){return t=t||ri(),!Fr(t)&&ti(t)!=Jr}function hi(t){return"undefined"===typeof t?null:kr(t)}function li(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function fi(t){if(null!==t)return JSON.parse(t)}function pi(t){return t||Math.floor(1e9*Math.random()).toString()}function di(t){return t=t||ri(),"Safari"!=ti(t)&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function vi(){var t=c.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function gi(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=ri(),e=Yr(),this.b=Fr(t)||"ReactNative"===e}function yi(){var t=c.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function mi(){var t=c.document,e=null;return yi()||!t?He():new Me((function(n){e=function(){yi()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}function bi(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function _i(){return!(!ii("fireauth.oauthhelper",c)&&!ii("fireauth.iframe",c))}function wi(){var t=c.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}function Ii(){var t=c.navigator;return t&&t.serviceWorker?He().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):He(null)}gi.prototype.get=function(){var t=c.navigator;return!t||"boolean"!==typeof t.onLine||!ai()&&"chrome-extension:"!==ui()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Ei,Ti={};function Si(t){Ti[t]||(Ti[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var Ci={};Object.defineProperty(Ci,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ci,"abcd",{configurable:!0,enumerable:!0,value:2}),Ei=2==Ci.abcd}catch(rd){Ei=!1}function ki(t,e,n){Ei?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Ni(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&ki(t,n,e[n])}function Ai(t){var e={};return Ni(e,t),e}function Pi(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function xi(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}function Oi(t){var e=t;if("object"==(0,m.Z)(t)&&null!=t)for(var n in e="length"in t?[]:{},t)ki(e,n,Oi(t[n]));return e}function Ri(t){var e=t&&(t[Fi]?"phone":null);if(!(e&&t&&t[ji]))throw new x("internal-error","Internal assert: invalid MultiFactorInfo object");ki(this,"uid",t[ji]),ki(this,"displayName",t[Li]||null);var n=null;t[Mi]&&(n=new Date(t[Mi]).toUTCString()),ki(this,"enrollmentTime",n),ki(this,"factorId",e)}function Di(t){try{var e=new Ui(t)}catch(n){e=null}return e}Ri.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Li="displayName",Mi="enrolledAt",ji="mfaEnrollmentId",Fi="phoneInfo";function Ui(t){Ri.call(this,t),ki(this,"phoneNumber",t[Fi])}function Vi(t){var e={},n=t[Wi],r=t[Gi],i=t[Ki];if(t=Di(t[zi]),!i||i!=Bi&&i!=Hi&&!n||i==Hi&&!r||i==qi&&!t)throw Error("Invalid checkActionCode response!");i==Hi?(e[Yi]=n||null,e[Zi]=n||null,e[Qi]=r):(e[Yi]=r||null,e[Zi]=r||null,e[Qi]=n||null),e[Xi]=t||null,ki(this,$i,i),ki(this,Ji,Oi(e))}A(Ui,Ri),Ui.prototype.w=function(){var t=Ui.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var qi="REVERT_SECOND_FACTOR_ADDITION",Bi="EMAIL_SIGNIN",Hi="VERIFY_AND_CHANGE_EMAIL",Wi="email",zi="mfaInfo",Gi="newEmail",Ki="requestType",Qi="email",Yi="fromEmail",Xi="multiFactorInfo",Zi="previousEmail",Ji="data",$i="operation";function to(t){t=ar(t);var e=sr(t,eo)||null,n=sr(t,no)||null,r=sr(t,oo)||null;if(r=r&&ao[r]||null,!e||!n||!r)throw new x("argument-error",eo+", "+no+"and "+oo+" are required in a valid action code URL.");Ni(this,{apiKey:e,operation:r,code:n,continueUrl:sr(t,ro)||null,languageCode:sr(t,io)||null,tenantId:sr(t,so)||null})}var eo="apiKey",no="oobCode",ro="continueUrl",io="languageCode",oo="mode",so="tenantId",ao={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:qi,signIn:Bi,verifyAndChangeEmail:Hi,verifyEmail:"VERIFY_EMAIL"};function uo(t){try{return new to(t)}catch(e){return null}}function co(t){var e=t[vo];if("undefined"===typeof e)throw new x("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new x("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[ho];if(n&&"object"===(0,m.Z)(n)){e=n[mo];var r=n[go];if(n=n[yo],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new x("argument-error",go+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new x("argument-error",yo+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new x("argument-error",mo+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new x("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new x("argument-error",ho+" property must be a non null object when specified.");if(this.f=null,(e=t[po])&&"object"===(0,m.Z)(e)){if(e=e[bo],"string"===typeof e&&e.length)this.f=e;else if("undefined"!==typeof e)throw new x("argument-error",bo+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new x("argument-error",po+" property must be a non null object when specified.");if(e=t[fo],"undefined"!==typeof e&&"boolean"!==typeof e)throw new x("argument-error",fo+" property must be a boolean when specified.");if(this.c=!!e,t=t[lo],"undefined"!==typeof t&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new x("argument-error",lo+" property must be a non empty string when specified.");this.i=t||null}var ho="android",lo="dynamicLinkDomain",fo="handleCodeInApp",po="iOS",vo="url",go="installApp",yo="minimumVersion",mo="packageName",bo="bundleId";function _o(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}function wo(t){return $(t,(function(t){return t=t.toString(16),1<t.length?t:"0"+t})).join("")}var Io=null;function Eo(t){var e=[];return To(t,(function(t){e.push(t)})),e}function To(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Io[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}So();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}function So(){if(!Io){Io={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Io[o]&&(Io[o]=i)}}}function Co(t){var e=No(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function ko(t){try{return new Co(t)}catch(e){return null}}function No(t){if(!t)return null;if(t=t.split("."),3!=t.length)return null;t=t[1];for(var e=(4-t.length%4)%4,n=0;n<e;n++)t+=".";try{var r=Eo(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=r[e++],u=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&a)-65536;t[n++]=String.fromCharCode(55296+(u>>10)),t[n++]=String.fromCharCode(56320+(1023&u))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(M){}return null}Co.prototype.T=function(){return this.f},Co.prototype.l=function(){return this.c},Co.prototype.toString=function(){return this.h};var Ao="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Po=["client_id","response_type","scope","redirect_uri","state"],xo={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Po},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Po},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Po},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Ao},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Oo(t){for(var e in xo)if(xo[e].fa==t)return xo[e];return null}function Ro(t){var e={};e["facebook.com"]=Fo,e["google.com"]=Vo,e["github.com"]=Uo,e["twitter.com"]=qo;var n=t&&t[Lo];try{if(n)return e[n]?new e[n](t):new jo(t);if("undefined"!==typeof t[Do])return new Mo(t)}catch(r){}return null}var Do="idToken",Lo="providerId";function Mo(t){var e=t[Lo];if(!e&&t[Do]){var n=ko(t[Do]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),ki(this,"providerId",e),ki(this,"isNewUser",n)}function jo(t){Mo.call(this,t),t=fi(t.rawUserInfo||"{}"),ki(this,"profile",Oi(t||{}))}function Fo(t){if(jo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Uo(t){if(jo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");ki(this,"username",this.profile&&this.profile.login||null)}function Vo(t){if(jo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function qo(t){if(jo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");ki(this,"username",t.screenName||null)}function Bo(t){var e=ar(t),n=sr(e,"link"),r=sr(ar(n),"link");return e=sr(e,"deep_link_id"),sr(ar(e),"link")||e||r||n||t}function Ho(t,e){if(!t&&!e)throw new x("internal-error","Internal assert: no raw session string available");if(t&&e)throw new x("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Wo:zo}A(jo,Mo),A(Fo,jo),A(Uo,jo),A(Vo,jo),A(qo,jo);var Wo="enroll",zo="signin";function Go(){}function Ko(t,e){return t.then((function(t){if(t[Va]){var n=ko(t[Va]);if(!n||e!=n.i)throw new x("user-mismatch");return t}throw new x("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==D+"user-not-found"?new x("user-mismatch"):t}))}function Qo(t,e){if(!e)throw new x("internal-error","failed to construct a credential");this.a=e,ki(this,"providerId",t),ki(this,"signInMethod",t)}function Yo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Xo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Qo(t.providerId,t.pendingToken)}catch(e){}return null}function Zo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&ki(this,"idToken",e.idToken),e.accessToken&&ki(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&ki(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new x("internal-error","failed to construct a credential");ki(this,"accessToken",e.oauthToken),ki(this,"secret",e.oauthTokenSecret)}ki(this,"providerId",t),ki(this,"signInMethod",n)}function Jo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:_r(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function $o(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Zo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function ts(t,e){this.Qc=e||[],Ni(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Oo(t)||{}).Ja||null,this.ob=null}function es(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new x("argument-error",'SAML provider IDs must be prefixed with "saml."');ts.call(this,t,[])}function ns(t){ts.call(this,t,Po),this.a=[]}function rs(){ns.call(this,"facebook.com")}function is(t){if(!t)throw new x("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return b(t)&&(e=t.accessToken),(new rs).credential({accessToken:e})}function os(){ns.call(this,"github.com")}function ss(t){if(!t)throw new x("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return b(t)&&(e=t.accessToken),(new os).credential({accessToken:e})}function as(){ns.call(this,"google.com"),this.Ca("profile")}function us(t,e){var n=t;return b(t)&&(n=t.idToken,e=t.accessToken),(new as).credential({idToken:n,accessToken:e})}function cs(){ts.call(this,"twitter.com",Ao)}function hs(t,e){var n=t;if(b(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new x("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Zo("twitter.com",n,"twitter.com")}function ls(t,e,n){this.a=t,this.f=e,ki(this,"providerId","password"),ki(this,"signInMethod",n===ps.EMAIL_LINK_SIGN_IN_METHOD?ps.EMAIL_LINK_SIGN_IN_METHOD:ps.EMAIL_PASSWORD_SIGN_IN_METHOD)}function fs(t){return t&&t.email&&t.password?new ls(t.email,t.password,t.signInMethod):null}function ps(){Ni(this,{providerId:"password",isOAuthProvider:!1})}function ds(t,e){if(e=vs(e),!e)throw new x("argument-error","Invalid email link!");return new ls(t,e.code,ps.EMAIL_LINK_SIGN_IN_METHOD)}function vs(t){return t=Bo(t),(t=uo(t))&&t.operation===Bi?t:null}function gs(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new x("internal-error");this.a=t,ki(this,"providerId","phone"),this.fa="phone",ki(this,"signInMethod","phone")}function ys(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return X(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new gs(e)}return null}function ms(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function bs(t){try{this.a=t||y.Z.auth()}catch(e){throw new x("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ni(this,{providerId:"phone",isOAuthProvider:!1})}function _s(t,e){if(!t)throw new x("missing-verification-id");if(!e)throw new x("missing-verification-code");return new gs({eb:t,cb:e})}function ws(t){if(t.temporaryProof&&t.phoneNumber)return new gs({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return us(o,n);case"facebook.com":return is(n);case"github.com":return ss(n);case"twitter.com":return hs(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new Qo(e,s):new Zo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new ns(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(T){return null}}function Is(t){if(!t.isOAuthProvider)throw new x("invalid-oauth-provider")}function Es(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new x("invalid-auth-event");if(this.g&&this.a)throw new x("invalid-auth-event");if(this.g&&!this.f)throw new x("invalid-auth-event")}function Ts(t){return t=t||{},t.type?new Es(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&O(t.error),t.postBody,t.tenantId):null}function Ss(){this.b=null,this.a=[]}Ho.prototype.Ha=function(){return this.a?He(this.a):He(this.b)},Ho.prototype.w=function(){return this.type==Wo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Go.prototype.ka=function(){},Go.prototype.b=function(){},Go.prototype.c=function(){},Go.prototype.w=function(){},Qo.prototype.ka=function(t){return gu(t,Yo(this))},Qo.prototype.b=function(t,e){var n=Yo(this);return n.idToken=e,yu(t,n)},Qo.prototype.c=function(t,e){return Ko(mu(t,Yo(this)),e)},Qo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Zo.prototype.ka=function(t){return gu(t,Jo(this))},Zo.prototype.b=function(t,e){var n=Jo(this);return n.idToken=e,yu(t,n)},Zo.prototype.c=function(t,e){var n=Jo(this);return Ko(mu(t,n),e)},Zo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},ts.prototype.Ka=function(t){return this.Ib=Et(t),this},A(es,ts),A(ns,ts),ns.prototype.Ca=function(t){return nt(this.a,t)||this.a.push(t),this},ns.prototype.Qb=function(){return st(this.a)},ns.prototype.credential=function(t,e){var n;if(n=b(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null},!n.idToken&&!n.accessToken)throw new x("argument-error","credential failed: must provide the ID token and/or the access token.");return new Zo(this.providerId,n,this.providerId)},A(rs,ns),ki(rs,"PROVIDER_ID","facebook.com"),ki(rs,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),A(os,ns),ki(os,"PROVIDER_ID","github.com"),ki(os,"GITHUB_SIGN_IN_METHOD","github.com"),A(as,ns),ki(as,"PROVIDER_ID","google.com"),ki(as,"GOOGLE_SIGN_IN_METHOD","google.com"),A(cs,ts),ki(cs,"PROVIDER_ID","twitter.com"),ki(cs,"TWITTER_SIGN_IN_METHOD","twitter.com"),ls.prototype.ka=function(t){return this.signInMethod==ps.EMAIL_LINK_SIGN_IN_METHOD?$u(t,Cu,{email:this.a,oobCode:this.f}):$u(t,Qu,{email:this.a,password:this.f})},ls.prototype.b=function(t,e){return this.signInMethod==ps.EMAIL_LINK_SIGN_IN_METHOD?$u(t,ku,{idToken:e,email:this.a,oobCode:this.f}):$u(t,Vu,{idToken:e,email:this.a,password:this.f})},ls.prototype.c=function(t,e){return Ko(this.ka(t),e)},ls.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Ni(ps,{PROVIDER_ID:"password"}),Ni(ps,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ni(ps,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),gs.prototype.ka=function(t){return t.fb(ms(this))},gs.prototype.b=function(t,e){var n=ms(this);return n.idToken=e,$u(t,Xu,n)},gs.prototype.c=function(t,e){var n=ms(this);return n.operation="REAUTH",t=$u(t,Zu,n),Ko(t,e)},gs.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},bs.prototype.fb=function(t,e){var n=this.a.a;return He(e.verify()).then((function(r){if("string"!==typeof r)throw new x("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i,o=b(t)?t.session:null,s=b(t)?t.phoneNumber:t;return i=o&&o.type==Wo?o.Ha().then((function(t){return cu(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r}})})):o&&o.type==zo?o.Ha().then((function(e){return lu(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):uu(n,{phoneNumber:s,recaptchaToken:r}),i.then((function(t){return"function"===typeof e.reset&&e.reset(),t}),(function(t){throw"function"===typeof e.reset&&e.reset(),t}));default:throw new x("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Ni(bs,{PROVIDER_ID:"phone"}),Ni(bs,{PHONE_SIGN_IN_METHOD:"phone"}),Es.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Es.prototype.T=function(){return this.h},Es.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Cs,ks=null;function Ns(t){var e=ks;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},t=ii("universalLinks.subscribe",c),"function"===typeof t&&t(null,e.b))}function As(t){var e="unauthorized-domain",n=void 0,r=ar(t);t=r.a,r=r.c,"chrome-extension"==r?n=te("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=te("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",x.call(this,e,n)}function Ps(t,e,n){x.call(this,t,n),t=e||{},t.Jb&&ki(this,"email",t.Jb),t.ea&&ki(this,"phoneNumber",t.ea),t.credential&&ki(this,"credential",t.credential),t.Zb&&ki(this,"tenantId",t.Zb)}function xs(t){if(t.code){var e=t.code||"";0==e.indexOf(D)&&(e=e.substring(D.length));var n={credential:ws(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new x(e,t.message||void 0);return new Ps(e,n,t.message)}return null}function Os(){}function Rs(t){return t.c||(t.c=t.b())}function Ds(){}function Ls(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Ms(){}function js(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=C(this.qc,this),this.a.onerror=C(this.Sb,this),this.a.onprogress=C(this.rc,this),this.a.ontimeout=C(this.vc,this)}function Fs(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Us(t,e,n){this.reset(t,e,n,void 0,void 0)}A(As,x),A(Ps,x),Ps.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&St(t,e),t},Ps.prototype.toJSON=function(){return this.w()},Os.prototype.c=null,A(Ds,Os),Ds.prototype.a=function(){var t=Ls(this);return t?new ActiveXObject(t):new XMLHttpRequest},Ds.prototype.b=function(){var t={};return Ls(this)&&(t[0]=!0,t[1]=!0),t},Cs=new Ds,A(Ms,Os),Ms.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new js;throw Error("Unsupported browser")},Ms.prototype.b=function(){return{}},t=js.prototype,t.open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Fs(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Fs(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Fs(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Us.prototype.a=null;function Vs(t){this.f=t,this.b=this.c=this.a=null}function qs(t,e){this.name=t,this.value=e}Us.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||N(),delete this.a},qs.prototype.toString=function(){return this.name};var Bs=new qs("SEVERE",1e3),Hs=new qs("WARNING",900),Ws=new qs("CONFIG",700),zs=new qs("FINE",500);function Gs(t){return t.c?t.c:t.a?Gs(t.a):(B("Root logger has no level set."),null)}Vs.prototype.log=function(t,e,n){if(t.value>=Gs(this).value)for(g(e)&&(e=e()),t=new Us(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Ks={},Qs=null;function Ys(t){var e;if(Qs||(Qs=new Vs(""),Ks[""]=Qs,Qs.c=Ws),!(e=Ks[t])){e=new Vs(t);var n=t.lastIndexOf("."),r=t.substr(n+1);n=Ys(t.substr(0,n)),n.b||(n.b={}),n.b[r]=e,e.a=n,Ks[t]=e}return e}function Xs(t,e){t&&t.log(zs,e,void 0)}function Zs(t){this.f=t}function Js(t){qn.call(this),this.u=t,this.h=void 0,this.readyState=$s,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Ys("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}A(Zs,Os),Zs.prototype.a=function(){return new Js(this.f)},Zs.prototype.b=function(t){return function(){return t}}({}),A(Js,qn);var $s=0;function ta(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ea(t){t.readyState=4,t.g=null,t.c=null,t.m=null,na(t)}function na(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ra(t){qn.call(this),this.headers=new Xn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=ia,this.u=this.S=!1}t=Js.prototype,t.open=function(t,e){if(this.readyState!=$s)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,na(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ea(this)),this.readyState=$s},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,na(this)),this.a&&(this.readyState=3,na(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):"undefined"!==typeof c.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ta(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ea(this):na(this),3==this.readyState&&ta(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ea(this))},t.sc=function(t){this.a&&(this.response=t,ea(this))},t.Ua=function(t){var e=this.i;e&&e.log(Hs,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ea(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(Hs,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(Hs,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Js.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),A(ra,qn);var ia="";ra.prototype.b=Ys("goog.net.XhrIo");var oa=/^https?$/i,sa=["POST","PUT"];function aa(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Cs.a(),t.C=t.D?Rs(t.D):Rs(Cs),t.a.onreadystatechange=C(t.Vb,t);try{Xs(t.b,ma(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(s){return Xs(t.b,ma(t,"Error opening Xhr: "+s.message)),void ha(t,s)}e=r||"";var o=new Xn(t.headers);i&&Yn(i,(function(t,e){o.set(e,t)})),i=et(o.Y()),r=c.FormData&&e instanceof c.FormData,!nt(sa,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{da(t),0<t.g&&(t.u=ua(t.a),Xs(t.b,ma(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=C(t.Ma,t)):t.s=zn(t.Ma,t.g,t)),Xs(t.b,ma(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){Xs(t.b,ma(t,"Send error: "+s.message)),ha(t,s)}}function ua(t){return se&&ye(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function ca(t){return"content-type"==t.toLowerCase()}function ha(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,la(t),pa(t)}function la(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function fa(t){if(t.c&&"undefined"!=typeof u)if(t.C[1]&&4==va(t)&&2==ga(t))Xs(t.b,ma(t,"Local request error detected and ignored"));else if(t.i&&4==va(t))zn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==va(t)){Xs(t.b,ma(t,"Request complete")),t.c=!1;try{var e,n=ga(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match($n)[1]||null;if(!o&&c.self&&c.self.location){var s=c.self.location.protocol;o=s.substr(0,s.length-1)}i=!oa.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var a=2<va(t)?t.a.statusText:""}catch(h){Xs(t.b,"Can not get status: "+h.message),a=""}t.h=a+" ["+ga(t)+"]",la(t)}}finally{pa(t)}}}function pa(t,e){if(t.a){da(t);var n=t.a,r=t.C[0]?p:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(Bs,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function da(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(c.clearTimeout(t.s),t.s=null)}function va(t){return t.a?t.a.readyState:0}function ga(t){try{return 2<va(t)?t.a.status:-1}catch(e){return-1}}function ya(t){try{return t.a?t.a.responseText:""}catch(e){return Xs(t.b,"Can not get responseText: "+e.message),""}}function ma(t,e){return e+" ["+t.R+" "+t.l+" "+ga(t)+"]"}function ba(t){var e=Oa;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function _a(t,e,n){t.a=!0,t.c=n,t.f=!e,Sa(t)}function wa(t){if(t.a){if(!t.v)throw new Ca(t);t.v=!1}}function Ia(t,e){Ea(t,null,e,void 0)}function Ea(t,e,n,r){t.g.push([e,n,r]),t.a&&Sa(t)}function Ta(t){return tt(t.g,(function(t){return g(t[1])}))}function Sa(t){if(t.h&&t.a&&Ta(t)){var e=t.h,n=Aa[e];n&&(c.clearTimeout(n.a),delete Aa[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var a=o.call(i||t.s,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(U(e)||"function"===typeof c.Promise&&e instanceof c.Promise)&&(r=!0,t.i=!0)}catch(u){e=u,t.f=!0,Ta(t)||(n=!0)}}t.c=e,r&&(a=C(t.m,t,!0),r=C(t.m,t,!1),e instanceof ba?(Ea(e,a,r),e.C=!0):e.then(a,r)),n&&(e=new Na(e),Aa[e.a]=e,t.h=e.a)}function Ca(){V.call(this)}function ka(){V.call(this)}function Na(t){this.a=c.setTimeout(C(this.c,this),0),this.b=t}t=ra.prototype,t.Ma=function(){"undefined"!=typeof u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Xs(this.b,ma(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Xs(this.b,ma(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),pa(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),pa(this,!0)),ra.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?fa(this):this.Jc())},t.Jc=function(){fa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ia:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Bs,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return Xs(this.b,"Can not get response: "+e.message),null}},ba.prototype.cancel=function(t){if(this.a)this.c instanceof ba&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new ka(this),wa(this),_a(this,!1,t))}},ba.prototype.m=function(t,e){this.i=!1,_a(this,t,e)},ba.prototype.then=function(t,e,n){var r,i,o=new Me((function(t,e){r=t,i=e}));return Ea(this,r,(function(t){t instanceof ka?o.cancel():i(t)})),o.then(t,e,n)},ba.prototype.$goog_Thenable=!0,A(Ca,V),Ca.prototype.message="Deferred has already fired",Ca.prototype.name="AlreadyCalledError",A(ka,V),ka.prototype.message="Deferred was canceled",ka.prototype.name="CanceledError",Na.prototype.c=function(){throw delete Aa[this.a],this.b};var Aa={};function Pa(t){var e={},n=e.document||document,r=Dt(t).toString(),i=Ne(document,"SCRIPT"),o={Wb:i,Ma:void 0},s=new ba(o),a=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(a=window.setTimeout((function(){Ra(i,!0);var t=new Ma(La,"Timeout reached for loading script "+r);wa(s),_a(s,!1,t)}),u),o.Ma=a),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ra(i,e.xd||!1,a),wa(s),_a(s,!0,null))},i.onerror=function(){Ra(i,!0,a);var t=new Ma(Da,"Error while loading script "+r);wa(s),_a(s,!1,t)},o=e.attributes||{},St(o,{type:"text/javascript",charset:"UTF-8"}),Ie(i,o),Jt(i,t),xa(n).appendChild(i),s}function xa(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}function Oa(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Ra(t,!0,this.Ma)}}function Ra(t,e,n){null!=n&&c.clearTimeout(n),t.onload=p,t.onerror=p,t.onreadystatechange=p,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Da=0,La=1;function Ma(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),V.call(this,n),this.code=t}function ja(t){this.f=t}function Fa(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||qa,this.g=Et(t.secureTokenHeaders||Ba),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Ha,this.a=Et(t.firebaseHeaders||Wa),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Yr(),n=c.XMLHttpRequest||n&&y.Z.INTERNAL.node&&y.Z.INTERNAL.node.XMLHttpRequest,!n&&!Qr())throw new x("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Qr()?this.f=new Zs(self):Xr()?this.f=new ja(n):this.f=new Ms,this.b=null}A(Ma,V),A(ja,Os),ja.prototype.a=function(){return new this.f},ja.prototype.b=function(){return{}};var Ua,Va="idToken",qa=new gi(3e4,6e4),Ba={"Content-Type":"application/x-www-form-urlencoded"},Ha=new gi(3e4,6e4),Wa={"Content-Type":"application/json"};function za(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ga(t,e){e&&(t.l=Ka("https://securetoken.googleapis.com/v1/token",e),t.h=Ka("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Ka("https://identitytoolkit.googleapis.com/v2/",e))}function Ka(t,e){return t=ar(t),e=ar(e.url),t.f=t.a+t.f,nr(t,e.c),t.a=e.a,rr(t,e.g),t.toString()}function Qa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Ya(t,e,n,r,i,o,s){jr()||Qr()?t=C(t.u,t):(Ua||(Ua=new Me((function(t,e){Ja(t,e)}))),t=C(t.s,t)),t(e,n,r,i,o,s)}Fa.prototype.T=function(){return this.b},Fa.prototype.u=function(t,e,n,r,i,o){if(Qr()&&("undefined"===typeof c.fetch||"undefined"===typeof c.Headers||"undefined"===typeof c.Request))throw new x("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ra(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout((function(){s.dispatchEvent("timeout")}),o)}Bn(s,"complete",(function(){a&&clearTimeout(a);var t=null;try{t=JSON.parse(ya(this))||null}catch(M){t=null}e&&e(t)})),Hn(s,"ready",(function(){a&&clearTimeout(a),ln(this)})),Hn(s,"timeout",(function(){a&&clearTimeout(a),ln(this),e&&e(null)})),aa(s,t,n,r,i)};var Xa=new kt(xt,"https://apis.google.com/js/client.js?onload=%{onload}"),Za="__fcb"+Math.floor(1e6*Math.random()).toString();function Ja(t,e){if(((window.gapi||{}).client||{}).request)t();else{c[Za]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=Lt(Xa,{onload:Za});Ia(Pa(n),(function(){e(Error("CORS_UNSUPPORTED"))}))}}function $a(t,e){return new Me((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Ya(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ec(t)):t.access_token&&t.refresh_token?n(t):r(new x("internal-error")):r(new x("network-request-failed"))}),"POST",_r(e).toString(),t.g,t.m.get()):r(new x("internal-error"))}))}function tu(t,e,n,r,i,o,s){var a=ar(e+n);or(a,"key",t.c),s&&or(a,"cb",N().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&or(a,c,i[c]);return new Me((function(e,n){Ya(t,a.toString(),(function(t){t?t.error?n(ec(t,o||{})):e(t):n(new x("network-request-failed"))}),r,u?void 0:kr(li(i)),t.a,t.v.get())}))}function eu(t){if(t=t.email,"string"!==typeof t||!Hr.test(t))throw new x("invalid-email")}function nu(t){"email"in t&&eu(t)}function ru(t,e){return $u(t,Eu,{identifier:e,continueUri:ai()?Dr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}function iu(t){return $u(t,Lu,{}).then((function(t){return t.authorizedDomains||[]}))}function ou(t){if(!t[Va]){if(t.mfaPendingCredential)throw new x("multi-factor-auth-required",null,Et(t));throw new x("internal-error")}}function su(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new x("internal-error")}else{if(!t.sessionInfo)throw new x("missing-verification-id");if(!t.code)throw new x("missing-verification-code")}}Fa.prototype.s=function(t,e,n,r,i){var o=this;Ua.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Fa.prototype.zb=function(){return $u(this,qu,{})},Fa.prototype.Bb=function(t,e){return $u(this,Uu,{idToken:t,email:e})},Fa.prototype.Cb=function(t,e){return $u(this,Vu,{idToken:t,password:e})};var au={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function uu(t,e){return $u(t,Fu,e)}function cu(t,e){return $u(t,Bu,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}function hu(t){if(!t.phoneVerificationInfo)throw new x("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new x("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new x("missing-verification-code")}function lu(t,e){return $u(t,Hu,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}function fu(t,e,n){return $u(t,Su,{idToken:e,deleteProvider:n})}function pu(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new x("internal-error")}function du(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(t=new mr(t.postBody),Ir(t,"nonce")&&(e.nonce=t.get("nonce")))),e}function vu(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=xs(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=xs(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=xs(t)):t.errorMessage&&(e=tc(t.errorMessage)),e)throw e;ou(t)}function gu(t,e){return e.returnIdpCredential=!0,$u(t,Wu,e)}function yu(t,e){return e.returnIdpCredential=!0,$u(t,Gu,e)}function mu(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,$u(t,zu,e)}function bu(t){if(!t.oobCode)throw new x("invalid-action-code")}t=Fa.prototype,t.Db=function(t,e){var n={idToken:t},r=[];return wt(au,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),$u(this,Uu,n)},t.vb=function(t,e){return t={requestType:"PASSWORD_RESET",email:t},St(t,e),$u(this,Du,t)},t.wb=function(t,e){return t={requestType:"EMAIL_SIGNIN",email:t},St(t,e),$u(this,xu,t)},t.ub=function(t,e){return t={requestType:"VERIFY_EMAIL",idToken:t},St(t,e),$u(this,Ou,t)},t.Eb=function(t,e,n){return t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},St(t,n),$u(this,Ru,t)},t.fb=function(t){return $u(this,Yu,t)},t.nb=function(t,e){return $u(this,ju,{oobCode:t,newPassword:e})},t.Ra=function(t){return $u(this,wu,{oobCode:t})},t.jb=function(t){return $u(this,_u,{oobCode:t})};var _u={endpoint:"setAccountInfo",A:bu,Z:"email",B:!0},wu={endpoint:"resetPassword",A:bu,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new x("internal-error")},B:!0},Iu={endpoint:"signupNewUser",A:function(t){if(eu(t),!t.password)throw new x("weak-password")},G:ou,V:!0,B:!0},Eu={endpoint:"createAuthUri",B:!0},Tu={endpoint:"deleteAccount",N:["idToken"]},Su={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new x("internal-error")}},Cu={endpoint:"emailLinkSignin",N:["email","oobCode"],A:eu,G:ou,V:!0,B:!0},ku={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:eu,G:ou,V:!0},Nu={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:hu,G:ou,B:!0,Na:!0},Au={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:hu,G:ou,B:!0,Na:!0},Pu={endpoint:"getAccountInfo"},xu={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new x("internal-error");eu(t)},Z:"email",B:!0},Ou={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new x("internal-error")},Z:"email",B:!0},Ru={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new x("internal-error")},Z:"email",B:!0},Du={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new x("internal-error");eu(t)},Z:"email",B:!0},Lu={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Mu={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new x("internal-error")}},ju={endpoint:"resetPassword",A:bu,Z:"email",B:!0},Fu={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Uu={endpoint:"setAccountInfo",N:["idToken"],A:nu,V:!0},Vu={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(nu(t),!t.password)throw new x("weak-password")},G:ou,V:!0},qu={endpoint:"signupNewUser",G:ou,V:!0,B:!0},Bu={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new x("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new x("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new x("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new x("internal-error")},B:!0,Na:!0},Hu={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new x("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new x("internal-error")},B:!0,Na:!0},Wu={endpoint:"verifyAssertion",A:pu,Ya:du,G:vu,V:!0,B:!0},zu={endpoint:"verifyAssertion",A:pu,Ya:du,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new x("user-not-found");if(t.errorMessage)throw tc(t.errorMessage);ou(t)},V:!0,B:!0},Gu={endpoint:"verifyAssertion",A:function(t){if(pu(t),!t.idToken)throw new x("internal-error")},Ya:du,G:vu,V:!0},Ku={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new x("invalid-custom-token")},G:ou,V:!0,B:!0},Qu={endpoint:"verifyPassword",A:function(t){if(eu(t),!t.password)throw new x("wrong-password")},G:ou,V:!0,B:!0},Yu={endpoint:"verifyPhoneNumber",A:su,G:ou,B:!0},Xu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new x("internal-error");su(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",xs(t);ou(t)}},Zu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:su,G:ou,B:!0},Ju={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Va]^!!t.refreshToken)throw new x("internal-error")},B:!0,Na:!0};function $u(t,e,n){if(!xi(n,e.N))return We(new x("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return He(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&"undefined"===typeof n.tenantId&&(n.tenantId=t.b),tu(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new x("internal-error");return r[e.Z]}))}function tc(t){return ec({error:{errors:[{message:t}],code:400,message:t}})}function ec(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new x(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},St(r,e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new x(r[i],e);return!e&&t&&(e=hi(t)),new x("internal-error",e)}function nc(t){this.b=t,this.a=null,this.rb=rc(this)}function rc(t){return hc().then((function(){return new Me((function(e,n){ii("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:ii("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),uc.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}function ic(t,e){return t.rb.then((function(){return new Me((function(n){t.a.send(e.type,e,n,ii("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}function oc(t,e){t.rb.then((function(){t.a.register("authEvent",e,ii("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}var sc=new kt(xt,"https://apis.google.com/js/api.js?onload=%{onload}"),ac=new gi(3e4,6e4),uc=new gi(5e3,15e3),cc=null;function hc(){return cc||(cc=new Me((function(t,e){function n(){vi(),ii("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){vi(),e(Error("Network Error"))},timeout:ac.get()})}if(ii("gapi.iframes.Iframe"))t();else if(ii("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();c[r]=function(){ii("gapi.load")?n():e(Error("Network Error"))},r=Lt(sc,{onload:r}),He(Pa(r)).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw cc=null,t})))}function lc(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?(t=ar(this.g.url),t=ur(t.c,t.a,t.g,"/emulator/auth/iframe")):t=ur("https",this.l,null,"/__/auth/iframe"),this.a=t,or(this.a,"apiKey",this.h),or(this.a,"appName",this.i),this.b=null,this.c=[]}function fc(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pc(t){try{return y.Z.app(t).auth().Ga()}catch(e){return[]}}function dc(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vc(t){var e=Dr();return iu(t).then((function(t){t:{var n=ar(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=ar(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:Br.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new As(Dr())}))}function gc(t){return t.m||(t.m=Wr().then((function(){if(!t.u){var e=t.c,n=t.i,r=pc(t.b),i=new lc(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=st(r||[]),t.u=i.toString()}t.v=new nc(t.u),bc(t)}))),t.m}function yc(t){return t.l||(t.C=t.c?ni(t.c,pc(t.b)):null,t.l=new Fa(t.g,F(t.i),t.C),t.f&&Ga(t.l,t.f)),t.l}function mc(t,e,n,r,i,o,s,a,u,c,h,l){return t=new fc(t,e,n,r,i,l),t.l=o,t.g=s,t.i=a,t.b=Et(u||null),t.f=c,t.yb(h).toString()}function bc(t){if(!t.v)throw Error("IfcHandler must be initialized!");oc(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Ts(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return n={},n.status=r?"ACK":"ERROR",He(n)}return n.status="ERROR",He(n)}))}function _c(t){var e={type:"webStorageSupport"};return gc(t).then((function(){return ic(t.v,e)})).then((function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))}function wc(t){if(this.a=t||y.Z.INTERNAL.reactNative&&y.Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new x("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Ic(t){this.b=t,this.a={},this.f=C(this.c,this)}lc.prototype.toString=function(){return this.f?or(this.a,"v",this.f):wr(this.a.b,"v"),this.b?or(this.a,"eid",this.b):wr(this.a.b,"eid"),this.c.length?or(this.a,"fw",this.c.join(",")):wr(this.a.b,"fw"),this.a.toString()},fc.prototype.yb=function(t){return this.h=t,this},fc.prototype.toString=function(){if(this.v){var t=ar(this.v.url);t=ur(t.c,t.a,t.g,"/emulator/auth/handler")}else t=ur("https",this.u,null,"/__/auth/handler");if(or(t,"apiKey",this.s),or(t,"appName",this.c),or(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=y.Z.app(this.c).auth().la()}catch(T){n=null}for(var r in e.ob=n,or(t,"providerId",this.a.providerId),n=this.a,e=li(n.Ib),e)e[r]=e[r].toString();r=n.Qc,e=Et(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),It(e)||or(t,"customParameters",hi(e))}if("function"===typeof this.a.Qb&&(n=this.a.Qb(),n.length&&or(t,"scopes",n.join(","))),this.l?or(t,"redirectUrl",this.l):wr(t.b,"redirectUrl"),this.g?or(t,"eventId",this.g):wr(t.b,"eventId"),this.i?or(t,"v",this.i):wr(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!sr(t,s)&&or(t,s,this.b[s]);return this.h?or(t,"tid",this.h):wr(t.b,"tid"),this.f?or(t,"eid",this.f):wr(t.b,"eid"),s=pc(this.c),s.length&&or(t,"fw",s.join(",")),t.toString()},t=dc.prototype,t.Ob=function(t,e,n){var r=new x("popup-closed-by-user"),i=new x("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){_c(o).then((function(n){n||(t&&Ur(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return qr(t)})).then((function(){if(!s)return Gn(n).then((function(){e(r)}))}))},t.Xb=function(){var t=ri();return!ci(t)&&!di(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,s,a){if(!t)return We(new x("popup-blocked"));if(s&&!ci())return this.ma().o((function(e){Ur(t),i(e)})),r(),He();this.a||(this.a=vc(yc(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw Ur(t),i(e),e}));return r(),e})).then((function(){if(Is(n),!s){var r=mc(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f);Lr(r,t)}})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=vc(yc(this)));var i=this;return this.a.then((function(){Is(e);var o=mc(i.s,i.g,i.b,t,e,Dr(),n,i.c,void 0,i.i,r,i.f);Lr(o)})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return gc(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new x("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){it(this.h,(function(e){return e==t}))},t=wc.prototype,t.get=function(t){return He(this.a.getItem(t)).then((function(t){return t&&fi(t)}))},t.set=function(t,e){return He(this.a.setItem(t,hi(e)))},t.U=function(t){return He(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var Ec,Tc=[];function Sc(){var t=Qr()?self:null;if(X(Tc,(function(n){n.b==t&&(e=n)})),!e){var e=new Ic(t);Tc.push(e)}return e}function Cc(t,e,n){It(t.a)&&t.b.addEventListener("message",t.f),"undefined"===typeof t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function kc(t){this.a=t}function Nc(t){this.c=t,this.b=!1,this.a=[]}function Ac(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return We(Error("connection_unavailable"));var h=r?800:50,l="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Me((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))},c={messageChannel:l,onMessage:o},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Pc(t,c),e})).o((function(e){throw Pc(t,c),e}))}function Pc(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),it(t.a,(function(t){return t==e}))}}function xc(){if(!Mc())throw new x("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=c.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Qr()&&self?(this.v=Sc(),Cc(this.v,"keyChanged",(function(e,n){return qc(t).then((function(e){return 0<e.length&&X(t.a,(function(t){t(e)})),{keyProcessed:nt(e,n.key)}}))})),Cc(this.v,"ping",(function(){return He(["keyChanged"])}))):Ii().then((function(e){(t.h=e)&&(t.g=new Nc(new kc(e)),Ac(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&nt(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Oc(t){return new Me((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}function Rc(t){return new Me((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){r=r.target.result,r.objectStoreNames.contains("firebaseLocalStorage")?e(r):Oc(t).then((function(){return Rc(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Dc(t){return t.i||(t.i=Rc(t)),t.i}function Lc(t,e){function n(i,o){Dc(t).then(e).then(i).o((function(e){if(!(3<++r))return Dc(t).then((function(e){return e.close(),t.i=void 0,n(i,o)})).o((function(t){o(t)}));o(e)}))}var r=0;return new Me(n)}function Mc(){try{return!!c.indexedDB}catch(rd){return!1}}function jc(t){return t.objectStore("firebaseLocalStorage")}function Fc(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Uc(t){return new Me((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Vc(t,e){return t.g&&t.h&&wi()===t.h?Ac(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):He()}function qc(t){return Dc(t).then((function(t){var e=jc(Fc(t,!1));return e.getAll?Uc(e.getAll()):new Me((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e["continue"]()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=Mr(t.c,n),t.c=n}return r}))}function Bc(t){function e(){t.f=setTimeout((function(){t.l=qc(t).then((function(e){0<e.length&&X(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Hc(t),e()}function Hc(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Wc(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=He().then((function(){if(Mc()){var t=pi(),r="__sak"+t;return Ec||(Ec=new xc),n=Ec,n.set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){X(e.a,(function(e){e(t)}))})),t}))}function zc(){this.a={},this.type="inMemory"}function Gc(){if(!Qc()){if("Node"==Yr())throw new x("internal-error","The LocalStorage compatibility library was not found.");throw new x("web-storage-unsupported")}this.a=Kc()||y.Z.INTERNAL.node.localStorage,this.type="localStorage"}function Kc(){try{var t=c.localStorage,e=pi();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Qc(){var t="Node"==Yr();if(t=Kc()||t&&y.Z.INTERNAL.node&&y.Z.INTERNAL.node.localStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}function Yc(){this.type="nullStorage"}function Xc(){if(!Jc()){if("Node"==Yr())throw new x("internal-error","The SessionStorage compatibility library was not found.");throw new x("web-storage-unsupported")}this.a=Zc()||y.Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Zc(){try{var t=c.sessionStorage,e=pi();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Jc(){var t="Node"==Yr();if(t=Zc()||t&&y.Z.INTERNAL.node&&y.Z.INTERNAL.node.sessionStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}function $c(){var t={};t.Browser=nh,t.Node=rh,t.ReactNative=ih,t.Worker=oh,this.a=t[Yr()]}Ic.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];X(r,(function(e){i.push(He().then((function(){return e(t.origin,t.data.data)})))})),Ke(i).then((function(r){var i=[];X(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),X(i,(function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},kc.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Nc.prototype.close=function(){for(;0<this.a.length;)Pc(this,this.a[0]);this.b=!0},t=xc.prototype,t.set=function(t,e){var n=this,r=!1;return Lc(this,(function(e){return e=jc(Fc(e,!0)),Uc(e.get(t))})).then((function(i){return Lc(n,(function(o){if(o=jc(Fc(o,!0)),i)return i.value=e,Uc(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Uc(o.add(s))}))})).then((function(){return n.c[t]=e,Vc(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Lc(this,(function(e){return Uc(jc(Fc(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Lc(this,(function(r){return n=!0,e.b++,Uc(jc(Fc(r,!0))["delete"](t))})).then((function(){return delete e.c[t],Vc(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&Bc(this),this.a.push(t)},t.ia=function(t){it(this.a,(function(e){return e==t})),0==this.a.length&&Hc(this)},t=Wc.prototype,t.get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){it(this.a,(function(e){return e==t}))},t=zc.prototype,t.get=function(t){return He(this.a[t])},t.set=function(t,e){return this.a[t]=e,He()},t.U=function(t){return delete this.a[t],He()},t.ca=function(){},t.ia=function(){},t=Gc.prototype,t.get=function(t){var e=this;return He().then((function(){var n=e.a.getItem(t);return fi(n)}))},t.set=function(t,e){var n=this;return He().then((function(){var r=hi(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return He().then((function(){e.a.removeItem(t)}))},t.ca=function(t){c.window&&Nn(c.window,"storage",t)},t.ia=function(t){c.window&&On(c.window,"storage",t)},t=Yc.prototype,t.get=function(){return He(null)},t.set=function(){return He()},t.U=function(){return He()},t.ca=function(){},t.ia=function(){},t=Xc.prototype,t.get=function(t){var e=this;return He().then((function(){var n=e.a.getItem(t);return fi(n)}))},t.set=function(t,e){var n=this;return He().then((function(){var r=hi(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return He().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var th,eh,nh={F:Gc,bb:Xc},rh={F:Gc,bb:Xc},ih={F:wc,bb:Yc},oh={F:Gc,bb:Yc},sh={rd:"local",NONE:"none",td:"session"};function ah(t){var e=new x("invalid-persistence-type"),n=new x("unsupported-persistence-type");t:{for(r in sh)if(sh[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(Yr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Mc()&&"none"!==t)throw n;break;default:if(!oi()&&"none"!==t)throw n}}function uh(){var t=!(di(ri())||!Kr()),e=ci(),n=oi();this.m=t,this.h=e,this.l=n,this.a={},th||(th=new $c),t=th;try{this.g=!Rr()&&_i()||!c.indexedDB?new t.a.F:new Wc(Qr()?new zc:new t.a.F)}catch(r){this.g=new zc,this.h=!0}try{this.i=new t.a.bb}catch(r){this.i=new zc}this.v=new zc,this.f=C(this.Yb,this),this.b={}}function ch(){return eh||(eh=new uh),eh}function hh(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function lh(t,e){return"firebase:"+t.name+(e?":"+e:"")}function fh(t,e,n){var r=lh(e,n),i=hh(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=fi(c.localStorage.getItem(r))}catch(T){}if(s&&!o)return c.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&c.localStorage.removeItem(r)}))}function ph(t,e,n){return n=lh(e,n),"local"==e.F&&(t.b[n]=null),hh(t,e.F).U(n)}function dh(t){vh(t),t.c=setInterval((function(){for(var e in t.a){var n=c.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new yn({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}function vh(t){t.c&&(clearInterval(t.c),t.c=null)}function gh(t){this.a=t,this.b=ch()}t=uh.prototype,t.get=function(t,e){return hh(this,t.F).get(lh(t,e))},t.set=function(t,e,n){var r=lh(t,n),i=this,o=hh(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=lh(t,e),this.l&&(this.b[t]=c.localStorage.getItem(t)),It(this.a)&&(hh(this,"local").ca(this.f),this.h||(Rr()||!_i())&&c.indexedDB||!this.l||dh(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=lh(t,e),this.a[t]&&(it(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),It(this.a)&&(hh(this,"local").ia(this.f),vh(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=c.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?hh(this,"local").ia(this.f):vh(this),this.m)if(n=c.localStorage.getItem(e),r=t.a.newValue,r!==n)null!==r?c.localStorage.setItem(e,r):c.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"===typeof t.a.a)return;var o=this;n=function(){"undefined"===typeof t.a.a&&o.b[e]===c.localStorage.getItem(e)||(o.b[e]=c.localStorage.getItem(e),o.mb(e))},se&&be&&10==be&&c.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else X(t,C(this.mb,this))},t.mb=function(t){this.a[t]&&X(this.a[t],(function(t){t()}))};var yh,mh={name:"authEvent",F:"local"};function bh(t){return t.b.get(mh,t.a).then((function(t){return Ts(t)}))}function _h(){this.a=ch()}function wh(){this.b=-1}function Ih(t,e){this.b=Eh,this.f=c.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=c.Int32Array?new Int32Array(64):Array(64),void 0===yh&&(yh=c.Int32Array?new Int32Array(Ph):Ph),this.reset()}A(Ih,wh);for(var Eh=64,Th=Eh-1,Sh=[],Ch=0;Ch<Th;Ch++)Sh[Ch]=0;var kh=ot(128,Sh);function Nh(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=c&h^~c&l,o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0,s=s+(0|yh[e])|0,s=o+(s+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function Ah(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"===typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Nh(t),i=0);else{if(!v(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Nh(t),i=0)}}t.c=i,t.g+=n}Ih.prototype.reset=function(){this.g=this.c=0,this.a=c.Int32Array?new Int32Array(this.h):st(this.h)};var Ph=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function xh(){Ih.call(this,8,Oh)}A(xh,Ih);var Oh=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Rh(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new _h,this.g=new gh(this.h),this.f=null,this.b=[],this.a=this.c=null}function Dh(t){return new x("invalid-cordova-configuration",t)}function Lh(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}function Mh(t){var e=new xh;Ah(e,t),t=[];var n=8*e.g;56>e.c?Ah(e,kh,56-e.c):Ah(e,kh,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Nh(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return wo(t)}function jh(t,e,n,r,i){var o=Lh(),s=new Es(e,r,null,o,new x("no-auth-event"),null,i),a=ii("BuildInfo.packageName",c);if("string"!==typeof a)throw new x("invalid-cordova-configuration");var u=ii("BuildInfo.displayName",c),h={};if(ri().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=a;else{if(!ri().toLowerCase().match(/android/))return We(new x("operation-not-supported-in-this-environment"));h.apn=a}u&&(h.appDisplayName=u),o=Mh(o),h.sessionId=o;var l=mc(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(mh,s.w(),e)})).then((function(){var e=ii("cordova.plugins.browsertab.isAvailable",c);if("function"!==typeof e)throw new x("invalid-cordova-configuration");var n=null;e((function(e){if(e){if(n=ii("cordova.plugins.browsertab.openUrl",c),"function"!==typeof n)throw new x("invalid-cordova-configuration");n(l)}else{if(n=ii("cordova.InAppBrowser.open",c),"function"!==typeof n)throw new x("invalid-cordova-configuration");e=ri(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}function Fh(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Uh(t){return t.f||(t.f=t.ma().then((function(){return new Me((function(e){function n(r){return e(r),t.Sa(n),!1}t.Ea(n),qh(t)}))}))),t.f}function Vh(t){var e=null;return bh(t.g).then((function(n){return e=n,n=t.g,ph(n.b,mh,n.a)})).then((function(){return e}))}function qh(t){function e(e){r=!0,i&&i.cancel(),Vh(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;i=Bo(e.url),-1!=i.indexOf("/__/auth/callback")&&(o=ar(i),o=fi(sr(o,"firebaseError")||null),o=(o="object"===(0,m.Z)(o)?O(o):null)?new Es(r.c,r.b,null,null,o,null,r.T()):new Es(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Fh(t,i)}))}var n=new Es("unknown",null,null,null,new x("no-auth-event")),r=!1,i=Gn(500).then((function(){return Vh(t).then((function(){r||Fh(t,n)}))})),o=c.handleOpenURL;c.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(ii("BuildInfo.packageName",c).toLowerCase()+"://")&&e({url:t}),"function"===typeof o)try{o(t)}catch(T){console.error(T)}},ks||(ks=new Ss),Ns(e)}function Bh(t){this.a=t,this.b=ch()}t=Rh.prototype,t.ma=function(){return this.Ia?this.Ia:this.Ia=zr().then((function(){if("function"!==typeof ii("universalLinks.subscribe",c))throw Dh("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof ii("BuildInfo.packageName",c))throw Dh("cordova-plugin-buildinfo is not installed");if("function"!==typeof ii("cordova.plugins.browsertab.openUrl",c))throw Dh("cordova-plugin-browsertab is not installed");if("function"!==typeof ii("cordova.InAppBrowser.open",c))throw Dh("cordova-plugin-inappbrowser is not installed")}),(function(){throw new x("cordova-not-ready")}))},t.Ob=function(t,e){return e(new x("operation-not-supported-in-this-environment")),He()},t.Mb=function(){return We(new x("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return We(new x("redirect-operation-pending"));var i=this,o=c.document,s=null,a=null,u=null,h=null;return this.c=He().then((function(){return Is(e),Uh(i)})).then((function(){return jh(i,t,e,n,r)})).then((function(){return new Me((function(t,e){a=function(){var e=ii("cordova.plugins.browsertab.close",c);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),u=function(){s||(s=Gn(2e3).then((function(){e(new x("redirect-cancelled-by-user"))})))},h=function(){yi()&&u()},o.addEventListener("resume",u,!1),ri().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Vh(i).then((function(){throw t}))}))})).oa((function(){u&&o.removeEventListener("resume",u,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),a&&i.Sa(a),i.c=null}))},t.Ea=function(t){this.b.push(t),Uh(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Es("unknown",null,null,null,new x("no-auth-event")),t(e))}))},t.Sa=function(t){it(this.b,(function(e){return e==t}))};var Hh={name:"pendingRedirect",F:"session"};function Wh(t){return t.b.set(Hh,"pending",t.a)}function zh(t){return ph(t.b,Hh,t.a)}function Gh(t){return t.b.get(Hh,t.a).then((function(t){return"pending"==t}))}function Kh(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=C(this.s,this),this.b=new ul,this.C=new gl,this.g=new Bh(sl(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Qh(this.D,this.v,this.m,R,this.J)}function Qh(t,e,n,r,i){var o=y.Z.SDK_VERSION||null;return Gr()?new Rh(t,e,n,o,r,i):new dc(t,e,n,o,r,i)}function Yh(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Xh(t){t.a.Xb()&&Yh(t).o((function(e){var n=new Es("unknown",null,null,null,new x("operation-not-supported-in-this-environment"));nl(e)&&t.s(n)})),t.a.Tb()||cl(t.b)}function Zh(t,e){nt(t.h,e)||t.h.push(e),t.f||Gh(t.g).then((function(e){e?zh(t.g).then((function(){Yh(t).o((function(e){var n=new Es("unknown",null,null,null,new x("operation-not-supported-in-this-environment"));nl(e)&&t.s(n)}))})):Xh(t)})).o((function(){Xh(t)}))}function Jh(t,e){it(t.h,(function(t){return t==e}))}Kh.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Qh(this.D,this.v,this.m,null,this.J),this.i={}},Kh.prototype.s=function(t){if(!t)throw new x("invalid-auth-event");if(6e5<=N()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=N())),e=!0;break}}return cl(this.b),e};var $h=new gi(2e3,1e4),tl=new gi(3e4,6e4);function el(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function nl(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function rl(t,e,n,r,i){var o;return Wh(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(nl(e))throw new x("operation-not-supported-in-this-environment");return o=e,zh(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new Me((function(){})):zh(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function il(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),$h.get())}Kh.prototype.qa=function(){return this.b.qa()};var ol={};function sl(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function al(t,e,n,r){var i=sl(e,n,r);return ol[i]||(ol[i]=new Kh(t,e,n,r)),ol[i]}function ul(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function cl(t){t.g||(t.g=!0,dl(t,!1,null,null))}function hl(t){t.g&&!t.i&&dl(t,!1,null,null)}function ll(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){dl(t,a,e,null)})).o((function(e){dl(t,a,null,e)}))}function fl(t,e){if(t.b=function(){return We(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}function pl(t,e){if(t.b=function(){return He(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function dl(t,e,n,r){e?r?fl(t,r):pl(t,n):pl(t,{user:null}),t.f=[],t.c=[]}function vl(t){var e=new x("timeout");t.a&&t.a.cancel(),t.a=Gn(tl.get()).then((function(){t.b||(t.g=!0,dl(t,!0,null,e))}))}function gl(){}function yl(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}function ml(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function bl(t,e){this.a=e,ki(this,"verificationId",t)}function _l(t,e,n,r){return new bs(t).fb(e,n).then((function(t){return new bl(t,r)}))}function wl(t){var e=No(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new x("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ni(this,{token:t,expirationTime:bi(1e3*e.exp),authTime:bi(1e3*e.auth_time),issuedAtTime:bi(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Il(t,e,n){var r=e&&e[Tl];if(!r)throw new x("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=Et(e),this.g=n,this.c=new Ho(null,r),this.b=[];var i=this;X(e[El]||[],(function(t){(t=Di(t))&&i.b.push(t)})),ki(this,"auth",this.a),ki(this,"session",this.c),ki(this,"hints",this.b)}ul.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},ul.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(dl(this,!0,null,t.a),He()):e.Fa(n,r)?ll(this,t,e):We(new x("invalid-auth-event")):(dl(this,!1,null,null),He())}else We(new x("invalid-auth-event"))},ul.prototype.qa=function(){var t=this;return new Me((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),vl(t))}))},gl.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),He()):e.Fa(n,r)?yl(t,e):We(new x("invalid-auth-event"))}else We(new x("invalid-auth-event"))},bl.prototype.confirm=function(t){return t=_s(this.verificationId,t),this.a(t)};var El="mfaInfo",Tl="mfaPendingCredential";function Sl(t,e,n,r){x.call(this,"multi-factor-auth-required",r,e),this.b=new Il(t,e,n),ki(this,"resolver",this.b)}function Cl(t,e,n){if(t&&b(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Sl(e,t.serverResponse,n,t.message)}catch(r){}return null}function kl(){}function Nl(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),St(n,{phoneVerificationInfo:ms(t.a)}),$u(e,Nu,n)}))}function Al(t,e,n){return n.Ha().then((function(n){return n={mfaPendingCredential:n},St(n,{phoneVerificationInfo:ms(t.a)}),$u(e,Au,n)}))}function Pl(t){ki(this,"factorId",t.fa),this.a=t}function xl(t){if(Pl.call(this,t),this.a.fa!=bs.PROVIDER_ID)throw new x("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Ol(t,e){for(var n in gn.call(this,t),e)this[n]=e[n]}function Rl(t,e){this.a=t,this.b=[],this.c=C(this.yc,this),Nn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&X(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ji]=t.uid),t.displayName&&(r[Li]=t.displayName),t.enrollmentTime&&(r[Mi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[Fi]=t.phoneNumber);try{e=new Ui(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),Ll(this,n)}function Dl(t){var e=[];return X(t.mfaInfo||[],(function(t){(t=Di(t))&&e.push(t)})),e}function Ll(t,e){t.b=e,ki(t,"enrolledFactors",e)}function Ml(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function jl(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function Fl(t,e){t.stop(),t.b=Gn(jl(t,e)).then((function(){return mi()})).then((function(){return t.h()})).then((function(){Fl(t,!0)})).o((function(e){t.i(e)&&Fl(t,!1)}))}function Ul(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function Vl(t,e){"undefined"===typeof e&&(t.b?(e=t.b,e=e.a-e.g):e=0),t.c=Date.now()+1e3*e}function ql(t,e){t.b=ko(e[Va]||""),t.a=e.refreshToken,e=e.expiresIn,Vl(t,"undefined"!==typeof e?Number(e):void 0)}function Bl(t,e){t.b=e.b,t.a=e.a,t.c=e.c}function Hl(t,e){return $a(t.f,e).then((function(e){return t.b=ko(e.access_token),t.a=e.refresh_token,Vl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function Wl(t,e){this.a=t||null,this.b=e||null,Ni(this,{lastSignInTime:bi(e||null),creationTime:bi(t||null)})}function zl(t){return new Wl(t.a,t.b)}function Gl(t,e,n,r,i,o){Ni(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Kl(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=y.Z.SDK_VERSION?ni(y.Z.SDK_VERSION):null;this.a=new Fa(this.l,F(R),r),t.emulatorConfig&&Ga(this.a,t.emulatorConfig),this.b=new Ul(this.a),nf(this,e[Va]),ql(this.b,e),ki(this,"refreshToken",this.b.a),af(this,n||{}),qn.call(this),this.R=!1,this.s&&si()&&(this.i=al(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=$l(this),this.aa=C(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){Ga(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){Xl(i,t.f)},this.ba=null,this.O=new Rl(this,n),ki(this,"multiFactor",this.O)}function Ql(t,e){t.ja&&On(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&Nn(e,"languageCodeChanged",t.Oa)}function Yl(t,e){t.X&&On(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&Nn(e,"emulatorConfigChanged",t.Aa)}function Xl(t,e){t.$=e,Qa(t.a,y.Z.SDK_VERSION?ni(y.Z.SDK_VERSION,t.$):null)}function Zl(t,e){t.ba&&On(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&Nn(e,"frameworkChanged",t.Ba)}function Jl(t){try{return y.Z.app(t.m).auth()}catch(e){throw new x("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function $l(t){return new Ml((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}function tf(t){t.D||t.u.b||(t.u.start(),On(t,"tokenChanged",t.aa),Nn(t,"tokenChanged",t.aa))}function ef(t){On(t,"tokenChanged",t.aa),t.u.stop()}function nf(t,e){t.za=e,ki(t,"_lat",e)}function rf(t,e){it(t.S,(function(t){return t==e}))}function of(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Ke(e).then((function(){return t}))}function sf(t){t.i&&!t.R&&(t.R=!0,Zh(t.i,t))}function af(t,e){Ni(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Wl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function uf(){}function cf(t){return He().then((function(){if(t.D)throw new x("app-deleted")}))}function hf(t){return $(t.providerData,(function(t){return t.providerId}))}function lf(t,e){e&&(ff(t,e.providerId),t.providerData.push(e))}function ff(t,e){it(t.providerData,(function(t){return t.providerId==e}))}function pf(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&ki(t,e,n)}function df(t,e){t!=e&&(Ni(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?ki(t,"metadata",zl(e.metadata)):ki(t,"metadata",new Wl),X(e.providerData,(function(e){lf(t,e)})),Bl(t.b,e.b),ki(t,"refreshToken",t.b.a),Ll(t.O,e.O.b))}function vf(t){return t.I().then((function(e){var n=t.isAnonymous;return yf(t,e).then((function(){return n||pf(t,"isAnonymous",!1),e}))}))}function gf(t,e){e[Va]&&t.za!=e[Va]&&(ql(t.b,e),t.dispatchEvent(new Ol("tokenChanged")),nf(t,e[Va]),pf(t,"refreshToken",t.b.a))}function yf(t,e){return $u(t.a,Pu,{idToken:e}).then(C(t.Kc,t))}function mf(t){return(t=t.providerUserInfo)&&t.length?$(t,(function(t){return new Gl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}function bf(t,e){return vf(t).then((function(){if(nt(hf(t),e))return of(t).then((function(){throw new x("provider-already-linked")}))}))}function _f(t,e,n){var r=ws(e);return e=Ro(e),Ai({user:t,credential:r,additionalUserInfo:e,operationType:n})}function wf(t,e){return gf(t,e),t.reload().then((function(){return t}))}function If(t,e,n,r,i){if(!si())return We(new x("operation-not-supported-in-this-environment"));if(t.h&&!i)return We(t.h);var o=Oo(n.providerId),s=pi(t.uid+":::"),a=null;(!ci()||Kr())&&t.s&&n.isOAuthProvider&&(a=mc(t.s,t.l,t.m,e,n,null,s,y.Z.SDK_VERSION||null,null,null,t.tenantId));var u=Vr(a,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Tf(t),!i)return t.I().then((function(){}))})).then((function(){return el(t.i,u,e,n,s,!!a,t.tenantId)})).then((function(){return new Me((function(n,r){t.na(e,null,new x("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=il(t.i,t,e,u,s)}))})).then((function(t){return u&&Ur(u),t?Ai(t):null})).o((function(t){throw u&&Ur(u),t})),Sf(t,r,i)}function Ef(t,e,n,r,i){if(!si())return We(new x("operation-not-supported-in-this-environment"));if(t.h&&!i)return We(t.h);var o=null,s=pi(t.uid+":::");return r=r().then((function(){if(Tf(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,of(t)})).then((function(e){return t.ha&&(e=t.ha,e=e.b.set(xf,t.w(),e.a)),e})).then((function(){return rl(t.i,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Of(t.ha);throw o})).then((function(){if(o)throw o})),Sf(t,r,i)}function Tf(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new x("internal-error");throw new x("auth-domain-config-required")}}function Sf(t,e,n){var r=Cf(t,e,n);return t.J.push(r),r.oa((function(){rt(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Cl(e.w(),Jl(t),C(t.jc,t))),n||e}))}function Cf(t,e,n){return t.h&&!n?(e.cancel(),We(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new Ol("userInvalidated")),t.h=e),e}))}function kf(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Va]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Kl(e,n,t);return t.providerData&&X(t.providerData,(function(t){t&&lf(i,Ai(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Nf(t,e,n,r){var i=new Kl(t,e);return n&&(i.ha=n),r&&Xl(i,r),i.reload().then((function(){return i}))}function Af(t,e,n,r){var i=t.b,o={};return o[Va]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new Kl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Xl(e,r),df(e,t),e}function Pf(t){this.a=t,this.b=ch()}Il.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=Et(e.f);return delete n[El],delete n[Tl],St(n,t),e.g(n)}))},A(Sl,x),kl.prototype.sb=function(t,e,n){return e.type==Wo?Nl(this,t,e,n):Al(this,t,e)},A(Pl,kl),A(xl,Pl),A(Ol,gn),t=Rl.prototype,t.yc=function(t){Ll(this,Dl(t.hd))},t.Rb=function(){return this.a.I().then((function(t){return new Ho(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return gf(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"===typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return $u(r,Ju,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=J(e.b,(function(t){return t.uid!=n}));return Ll(e,r),gf(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:$(this.b,(function(t){return t.w()}))}}},Ml.prototype.start=function(){this.a=this.c,Fl(this,!0)},Ml.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Ul.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},Ul.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?We(new x("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?Hl(this,{grant_type:"refresh_token",refresh_token:this.a}):He(null):He({accessToken:this.b.toString(),refreshToken:this.a})},Wl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},A(Kl,qn),Kl.prototype.wa=function(t){this.ya=t,za(this.a,t)},Kl.prototype.la=function(){return this.ya},Kl.prototype.Ga=function(){return st(this.$)},Kl.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},ki(Kl.prototype,"providerId","firebase"),t=Kl.prototype,t.reload=function(){var t=this;return Sf(this,cf(this).then((function(){return vf(t).then((function(){return of(t)})).then(uf)})))},t.oc=function(t){return this.I(t).then((function(t){return new wl(t)}))},t.I=function(t){var e=this;return Sf(this,cf(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new x("internal-error");return t.accessToken!=e.za&&(nf(e,t.accessToken),e.dispatchEvent(new Ol("tokenChanged"))),pf(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(t=t.users,!t||!t.length)throw new x("internal-error");t=t[0],af(this,{uid:t.localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=mf(t),n=0;n<e.length;n++)lf(this,e[n]);pf(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new Ol("userReloaded",{hd:t}))},t.Lc=function(t){return Si("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Sf(this,t.c(this.a,this.uid).then((function(t){return gf(e,t),n=_f(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Si("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Sf(this,bf(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=_f(e,t,"link"),wf(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Sf(this,bf(this,"phone").then((function(){return _l(Jl(n),t,e,C(n.qb,n))})))},t.Mc=function(t,e){var n=this;return Sf(this,He().then((function(){return _l(Jl(n),t,e,C(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return Sf(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return gf(e,t),e.reload()})))},t.ed=function(t){var e=this;return Sf(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return gf(e,t),e.reload()})))},t.Cb=function(t){var e=this;return Sf(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return gf(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return cf(this);var e=this;return Sf(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return gf(e,t),pf(e,"displayName",t.displayName||null),pf(e,"photoURL",t.photoUrl||null),X(e.providerData,(function(t){"password"===t.providerId&&(ki(t,"displayName",e.displayName),ki(t,"photoURL",e.photoURL))})),of(e)})).then(uf))},t.cd=function(t){var e=this;return Sf(this,vf(this).then((function(n){return nt(hf(e),t)?fu(e.a,n,[t]).then((function(t){var n={};return X(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),X(hf(e),(function(t){n[t]||ff(e,t)})),n[bs.PROVIDER_ID]||ki(e,"phoneNumber",null),of(e)})):of(e).then((function(){throw new x("no-such-provider")}))})))},t.delete=function(){var t=this;return Sf(this,this.I().then((function(e){return $u(t.a,Tu,{idToken:e})})).then((function(){t.dispatchEvent(new Ol("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");Ql(t,null),Yl(t,null),Zl(t,null),t.J=[],t.D=!0,ef(t),ki(t,"refreshToken",null),t.i&&Jh(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?C(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?C(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?C(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?C(this.Lb,this):null},t.Ec=function(t){var e=this;return If(this,"linkViaPopup",t,(function(){return bf(e,t.providerId).then((function(){return of(e)}))}),!1)},t.Nc=function(t){return If(this,"reauthViaPopup",t,(function(){return He()}),!0)},t.Fc=function(t){var e=this;return Ef(this,"linkViaRedirect",t,(function(){return bf(e,t.providerId)}),!1)},t.Oc=function(t){return Ef(this,"reauthViaRedirect",t,(function(){return He()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return n=this.I().then((function(n){return yu(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=_f(i,t,"link"),wf(i,t)})).then((function(){return o})),Sf(this,n)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null,s=He().then((function(){return Ko(mu(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=_f(i,t,"reauthenticate"),gf(i,t),i.h=null,i.reload()})).then((function(){return o}));return Sf(this,s,!0)},t.ub=function(t){var e=this,n=null;return Sf(this,this.I().then((function(e){return n=e,"undefined"===typeof t||It(t)?{}:_o(new co(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return Sf(this,this.I().then((function(t){return r=t,"undefined"===typeof e||It(e)?{}:_o(new co(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return t=Ko(He(t),n.uid).then((function(t){return e=_f(n,t,"reauthenticate"),gf(n,t),n.h=null,n.reload()})).then((function(){return e})),Sf(this,t,!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&St(t,this.metadata.w()),X(this.providerData,(function(e){t.providerData.push(Pi(e))})),St(t,this.O.w()),t};var xf={name:"redirectUser",F:"session"};function Of(t){return ph(t.b,xf,t.a)}function Rf(t,e){return t.b.get(xf,t.a).then((function(t){return t&&e&&(t.authDomain=e),kf(t||{})}))}function Df(t){this.a=t,this.b=ch(),this.c=null,this.f=Mf(this),this.b.addListener(Ff("local"),this.a,C(this.g,this))}function Lf(t,e){var n,r=[];for(n in sh)sh[n]!==e&&r.push(ph(t.b,Ff(sh[n]),t.a));return r.push(ph(t.b,jf,t.a)),Ge(r)}function Mf(t){var e=Ff("local"),n=Ff("session"),r=Ff("none");return fh(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(jf,t.a).then((function(t){return t?Ff(t):e}))}))}))})).then((function(e){return t.c=e,Lf(t,e.F)})).o((function(){t.c||(t.c=e)}))}Df.prototype.g=function(){var t=this,e=Ff("local");Hf(this,(function(){return He().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Lf(t,"local").then((function(){t.c=e}))}))}))};var jf={name:"persistence",F:"session"};function Ff(t){return{name:"authUser",F:t}}function Uf(t){return Hf(t,(function(){return t.b.set(jf,t.c.F,t.a)}))}function Vf(t,e){return Hf(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function qf(t){return Hf(t,(function(){return ph(t.b,t.c,t.a)}))}function Bf(t,e,n){return Hf(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),kf(t||{})}))}))}function Hf(t,e){return t.f=t.f.then(e,e),t.f}function Wf(t){if(this.l=!1,ki(this,"settings",new ml),ki(this,"app",t),!op(this).options||!op(this).options.apiKey)throw new x("invalid-api-key");t=y.Z.SDK_VERSION?ni(y.Z.SDK_VERSION):null,this.a=new Fa(op(this).options&&op(this).options.apiKey,F(R),t),this.R=[],this.s=[],this.O=[],this.hb=y.Z.INTERNAL.createSubscribe(C(this.zc,this)),this.X=void 0,this.bc=y.Z.INTERNAL.createSubscribe(C(this.Ac,this)),tp(this,null),this.i=new Df(op(this).options.apiKey+":"+op(this).name),this.D=new Pf(op(this).options.apiKey+":"+op(this).name),this.$=hp(this,np(this)),this.h=hp(this,rp(this)),this.ba=!1,this.ja=C(this.Zc,this),this.Ba=C(this.da,this),this.ya=C(this.mc,this),this.za=C(this.wc,this),this.Aa=C(this.xc,this),this.b=null,Zf(this),this.INTERNAL={},this.INTERNAL["delete"]=C(this.delete,this),this.INTERNAL.logFramework=C(this.Gc,this),this.u=0,qn.call(this),Yf(this),this.J=[],this.P=null}function zf(t){gn.call(this,"languageCodeChanged"),this.h=t}function Gf(t){gn.call(this,"emulatorConfigChanged"),this.c=t}function Kf(t){gn.call(this,"frameworkChanged"),this.f=t}function Qf(t){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),c.document&&!t&&Wr().then((function(){var t=c.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),c.document.body.appendChild(t)}))}function Yf(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=ar(this.P.url);t=Ai({protocol:t.c,host:t.a,port:t.g,options:Ai({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}function Xf(t){return t.Oa||We(new x("auth-domain-config-required"))}function Zf(t){var e=op(t).options.authDomain,n=op(t).options.apiKey;e&&si()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=al(e,n,op(t).name,t.P),Zh(t.b,t),sp(t)&&sf(sp(t)),t.m){sf(t.m);var r=t.m;r.wa(t.la()),Ql(r,t),r=t.m,Xl(r,t.J),Zl(r,t),r=t.m,Ga(r.a,t.P),Yl(r,t),t.m=null}return t.b}})))}function Jf(t){if(!si())return We(new x("operation-not-supported-in-this-environment"));var e=Xf(t).then((function(){return t.b.qa()})).then((function(t){return t?Ai(t):null}));return hp(t,e)}function $f(t,e){var n={};return n.apiKey=op(t).options.apiKey,n.authDomain=op(t).options.authDomain,n.appName=op(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return Nf(n,e,t.D,t.Ga())})).then((function(e){return sp(t)&&e.uid==sp(t).uid?(df(sp(t),e),t.da(e)):(tp(t,e),sf(e),t.da(e))})).then((function(){up(t)}))}function tp(t,e){sp(t)&&(rf(sp(t),t.Ba),On(sp(t),"tokenChanged",t.ya),On(sp(t),"userDeleted",t.za),On(sp(t),"userInvalidated",t.Aa),ef(sp(t))),e&&(e.S.push(t.Ba),Nn(e,"tokenChanged",t.ya),Nn(e,"userDeleted",t.za),Nn(e,"userInvalidated",t.Aa),0<t.u&&tf(e)),ki(t,"currentUser",e),e&&(e.wa(t.la()),Ql(e,t),Xl(e,t.J),Zl(e,t),Ga(e.a,t.P),Yl(e,t))}function ep(t){var e=Rf(t.D,op(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Of(t.D)}));return hp(t,e)}function np(t){var e=op(t).options.authDomain,n=ep(t).then((function(){return Bf(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return Vf(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:qf(t.i)}))):null})).then((function(e){tp(t,e||null)}));return hp(t,n)}function rp(t){return t.$.then((function(){return Jf(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Ff("local"),e.a,t.ja)}}))}function ip(t,e){var n=null,r=null;return hp(t,e.then((function(e){return n=ws(e),r=Ro(e),$f(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Cl(e.w(),t,C(t.kc,t))),n||e})).then((function(){return Ai({user:sp(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function op(t){return t.app}function sp(t){return t.currentUser}function ap(t){return sp(t)&&sp(t)._lat||null}function up(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](ap(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](ap(t))}}function cp(t,e){t.O.push(e),hp(t,t.h.then((function(){!t.l&&nt(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(ap(t)))})))}function hp(t,e){return t.R.push(e),e.oa((function(){rt(t.R,e)})),e}function lp(){}function fp(){this.a={},this.b=1e12}Df.prototype.xb=function(t){var e=null,n=this;return ah(t),Hf(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Lf(n,t)})).then((function(){if(n.c=Ff(t),e)return n.b.set(n.c,e,n.a)})):He()}))},A(Wf,qn),A(zf,gn),A(Gf,gn),A(Kf,gn),t=Wf.prototype,t.xb=function(t){return t=this.i.xb(t),hp(this,t)},t.wa=function(t){this.aa===t||this.l||(this.aa=t,za(this.a,this.aa),this.dispatchEvent(new zf(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=c.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new x("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");e=!!e&&!!e.disableWarnings,Qf(e),this.P={url:t,ec:e},this.settings.ib=!0,Ga(this.a,this.P),this.dispatchEvent(new Gf(this.P))}},t.Gc=function(t){this.J.push(t),Qa(this.a,y.Z.SDK_VERSION?ni(y.Z.SDK_VERSION,this.J):null),this.dispatchEvent(new Kf(this.J))},t.Ga=function(){return st(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:op(this).options.apiKey,authDomain:op(this).options.authDomain,appName:op(this).name,currentUser:sp(this)&&sp(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?C(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return ip(i,gu(i.a,o))}))},t.Xc=function(t){if(!si())return We(new x("operation-not-supported-in-this-environment"));var e=this,n=Oo(t.providerId),r=pi(),i=null;(!ci()||Kr())&&op(this).options.authDomain&&t.isOAuthProvider&&(i=mc(op(this).options.authDomain,op(this).options.apiKey,op(this).name,"signInViaPopup",t,null,r,y.Z.SDK_VERSION||null,null,null,this.T(),this.P));var o=Vr(i,n&&n.ua,n&&n.ta);return n=Xf(this).then((function(n){return el(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new Me((function(t,n){e.na("signInViaPopup",null,new x("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=il(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&Ur(o),t?Ai(t):null})).o((function(t){throw o&&Ur(o),t})),hp(this,n)},t.Yc=function(t){if(!si())return We(new x("operation-not-supported-in-this-environment"));var e=this,n=Xf(this).then((function(){return Uf(e.i)})).then((function(){return rl(e.b,"signInViaRedirect",t,void 0,e.T())}));return hp(this,n)},t.qa=function(){var t=this;return Jf(this).then((function(e){return t.b&&hl(t.b.b),e})).o((function(e){throw t.b&&hl(t.b.b),e}))},t.dd=function(t){if(!t)return We(new x("null-user"));if(this.S!=t.tenantId)return We(new x("tenant-id-mismatch"));var e=this,n={};n.apiKey=op(this).options.apiKey,n.authDomain=op(this).options.authDomain,n.appName=op(this).name;var r=Af(t,n,e.D,e.Ga());return hp(this,this.h.then((function(){if(op(e).options.apiKey!=t.l)return r.reload()})).then((function(){return sp(e)&&t.uid==sp(e).uid?(df(sp(e),t),e.da(t)):(tp(e,r),sf(r),e.da(r))})).then((function(){up(e)})))},t.Ab=function(){var t=this,e=this.h.then((function(){return t.b&&hl(t.b.b),sp(t)?(tp(t,null),qf(t.i).then((function(){up(t)}))):He()}));return hp(this,e)},t.Zc=function(){var t=this;return Bf(this.i,op(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=sp(t)&&e){n=sp(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return df(sp(t),e),sp(t).I();(sp(t)||e)&&(tp(t,e),e&&(sf(e),e.ha=t.D),t.b&&Zh(t.b,t),up(t))}}))},t.da=function(t){return Vf(this.i,t)},t.mc=function(){up(this),this.da(sp(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return ip(e,He(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(sp(e))}))},t.Ac=function(t){var e=this;cp(this,(function(){t.next(sp(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof t?t(sp(r)):"function"===typeof t.next&&t.next(sp(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"===typeof t?t(sp(r)):"function"===typeof t.next&&t.next(sp(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this,n=this.h.then((function(){return sp(e)?sp(e).I(t).then((function(t){return{accessToken:t}})):null}));return hp(this,n)},t.Tc=function(t){var e=this;return this.h.then((function(){return ip(e,$u(e.a,Ku,{token:t}))})).then((function(t){var n=t.user;return pf(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return ip(n,$u(n.a,Qu,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return ip(n,$u(n.a,Iu,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return ip(e,t.ka(e.a))}))},t.Sc=function(t){return Si("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=sp(t);if(e&&e.isAnonymous){var n=Ai({providerId:null,isNewUser:!1});return Ai({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ip(t,t.a.zb()).then((function(e){var n=e.user;return pf(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return sp(this)&&sp(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&sp(this)&&tf(sp(this))},t.Pc=function(t){var e=this;X(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&sp(this)&&ef(sp(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),hp(this,this.h.then((function(){e.l||nt(e.s,t)&&t(ap(e))})))},t.removeAuthTokenListener=function(t){it(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i,t.b.removeListener(Ff("local"),t.a,this.ja)),this.b&&(Jh(this.b,this),hl(this.b.b)),Promise.resolve()},t.hc=function(t){return hp(this,ru(this.a,t))},t.Bc=function(t){return!!vs(t)},t.wb=function(t,e){var n=this;return hp(this,He().then((function(){var t=new co(e);if(!t.c)throw new x("argument-error",fo+" must be true when sending sign in link to email");return _o(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return hp(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return hp(this,this.a.Ra(t).then((function(t){return new Vi(t)})))},t.jb=function(t){return hp(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return hp(this,He().then((function(){return"undefined"===typeof e||It(e)?{}:_o(new co(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return hp(this,_l(this,t,e,C(this.$a,this)))},t.Vc=function(t,e){var n=this;return hp(this,He().then((function(){var r=e||Dr(),i=ds(t,r);if(r=vs(r),!r)throw new x("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new x("tenant-id-mismatch");return n.$a(i)})))},lp.prototype.render=function(){},lp.prototype.reset=function(){},lp.prototype.getResponse=function(){},lp.prototype.execute=function(){};var pp=null;function dp(t,e){return(e=vp(e))&&t.a[e]||null}function vp(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function gp(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=we(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Nn(this.f,"click",this.i)}function yp(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function mp(){}function bp(){}fp.prototype.render=function(t,e){return this.a[this.b.toString()]=new gp(t,e),this.b++},fp.prototype.reset=function(t){var e=dp(this,t);t=vp(t),e&&t&&(e.delete(),delete this.a[t])},fp.prototype.getResponse=function(t){return(t=dp(this,t))?t.getResponse():null},fp.prototype.execute=function(t){(t=dp(this,t))&&t.execute()},gp.prototype.getResponse=function(){return yp(this),this.b},gp.prototype.execute=function(){yp(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=Zr();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},gp.prototype.delete=function(){yp(this),this.g=!0,clearTimeout(this.a),this.a=null,On(this.f,"click",this.i)},ki(mp,"FACTOR_ID","phone"),bp.prototype.g=function(){return pp||(pp=new fp),He(pp)},bp.prototype.c=function(){};var _p=null;function wp(){this.b=c.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ip=new kt(xt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ep=new gi(3e4,6e4);wp.prototype.g=function(t){var e=this;return new Me((function(n,r){var i=setTimeout((function(){r(new x("network-request-failed"))}),Ep.get());if(!c.grecaptcha||t!==e.f&&!e.b){c[e.a]=function(){if(c.grecaptcha){e.f=t;var o=c.grecaptcha.render;c.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(c.grecaptcha)}else clearTimeout(i),r(new x("internal-error"));delete c[e.a]};var o=Lt(Ip,{onload:e.a,hl:t||""});He(Pa(o)).o((function(){clearTimeout(i),r(new x("internal-error","Unable to load external reCAPTCHA dependencies!"))}))}else clearTimeout(i),n(c.grecaptcha)}))},wp.prototype.c=function(){this.b--};var Tp=null;function Sp(t,e,n,r,i,o,s){if(ki(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s?(_p||(_p=new bp),s=_p):(Tp||(Tp=new wp),s=Tp),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Np])throw new x("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ap],!c.document)throw new x("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!we(e)||!this.i&&we(e).hasChildNodes())throw new x("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Fa(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var u=this.a[Cp];this.a[Cp]=function(t){if(Pp(a,t),"function"===typeof u)u(t);else if("string"===typeof u){var e=ii(u,c);"function"===typeof e&&e(t)}};var h=this.a[kp];this.a[kp]=function(){if(Pp(a,null),"function"===typeof h)h();else if("string"===typeof h){var t=ii(h,c);"function"===typeof t&&t()}}}var Cp="callback",kp="expired-callback",Np="sitekey",Ap="size";function Pp(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function xp(t,e){it(t.l,(function(t){return t==e}))}function Op(t,e){return t.h.push(e),e.oa((function(){rt(t.h,e)})),e}function Rp(t){if(t.D)throw new x("internal-error","RecaptchaVerifier instance has been destroyed.")}function Dp(t,e,n){var r=!1;try{this.b=n||y.Z.app()}catch(s){throw new x("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new x("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=y.Z.SDK_VERSION?ni(y.Z.SDK_VERSION,o):null,Sp.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(T){t=null}return t}),o,F(R),r)}function Lp(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new x("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Mp.length)throw new x("internal-error","Argument validator received an unsupported number of arguments.");n=Mp[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new x("argument-error",t+" failed: "+r)}t=Sp.prototype,t.Ia=function(){var t=this;return this.f?this.f:this.f=Op(this,He().then((function(){if(ai()&&!Qr())return Wr();throw new x("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,$u(t.s,Mu,{})})).then((function(e){t.a[Np]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Rp(this);var t=this;return Op(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=we(e);e=Ce("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Rp(this);var t=this;return Op(this,this.render().then((function(e){return new Me((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function e(r){r&&(xp(t,e),n(r))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Rp(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Rp(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=we(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},A(Dp,Sp);var Mp="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function jp(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"===typeof t}}}function Fp(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"===typeof t}}}function Up(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:b}}function Vp(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"===typeof t}}}function qp(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Bp(){return{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}}}function Hp(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Wf)}}}function Wp(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof y.Z.app.App)}}}function zp(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Gp(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}}function Kp(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Qp(t,e){return b(t)&&"string"===typeof t.type&&t.type===e&&"function"===typeof t.Ha}function Yp(t){return b(t)&&"string"===typeof t.uid}function Xp(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}}function Zp(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Jp(t,e){for(var n in e){var r=e[n].name;t[r]=ed(r,t[n],e[n].j)}}function $p(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:k((function(t){return this[t]}),n),set:k((function(t,e,n,r){Lp(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function td(t,e,n,r){t[e]=ed(e,n,r)}function ed(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Lp(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=nd(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}function nd(t){return t=t.split("."),t[t.length-1]}Jp(Wf.prototype,{jb:{name:"applyActionCode",j:[jp("code")]},Ra:{name:"checkActionCode",j:[jp("code")]},nb:{name:"confirmPasswordReset",j:[jp("code"),jp("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[jp("email"),jp("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[jp("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[jp("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Zp(Up(),Vp(),"nextOrObserver"),Vp("opt_error",!0),Vp("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Zp(Up(),Vp(),"nextOrObserver"),Vp("opt_error",!0),Vp("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[jp("email"),Zp(Up("opt_actionCodeSettings",!0),qp(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[jp("email"),Up("actionCodeSettings")]},xb:{name:"setPersistence",j:[jp("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[zp()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[zp()]},Tc:{name:"signInWithCustomToken",j:[jp("token")]},Uc:{name:"signInWithEmailAndPassword",j:[jp("email"),jp("password")]},Vc:{name:"signInWithEmailLink",j:[jp("email"),jp("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[jp("phoneNumber"),Xp()]},Xc:{name:"signInWithPopup",j:[Kp()]},Yc:{name:"signInWithRedirect",j:[Kp()]},dd:{name:"updateCurrentUser",j:[Zp(function(t){return{name:"user",K:"an instance of Firebase User",optional:!!t,M:function(t){return!!(t&&t instanceof Kl)}}}(),qp(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[jp(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[jp("url"),Up("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[jp("code")]}}),$p(Wf.prototype,{lc:{name:"languageCode",kb:Zp(jp(),qp(),"languageCode")},ti:{name:"tenantId",kb:Zp(jp(),qp(),"tenantId")}}),Wf.Persistence=sh,Wf.Persistence.LOCAL="local",Wf.Persistence.SESSION="session",Wf.Persistence.NONE="none",Jp(Kl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Fp("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Fp("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[zp()]},qb:{name:"linkWithCredential",j:[zp()]},Dc:{name:"linkWithPhoneNumber",j:[jp("phoneNumber"),Xp()]},Ec:{name:"linkWithPopup",j:[Kp()]},Fc:{name:"linkWithRedirect",j:[Kp()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[zp()]},tb:{name:"reauthenticateWithCredential",j:[zp()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[jp("phoneNumber"),Xp()]},Nc:{name:"reauthenticateWithPopup",j:[Kp()]},Oc:{name:"reauthenticateWithRedirect",j:[Kp()]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Zp(Up("opt_actionCodeSettings",!0),qp(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[jp(null,!0)]},cd:{name:"unlink",j:[jp("provider")]},Bb:{name:"updateEmail",j:[jp("email")]},Cb:{name:"updatePassword",j:[jp("password")]},ed:{name:"updatePhoneNumber",j:[zp("phone")]},Db:{name:"updateProfile",j:[Up("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[jp("email"),Zp(Up("opt_actionCodeSettings",!0),qp(null,!0),"opt_actionCodeSettings",!0)]}}),Jp(fp.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jp(lp.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jp(Me.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),$p(ml.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Fp("appVerificationDisabledForTesting")}}),Jp(bl.prototype,{confirm:{name:"confirm",j:[jp("verificationCode")]}}),td(Go,"fromJSON",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var e,n=[$o,fs,ys,Xo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Zp(jp(),Up(),"json")]),td(ps,"credential",(function(t,e){return new ls(t,e)}),[jp("email"),jp("password")]),Jp(ls.prototype,{w:{name:"toJSON",j:[jp(null,!0)]}}),Jp(rs.prototype,{Ca:{name:"addScope",j:[jp("scope")]},Ka:{name:"setCustomParameters",j:[Up("customOAuthParameters")]}}),td(rs,"credential",is,[Zp(jp(),Up(),"token")]),td(ps,"credentialWithLink",ds,[jp("email"),jp("emailLink")]),Jp(os.prototype,{Ca:{name:"addScope",j:[jp("scope")]},Ka:{name:"setCustomParameters",j:[Up("customOAuthParameters")]}}),td(os,"credential",ss,[Zp(jp(),Up(),"token")]),Jp(as.prototype,{Ca:{name:"addScope",j:[jp("scope")]},Ka:{name:"setCustomParameters",j:[Up("customOAuthParameters")]}}),td(as,"credential",us,[Zp(jp(),Zp(Up(),qp()),"idToken"),Zp(jp(),qp(),"accessToken",!0)]),Jp(cs.prototype,{Ka:{name:"setCustomParameters",j:[Up("customOAuthParameters")]}}),td(cs,"credential",hs,[Zp(jp(),Up(),"token"),jp("secret",!0)]),Jp(ns.prototype,{Ca:{name:"addScope",j:[jp("scope")]},credential:{name:"credential",j:[Zp(jp(),Zp(Up(),qp()),"optionsOrIdToken"),Zp(jp(),qp(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Up("customOAuthParameters")]}}),Jp(Zo.prototype,{w:{name:"toJSON",j:[jp(null,!0)]}}),Jp(Qo.prototype,{w:{name:"toJSON",j:[jp(null,!0)]}}),td(bs,"credential",_s,[jp("verificationId"),jp("verificationCode")]),Jp(bs.prototype,{fb:{name:"verifyPhoneNumber",j:[Zp(jp(),function(t,e){return{name:t||"phoneInfoOptions",K:"valid phone info options",optional:!!e,M:function(t){return!!t&&(t.session&&t.phoneNumber?Qp(t.session,Wo)&&"string"===typeof t.phoneNumber:t.session&&t.multiFactorHint?Qp(t.session,zo)&&Yp(t.multiFactorHint):t.session&&t.multiFactorUid?Qp(t.session,zo)&&"string"===typeof t.multiFactorUid:!!t.phoneNumber&&"string"===typeof t.phoneNumber)}}}(),"phoneInfoOptions"),Xp()]}}),Jp(gs.prototype,{w:{name:"toJSON",j:[jp(null,!0)]}}),Jp(x.prototype,{toJSON:{name:"toJSON",j:[jp(null,!0)]}}),Jp(Ps.prototype,{toJSON:{name:"toJSON",j:[jp(null,!0)]}}),Jp(As.prototype,{toJSON:{name:"toJSON",j:[jp(null,!0)]}}),Jp(Sl.prototype,{toJSON:{name:"toJSON",j:[jp(null,!0)]}}),Jp(Il.prototype,{Rc:{name:"resolveSignIn",j:[Gp()]}}),Jp(Rl.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[Gp(),jp("displayName",!0)]},bd:{name:"unenroll",j:[Zp({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Yp},jp(),"multiFactorInfoIdentifier")]}}),Jp(Dp.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),td(to,"parseLink",uo,[jp("link")]),td(mp,"assertion",(function(t){return new xl(t)}),[zp("phone")]),function(){if("undefined"===typeof y.Z||!y.Z.INTERNAL||!y.Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Bi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:qi,VERIFY_AND_CHANGE_EMAIL:Hi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Wf,AuthCredential:Go,Error:x};td(t,"EmailAuthProvider",ps,[]),td(t,"FacebookAuthProvider",rs,[]),td(t,"GithubAuthProvider",os,[]),td(t,"GoogleAuthProvider",as,[]),td(t,"TwitterAuthProvider",cs,[]),td(t,"OAuthProvider",ns,[jp("providerId")]),td(t,"SAMLAuthProvider",es,[jp("providerId")]),td(t,"PhoneAuthProvider",bs,[Hp()]),td(t,"RecaptchaVerifier",Dp,[Zp(jp(),Bp(),"recaptchaContainer"),Up("recaptchaParameters",!0),Wp()]),td(t,"ActionCodeURL",to,[]),td(t,"PhoneMultiFactorGenerator",mp,[]),y.Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return t=t.getProvider("app").getImmediate(),new Wf(t)},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),y.Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return t=t.getProvider("auth").getImmediate(),{getUid:C(t.getUid,t),getToken:C(t.nc,t),addAuthTokenListener:C(t.cc,t),removeAuthTokenListener:C(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),y.Z.registerVersion("@firebase/auth","0.16.4"),y.Z.INTERNAL.extendNamespace({User:Kl})}()}).apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});n(598);var b=n(2864),_=n(3836),w=(n(189),function(t,e){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},w(t,e)});function I(t,e){function n(){this.constructor=t}w(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function E(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var T,S="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},C=C||{},k=S||self;function N(){}function A(t){var e=(0,m.Z)(t);return e="object"!=e?e:t?Array.isArray(t)?"array":e:"null","array"==e||"object"==e&&"number"==typeof t.length}function P(t){var e=(0,m.Z)(t);return"object"==e&&null!=t||"function"==e}function x(t){return Object.prototype.hasOwnProperty.call(t,O)&&t[O]||(t[O]=++R)}var O="closure_uid_"+(1e9*Math.random()>>>0),R=0;function D(t,e,n){return t.call.apply(t.bind,arguments)}function L(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function M(t,e,n){return M=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?D:L,M.apply(null,arguments)}function j(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function F(){return Date.now()}function U(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function V(){this.j=this.j,this.i=this.i}var q=0;V.prototype.j=!1,V.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0!=q))x(this)},V.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var B=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},H=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function W(t){t:{for(var e=rr,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}function z(t){return Array.prototype.concat.apply([],arguments)}function G(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function K(t){return/^[\s\xa0]*$/.test(t)}var Q,Y=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function X(t,e){return-1!=t.indexOf(e)}function Z(t,e){return t<e?-1:t>e?1:0}t:{var J=k.navigator;if(J){var $=J.userAgent;if($){Q=$;break t}}Q=""}function tt(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function et(t){var e={};for(var n in t)e[n]=t[n];return e}var nt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(var o=0;o<nt.length;o++)n=nt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function it(t){return it[" "](t),t}function ot(t,e){var n=mt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}it[" "]=N;var st,at=X(Q,"Opera"),ut=X(Q,"Trident")||X(Q,"MSIE"),ct=X(Q,"Edge"),ht=ct||ut,lt=X(Q,"Gecko")&&!(X(Q.toLowerCase(),"webkit")&&!X(Q,"Edge"))&&!(X(Q,"Trident")||X(Q,"MSIE"))&&!X(Q,"Edge"),ft=X(Q.toLowerCase(),"webkit")&&!X(Q,"Edge");function pt(){var t=k.document;return t?t.documentMode:void 0}t:{var dt="",vt=function(){var t=Q;return lt?/rv:([^\);]+)(\)|;)/.exec(t):ct?/Edge\/([\d\.]+)/.exec(t):ut?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):ft?/WebKit\/(\S+)/.exec(t):at?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(vt&&(dt=vt?vt[1]:""),ut){var gt=pt();if(null!=gt&&gt>parseFloat(dt)){st=String(gt);break t}}st=dt}var yt,mt={};function bt(t){return ot(t,(function(){for(var e=0,n=Y(String(st)).split("."),r=Y(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Z(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Z(0==s[2].length,0==a[2].length)||Z(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(k.document&&ut){var _t=pt();yt=_t||(parseInt(st,10)||void 0)}else yt=void 0;var wt=yt,It=!ut||9<=Number(wt),Et=ut&&!bt("9"),Tt=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{k.addEventListener("test",N,e),k.removeEventListener("test",N,e)}catch(n){}return t}();function St(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Ct(t,e){if(St.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(lt){t:{try{it(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:kt[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}St.prototype.b=function(){this.defaultPrevented=!0},U(Ct,St);var kt={2:"touch",3:"pen",4:"mouse"};Ct.prototype.b=function(){Ct.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Et)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Nt="closure_listenable_"+(1e6*Math.random()|0),At=0;function Pt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++At,this.Y=this.Z=!1}function xt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Ot(t){this.src=t,this.a={},this.b=0}function Rt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=B(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(xt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Dt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Ot.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var s=Dt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):(e=new Pt(e,this.src,o,!!r,i),e.Z=n,t.push(e)),e};var Lt="closure_lm_"+(1e6*Math.random()|0),Mt={};function jt(t,e,n,r,i){if(r&&r.once)return Vt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)jt(t,e[o],n,r,i);return null}return n=Qt(n),t&&t[Nt]?t.va(e,n,P(r)?!!r.capture:!!r,i):Ft(t,e,n,!1,r,i)}function Ft(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=P(i)?!!i.capture:!!i;if(s&&!It)return null;var a=Gt(t);if(a||(t[Lt]=a=new Ot(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=Ut(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Tt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ht(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ut(){var t=zt,e=It?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function Vt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Vt(t,e[o],n,r,i);return null}return n=Qt(n),t&&t[Nt]?t.wa(e,n,P(r)?!!r.capture:!!r,i):Ft(t,e,n,!0,r,i)}function qt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)qt(t,e[o],n,r,i);else r=P(r)?!!r.capture:!!r,n=Qt(n),t&&t[Nt]?(t=t.c,e=String(e).toString(),e in t.a&&(o=t.a[e],n=Dt(o,n,r,i),-1<n&&(xt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Gt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Dt(e,n,r,i)),(n=-1<t?e[t]:null)&&Bt(n))}function Bt(t){if("number"!==typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Nt])Rt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ht(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Gt(e))?(Rt(n,t),0==n.b&&(n.src=null,e[Lt]=null)):xt(t)}}}function Ht(t){return t in Mt?Mt[t]:Mt[t]="on"+t}function Wt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Bt(t),n.call(r,e)}function zt(t,e){if(t.Y)return!0;if(!It){if(!e)t:{e=["window","event"];for(var n=k,r=0;r<e.length;r++)if(n=n[e[r]],null==n){e=null;break t}e=n}return e=new Ct(e,this),Wt(t,e)}return Wt(t,new Ct(e,this))}function Gt(t){return t=t[Lt],t instanceof Ot?t:null}var Kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qt(t){return"function"===typeof t?t:(t[Kt]||(t[Kt]=function(e){return t.handleEvent(e)}),t[Kt])}function Yt(){V.call(this),this.c=new Ot(this),this.J=this,this.C=null}function Xt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"===typeof e)e=new St(e,t);else if(e instanceof St)e.target=e.target||t;else{var i=e;e=new St(r,t),rt(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Zt(s,r,!0,e)&&i}if(s=e.a=t,i=Zt(s,r,!0,e)&&i,i=Zt(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.a=n[o],i=Zt(s,r,!1,e)&&i}function Zt(t,e,n,r){if(e=t.c.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Rt(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}U(Yt,V),Yt.prototype[Nt]=!0,T=Yt.prototype,T.addEventListener=function(t,e,n,r){jt(this,t,e,n,r)},T.removeEventListener=function(t,e,n,r){qt(this,t,e,n,r)},T.G=function(){if(Yt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)xt(n[r]);delete e.a[t],e.b--}}this.C=null},T.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},T.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Jt=k.JSON.stringify;function $t(){this.b=this.a=null}var te,ee=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new re}),(function(t){t.reset()}));function ne(){var t=ue,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function re(){this.next=this.b=this.a=null}function ie(t){k.setTimeout((function(){throw t}),0)}function oe(t,e){te||se(),ae||(te(),ae=!0),ue.add(t,e)}function se(){var t=k.Promise.resolve(void 0);te=function(){t.then(ce)}}$t.prototype.add=function(t,e){var n=ee.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},re.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},re.prototype.reset=function(){this.next=this.b=this.a=null};var ae=!1,ue=new $t;function ce(){for(var t;t=ne();){try{t.a.call(t.b)}catch(n){ie(n)}var e=ee;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}ae=!1}function he(t,e){Yt.call(this),this.b=t||1,this.a=e||k,this.f=M(this.Za,this),this.g=F()}function le(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function fe(t,e,n){if("function"===typeof t)n&&(t=M(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=M(t.handleEvent,t)}return 2147483647<Number(e)?-1:k.setTimeout(t,e||0)}function pe(t){t.a=fe((function(){t.a=null,t.c&&(t.c=!1,pe(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}U(he,Yt),T=he.prototype,T.aa=!1,T.M=null,T.Za=function(){if(this.aa){var t=F()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Xt(this,"tick"),this.aa&&(le(this),this.start()))}},T.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=F())},T.G=function(){he.X.G.call(this),le(this),delete this.a};var de=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return I(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:pe(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(k.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(V);function ve(t){V.call(this),this.b=t,this.a={}}U(ve,V);var ge=[];function ye(t,e,n,r){Array.isArray(n)||(n&&(ge[0]=n.toString()),n=ge);for(var i=0;i<n.length;i++){var o=jt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function me(t){tt(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Bt(t)}),t),t.a={}}function be(){this.a=!0}function _e(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");s=2<=l.length&&"type"==l[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}function we(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}function Ie(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+Te(t,n)+(r?" "+r:"")}))}function Ee(t,e){t.info((function(){return"TIMEOUT: "+e}))}function Te(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Jt(n)}catch(a){return e}}ve.prototype.G=function(){ve.X.G.call(this),me(this)},ve.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},be.prototype.info=function(){};var Se={},Ce=null;function ke(){return Ce=Ce||new Yt}function Ne(t){St.call(this,Se.Fa,t)}function Ae(t){var e=ke();Xt(e,new Ne(e,t))}function Pe(t,e){St.call(this,Se.STAT_EVENT,t),this.stat=e}function xe(t){var e=ke();Xt(e,new Pe(e,t))}function Oe(t){St.call(this,Se.Ga,t)}function Re(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return k.setTimeout((function(){t()}),e)}Se.Fa="serverreachability",U(Ne,St),Se.STAT_EVENT="statevent",U(Pe,St),Se.Ga="timingevent",U(Oe,St);var De={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Le={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Me(){}function je(t){var e;return(e=t.a)||(e=t.a={}),e}function Fe(){}Me.prototype.a=null;var Ue,Ve={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function qe(){St.call(this,"d")}function Be(){St.call(this,"c")}function He(){}function We(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ve(this),this.P=ze,t=ht?125:void 0,this.R=new he(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}U(qe,St),U(Be,St),U(He,Me),Ue=new He;var ze=45e3,Ge={},Ke={};function Qe(t,e,n){t.H=1,t.i=bn(pn(e)),t.j=n,t.I=!0,Ye(t,null)}function Ye(t,e){t.u=F(),Je(t),t.l=pn(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Dn(n.b,"t",r),t.D=0,t.a=Rr(t.g,t.g.C?e:null),0<t.O&&(t.F=new de(M(t.Ca,t,t.a),t.O)),ye(t.J,t.a,"readystatechange",t.Xa),e=t.B?et(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ae(1),_e(t.c,t.m,t.l,t.f,t.S,t.j)}function Xe(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ze(t,n);if(i==Ke){4==e&&(t.h=4,xe(14),r=!1),Ie(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ge){t.h=4,xe(15),Ie(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Ie(t.c,t.f,i,null),rn(t,i)}4==e&&0==n.length&&(t.h=1,xe(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,e=t.g,e.a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Sr(e),e.F=!0,xe(11))):(Ie(t.c,t.f,n,"[Invalid Chunked Response]"),nn(t),en(t))}function Ze(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Ke:(n=Number(e.substring(n,r)),isNaN(n)?Ge:(r+=1,r+n>e.length?Ke:(e=e.substr(r,n),t.D=r+n,e)))}function Je(t){t.T=F()+t.P,$e(t,t.P)}function $e(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Re(M(t.Va,t),e)}function tn(t){t.o&&(k.clearTimeout(t.o),t.o=null)}function en(t){0==t.g.v||t.A||Nr(t.g,t)}function nn(t){tn(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,le(t.R),me(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function rn(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Bn(n.b,t)))if(n.I=t.N,!t.C&&Bn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Op){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;kr(n),vr(n)}Tr(n),xe(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Re(M(n.Sa,n),6e3));if(1>=qn(n.b)&&n.ea){try{n.ea()}catch(Op){}n.ea=void 0}}else Pr(n,11)}else if((t.C||n.a==t)&&kr(n),!K(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"===typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=u.b;!l.a&&(X(h,"spdy")||X(h,"quic")||X(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(Hn(l,l.b),l.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,mn(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=F()-t.u,n.c.info("Handshake RTT: "+n.N+"ms")),u=n;var p=t;if(u.la=Or(u,u.C?u.ga:null,u.fa),p.C){Wn(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(tn(d),Je(d)),u.a=p}else Er(u);0<n.g.length&&mr(n)}else"stop"!=i[0]&&"close"!=i[0]||Pr(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Pr(n,7):dr(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Ae(4)}catch(Op){}}function on(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"===typeof t)return t.split("");if(A(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function sn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(A(t)||"string"===typeof t)H(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(A(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=on(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function an(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof an)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function un(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];cn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],cn(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function cn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}T=We.prototype,T.setTimeout=function(t){this.P=t},T.Xa=function(t){t=t.target;var e=this.F;e&&3==cr(t)?e.f():this.Ca(t)},T.Ca=function(t){try{if(t==this.a)t:{var e=cr(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!ht&&!this.a.$())){this.A||4!=e||7==n||Ae(8==n||0>=r?3:2),tn(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,we(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,xe(12),nn(this),en(this);break t}Ie(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,rn(this,u)}this.I?(Xe(this,e,o),ht&&this.b&&3==e&&(ye(this.J,this.R,"tick",this.Wa),this.R.start())):(Ie(this.c,this.f,o,null),rn(this,o)),4==e&&nn(this),this.b&&!this.A&&(4==e?Nr(this.g,this):(this.b=!1,Je(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,xe(12)):(this.h=0,xe(13)),nn(this),en(this)}}}catch(c){}},T.Wa=function(){if(this.a){var t=cr(this.a),e=this.a.$();this.D<e.length&&(tn(this),Xe(this,t,e),this.b&&4!=t&&Je(this))}},T.cancel=function(){this.A=!0,nn(this)},T.Va=function(){this.o=null;var t=F();0<=t-this.T?(Ee(this.c,this.l),2!=this.H&&(Ae(3),xe(17)),nn(this),this.h=2,en(this)):$e(this,this.T-t)},T=an.prototype,T.K=function(){un(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},T.L=function(){return un(this),this.a.concat()},T.get=function(t,e){return cn(this.b,t)?this.b[t]:e},T.set=function(t,e){cn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},T.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var hn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ln(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function fn(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof fn){this.a=void 0!==e?e:t.a,dn(this,t.f),this.j=t.j,vn(this,t.c),gn(this,t.h),this.g=t.g,e=t.b;var n=new Pn;n.c=e.c,e.a&&(n.a=new an(e.a),n.b=e.b),yn(this,n),this.i=t.i}else t&&(n=String(t).match(hn))?(this.a=!!e,dn(this,n[1]||"",!0),this.j=In(n[2]||""),vn(this,n[3]||"",!0),gn(this,n[4]),this.g=In(n[5]||"",!0),yn(this,n[6]||"",!0),this.i=In(n[7]||"")):(this.a=!!e,this.b=new Pn(null,this.a))}function pn(t){return new fn(t)}function dn(t,e,n){t.f=n?In(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function vn(t,e,n){t.c=n?In(e,!0):e}function gn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function yn(t,e,n){e instanceof Pn?(t.b=e,Mn(t.b,t.a)):(n||(e=En(e,Nn)),t.b=new Pn(e,t.a))}function mn(t,e,n){t.b.set(e,n)}function bn(t){return mn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^F()).toString(36)),t}function _n(t){return t instanceof fn?pn(t):new fn(t,void 0)}function wn(t,e,n,r){var i=new fn(null,void 0);return t&&dn(i,t),e&&vn(i,e),n&&gn(i,n),r&&(i.g=r),i}function In(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function En(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Tn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Tn(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}fn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(En(e,Sn,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(En(e,Sn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.h,null!=n&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(En(n,"/"==n.charAt(0)?kn:Cn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",En(n,An)),t.join("")};var Sn=/[#\/\?@]/g,Cn=/[#\?:]/g,kn=/[#\?]/g,Nn=/[#\?@]/g,An=/#/g;function Pn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function xn(t){t.a||(t.a=new an,t.b=0,t.c&&ln(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function On(t,e){xn(t),e=Ln(t,e),cn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,cn(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&un(t)))}function Rn(t,e){return xn(t),e=Ln(t,e),cn(t.a.b,e)}function Dn(t,e,n){On(t,e),0<n.length&&(t.c=null,t.a.set(Ln(t,e),G(n)),t.b+=n.length)}function Ln(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Mn(t,e){e&&!t.f&&(xn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(On(this,e),Dn(this,n,t))}),t)),t.f=e}T=Pn.prototype,T.add=function(t,e){xn(this),this.c=null,t=Ln(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},T.forEach=function(t,e){xn(this),this.a.forEach((function(n,r){H(n,(function(n){t.call(e,n,r,this)}),this)}),this)},T.L=function(){xn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},T.K=function(t){xn(this);var e=[];if("string"===typeof t)Rn(this,t)&&(e=z(e,this.a.get(Ln(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=z(e,t[n])}return e},T.set=function(t,e){return xn(this),this.c=null,t=Ln(this,t),Rn(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},T.get=function(t,e){return t?(t=this.K(t),0<t.length?String(t[0]):e):e},T.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var jn=function(){function t(t,e){this.b=t,this.a=e}return t}();function Fn(t){this.g=t||Un,k.PerformanceNavigationTiming?(t=k.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(k.ia&&k.ia.ya&&k.ia.ya()&&k.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Un=10;function Vn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function qn(t){return t.b?1:t.a?t.a.size:0}function Bn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Hn(t,e){t.a?t.a.add(e):t.b=e}function Wn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function zn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=E(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return G(t.c)}function Gn(){}function Kn(){this.a=new Gn}function Qn(t,e,n){var r=n||"";try{sn(t,(function(t,n){var i=t;P(t)&&(i=Jt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Yn(t,e){var n=new be;if(k.Image){var r=new Image;r.onload=j(Xn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=j(Xn,n,r,"TestLoadImage: error",!1,e),r.onabort=j(Xn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=j(Xn,n,r,"TestLoadImage: timeout",!1,e),k.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}function Xn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Fn.prototype.cancel=function(){var t,e;if(this.c=zn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=E(this.a.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Gn.prototype.stringify=function(t){return k.JSON.stringify(t,void 0)},Gn.prototype.parse=function(t){return k.JSON.parse(t,void 0)};var Zn=k.JSON.parse;function Jn(t){Yt.call(this),this.headers=new an,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=$n,this.D=this.F=!1}U(Jn,Yt);var $n="",tr=/^https?$/i,er=["POST","PUT"];function nr(t){return ut&&bt(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function rr(t){return"content-type"==t.toLowerCase()}function ir(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,or(t),ar(t)}function or(t){t.u||(t.u=!0,Xt(t,"complete"),Xt(t,"error"))}function sr(t){if(t.b&&"undefined"!=typeof C&&(!t.s[1]||4!=cr(t)||2!=t.W()))if(t.l&&4==cr(t))fe(t.za,0,t);else if(Xt(t,"readystatechange"),4==cr(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(hn)[1]||null;if(!o&&k.self&&k.self.location){var s=k.self.location.protocol;o=s.substr(0,s.length-1)}i=!tr.test(o?o.toLowerCase():"")}e=i}var a=e;if(a)Xt(t,"complete"),Xt(t,"success");else{t.h=6;try{var u=2<cr(t)?t.a.statusText:""}catch(n){u=""}t.f=u+" ["+t.W()+"]",or(t)}}finally{ar(t)}}}function ar(t,e){if(t.a){ur(t);var n=t.a,r=t.s[0]?N:null;t.a=null,t.s=null,e||Xt(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function ur(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(k.clearTimeout(t.m),t.m=null)}function cr(t){return t.a?t.a.readyState:0}function hr(t){var e="";return tt(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function lr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=hr(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):mn(t,e,n))}function fr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function pr(t){this.pa=0,this.g=[],this.c=new be,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=fr("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=fr("baseRetryDelayMs",5e3,t),this.Ra=fr("retryDelaySeedMs",1e4,t),this.Ma=fr("forwardChannelMaxRetries",2,t),this.ma=fr("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Fn(t&&t.concurrentRequestLimit),this.ka=new Kn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function dr(t){if(gr(t),3==t.v){var e=t.R++,n=pn(t.B);mn(n,"SID",t.J),mn(n,"RID",e),mn(n,"TYPE","terminate"),wr(t,n),e=new We(t,t.c,e,void 0),e.H=2,e.i=bn(pn(n)),n=!1,k.navigator&&k.navigator.sendBeacon&&(n=k.navigator.sendBeacon(e.i.toString(),"")),!n&&k.Image&&((new Image).src=e.i,n=!0),n||(e.a=Rr(e.g,null),e.a.ba(e.i)),e.u=F(),Je(e)}xr(t)}function vr(t){t.a&&(Sr(t),t.a.cancel(),t.a=null)}function gr(t){vr(t),t.j&&(k.clearTimeout(t.j),t.j=null),kr(t),t.b.cancel(),t.h&&("number"===typeof t.h&&k.clearTimeout(t.h),t.h=null)}function yr(t,e){t.g.push(new jn(t.Oa++,e)),3==t.v&&mr(t)}function mr(t){Vn(t.b)||t.h||(t.h=!0,oe(t.Ba,t),t.u=0)}function br(t,e){return!(qn(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.g=e.s.concat(t.g),!0):!(1==t.v||2==t.v||t.u>=(t.La?0:t.Ma))&&(t.h=Re(M(t.Ba,t,e),Ar(t,t.u)),t.u++,!0))}function _r(t,e){var n;n=e?e.f:t.R++;var r=pn(t.B);mn(r,"SID",t.J),mn(r,"RID",n),mn(r,"AID",t.P),wr(t,r),t.i&&t.l&&lr(r,t.i,t.l),n=new We(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Ir(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Hn(t.b,n),Qe(n,r,e)}function wr(t,e){t.f&&sn({},(function(t,n){mn(e,n,t)}))}function Ir(t,e,n){n=Math.min(t.g.length,n);var r=t.f?M(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(c-=o,0>c)o=Math.max(0,i[u].b-100),a=!1;else try{Qn(h,s,"req"+c+"_")}catch(Ii){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Er(t){t.a||t.j||(t.T=1,oe(t.Aa,t),t.o=0)}function Tr(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=Re(M(t.Aa,t),Ar(t,t.o)),t.o++,!0)}function Sr(t){null!=t.s&&(k.clearTimeout(t.s),t.s=null)}function Cr(t){t.a=new We(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=pn(t.la);mn(e,"RID","rpc"),mn(e,"SID",t.J),mn(e,"CI",t.H?"0":"1"),mn(e,"AID",t.P),wr(t,e),mn(e,"TYPE","xmlhttp"),t.i&&t.l&&lr(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=bn(pn(e)),n.j=null,n.I=!0,Ye(n,t)}function kr(t){null!=t.m&&(k.clearTimeout(t.m),t.m=null)}function Nr(t,e){var n=null;if(t.a==e){kr(t),Sr(t),t.a=null;var r=2}else{if(!Bn(t.b,e))return;n=e.s,Wn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=F()-e.u;var i=t.u;r=ke(),Xt(r,new Oe(r,n,e,i)),mr(t)}else Er(t);else if(i=e.h,3==i||0==i&&0<t.I||!(1==r&&br(t,e)||2==r&&Tr(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Pr(t,5);break;case 4:Pr(t,10);break;case 3:Pr(t,6);break;default:Pr(t,2)}}function Ar(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Pr(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=M(t.Ya,t);n||(n=new fn("//www.google.com/images/cleardot.gif"),k.location&&"http"==k.location.protocol||dn(n,"https"),bn(n)),Yn(n.toString(),r)}else xe(2);t.v=0,t.f&&t.f.ra(e),xr(t),gr(t)}function xr(t){t.v=0,t.I=-1,t.f&&(0==zn(t.b).length&&0==t.g.length||(t.b.c.length=0,G(t.g),t.g.length=0),t.f.qa())}function Or(t,e,n){var r=_n(n);if(""!=r.c)e&&vn(r,e+"."+r.c),gn(r,r.h);else{var i=k.location;r=wn(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&tt(t.V,(function(t,e){mn(r,e,t)})),e=t.A,n=t.na,e&&n&&mn(r,e,n),mn(r,"VER",t.ha),wr(t,r),r}function Rr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return e=new Jn(t.Na),e.F=t.C,e}function Dr(){}function Lr(){if(ut&&!(10<=Number(wt)))throw Error("Environmental error: no available transport.")}function Mr(t,e){Yt.call(this),this.a=new pr(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!K(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!K(e)&&(this.a.A=e,t=this.b,null!==t&&e in t&&(t=this.b,e in t&&delete t[e])),this.f=new Ur(this)}function jr(t){qe.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Fr(){Be.call(this),this.status=1}function Ur(t){this.a=t}T=Jn.prototype,T.ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?je(this.H):je(Ue),this.a.onreadystatechange=M(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void ir(this,o)}t=n||"";var i=new an(this.headers);r&&sn(r,(function(t,e){i.set(e,t)})),r=W(i.L()),n=k.FormData&&t instanceof k.FormData,!(0<=B(er,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ur(this),0<this.o&&((this.D=nr(this.a))?(this.a.timeout=this.o,this.a.ontimeout=M(this.xa,this)):this.m=fe(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){ir(this,o)}},T.xa=function(){"undefined"!=typeof C&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Xt(this,"timeout"),this.abort(8))},T.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Xt(this,"complete"),Xt(this,"abort"),ar(this))},T.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),ar(this,!0)),Jn.X.G.call(this)},T.za=function(){this.j||(this.A||this.l||this.g?sr(this):this.Ua())},T.Ua=function(){sr(this)},T.W=function(){try{return 2<cr(this)?this.a.status:-1}catch(t){return-1}},T.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},T.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Zn(e)}},T.ua=function(){return this.h},T.Qa=function(){return"string"===typeof this.f?this.f:String(this.f)},T=pr.prototype,T.ha=8,T.v=1,T.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new We(this,this.c,t,void 0),r=this.l;if(this.O&&(r?(r=et(r),rt(r,this.O)):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(o="__data__"in o.a&&(o=o.a.__data__,"string"===typeof o)?o.length:void 0,void 0===o)break;if(e+=o,4096<e){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Ir(this,n,e),i=pn(this.B),mn(i,"RID",t),mn(i,"CVER",22),this.A&&mn(i,"X-HTTP-Session-Id",this.A),wr(this,i),this.i&&r&&lr(i,this.i,r),Hn(this.b,n),this.Ia&&mn(i,"TYPE","init"),this.da?(mn(i,"$req",e),mn(i,"SID","null"),n.U=!0,Qe(n,i,null)):Qe(n,i,e),this.v=2}}else 3==this.v&&(t?_r(this,t):0==this.g.length||Vn(this.b)||_r(this))},T.Aa=function(){if(this.j=null,Cr(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Re(M(this.Ta,this),t)}},T.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,xe(10),vr(this),Cr(this))},T.Sa=function(){null!=this.m&&(this.m=null,vr(this),Tr(this),xe(19))},T.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),xe(2)):(this.c.info("Failed to ping google.com"),xe(1))},T=Dr.prototype,T.ta=function(){},T.sa=function(){},T.ra=function(){},T.qa=function(){},T.Ja=function(){},Lr.prototype.a=function(t,e){return new Mr(t,e)},U(Mr,Yt),Mr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;xe(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Or(t,null,t.fa),mr(t)},Mr.prototype.close=function(){dr(this.a)},Mr.prototype.h=function(t){if("string"===typeof t){var e={};e.__data__=t,yr(this.a,e)}else this.l?(e={},e.__data__=Jt(t),yr(this.a,e)):yr(this.a,t)},Mr.prototype.G=function(){this.a.f=null,delete this.f,dr(this.a),delete this.a,Mr.X.G.call(this)},U(jr,qe),U(Fr,Be),U(Ur,Dr),Ur.prototype.ta=function(){Xt(this.a,"a")},Ur.prototype.sa=function(t){Xt(this.a,new jr(t))},Ur.prototype.ra=function(t){Xt(this.a,new Fr(t))},Ur.prototype.qa=function(){Xt(this.a,"b")},Lr.prototype.createWebChannel=Lr.prototype.a,Mr.prototype.send=Mr.prototype.h,Mr.prototype.open=Mr.prototype.g,Mr.prototype.close=Mr.prototype.close,De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,Le.COMPLETE="complete",Fe.EventType=Ve,Ve.OPEN="a",Ve.CLOSE="b",Ve.ERROR="c",Ve.MESSAGE="d",Yt.prototype.listen=Yt.prototype.va,Jn.prototype.listenOnce=Jn.prototype.wa,Jn.prototype.getLastError=Jn.prototype.Qa,Jn.prototype.getLastErrorCode=Jn.prototype.ua,Jn.prototype.getStatus=Jn.prototype.W,Jn.prototype.getResponseJson=Jn.prototype.Pa,Jn.prototype.getResponseText=Jn.prototype.$,Jn.prototype.send=Jn.prototype.ba;var Vr=function(){return new Lr},qr=function(){return ke()},Br=De,Hr=Le,Wr=Se,zr={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},Gr=Fe,Kr=Jn,Qr=(n(5505),n(7714),n(2801),n(1174),n(3112),n(2262),n(4506),n(3161),n(4363),n(5994),n(1532),n(9720),n(2479),n(4553),n(489),n(4765),n(6699),n(2023),n(4129),n(8264),n(5003),n(1299),n(2443),function(t,e){return Qr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Qr(t,e)});function Yr(t,e){function n(){this.constructor=t}Qr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Xr(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Zr(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function Jr(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var $r=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},ti=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),ei=new b.Yd("@firebase/firestore");function ni(){return ei.logLevel}function ri(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ei.logLevel<=b["in"].DEBUG){var r=e.map(si);ei.debug.apply(ei,Jr(["Firestore (8.2.9): "+t],r))}}function ii(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ei.logLevel<=b["in"].ERROR){var r=e.map(si);ei.error.apply(ei,Jr(["Firestore (8.2.9): "+t],r))}}function oi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ei.logLevel<=b["in"].WARN){var r=e.map(si);ei.warn.apply(ei,Jr(["Firestore (8.2.9): "+t],r))}}function si(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.9) INTERNAL ASSERTION FAILED: "+t;throw ii(e),new Error(e)}function ui(t,e){t||ai()}function ci(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=hi(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function fi(t,e){return t<e?-1:t>e?1:0}function pi(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function di(t){return t+"\0"}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vi=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.h,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return fi(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();vi.T=new vi("");var gi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},yi=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Yr(e,t),e}(Error),mi=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(vi.fromBase64String(e))}catch(e){throw new yi(gi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(vi.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),bi=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();bi.UNAUTHENTICATED=new bi(null),bi.R=new bi("google-credentials-uid"),bi.P=new bi("first-party-uid");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _i=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},wi=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(bi.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),Ii=function(){function t(t){var e=this;this.D=null,this.currentUser=bi.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then((function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.N!==e?(ri("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ui("string"==typeof n.accessToken),new _i(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return ui(null===t||"string"==typeof t),new bi(t)},t}(),Ei=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=bi.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Ti=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new Ei(this.F,this.O))},t.prototype.v=function(t){t(bi.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),Si=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();Si.q=-1;var Ci=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new yi(gi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new yi(gi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new yi(gi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new yi(gi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?fi(this.nanoseconds,t.nanoseconds):fi(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ki=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new Ci(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),Ni=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ai(),void 0===n?n=t.length-e:n>t.length-e&&ai(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return t=void 0===t?1:t,this.J(this.segments,this.offset+t,this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ai=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yr(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new yi(gi.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.ct=function(){return new e([])},e}(Ni),Pi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,xi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yr(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return Pi.test(t)},e.prototype.rt=function(){return this.it().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new yi(gi.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new yi(gi.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new yi(gi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new yi(gi.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(Ni),Oi=function(){function t(t){this.path=t}return t._t=function(e){return new t(Ai.ot(e))},t.ft=function(e){return new t(Ai.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ai.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return Ai.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new Ai(e.slice()))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Di(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Li(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mi=function(){function t(t){this.fields=t,t.sort(xi.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return pi(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),ji=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t){if(ui(!!t),"string"==typeof t){var e=0,n=ji.exec(t);if(ui(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ui(t.seconds),nanos:Ui(t.nanos)}}function Ui(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Vi(t){return"string"==typeof t?vi.fromBase64String(t):vi.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bi(t){var e=t.mapValue.fields.__previous_value__;return qi(e)?Bi(e):e}function Hi(t){var e=Fi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ci(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(t){return null==t}function zi(t){return 0===t&&1/t==-1/0}function Gi(t){return"number"==typeof t&&Number.isInteger(t)&&!zi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qi(t)?4:10:ai()}function Qi(t,e){var n=Ki(t);if(n!==Ki(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hi(t).isEqual(Hi(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Fi(t.timestampValue),r=Fi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Vi(t.bytesValue).isEqual(Vi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ui(t.geoPointValue.latitude)===Ui(e.geoPointValue.latitude)&&Ui(t.geoPointValue.longitude)===Ui(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ui(t.integerValue)===Ui(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ui(t.doubleValue),r=Ui(e.doubleValue);return n===r?zi(n)===zi(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return pi(t.arrayValue.values||[],e.arrayValue.values||[],Qi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ri(n)!==Ri(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Qi(n[i],r[i])))return!1;return!0}(t,e);default:return ai()}}function Yi(t,e){return void 0!==(t.values||[]).find((function(t){return Qi(t,e)}))}function Xi(t,e){var n=Ki(t),r=Ki(e);if(n!==r)return fi(n,r);switch(n){case 0:return 0;case 1:return fi(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Ui(t.integerValue||t.doubleValue),r=Ui(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Zi(t.timestampValue,e.timestampValue);case 4:return Zi(Hi(t),Hi(e));case 5:return fi(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Vi(t),r=Vi(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=fi(n[i],r[i]);if(0!==o)return o}return fi(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=fi(Ui(t.latitude),Ui(e.latitude));return 0!==n?n:fi(Ui(t.longitude),Ui(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Xi(n[i],r[i]);if(o)return o}return fi(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=fi(r[s],o[s]);if(0!==a)return a;var u=Xi(n[r[s]],i[o[s]]);if(0!==u)return u}return fi(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ai()}}function Zi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return fi(t,e);var n=Fi(t),r=Fi(e),i=fi(n.seconds,r.seconds);return 0!==i?i:fi(n.nanos,r.nanos)}function Ji(t){return $i(t)}function $i(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Fi(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Vi(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Oi.ft(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=$i(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+$i(t.fields[o])}return e+"}"}(t.mapValue):ai();var e,n}function to(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function eo(t){return!!t&&"integerValue"in t}function no(t){return!!t&&"arrayValue"in t}function ro(t){return!!t&&"nullValue"in t}function io(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function oo(t){return!!t&&"mapValue"in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var so=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!oo(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return Qi(this.proto,t.proto)},t}(),ao=function(){function t(t){void 0===t&&(t=so.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Ki(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(xi.ct(),this.At);return null!=t?new so(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=oo(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function uo(t){var e=[];return Di(t.fields||{},(function(t,n){var r=new xi([t]);if(oo(n)){var i=uo(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Mi(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var co=function(t,e){this.key=t,this.version=e},ho=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Yr(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(co),lo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Yr(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(co),fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yr(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(co),po=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function vo(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new po(t,e,n,r,i,o,s)}function go(t){var e=ci(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.rt()+t.op.toString()+Ji(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.rt()+t.dir}(t)})).join(","),Wi(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ao(e.startAt)),e.endAt&&(n+="|ub:",n+=Ao(e.endAt)),e.vt=n}return e.vt}function yo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!xo(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Qi(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ro(t.startAt,e.startAt)&&Ro(t.endAt,e.endAt)}function mo(t){return Oi.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var bo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Yr(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new _o(t,n,r):"array-contains"===n?new To(t,r):"in"===n?new So(t,r):"not-in"===n?new Co(t,r):"array-contains-any"===n?new ko(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new wo(t,n):new Io(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(Xi(e,this.value)):null!==e&&Ki(this.value)===Ki(e)&&this.Dt(Xi(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ai()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),_o=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Oi.ft(r.referenceValue),i}return Yr(e,t),e.prototype.matches=function(t){var e=Oi.H(t.key,this.key);return this.Dt(e)},e}(bo),wo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Eo("in",n),r}return Yr(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(bo),Io=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Eo("not-in",n),r}return Yr(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(bo);function Eo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Oi.ft(t.referenceValue)}))}var To=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Yr(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return no(e)&&Yi(e.arrayValue,this.value)},e}(bo),So=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Yr(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Yi(this.value.arrayValue,e)},e}(bo),Co=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Yr(e,t),e.prototype.matches=function(t){if(Yi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Yi(this.value.arrayValue,e)},e}(bo),ko=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Yr(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!no(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Yi(e.value.arrayValue,t)}))},e}(bo),No=function(t,e){this.position=t,this.before=e};function Ao(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ji(t)})).join(",")}var Po=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function xo(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Oo(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?Oi.H(Oi.ft(s.referenceValue),n.key):Xi(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ro(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Qi(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Do=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null,this.startAt,this.endAt};function Lo(t,e,n,r,i,o,s,a){return new Do(t,e,n,r,i,o,s,a)}function Mo(t){return new Do(t)}function jo(t){return!Wi(t.limit)&&"F"===t.limitType}function Fo(t){return!Wi(t.limit)&&"L"===t.limitType}function Uo(t){return t.xt.length>0?t.xt[0].field:null}function Vo(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function qo(t){return null!==t.collectionGroup}function Bo(t){var e=ci(t);if(null===e.Nt){e.Nt=[];var n=Vo(e),r=Uo(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new Po(n)),e.Nt.push(new Po(xi.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var a=s[o];e.Nt.push(a),a.field.ut()&&(i=!0)}if(!i){var u=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new Po(xi.ht(),u))}}}return e.Nt}function Ho(t){var e=ci(t);if(!e.$t)if("F"===e.limitType)e.$t=vo(e.path,e.collectionGroup,Bo(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Bo(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Po(o.field,s))}var a=e.endAt?new No(e.endAt.position,!e.endAt.before):null,u=e.startAt?new No(e.startAt.position,!e.startAt.before):null;e.$t=vo(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.$t}function Wo(t,e,n){return new Do(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zo(t,e){return yo(Ho(t),Ho(e))&&t.limitType===e.limitType}function Go(t){return go(Ho(t))+"|lt:"+t.limitType}function Ko(t){return"Query(target="+function(t){var e=t.path.rt();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.rt()+" "+e.op+" "+Ji(e.value);var e})).join(", ")+"]"),Wi(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.rt()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ao(t.startAt)),t.endAt&&(e+=", endAt: "+Ao(t.endAt)),"Target("+e+")"}(Ho(t))+"; limitType="+t.limitType+")"}function Qo(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.dt(t.collectionGroup)&&t.path.nt(n):Oi.wt(t.path)?t.path.isEqual(n):t.path.st(n)}(t,e)&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Oo(t.startAt,Bo(t),e))&&(!t.endAt||!Oo(t.endAt,Bo(t),e))}(t,e)}function Yo(t){return function(e,n){for(var r=!1,i=0,o=Bo(t);i<o.length;i++){var s=o[i],a=Xo(s,e,n);if(0!==a)return a;r=r||s.field.ut()}return 0}}function Xo(t,e,n){var r=t.field.ut()?Oi.H(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Xi(r,i):ai()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ai()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zo=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=ki.min()),void 0===o&&(o=ki.min()),void 0===s&&(s=vi.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zi(e)?"-0":e}}function $o(t){return{integerValue:""+t}}function ts(t,e){return Gi(e)?$o(e):Jo(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var es=function(){this.qt=void 0};function ns(t,e,n){return t instanceof os?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ss?as(t,e):t instanceof us?cs(t,e):function(t,e){var n=is(t,e),r=ls(n)+ls(t.Ut);return eo(n)&&eo(t.Ut)?$o(r):Jo(t.Qt,r)}(t,e)}function rs(t,e,n){return t instanceof ss?as(t,e):t instanceof us?cs(t,e):n}function is(t,e){return t instanceof hs?eo(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var os=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yr(e,t),e}(es),ss=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Yr(e,t),e}(es);function as(t,e){for(var n=fs(e),r=function(t){n.some((function(e){return Qi(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var us=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Yr(e,t),e}(es);function cs(t,e){for(var n=fs(e),r=function(t){n=n.filter((function(e){return!Qi(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var hs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return Yr(e,t),e}(es);function ls(t){return Ui(t.integerValue||t.doubleValue)}function fs(t){return no(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ps=function(t,e){this.field=t,this.transform=e},ds=function(t,e){this.version=t,this.transformResults=e},vs=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function gs(t,e){return void 0!==t.updateTime?e instanceof ho&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof ho}var ys=function(){};function ms(t,e,n){return t instanceof Es?function(t,e,n){var r=t.value;if(n.transformResults){var i=Cs(t.fieldTransforms,e,n.transformResults);r=Ns(t.fieldTransforms,r,i)}return new ho(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Ts?function(t,e,n){if(!gs(t.jt,e))return new fo(t.key,n.version);var r=Ss(t,e,n.transformResults?Cs(t.fieldTransforms,e,n.transformResults):[]);return new ho(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new lo(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function bs(t,e,n){return t instanceof Es?function(t,e,n){if(!gs(t.jt,e))return e;var r=t.value,i=ks(t.fieldTransforms,n,e);r=Ns(t.fieldTransforms,r,i);var o=Is(e);return new ho(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof Ts?function(t,e,n){if(!gs(t.jt,e))return e;var r=Is(e),i=Ss(t,e,ks(t.fieldTransforms,n,e));return new ho(t.key,r,i,{Vt:!0})}(t,e,n):function(t,e){return gs(t.jt,e)?new lo(t.key,ki.min()):e}(t,e)}function _s(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof ho?e.field(o.field):void 0,a=is(o.transform,s||null);null!=a&&(n=null==n?(new ao).set(o.field,a):n.set(o.field,a))}return n?n.Pt():null}(t.fieldTransforms,e)}function ws(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&pi(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ss&&e instanceof ss||t instanceof us&&e instanceof us?pi(t.elements,e.elements,Qi):t instanceof hs&&e instanceof hs?Qi(t.Ut,e.Ut):t instanceof os&&e instanceof os}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt))}function Is(t){return t instanceof ho?t.version:ki.min()}var Es=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return Yr(e,t),e}(ys),Ts=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return Yr(e,t),e}(ys);function Ss(t,e,n){var r;return r=function(t,e){var n=new ao(e);return t.Gt.fields.forEach((function(e){if(!e.et()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Pt()}(t,r=e instanceof ho?e.data():so.empty()),Ns(t.fieldTransforms,r,n)}function Cs(t,e,n){var r=[];ui(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof ho&&(a=e.field(o.field)),r.push(rs(s,a,n[i]))}return r}function ks(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof ho&&(u=n.field(s.field)),r.push(ns(a,u,e))}return r}function Ns(t,e,n){for(var r=new ao(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Pt()}var As,Ps,xs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return Yr(e,t),e}(ys),Os=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return Yr(e,t),e}(ys),Rs=function(t){this.count=t};function Ds(t){switch(t){case gi.OK:return ai();case gi.CANCELLED:case gi.UNKNOWN:case gi.DEADLINE_EXCEEDED:case gi.RESOURCE_EXHAUSTED:case gi.INTERNAL:case gi.UNAVAILABLE:case gi.UNAUTHENTICATED:return!1;case gi.INVALID_ARGUMENT:case gi.NOT_FOUND:case gi.ALREADY_EXISTS:case gi.PERMISSION_DENIED:case gi.FAILED_PRECONDITION:case gi.ABORTED:case gi.OUT_OF_RANGE:case gi.UNIMPLEMENTED:case gi.DATA_LOSS:return!0;default:return ai()}}function Ls(t){if(void 0===t)return ii("GRPC error has no .code"),gi.UNKNOWN;switch(t){case As.OK:return gi.OK;case As.CANCELLED:return gi.CANCELLED;case As.UNKNOWN:return gi.UNKNOWN;case As.DEADLINE_EXCEEDED:return gi.DEADLINE_EXCEEDED;case As.RESOURCE_EXHAUSTED:return gi.RESOURCE_EXHAUSTED;case As.INTERNAL:return gi.INTERNAL;case As.UNAVAILABLE:return gi.UNAVAILABLE;case As.UNAUTHENTICATED:return gi.UNAUTHENTICATED;case As.INVALID_ARGUMENT:return gi.INVALID_ARGUMENT;case As.NOT_FOUND:return gi.NOT_FOUND;case As.ALREADY_EXISTS:return gi.ALREADY_EXISTS;case As.PERMISSION_DENIED:return gi.PERMISSION_DENIED;case As.FAILED_PRECONDITION:return gi.FAILED_PRECONDITION;case As.ABORTED:return gi.ABORTED;case As.OUT_OF_RANGE:return gi.OUT_OF_RANGE;case As.UNIMPLEMENTED:return gi.UNIMPLEMENTED;case As.DATA_LOSS:return gi.DATA_LOSS;default:return ai()}}(Ps=As||(As={}))[Ps.OK=0]="OK",Ps[Ps.CANCELLED=1]="CANCELLED",Ps[Ps.UNKNOWN=2]="UNKNOWN",Ps[Ps.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ps[Ps.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ps[Ps.NOT_FOUND=5]="NOT_FOUND",Ps[Ps.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ps[Ps.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ps[Ps.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ps[Ps.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ps[Ps.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ps[Ps.ABORTED=10]="ABORTED",Ps[Ps.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ps[Ps.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ps[Ps.INTERNAL=13]="INTERNAL",Ps[Ps.UNAVAILABLE=14]="UNAVAILABLE",Ps[Ps.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ms=function(){function t(t,e){this.H=t,this.root=e||Fs.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,Fs.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,Fs.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Xt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new js(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new js(this.root,t,this.H,!1)},t.prototype.ne=function(){return new js(this.root,null,this.H,!0)},t.prototype.se=function(t){return new js(this.root,t,this.H,!0)},t}(),js=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),Fs=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw ai();if(this.right.le())throw ai();var t=this.left.Ie();if(t!==this.right.Ie())throw ai();return t+(this.le()?0:1)},t}();Fs.EMPTY=null,Fs.RED=!0,Fs.Ht=!1,Fs.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ai()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ai()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ai()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ai()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ai()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new Fs(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Us=function(){function t(t){this.H=t,this.data=new Ms(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt((function(e,n){return t(e),!1}))},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new Vs(this.data.te())},t.prototype.ee=function(t){return new Vs(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),Vs=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),qs=new Ms(Oi.H);function Bs(){return qs}function Hs(){return Bs()}var Ws=new Ms(Oi.H);function zs(){return Ws}var Gs=new Ms(Oi.H);function Ks(){return Gs}var Qs=new Us(Oi.H);function Ys(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Qs,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Xs=new Us(fi);function Zs(){return Xs}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Js=function(){function t(t){this.H=t?function(e,n){return t(e,n)||Oi.H(e.key,n.key)}:function(t,e){return Oi.H(t.key,e.key)},this.ge=zs(),this.Ve=new Ms(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),$s=function(){function t(){this.be=new Ms(Oi.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):ai():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt((function(e,n){t.push(n)})),t},t}(),ta=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}return t.Ne=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Js.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&zo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ea=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,na.Le(e,n)),new t(ki.min(),r,Zs(),Bs(),Ys())},t}(),na=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(vi.T,n,Ys(),Ys(),Ys())},t}(),ra=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},ia=function(t,e){this.targetId=t,this.je=e},oa=function(t,e,n,r){void 0===n&&(n=vi.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},sa=function(){function t(){this.Ge=0,this.ze=ca(),this.He=vi.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=Ys(),e=Ys(),n=Ys();return this.ze.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ai()}})),new na(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=ca()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),aa=function(){function t(t){this.un=t,this.hn=new Map,this.ln=Bs(),this._n=ua(),this.fn=new Us(fi)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof ho?this.wn(r,t.We):t.We instanceof lo&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.En(r,t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,(function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:ai()}}))},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach((function(t,r){n.An(r)&&e(r)}))},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(mo(i))if(0===n){var o=new Oi(i.path);this.En(e,o,new lo(o,ki.min()))}else ui(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach((function(r,i){var o=e.yn(i);if(o){if(r.Be&&mo(o.target)){var s=new Oi(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new lo(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}}));var r=Ys();this._n.forEach((function(t,n){var i=!0;n.Ae((function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new ea(t,n,this.fn,this.ln,r);return this.ln=Bs(),this._n=ua(),this.fn=new Us(fi),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new sa,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new Us(fi),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||ri("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new sa),this.un.vn(t).forEach((function(n){e.En(t,n,null)}))},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(){return new Ms(Oi.H)}function ca(){return new Ms(Oi.H)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ha={asc:"ASCENDING",desc:"DESCENDING"},la={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fa=function(t,e){this.t=t,this.Bt=e};function pa(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function da(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function va(t,e){return pa(t,e.j())}function ga(t){return ui(!!t),ki.K(function(t){var e=Fi(t);return new Ci(e.seconds,e.nanos)}(t))}function ya(t,e){return function(t){return new Ai(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).rt()}function ma(t){var e=Ai.ot(t);return ui(Ba(e)),e}function ba(t,e){return ya(t.t,e.path)}function _a(t,e){var n=ma(e);if(n.get(1)!==t.t.projectId)throw new yi(gi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new yi(gi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new Oi(Ta(n))}function wa(t,e){return ya(t.t,e)}function Ia(t){var e=ma(t);return 4===e.length?Ai.ct():Ta(e)}function Ea(t){return new Ai(["projects",t.t.projectId,"databases",t.t.database]).rt()}function Ta(t){return ui(t.length>4&&"documents"===t.get(4)),t.Y(5)}function Sa(t,e,n){return{name:ba(t,e),fields:n.proto.mapValue.fields}}function Ca(t,e,n){var r=_a(t,e.name),i=ga(e.updateTime),o=new so({mapValue:{fields:e.fields}});return new ho(r,i,o,{hasCommittedMutations:!!n})}function ka(t,e){var n;if(e instanceof Es)n={update:Sa(t,e.key,e.value)};else if(e instanceof xs)n={delete:ba(t,e.key)};else if(e instanceof Ts)n={update:Sa(t,e.key,e.data),updateMask:qa(e.Gt)};else{if(!(e instanceof Os))return ai();n={verify:ba(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof os)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof ss)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof us)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof hs)return{fieldPath:e.field.rt(),increment:n.Ut};throw ai()}(0,t)}))),e.jt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:va(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ai()}(t,e.jt)),n}function Na(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?vs.updateTime(ga(t.updateTime)):void 0!==t.exists?vs.exists(t.exists):vs.Kt()}(e.currentDocument):vs.Kt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)ui("REQUEST_TIME"===e.setToServerValue),n=new os;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ss(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new us(i)}else"increment"in e?n=new hs(t,e.increment):ai();var o=xi.lt(e.fieldPath);return new ps(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=_a(t,e.update.name),o=new so({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new Mi(e.map((function(t){return xi.lt(t)})))}(e.updateMask);return new Ts(i,o,s,n,r)}return new Es(i,o,n,r)}if(e.delete){var a=_a(t,e.delete);return new xs(a,n)}if(e.verify){var u=_a(t,e.verify);return new Os(u,n)}return ai()}function Aa(t,e){return{documents:[wa(t,e.path)]}}function Pa(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=wa(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=wa(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(io(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NAN"}};if(ro(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(io(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NOT_NAN"}};if(ro(t.value))return{unaryFilter:{field:ja(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ja(t.field),op:Ma(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:ja(t.field),direction:La(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Bt||Wi(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Ra(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ra(e.endAt)),n}function xa(t){var e=Ia(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ui(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Oa(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Po(Fa(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Wi(e="object"==(0,m.Z)(t)?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Da(n.startAt));var h=null;return n.endAt&&(h=Da(n.endAt)),Lo(e,i,a,s,u,"F",c,h)}function Oa(t){return t?void 0!==t.unaryFilter?[Va(t)]:void 0!==t.fieldFilter?[Ua(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Oa(t)})).reduce((function(t,e){return t.concat(e)})):ai():[]}function Ra(t){return{before:t.before,values:t.position}}function Da(t){var e=!!t.before,n=t.values||[];return new No(n,e)}function La(t){return ha[t]}function Ma(t){return la[t]}function ja(t){return{fieldPath:t.rt()}}function Fa(t){return xi.lt(t.fieldPath)}function Ua(t){return bo.create(Fa(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ai()}}(t.fieldFilter.op),t.fieldFilter.value)}function Va(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Fa(t.unaryFilter.field);return bo.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Fa(t.unaryFilter.field);return bo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Fa(t.unaryFilter.field);return bo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Fa(t.unaryFilter.field);return bo.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ai()}}function qa(t){var e=[];return t.fields.forEach((function(t){return e.push(t.rt())})),{fieldPaths:e}}function Ba(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ha=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Wa=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t((function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)}),(function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&ai(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t((function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}}))},t.prototype.On=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Fn=function(e,n){return e?this.kn((function(){return e(n)})):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Mn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Mn(r)},t}(),za=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new Ha,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new Qa(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=$a(e.target.error);n.Bn.reject(new Qa(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Qa(n,e)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(ri("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Xa(e)},t}(),Ga=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn((0,_.z$)())&&ii("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return ri("SimpleDb","Removing database:",t),Za(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=(0,_.z$)(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t={NODE_ENV:"production",BASE_URL:"/"})||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return Xr(this,void 0,void 0,(function(){var e,n=this;return Zr(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(ri("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Qa(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new yi(gi.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Qa(t,n))},i.onupgradeneeded=function(t){ri("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Un.Jn(e,i.transaction,t.oldVersion,n.version).next((function(){ri("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}}))}))},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Xr(this,void 0,void 0,(function(){var i,o,s,a,u;return Zr(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,h;return Zr(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,a.Hn(t)];case 2:return a.db=l.sent(),e=za.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Wa.reject(t)})).On(),u={},s.catch((function(){})),[4,e.qn];case 3:return[2,(u.value=(l.sent(),s),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,ri("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),a.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==(0,m.Z)(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ka=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return Za(this.Zn.delete())},t}(),Qa=function(t){function e(e,n){var r=this;return(r=t.call(this,gi.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Yr(e,t),e}(yi);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(t){return"IndexedDbTransactionError"===t.name}var Xa=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(ri("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(ri("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Za(n)},t.prototype.add=function(t){return ri("SimpleDb","ADD",this.store.name,t,t),Za(this.store.add(t))},t.prototype.get=function(t){var e=this;return Za(this.store.get(t)).next((function(n){return void 0===n&&(n=null),ri("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return ri("SimpleDb","DELETE",this.store.name,t),Za(this.store.delete(t))},t.prototype.count=function(){return ri("SimpleDb","COUNT",this.store.name),Za(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.cs=function(t,e){ri("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,(function(t,e,n){return n.delete()}))},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new Wa((function(n,r){e.onerror=function(t){var e=$a(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.os=function(t,e){var n=[];return new Wa((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Ka(i),s=e(i.primaryKey,i.value,o);if(s instanceof Wa){var a=s.catch((function(t){return o.done(),Wa.reject(t)}));n.push(a)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}})).next((function(){return Wa.Mn(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Za(t){return new Wa((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=$a(t.target.error);n(e)}}))}var Ja=!1;function $a(t){var e=Ga.Qn((0,_.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new yi("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ja||(Ja=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tu=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new Ha,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch((function(t){}))}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout((function(){return e.As()}),t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new yi(gi.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps((function(){return null!==t.Is?(t.clearTimeout(),t.op().then((function(e){return t.Es.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function eu(t,e){if(ii("AsyncQueue",e+": "+t),Ya(t))return new yi(gi.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ru=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=su(e)),e=ou(t.get(n),e);return su(e)}function ou(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function su(t){return t+""}function au(t){var e=t.length;if(ui(e>=2),2===e)return ui(""===t.charAt(0)&&""===t.charAt(1)),Ai.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&ai(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:ai()}o=s+2}return new Ai(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uu=function(t,e){this.seconds=t,this.nanoseconds=e},cu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};cu.store="owner",cu.key="owner";var hu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};hu.store="mutationQueues",hu.keyPath="userId";var lu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};lu.store="mutations",lu.keyPath="batchId",lu.userMutationsIndex="userMutationsIndex",lu.userMutationsKeyPath=["userId","batchId"];var fu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,iu(e)]},t.key=function(t,e,n){return[t,iu(e),n]},t}();fu.store="documentMutations",fu.PLACEHOLDER=new fu;var pu=function(t,e){this.path=t,this.readTime=e},du=function(t,e){this.path=t,this.version=e},vu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};vu.store="remoteDocuments",vu.readTimeIndex="readTimeIndex",vu.readTimeIndexPath="readTime",vu.collectionReadTimeIndex="collectionReadTimeIndex",vu.collectionReadTimeIndexPath=["parentPath","readTime"];var gu=function(t){this.byteSize=t};gu.store="remoteDocumentGlobal",gu.key="remoteDocumentGlobalKey";var yu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};yu.store="targets",yu.keyPath="targetId",yu.queryTargetsIndexName="queryTargetsIndex",yu.queryTargetsKeyPath=["canonicalId","targetId"];var mu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};mu.store="targetDocuments",mu.keyPath=["targetId","path"],mu.documentTargetsIndex="documentTargetsIndex",mu.documentTargetsKeyPath=["path","targetId"];var bu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};bu.key="targetGlobalKey",bu.store="targetGlobal";var _u=function(t,e){this.collectionId=t,this.parent=e};_u.store="collectionParents",_u.keyPath=["collectionId","parent"];var wu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};wu.store="clientMetadata",wu.keyPath="clientId";var Iu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Iu.store="bundles",Iu.keyPath="bundleId";var Eu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Eu.store="namedQueries",Eu.keyPath="name";var Tu=Jr(Jr(Jr(Jr([hu.store,lu.store,fu.store,vu.store,yu.store,cu.store,bu.store,mu.store],[wu.store]),[gu.store]),[_u.store]),[Iu.store,Eu.store]),Su=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return Yr(e,t),e}(ru);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t,e){var n=ci(t);return Ga.zn(n.ps,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ku=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=ms(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=bs(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=bs(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ys())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&pi(this.mutations,t.mutations,(function(t,e){return ws(t,e)}))&&pi(this.baseMutations,t.baseMutations,(function(t,e){return ws(t,e)}))},t}(),Nu=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){ui(e.mutations.length===r.length);for(var i=Ks(),o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Au=function(t){this.Fs=t};function Pu(t,e){if(e.document)return Ca(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Oi.Et(e.noDocument.path),r=Lu(e.noDocument.readTime);return new lo(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Oi.Et(e.unknownDocument.path);return r=Lu(e.unknownDocument.version),new fo(i,r)}return ai()}function xu(t,e,n){var r=Ou(n),i=e.key.path.X().it();if(e instanceof ho){var o=function(t,e){return{name:ba(t,e.key),fields:e.bt().mapValue.fields,updateTime:pa(t,e.version.j())}}(t.Fs,e),s=e.hasCommittedMutations;return new vu(null,null,o,s,r,i)}if(e instanceof lo){var a=e.key.path.it(),u=Du(e.version);return s=e.hasCommittedMutations,new vu(null,new pu(a,u),null,s,r,i)}if(e instanceof fo){var c=e.key.path.it(),h=Du(e.version);return new vu(new du(c,h),null,null,!0,r,i)}return ai()}function Ou(t){var e=t.j();return[e.seconds,e.nanoseconds]}function Ru(t){var e=new Ci(t[0],t[1]);return ki.K(e)}function Du(t){var e=t.j();return new uu(e.seconds,e.nanoseconds)}function Lu(t){var e=new Ci(t.seconds,t.nanoseconds);return ki.K(e)}function Mu(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Na(t.Fs,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return Na(t.Fs,e)})),a=Ci.fromMillis(e.localWriteTimeMs);return new ku(e.batchId,a,n,s)}function ju(t){var e,n,r=Lu(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Lu(t.lastLimboFreeSnapshotVersion):ki.min();return void 0!==t.query.documents?(ui(1===(n=t.query).documents.length),e=Ho(Mo(Ia(n.documents[0])))):e=function(t){return Ho(xa(t))}(t.query),new Zo(e,t.targetId,0,t.lastListenSequenceNumber,r,i,vi.fromBase64String(t.resumeToken))}function Fu(t,e){var n,r=Du(e.Ot),i=Du(e.lastLimboFreeSnapshotVersion);n=mo(e.target)?Aa(t.Fs,e.target):Pa(t.Fs,e.target);var o=e.resumeToken.toBase64();return new yu(e.targetId,go(e.target),r,o,e.sequenceNumber,i,n)}function Uu(t){var e=xa({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Wo(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vu=function(){function t(){}return t.prototype.Os=function(t,e){return qu(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Lu(e.createTime),version:e.version};var e}))},t.prototype.ks=function(t,e){return qu(t).put({bundleId:(n=e).id,createTime:Du(ga(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return Bu(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Uu(e.bundledQuery),readTime:Lu(e.readTime)};var e}))},t.prototype.Ls=function(t,e){return Bu(t).put(function(t){return{name:t.name,readTime:Du(ga(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function qu(t){return Cu(t,Iu.store)}function Bu(t){return Cu(t,Eu.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hu=function(){function t(){this.Bs=new Wu}return t.prototype.qs=function(t,e){return this.Bs.add(e),Wa.resolve()},t.prototype.Us=function(t,e){return Wa.resolve(this.Bs.getEntries(e))},t}(),Wu=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new Us(Ai.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Us(Ai.H)).it()},t}(),zu=function(){function t(){this.Qs=new Wu}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs((function(){n.Qs.add(e)}));var o={collectionId:r,parent:iu(i)};return Gu(t).put(o)}return Wa.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[di(e),""],!1,!0);return Gu(t).rs(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(au(o.parent))}return n}))},t}();function Gu(t){return Cu(t,_u.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ku={Ks:!1,Ws:0,js:0,Gs:0},Qu=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(e){if(t.code!==gi.FAILED_PRECONDITION||t.message!==nu)throw t;return ri("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qu.Xs=10,Qu.Zs=1e3,Qu.ti=new Qu(41943040,Qu.Xs,Qu.Zs),Qu.ei=new Qu(-1,0,0);var Xu=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.si(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Di(this.ii,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.et=function(){return Li(this.ii)},t}(),Zu=function(){function t(){this.ri=new Xu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:ki.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?Wa.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(t,e,n){var r=t.store(lu.store),i=t.store(fu.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.hs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){ui(1===a)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=fu.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Wa.Mn(o).next((function(){return c}))}function $u(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ai();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tc=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return ui(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nc(t).hs({index:lu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Ri=function(t,e,n,r){var i=this,o=rc(t),s=nc(t);return s.add({}).next((function(a){ui("number"==typeof a);for(var u=new ku(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return ka(t.Fs,e)})),i=n.mutations.map((function(e){return ka(t.Fs,e)}));return new lu(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,u),h=[],l=new Us((function(t,e){return fi(t.rt(),e.rt())})),f=0,p=r;f<p.length;f++){var d=p[f],v=fu.key(i.userId,d.key.path,a);l=l.add(d.key.path.X()),h.push(s.put(c)),h.push(o.put(v,fu.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ei.qs(t,e))})),t.gs((function(){i.Ii[a]=u.keys()})),Wa.Mn(h).next((function(){return u}))}))},t.prototype.Pi=function(t,e){var n=this;return nc(t).get(e).next((function(t){return t?(ui(t.userId===n.userId),Mu(n.Qt,t)):null}))},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?Wa.resolve(this.Ii[e]):this.Pi(t,e).next((function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null}))},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return nc(t).hs({index:lu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(ui(e.batchId>=r),o=Mu(n.Qt,e)),i.done()})).next((function(){return o}))},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return nc(t).hs({index:lu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nc(t).rs(lu.userMutationsIndex,n).next((function(t){return t.map((function(t){return Mu(e.Qt,t)}))}))},t.prototype.bi=function(t,e){var n=this,r=fu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return rc(t).hs({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=au(u);if(a===n.userId&&e.path.isEqual(h))return nc(t).get(c).next((function(t){if(!t)throw ai();ui(t.userId===n.userId),o.push(Mu(n.Qt,t))}));s.done()})).next((function(){return o}))},t.prototype.vi=function(t,e){var n=this,r=new Us(fi),i=[];return e.forEach((function(e){var o=fu.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=rc(t).hs({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=au(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Wa.Mn(i).next((function(){return n.Si(t,r)}))},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=fu.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Us(fi);return rc(t).hs({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=au(u);s===n.userId&&r.nt(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Si(t,a)}))},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(nc(t).get(e).next((function(t){if(null===t)throw ai();ui(t.userId===n.userId),r.push(Mu(n.Qt,t))})))})),Wa.Mn(i).next((function(){return r}))},t.prototype.Ci=function(t,e){var n=this;return Ju(t.ps,this.userId,e).next((function(r){return t.gs((function(){n.xi(e.batchId)})),Wa.forEach(r,(function(e){return n.Ti.Ni(t,e)}))}))},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next((function(n){if(!n)return Wa.resolve();var r=IDBKeyRange.lowerBound(fu.prefixForUser(e.userId)),i=[];return rc(t).hs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=au(t[1]);i.push(o)}else r.done()})).next((function(){ui(0===i.length)}))}))},t.prototype.Fi=function(t,e){return ec(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return ic(t).get(this.userId).next((function(t){return t||new hu(e.userId,-1,"")}))},t}();function ec(t,e,n){var r=fu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return rc(t).hs({range:o,us:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function nc(t){return Cu(t,lu.store)}function rc(t){return Cu(t,fu.store)}function ic(t){return Cu(t,hu.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oc=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),sc=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next((function(n){var r=new oc(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Qi=function(t){return this.qi(t).next((function(t){return ki.K(new Ci(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ki=function(t){return this.qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)}))},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next((function(){return n.qi(t).next((function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)}))}))},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next((function(){return ac(t).delete(e.targetId)})).next((function(){return n.qi(t)})).next((function(e){return ui(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)}))},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return ac(t).hs((function(s,a){var u=ju(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Ji(t,u)))})).next((function(){return Wa.Mn(o)})).next((function(){return i}))},t.prototype.In=function(t,e){return ac(t).hs((function(t,n){var r=ju(n);e(r)}))},t.prototype.qi=function(t){return uc(t).get(bu.key).next((function(t){return ui(null!==t),t}))},t.prototype.Ui=function(t,e){return uc(t).put(bu.key,e)},t.prototype.Gi=function(t,e){return ac(t).put(Fu(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next((function(t){return t.targetCount}))},t.prototype.tr=function(t,e){var n=go(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ac(t).hs({range:r,index:yu.queryTargetsIndexName},(function(t,n,r){var o=ju(n);yo(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.er=function(t,e,n){var r=this,i=[],o=cc(t);return e.forEach((function(e){var s=iu(e.path);i.push(o.put(new mu(n,s))),i.push(r.Ti.nr(t,n,e))})),Wa.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=cc(t);return Wa.forEach(e,(function(e){var o=iu(e.path);return Wa.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])}))},t.prototype.Yi=function(t,e){var n=cc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=cc(t),i=Ys();return r.hs({range:n,us:!0},(function(t,e,n){var r=au(t[1]),o=new Oi(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Fi=function(t,e){var n=iu(e.path),r=IDBKeyRange.bound([n],[di(n)],!1,!0),i=0;return cc(t).hs({index:mu.documentTargetsIndex,us:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Sn=function(t,e){return ac(t).get(e).next((function(t){return t?ju(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(t){return Cu(t,yu.store)}function uc(t){return Cu(t,bu.store)}function cc(t){return Cu(t,mu.store)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=fi(n,i);return 0===s?fi(r,o):s}var lc=function(){function t(t){this.cr=t,this.buffer=new Us(hc),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();hc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),fc=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;ri("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,(function(){return Xr(e,void 0,void 0,(function(){var e;return Zr(this,(function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return Ya(e=n.sent())?(ri("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Yu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),pc=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Pr=function(t,e){var n=this;if(0===e)return Wa.resolve(Si.q);var r=new lc(e);return this.mr.In(t,(function(t){return r.hr(t.sequenceNumber)})).next((function(){return n.mr.yr(t,(function(t){return r.hr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(ri("LruGarbageCollector","Garbage collection skipped; disabled"),Wa.resolve(Ku)):this.pr(t).next((function(r){return r<n.params.zs?(ri("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),Ku):n.br(t,e)}))},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.Ar(t,this.params.Hs).next((function(e){return e>c.params.Js?(ri("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Xi(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.gr(t,n)})).next((function(t){return u=Date.now(),ni()<=b["in"].DEBUG&&ri("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),Wa.resolve({Ks:!0,Ws:r,js:i,Gs:t})}))},t}(),dc=function(){function t(t,e){this.db=t,this.lr=function(t,e){return new pc(t,e)}(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.vr=function(t){var e=0;return this.yr(t,(function(t){e++})).next((function(){return e}))},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,(function(t,n){return e(n)}))},t.prototype.nr=function(t,e,n){return vc(t,n)},t.prototype.ir=function(t,e,n){return vc(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return vc(t,e)},t.prototype.Cr=function(t,e){return function(t,e){var n=!1;return ic(t).ls((function(r){return ec(t,r,e).next((function(t){return t&&(n=!0),Wa.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,(function(s,a){if(a<=e){var u=n.Cr(t,s).next((function(e){if(!e)return o++,r._i(t,s).next((function(){return r.li(s),cc(t).delete([0,iu(s.path)])}))}));i.push(u)}})).next((function(){return Wa.Mn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return vc(t,e)},t.prototype.Dr=function(t,e){var n,r=cc(t),i=Si.q;return r.hs({index:mu.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==Si.q&&e(new Oi(au(n)),i),i=a,n=s):i=Si.q})).next((function(){i!==Si.q&&e(new Oi(au(n)),i)}))},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function vc(t,e){return cc(t).put(function(t,e){return new mu(0,iu(t.path),e)}(e,t.bs))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gc=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return bc(t).put(_c(e),n)},t.prototype.li=function(t,e){var n=bc(t),r=_c(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.kr(t,r)}))},t.prototype._i=function(t,e){var n=this;return bc(t).get(_c(e)).next((function(t){return n.Mr(t)}))},t.prototype.Lr=function(t,e){var n=this;return bc(t).get(_c(e)).next((function(t){var e=n.Mr(t);return e?{hi:e,size:$u(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Hs();return this.Br(t,e,(function(t,e){var i=n.Mr(e);r=r.zt(t,i)})).next((function(){return r}))},t.prototype.qr=function(t,e){var n=this,r=Hs(),i=new Ms(Oi.H);return this.Br(t,e,(function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,$u(e))):(r=r.zt(t,null),i=i.zt(t,0))})).next((function(){return{Ur:r,Qr:i}}))},t.prototype.Br=function(t,e,n){if(e.et())return Wa.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return bc(t).hs({range:r},(function(t,e,r){for(var s=Oi.Et(t);o&&Oi.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ce()?i.oe():null}))},t.prototype.Kr=function(t,e,n){var r=this,i=zs(),o=e.path.length+1,s={};if(n.isEqual(ki.min())){var a=e.path.it();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.it(),c=Ou(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=vu.collectionReadTimeIndex}return bc(t).hs(s,(function(t,n,s){if(t.length===o){var a=Pu(r.Qt,n);e.path.nt(a.key.path)?a instanceof ho&&Qo(e,a)&&(i=i.zt(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Nr=function(t){return new yc(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return mc(t).get(gu.key).next((function(t){return ui(!!t),t}))},t.prototype.kr=function(t,e){return mc(t).put(gu.key,e)},t.prototype.Mr=function(t){if(t){var e=Pu(this.Qt,t);return e instanceof lo&&e.version.isEqual(ki.min())?null:e}return null},t}(),yc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new Xu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Yr(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new Us((function(t,e){return fi(t.rt(),e.rt())}));return this.ri.forEach((function(o,s){var a=e.Gr.get(o);if(s.hi){var u=xu(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=$u(u);r+=c-a,n.push(e.jr.ai(t,o,u))}else if(r-=a,e.Wr){var h=xu(e.jr.Qt,new lo(o,ki.min()),e.ci(o));n.push(e.jr.ai(t,o,h))}else n.push(e.jr.li(t,o))})),i.forEach((function(r){n.push(e.jr.Ei.qs(t,r))})),n.push(this.jr.updateMetadata(t,r)),Wa.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next((function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)}))},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next((function(t){var e=t.Ur;return t.Qr.forEach((function(t,e){n.Gr.set(t,e)})),e}))},e}(Zu);function mc(t){return Cu(t,gu.store)}function bc(t){return Cu(t,vu.store)}function _c(t){return t.path.it()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wc=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;ui(n<r&&n>=0&&r<=11);var o=new za("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(cu.store)}(t),function(t){t.createObjectStore(hu.store,{keyPath:hu.keyPath}),t.createObjectStore(lu.store,{keyPath:lu.keyPath,autoIncrement:!0}).createIndex(lu.userMutationsIndex,lu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(fu.store)}(t),Ic(t),function(t){t.createObjectStore(vu.store)}(t));var s=Wa.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(mu.store),t.deleteObjectStore(yu.store),t.deleteObjectStore(bu.store)}(t),Ic(t)),s=s.next((function(){return function(t){var e=t.store(bu.store),n=new bu(0,0,ki.min().j(),0);return e.put(bu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(lu.store).rs().next((function(n){t.deleteObjectStore(lu.store),t.createObjectStore(lu.store,{keyPath:lu.keyPath,autoIncrement:!0}).createIndex(lu.userMutationsIndex,lu.userMutationsKeyPath,{unique:!0});var r=e.store(lu.store),i=n.map((function(t){return r.put(t)}));return Wa.Mn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(wu.store,{keyPath:wu.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.zr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(gu.store)}(t),i.Hr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Jr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Yr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(vu.store);e.createIndex(vu.readTimeIndex,vu.readTimeIndexPath,{unique:!1}),e.createIndex(vu.collectionReadTimeIndex,vu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Xr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Iu.store,{keyPath:Iu.keyPath})}(t),function(t){t.createObjectStore(Eu.store,{keyPath:Eu.keyPath})}(t)}))),s},t.prototype.Hr=function(t){var e=0;return t.store(vu.store).hs((function(t,n){e+=$u(n)})).next((function(){var n=new gu(e);return t.store(gu.store).put(gu.key,n)}))},t.prototype.zr=function(t){var e=this,n=t.store(hu.store),r=t.store(lu.store);return n.rs().next((function(n){return Wa.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(lu.userMutationsIndex,i).next((function(r){return Wa.forEach(r,(function(r){ui(r.userId===n.userId);var i=Mu(e.Qt,r);return Ju(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Jr=function(t){var e=t.store(mu.store),n=t.store(vu.store);return t.store(bu.store).get(bu.key).next((function(t){var r=[];return n.hs((function(n,i){var o=new Ai(n),s=function(t){return[0,iu(t)]}(o);r.push(e.get(s).next((function(n){return n?Wa.resolve():function(n){return e.put(new mu(0,iu(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Wa.Mn(r)}))}))},t.prototype.Yr=function(t,e){t.createObjectStore(_u.store,{keyPath:_u.keyPath});var n=e.store(_u.store),r=new Wu,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:iu(i)})}};return e.store(vu.store).hs({us:!0},(function(t,e){var n=new Ai(t);return i(n.X())})).next((function(){return e.store(fu.store).hs({us:!0},(function(t,e){t[0];var n=t[1],r=(t[2],au(n));return i(r.X())}))}))},t.prototype.Xr=function(t){var e=this,n=t.store(yu.store);return n.hs((function(t,r){var i=ju(r),o=Fu(e.Qt,i);return n.put(o)}))},t}();function Ic(t){t.createObjectStore(mu.store,{keyPath:mu.keyPath}).createIndex(mu.documentTargetsIndex,mu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(yu.store,{keyPath:yu.keyPath}).createIndex(yu.queryTargetsIndexName,yu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(bu.store)}var Ec="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Tc=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=a,this.eo=c,this.no=h,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new yi(gi.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new dc(this,i),this.ho=n+"main",this.Qt=new Au(u),this.lo=new Ga(this.ho,11,new wc(this.Qt)),this._o=new sc(this.Ti,this.Qt),this.Ei=new zu,this.fo=function(t,e){return new gc(t,e)}(this.Qt,this.Ei),this.wo=new Vu,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===h&&ii("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new yi(gi.FAILED_PRECONDITION,Ec);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t._o.Ki(e)}))})).then((function(e){t.so=new Si(e,t.eo)})).then((function(){t.io=!0})).catch((function(e){return t.lo&&t.lo.close(),Promise.reject(e)}))},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return Xr(e,void 0,void 0,(function(){return Zr(this,(function(e){return this.Er?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn((function(n){return Xr(e,void 0,void 0,(function(){return Zr(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps((function(){return Xr(e,void 0,void 0,(function(){return Zr(this,(function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Cc(e).put(new wu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Vo(e).next((function(e){e||(t.isPrimary=!1,t.Zr.po((function(){return t.uo(!1)})))}))})).next((function(){return t.bo(e)})).next((function(n){return t.isPrimary&&!n?t.vo(e).next((function(){return!1})):!!n&&t.So(e).next((function(){return!0}))}))})).catch((function(e){if(Ya(e))return ri("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return ri("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Zr.po((function(){return t.uo(e)})),t.isPrimary=e}))},t.prototype.Vo=function(t){var e=this;return Sc(t).get(cu.key).next((function(t){return Wa.resolve(e.Do(t))}))},t.prototype.Co=function(t){return Cc(t).delete(this.clientId)},t.prototype.xo=function(){return Xr(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Zr(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Cu(t,wu.store);return e.rs().next((function(t){var n=i.$o(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Wa.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)r=n[e],this.Eo.removeItem(this.Fo(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,(function(){return t.To().then((function(){return t.xo()})).then((function(){return t.Ao()}))}))},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?Wa.resolve(!0):Sc(t).get(cu.key).next((function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new yi(gi.FAILED_PRECONDITION,Ec);return!1}}return!(!e.networkEnabled||!e.inForeground)||Cc(t).rs().next((function(t){return void 0===e.$o(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&ri("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.ko=function(){return Xr(this,void 0,void 0,(function(){var t=this;return Zr(this,(function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[cu.store,wu.store],(function(e){var n=new Su(e,Si.q);return t.vo(n).next((function(){return t.Co(n)}))}))];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}}))}))},t.prototype.$o=function(t,e){var n=this;return t.filter((function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)}))},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Cc(e).rs().next((function(e){return t.$o(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return tc.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;ri("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.lo.runTransaction(t,o,Tu,(function(o){return i=new Su(o,r.so?r.so.next():Si.q),"readwrite-primary"===e?r.Vo(i).next((function(t){return!!t||r.bo(i)})).next((function(e){if(!e)throw ii("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Zr.po((function(){return r.uo(!1)})),new yi(gi.FAILED_PRECONDITION,nu);return n(i)})).next((function(t){return r.So(i).next((function(){return t}))})):r.jo(i).next((function(){return n(i)}))})).then((function(t){return i.Vs(),t}))},t.prototype.jo=function(t){var e=this;return Sc(t).get(cu.key).next((function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new yi(gi.FAILED_PRECONDITION,Ec)}))},t.prototype.So=function(t){var e=new cu(this.clientId,this.allowTabSynchronization,Date.now());return Sc(t).put(cu.key,e)},t.Kn=function(){return Ga.Kn()},t.prototype.vo=function(t){var e=this,n=Sc(t);return n.get(cu.key).next((function(t){return e.Do(t)?(ri("IndexedDbPersistence","Releasing primary lease."),n.delete(cu.key)):Wa.resolve()}))},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(ii("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps((function(){return t.inForeground="visible"===t.document.visibilityState,t.To()}))},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps((function(){return e.ko()}))},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return ri("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return ii("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){ii("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Sc(t){return Cu(t,cu.store)}function Cc(t){return Cu(t,wu.store)}function kc(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Nc=function(t,e){this.progress=t,this.Go=e},Ac=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next((function(r){return n.Jo(t,e,r)}))},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t}))},t.prototype.Yo=function(t,e,n){var r=Hs();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)})),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next((function(e){return n.Zo(t,e)}))},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next((function(r){var i=n.Yo(t,e,r),o=Bs();return i.forEach((function(t,e){e||(e=new lo(t,ki.min())),o=o.zt(t,e)})),o}))},t.prototype.Kr=function(t,e,n){return function(t){return Oi.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.tc(t,e.path):qo(e)?this.ec(t,e,n):this.nc(t,e,n)},t.prototype.tc=function(t,e){return this.Ho(t,new Oi(e)).next((function(t){var e=zs();return t instanceof ho&&(e=e.zt(t.key,t)),e}))},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=zs();return this.Ei.Us(t,i).next((function(s){return Wa.forEach(s,(function(s){var a=function(t,e){return new Do(e,null,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.nc(t,a,n).next((function(t){t.forEach((function(t,e){o=o.zt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next((function(n){return r=n,o.zo.Di(t,e)})).next((function(e){return i=e,o.sc(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=bs(u,r.get(c),o.vs);r=h instanceof ho?r.zt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Qo(e,n)||(r=r.remove(t))})),r}))},t.prototype.sc=function(t,e,n){for(var r=Ys(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Ts&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof ho&&(c=c.zt(t,e))})),c}))},t}(),Pc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=Ys(),i=Ys(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),xc=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.xt.length||1===t.xt.length&&t.xt[0].field.ut())}(e)||n.isEqual(ki.min())?this.uc(t,e):this.ac.Xo(t,r).next((function(o){var s=i.hc(e,o);return(jo(e)||Fo(e))&&i.lc(e.limitType,s,r,n)?i.uc(t,e):(ni()<=b["in"].DEBUG&&ri("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ko(e)),i.ac.Kr(t,e,n).next((function(t){return s.forEach((function(e){t=t.zt(e.key,e)})),t})))}))},t.prototype.hc=function(t,e){var n=new Us(Yo(t));return e.forEach((function(e,r){r instanceof ho&&Qo(t,r)&&(n=n.add(r))})),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return ni()<=b["in"].DEBUG&&ri("QueryEngine","Using full collection scan to execute query:",Ko(e)),this.ac.Kr(t,e,ki.min())},t}(),Oc=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new Ms(fi),this.dc=new Xu((function(t){return go(t)}),yo),this.wc=ki.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new Ac(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Vr(n,e.fc)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(t,e,n,r){return new Oc(t,e,n,r)}function Dc(t,e){return Xr(this,void 0,void 0,(function(){var n,r,i,o;return Zr(this,(function(s){switch(s.label){case 0:return n=ci(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.zo.pi(t).next((function(s){return o=s,r=n.persistence.Qo(e),i=new Ac(n.Ec,r,n.persistence.Ko()),r.pi(t)})).next((function(e){for(var n=[],r=[],s=Ys(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,y=v.mutations;g<y.length;g++){var m=y[g];s=s.add(m.key)}}return i.Xo(t,s).next((function(t){return{Ic:t,mc:n,Ac:r}}))}))}))];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}}))}))}function Lc(t,e){var n=ci(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ec.Nr({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Wa.resolve();return o.forEach((function(t){s=s.next((function(){return r._i(e,t)})).next((function(e){var o=e,s=n.$s.get(t);ui(null!==s),(!o||o.version._(s)<0)&&(o=i.Ss(t,o,n))&&r.ai(o,n.Ns)}))})),s.next((function(){return t.zo.Ci(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}function Mc(t){var e=ci(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e._o.Qi(t)}))}function jc(t,e){var n=ci(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach((function(e,o){var a=i.get(o);if(a){s.push(n._o.sr(t,e.Qe,o).next((function(){return n._o.er(t,e.qe,o)})));var u=e.resumeToken;if(u.l()>0){var c=a.Mt(u,r).kt(t.bs);i=i.zt(o,c),function(t,e,n){return ui(e.resumeToken.l()>0),0===t.resumeToken.l()||e.Ot.W()-t.Ot.W()>=3e8||n.qe.size+n.Ue.size+n.Qe.size>0}(a,c,e)&&s.push(n._o.Hi(t,c))}}}));var a=Bs();if(e.Oe.forEach((function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))})),s.push(Fc(t,o,e.Oe,r,void 0).next((function(t){a=t}))),!r.isEqual(ki.min())){var u=n._o.Qi(t).next((function(e){return n._o.Wi(t,t.bs,r)}));s.push(u)}return Wa.Mn(s).next((function(){return o.apply(t)})).next((function(){return n.Tc.Zo(t,a)}))})).then((function(t){return n.fc=i,t}))}function Fc(t,e,n,r,i){var o=Ys();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Bs();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof lo&&s.version.isEqual(ki.min())?(e.li(n,u),o=o.zt(n,s)):null==a||s.version._(a.version)>0||0===s.version._(a.version)&&a.hasPendingWrites?(e.ai(s,u),o=o.zt(n,s)):ri("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Uc(t,e){var n=ci(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)}))}function Vc(t,e){var n=ci(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n._o.tr(t,e).next((function(i){return i?(r=i,Wa.resolve(r)):n._o.Bi(t).next((function(i){return r=new Zo(e,i,0,t.bs),n._o.ji(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t}))}function qc(t,e,n){return Xr(this,void 0,void 0,(function(){var r,i,o,s;return Zr(this,(function(a){switch(a.label){case 0:r=ci(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ti.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Ya(s=a.sent()))throw s;return ri("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}}))}))}function Bc(t,e,n){var r=ci(t),i=ki.min(),o=Ys();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=ci(t),i=r.dc.get(n);return void 0!==i?Wa.resolve(r.fc.get(i)):r._o.tr(e,n)}(r,t,Ho(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r._c.Kr(t,e,n?i:ki.min(),n?o:Ys())})).next((function(t){return{documents:t,Rc:o}}))}))}function Hc(t,e){var n=ci(t),r=ci(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Sn(t,e).next((function(t){return t?t.target:null}))}))}function Wc(t){var e=ci(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=ci(t),i=Bs(),o=Ou(n),s=bc(e),a=IDBKeyRange.lowerBound(o,!0);return s.hs({index:vu.readTimeIndex,range:a},(function(t,e){var n=Pu(r.Qt,e);i=i.zt(n.key,n),o=e.readTime})).next((function(){return{Go:i,readTime:Ru(o)}}))}(e.Ec,t,e.wc)})).then((function(t){var n=t.Go,r=t.readTime;return e.wc=r,n}))}function zc(t){return Xr(this,void 0,void 0,(function(){var e;return Zr(this,(function(n){return[2,(e=ci(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=bc(t),n=ki.min();return e.hs({index:vu.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Ru(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.wc=t}))]}))}))}function Gc(t,e,n,r){return Xr(this,void 0,void 0,(function(){var i,o,s,a,u,c,h,l,f,p;return Zr(this,(function(d){switch(d.label){case 0:for(i=ci(t),o=Ys(),s=Bs(),a=Ks(),u=0,c=n;u<c.length;u++)h=c[u],l=e.Pc(h.metadata.name),h.document&&(o=o.add(l)),s=s.zt(l,e.yc(h)),a=a.zt(l,e.gc(h.metadata.readTime));return f=i.Ec.Nr({Wr:!0}),[4,Vc(i,function(t){return Ho(Mo(Ai.ot("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Fc(t,f,s,ki.min(),a).next((function(e){return f.apply(t),e})).next((function(e){return i._o.Yi(t,p.targetId).next((function(){return i._o.er(t,o,p.targetId)})).next((function(){return i.Tc.Zo(t,e)}))}))}))]}}))}))}function Kc(t,e,n){return void 0===n&&(n=Ys()),Xr(this,void 0,void 0,(function(){var r,i;return Zr(this,(function(o){switch(o.label){case 0:return[4,Vc(t,Ho(Uu(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ci(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=ga(e.readTime);if(r.Ot._(o)>=0)return i.wo.Ls(t,e);var s=r.Mt(vi.T,o);return i.fc=i.fc.zt(s.targetId,s),i._o.Hi(t,s).next((function(){return i._o.Yi(t,r.targetId)})).next((function(){return i._o.er(t,n,r.targetId)})).next((function(){return i.wo.Ls(t,e)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Qc=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return Wa.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:ga(n.createTime)}),Wa.resolve()},t.prototype.Ms=function(t,e){return Wa.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,function(t){return{name:t.name,query:Uu(t.bundledQuery),readTime:ga(t.readTime)}}(e)),Wa.resolve()},t}(),Yc=function(){function t(){this.vc=new Us(Xc.Sc),this.Dc=new Us(Xc.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new Xc(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach((function(t){return n.nr(t,e)}))},t.prototype.ir=function(t,e){this.Nc(new Xc(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.Fc=function(t){var e=this,n=new Oi(new Ai([])),r=new Xc(n,t),i=new Xc(n,t+1),o=[];return this.Dc.me([r,i],(function(t){e.Nc(t),o.push(t.key)})),o},t.prototype.Oc=function(){var t=this;this.vc.forEach((function(e){return t.Nc(e)}))},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new Oi(new Ai([])),n=new Xc(e,t),r=new Xc(e,t+1),i=Ys();return this.Dc.me([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Fi=function(t){var e=new Xc(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),Xc=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return Oi.H(t.key,e.key)||fi(t.Mc,e.Mc)},t.Cc=function(t,e){return fi(t.Mc,e.Mc)||Oi.H(t.key,e.key)},t}(),Zc=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new Us(Xc.Sc)}return t.prototype.Ai=function(t){return Wa.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++,this.zo.length>0&&this.zo[this.zo.length-1];var o=new ku(i,e,n,r);this.zo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Bc=this.Bc.add(new Xc(u.key,i)),this.Ei.qs(t,u.key.path.X())}return Wa.resolve(o)},t.prototype.Pi=function(t,e){return Wa.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=e+1,r=this.Uc(n),i=r<0?0:r;return Wa.resolve(this.zo.length>i?this.zo[i]:null)},t.prototype.Vi=function(){return Wa.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return Wa.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new Xc(e,0),i=new Xc(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],(function(t){var e=n.qc(t.Mc);o.push(e)})),Wa.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new Us(fi);return e.forEach((function(t){var e=new Xc(t,0),i=new Xc(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],(function(t){r=r.add(t.Mc)}))})),Wa.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;Oi.wt(i)||(i=i.child(""));var o=new Xc(new Oi(i),0),s=new Us(fi);return this.Bc.Ae((function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)}),o),Wa.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.qc(t);null!==r&&n.push(r)})),n},t.prototype.Ci=function(t,e){var n=this;ui(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return Wa.forEach(e.mutations,(function(i){var o=new Xc(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)})).next((function(){n.Bc=r}))},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new Xc(e,0),r=this.Bc.Re(n);return Wa.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return this.zo.length,Wa.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),Jc=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new Ms(Oi.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return Wa.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=Hs();return e.forEach((function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)})),Wa.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=zs(),i=new Oi(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.key,u=s.value,c=u.hi,h=u.readTime;if(!e.path.nt(a.path))break;h._(n)<=0||c instanceof ho&&Qo(e,c)&&(r=r.zt(c.key,c))}return Wa.resolve(r)},t.prototype.jc=function(t,e){return Wa.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Nr=function(t){return new $c(this)},t.prototype.Or=function(t){return Wa.resolve(this.size)},t}(),$c=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return Yr(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach((function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)})),Wa.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(Zu),th=function(){function t(t){this.persistence=t,this.Gc=new Xu((function(t){return go(t)}),yo),this.lastRemoteSnapshotVersion=ki.min(),this.highestTargetId=0,this.zc=0,this.Hc=new Yc,this.targetCount=0,this.Jc=oc.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach((function(t,n){return e(n)})),Wa.resolve()},t.prototype.Qi=function(t){return Wa.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return Wa.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),Wa.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),Wa.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new oc(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,Wa.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),Wa.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,Wa.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,a.targetId)),i++)})),Wa.Mn(o).next((function(){return i}))},t.prototype.Zi=function(t){return Wa.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return Wa.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),Wa.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach((function(e){i.push(r.Ni(t,e))})),Wa.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),Wa.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return Wa.resolve(n)},t.prototype.Fi=function(t,e){return Wa.resolve(this.Hc.Fi(e))},t}(),eh=function(){function t(t,e){var n=this;this.Yc={},this.so=new Si(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new th(this),this.Ei=new Hu,this.fo=function(t,e){return new Jc(t,(function(t){return n.Ti.Xc(t)}))}(this.Ei),this.Qt=new Au(e),this.wo=new Qc(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new Zc(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;ri("MemoryPersistence","Starting transaction:",t);var i=new nh(this.so.next());return this.Ti.Zc(),n(i).next((function(t){return r.Ti.ta(i).next((function(){return t}))})).On().then((function(t){return i.Vs(),t}))},t.prototype.ea=function(t,e){return Wa.Ln(Object.values(this.Yc).map((function(n){return function(){return n.Fi(t,e)}})))},t}(),nh=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return Yr(e,t),e}(ru),rh=function(){function t(t){this.persistence=t,this.na=new Yc,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw ai()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),Wa.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),Wa.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),Wa.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach((function(t){return n.ra.add(t.toString())}));var r=this.persistence.Sr();return r.rr(t,e.targetId).next((function(t){t.forEach((function(t){return n.ra.add(t.toString())}))})).next((function(){return r.Ji(t,e)}))},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return Wa.forEach(this.ra,(function(r){var i=Oi._t(r);return e.oa(t,i).next((function(t){t||n.li(i)}))})).next((function(){return e.sa=null,n.apply(t)}))},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next((function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())}))},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return Wa.Ln([function(){return Wa.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(t,e){return"firestore_clients_"+t+"_"+e}function oh(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function sh(t,e){return"firestore_targets_"+t+"_"+e}var ah=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==(0,m.Z)(o)&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==(0,m.Z)(o.error));return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new yi(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(ii("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),uh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==(0,m.Z)(i)&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==(0,m.Z)(i.error));return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new yi(i.error.code,i.error.message)),o?new t(e,i.state,r):(ii("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ch=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==(0,m.Z)(r)&&r.activeTargetIds instanceof Array,o=Zs(),s=0;i&&s<r.activeTargetIds.length;++s)i=Gi(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(ii("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),hh=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==(0,m.Z)(n)&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(ii("SharedClientState","Failed to parse online state: "+e),null)},t}(),lh=function(){function t(){this.activeTargetIds=Zs()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),fh=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new Ms(fi),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=ih(this.persistenceKey,this.la),this.ma=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new lh),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Xr(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,h,l=this;return Zr(this,(function(f){switch(f.label){case 0:return[4,this._a.Uo()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(ih(this.persistenceKey,r)))&&(o=ch.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)h=c[u],this.wa(h);return this.Ta=[],this.window.addEventListener("unload",(function(){return l.ko()})),this.Er=!0,[2]}}))}))},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(sh(this.persistenceKey,t));if(n){var r=uh.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(sh(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach((function(t){r.$a(t)})),this.currentUser=t,n.forEach((function(t){r.Ca(t)}))},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return ri("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){ri("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){ri("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(ri("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void ii("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po((function(){return Xr(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Zr(this,(function(a){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=Si.q;if(null!=t)try{var n=JSON.parse(t);ui("number"==typeof n),e=n}catch(t){ii("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Si.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new ah(this.currentUser,t,e,n),i=oh(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=oh(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){var e={clientId:this.la,onlineState:t};this.storage.setItem(this.ya,JSON.stringify(e))},t.prototype.qa=function(t,e,n){var r=sh(this.persistenceKey,t),i=new uh(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return ch.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ah.ca(new bi(i),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return uh.ca(r,e)},t.prototype.pa=function(t){return hh.ca(t)},t.prototype.Ya=function(t){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(ri("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this._a.su(s,a).then((function(){n.Ea=r}))},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=Zs();return t.forEach((function(t,n){e=e.Pe(n.activeTargetIds)})),e},t}(),ph=function(){function t(){this.iu=new lh,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new lh,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),dh=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),vh=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){ri("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){ri("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),gh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},yh=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),mh=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Yr(e,t),e.prototype.Su=function(t,e,n,r){return new Promise((function(i,o){var s=new Kr;s.listenOnce(Hr.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Br.NO_ERROR:var e=s.getResponseJson();ri("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Br.TIMEOUT:ri("Connection",'RPC "'+t+'" timed out'),o(new yi(gi.DEADLINE_EXCEEDED,"Request time out"));break;case Br.HTTP_ERROR:var n=s.getStatus();if(ri("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(gi).indexOf(e)>=0?e:gi.UNKNOWN}(r.status);o(new yi(a,r.message))}else o(new yi(gi.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new yi(gi.UNAVAILABLE,"Connection failed."));break;default:ai()}}finally{ri("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Cu=function(t,e){var n=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Vr(),i=qr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(o.initMessageHeaders,e),(0,_.uI)()||(0,_.b$)()||(0,_.d)()||(0,_.w1)()||(0,_.Mn)()||(0,_.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");ri("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,h=new yh({fu:function(t){c?ri("Connection","Not sending because WebChannel is closed:",t):(u||(ri("Connection","Opening WebChannel transport."),a.open(),u=!0),ri("Connection","WebChannel sending:",t),a.send(t))},du:function(){return a.close()}}),l=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return l(a,Gr.EventType.OPEN,(function(){c||ri("Connection","WebChannel transport opened.")})),l(a,Gr.EventType.CLOSE,(function(){c||(c=!0,ri("Connection","WebChannel transport closed"),h.Ru())})),l(a,Gr.EventType.ERROR,(function(t){c||(c=!0,oi("Connection","WebChannel transport errored:",t),h.Ru(new yi(gi.UNAVAILABLE,"The operation could not be completed")))})),l(a,Gr.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];ui(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){ri("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=As[t];if(void 0!==e)return Ls(e)}(o),u=i.message;void 0===s&&(s=gi.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,h.Ru(new yi(s,u)),a.close()}else ri("Connection","WebChannel received:",n),h.Pu(n)}})),l(i,Wr.STAT_EVENT,(function(t){t.stat===zr.PROXY?ri("Connection","Detected buffering proxy"):t.stat===zr.NOPROXY&&ri("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Au()}),0),h},e}(function(){function t(t){this.yu=t,this.t=t.t;var e=t.ssl?"https":"http";this.gu=e+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);ri("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then((function(t){return ri("RestConnection","Received: ",t),t}),(function(e){throw oi("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.9",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){var n=gh[t];return this.gu+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(){return"undefined"!=typeof window?window:null}function _h(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(t){return new fa(t,!0)}var Ih=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&ri("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,(function(){return e.ku=Date.now(),t()})),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),Eh=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new Ih(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,(function(){return t.Zu()})))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(t){return this.Hu()?[2,this.close(0)]:[2]}))}))},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===gi.RESOURCE_EXHAUSTED?(ii(e.toString()),ii("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===gi.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then((function(e){t.Wu===n&&t.ih(e)}),(function(n){e((function(){var e=new yi(gi.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)}))}))},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu((function(){n((function(){return e.state=2,e.listener.wu()}))})),this.stream.Tu((function(t){n((function(){return e.rh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu((function(){return Xr(t,void 0,void 0,(function(){return Zr(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.rh=function(t){return ri("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps((function(){return e.Wu===t?n():(ri("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Th=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return Yr(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ai()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Bt?(ui(void 0===e||"string"==typeof e),vi.fromBase64String(e||"")):(ui(void 0===e||e instanceof Uint8Array),vi.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?gi.UNKNOWN:Ls(t.code);return new yi(e,t.message||"")}(a);n=new oa(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=_a(t,r.document.name),o=ga(r.document.updateTime);var a=new so({mapValue:{fields:r.document.fields}}),u=(s=new ho(i,o,a,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new ra(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=_a(t,r.document),o=r.readTime?ga(r.readTime):ki.min(),a=new lo(i,o),s=r.removedTargetIds||[],n=new ra([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=_a(t,r.document),o=r.removedTargetIds||[],n=new ra([],o,i,null);else{if(!("filter"in e))return ai();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Rs(r),o=h.targetId,n=new ia(o,i)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return ki.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ki.min():e.readTime?ga(e.readTime):ki.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e={};e.database=Ea(this.Qt),e.addTarget=function(t,e){var n,r=e.target;return(n=mo(r)?{documents:Aa(t,r)}:{query:Pa(t,r)}).targetId=e.targetId,e.resumeToken.l()>0?n.resumeToken=da(t,e.resumeToken):e.Ot._(ki.min())>0&&(n.readTime=pa(t,e.Ot.j())),n}(this.Qt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ai()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(this.Qt,t);n&&(e.labels=n),this.th(e)},e.prototype.hh=function(t){var e={};e.database=Ea(this.Qt),e.removeTarget=t,this.th(e)},e}(Eh),Sh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return Yr(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(ui(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=function(t,e){return t&&t.length>0?(ui(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?ga(t.updateTime):ga(e);n.isEqual(ki.min())&&(n=ga(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new ds(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=ga(t.commitTime);return this.listener.dh(n,e)}return ui(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=Ea(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return ka(e.Qt,t)}))};this.th(n)},e}(Eh),Ch=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return Yr(e,t),e.prototype.Ih=function(){if(this.Th)throw new yi(gi.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.pu(t,e,n,i)})).catch((function(t){throw t.code===gi.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.Du(t,e,n,i)})).catch((function(t){throw t.code===gi.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.terminate=function(){this.Th=!1},e}((function(){})),kh=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,(function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()})))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(ii(e),this.Rh=!1):ri("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),Nh=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou((function(t){n.Ps((function(){return Xr(o,void 0,void 0,(function(){return Zr(this,(function(t){switch(t.label){case 0:return jh(this)?(ri("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Xr(this,void 0,void 0,(function(){var e;return Zr(this,(function(n){switch(n.label){case 0:return(e=ci(t)).Nh.add(4),[4,Ph(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,Ah(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Oh=new kh(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t){return Xr(this,void 0,void 0,(function(){var e,n;return Zr(this,(function(r){switch(r.label){case 0:if(!jh(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Ph(t){return Xr(this,void 0,void 0,(function(){var e,n;return Zr(this,(function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function xh(t,e){var n=ci(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),Mh(n)?Lh(n):Jh(n).Hu()&&Rh(n,e))}function Oh(t,e){var n=ci(t),r=Jh(n);n.xh.delete(e),r.Hu()&&Dh(n,e),0===n.xh.size&&(r.Hu()?r.Xu():jh(n)&&n.Oh.set("Unknown"))}function Rh(t,e){t.kh.on(e.targetId),Jh(t).uh(e)}function Dh(t,e){t.kh.on(e),Jh(t).hh(e)}function Lh(t){t.kh=new aa({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),Jh(t).start(),t.Oh.Ph()}function Mh(t){return jh(t)&&!Jh(t).zu()&&t.xh.size>0}function jh(t){return 0===ci(t).Nh.size}function Fh(t){t.kh=void 0}function Uh(t){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(e){return t.xh.forEach((function(e,n){Rh(t,e)})),[2]}))}))}function Vh(t,e){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(n){return Fh(t),Mh(t)?(t.Oh.Vh(e),Lh(t)):t.Oh.set("Unknown"),[2]}))}))}function qh(t,e,n){return Xr(this,void 0,void 0,(function(){var r,i,o;return Zr(this,(function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof oa&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Xr(this,void 0,void 0,(function(){var n,r,i,o;return Zr(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.xh.has(o)?[4,t.Dh.Mh(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),ri("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Bh(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ra?t.kh.dn(e):e instanceof ia?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(ki.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Mc(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,function(t,e){var n=t.kh.Vn(e);return n.$e.forEach((function(n,r){if(n.resumeToken.l()>0){var i=t.xh.get(r);i&&t.xh.set(r,i.Mt(n.resumeToken,e))}})),n.Fe.forEach((function(e){var n=t.xh.get(e);if(n){t.xh.set(e,n.Mt(vi.T,n.Ot)),Dh(t,e);var r=new Zo(n.target,e,1,n.sequenceNumber);Rh(t,r)}})),t.Dh.Lh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return ri("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Bh(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Bh(t,e,n){return Xr(this,void 0,void 0,(function(){var r=this;return Zr(this,(function(i){switch(i.label){case 0:if(!Ya(e))throw e;return t.Nh.add(1),[4,Ph(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return Mc(t.bh)}),t._s.po((function(){return Xr(r,void 0,void 0,(function(){return Zr(this,(function(e){switch(e.label){case 0:return ri("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,Ah(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Hh(t,e){return e().catch((function(n){return Bh(t,n,e)}))}function Wh(t){return Xr(this,void 0,void 0,(function(){var e,n,r,i,o;return Zr(this,(function(s){switch(s.label){case 0:e=ci(t),n=$h(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return jh(t)&&t.Ch.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Uc(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=$h(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Bh(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return zh(e)&&Gh(e),[2]}}))}))}function zh(t){return jh(t)&&!$h(t).zu()&&t.Ch.length>0}function Gh(t){$h(t).start()}function Kh(t){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(e){return $h(t).Eh(),[2]}))}))}function Qh(t){return Xr(this,void 0,void 0,(function(){var e,n,r,i;return Zr(this,(function(o){for(e=$h(t),n=0,r=t.Ch;n<r.length;n++)i=r[n],e.fh(i.mutations);return[2]}))}))}function Yh(t,e,n){return Xr(this,void 0,void 0,(function(){var r,i;return Zr(this,(function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=Nu.from(r,e,n),[4,Hh(t,(function(){return t.Dh.Bh(i)}))];case 1:return o.sent(),[4,Wh(t)];case 2:return o.sent(),[2]}}))}))}function Xh(t,e){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(n){switch(n.label){case 0:return e&&$h(t)._h?[4,function(t,e){return Xr(this,void 0,void 0,(function(){var n,r;return Zr(this,(function(i){switch(i.label){case 0:return Ds(r=e.code)&&r!==gi.ABORTED?(n=t.Ch.shift(),$h(t).Yu(),[4,Hh(t,(function(){return t.Dh.qh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Wh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return zh(t)&&Gh(t),[2]}}))}))}function Zh(t,e){return Xr(this,void 0,void 0,(function(){var n;return Zr(this,(function(r){switch(r.label){case 0:return n=ci(t),e?(n.Nh.delete(2),[4,Ah(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,Ph(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Jh(t){var e=this;return t.Uh||(t.Uh=function(t,e,n){var r=ci(t);return r.Ih(),new Th(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Uh.bind(null,t),Tu:Vh.bind(null,t),ah:qh.bind(null,t)}),t.$h.push((function(n){return Xr(e,void 0,void 0,(function(){return Zr(this,(function(e){switch(e.label){case 0:return n?(t.Uh.Yu(),Mh(t)?Lh(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:e.sent(),Fh(t),e.label=3;case 3:return[2]}}))}))}))),t.Uh}function $h(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=ci(t);return r.Ih(),new Sh(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Kh.bind(null,t),Tu:Xh.bind(null,t),wh:Qh.bind(null,t),dh:Yh.bind(null,t)}),t.$h.push((function(n){return Xr(e,void 0,void 0,(function(){return Zr(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Yu(),[4,Wh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:e.sent(),t.Ch.length>0&&(ri("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qh
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var tl=function(){this.Kh=void 0,this.listeners=[]},el=function(){this.queries=new Xu((function(t){return Go(t)}),zo),this.onlineState="Unknown",this.Wh=new Set};function nl(t,e){return Xr(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Zr(this,(function(c){switch(c.label){case 0:if(n=ci(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new tl),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return a=c.sent(),u=eu(a,"Initialization of query '"+Ko(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&sl(n),[2]}}))}))}function rl(t,e){return Xr(this,void 0,void 0,(function(){var n,r,i,o,s;return Zr(this,(function(a){return n=ci(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]}))}))}function il(t,e){for(var n=ci(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].zh(s)&&(r=!0);u.Kh=s}}r&&sl(n)}function ol(t,e,n){var r=ci(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function sl(t){t.Wh.forEach((function(t){t.next()}))}var al=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ta(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.nl&&n||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){if(t.docChanges.length>0)return!0;var e=this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ce&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=ta.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),ul=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.sl=function(){return"metadata"in this.payload},t}(),cl=function(){function t(t){this.Qt=t}return t.prototype.Pc=function(t){return _a(this.Qt,t)},t.prototype.yc=function(t){return t.metadata.exists?Ca(this.Qt,t.document,!1):new lo(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},t.prototype.gc=function(t){return ga(t)},t}(),hl=function(){function t(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=ll(t)}return t.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.ol=function(t){for(var e=new Map,n=new cl(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||Ys()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return Xr(this,void 0,void 0,(function(){var t,e,n,r,i;return Zr(this,(function(o){switch(o.label){case 0:return[4,Gc(this.bh,new cl(this.Qt),this.documents,this.il.id)];case 1:t=o.sent(),e=this.ol(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Kc(this.bh,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Nc(Object.assign({},this.progress),t))]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fl=function(t){this.key=t},pl=function(t){this.key=t},dl=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=Ys(),this.De=Ys(),this.hl=Yo(t),this.ll=new Js(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new $s,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,a=!1,u=jo(this.query)&&i.size===this.query.limit?i.last():null,c=Fo(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt((function(t,e){var h=i.get(t),l=e instanceof ho?e:null;l&&(l=Qo(n.query,l)?l:null);var f=!!h&&n.De.has(h.key),p=!!l&&(l.Vt||n.De.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data().isEqual(l.data())?f!==p&&(r.track({type:3,doc:l}),d=!0):n.wl(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.hl(l,u)>0||c&&n.hl(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(l?(s=s.add(l),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),jo(this.query)||Fo(this.query))for(;s.size>this.query.limit;){var h=jo(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{ll:s,dl:r,lc:a,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ai()}};return n(t)-n(e)}(t.type,e.type)||r.hl(t.doc,e.doc)})),this.El(n);var s=e?this.Tl():[],a=0===this.ul.size&&this.Be?1:0,u=a!==this.al;return this.al=a,0!==o.length||u?{snapshot:new ta(this.query,t.ll,i,o,t.De,0===a,u,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new $s,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach((function(t){return e.cl=e.cl.add(t)})),t.Ue.forEach((function(t){})),t.Qe.forEach((function(t){return e.cl=e.cl.delete(t)})),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=Ys(),this.ll.forEach((function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))}));var n=[];return e.forEach((function(e){t.ul.has(e)||n.push(new pl(e))})),this.ul.forEach((function(t){e.has(t)||n.push(new fl(t))})),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=Ys();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return ta.Ne(this.query,this.ll,this.De,0===this.al)},t}(),vl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},gl=function(t){this.key=t,this.Pl=!1},yl=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new Xu((function(t){return Go(t)}),zo),this.Sl=new Map,this.Dl=new Set,this.Cl=new Ms(Oi.H),this.xl=new Map,this.Nl=new Yc,this.$l={},this.Fl=new Map,this.Ol=oc.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();function ml(t,e){return Xr(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Zr(this,(function(u){switch(u.label){case 0:return n=Kl(t),(o=n.vl.get(e))?(r=o.targetId,n.Vl.Fa(r),i=o.view.Rl(),[3,4]):[3,1];case 1:return[4,Vc(n.bh,Ho(e))];case 2:return s=u.sent(),a=n.Vl.Fa(s.targetId),r=s.targetId,[4,bl(n,e,r,"current"===a)];case 3:i=u.sent(),n.Ml&&xh(n.yl,s),u.label=4;case 4:return[2,i]}}))}))}function bl(t,e,n,r){return Xr(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Zr(this,(function(h){switch(h.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return Xr(this,void 0,void 0,(function(){var i,o,s;return Zr(this,(function(a){switch(a.label){case 0:return i=e.view.fl(n),i.lc?[4,Bc(t.bh,e.query,!1).then((function(t){var n=t.documents;return e.view.fl(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(Ol(t,e.targetId,s.Il),s.snapshot)]}}))}))}(t,e,n,r)},[4,Bc(t.bh,e,!0)];case 1:return i=h.sent(),o=new dl(e,i.Rc),s=o.fl(i.documents),a=na.Le(n,r&&"Offline"!==t.onlineState),u=o.wi(s,t.Ml,a),Ol(t,n,u.Il),c=new vl(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),u.snapshot)]}}))}))}function _l(t,e){return Xr(this,void 0,void 0,(function(){var n,r,i;return Zr(this,(function(o){switch(o.label){case 0:return n=ci(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter((function(t){return!zo(t,e)}))),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,qc(n.bh,r.targetId,!1).then((function(){n.Vl.La(r.targetId),Oh(n.yl,r.targetId),Pl(n,r.targetId)})).catch(Yu)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Pl(n,r.targetId),[4,qc(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function wl(t,e,n){return Xr(this,void 0,void 0,(function(){var r,i,o,s;return Zr(this,(function(a){switch(a.label){case 0:r=Ql(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=ci(t),i=Ci.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Ys());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Tc.Xo(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=_s(c,n.get(c.key));null!=h&&s.push(new Ts(c.key,h,uo(h.proto.mapValue),vs.exists(!0)))}return r.zo.Ri(t,i,s,e)}))})).then((function(t){var e=t.xs(n);return{batchId:t.batchId,ri:e}}))}(r.bh,e)];case 2:return i=a.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new Ms(fi)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,Ll(r,i.ri)];case 3:return a.sent(),[4,Wh(r.yl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=eu(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Il(t,e){return Xr(this,void 0,void 0,(function(){var n,r;return Zr(this,(function(i){switch(i.label){case 0:n=ci(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,jc(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach((function(t,e){var r=n.xl.get(e);r&&(ui(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?ui(r.Pl):t.Qe.size>0&&(ui(r.Pl),r.Pl=!1))})),[4,Ll(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Yu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function El(t,e,n){var r=ci(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach((function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=ci(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)})),r&&sl(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function Tl(t,e,n){return Xr(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Zr(this,(function(c){switch(c.label){case 0:return(r=ci(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new Ms(Oi.H)).zt(o,new lo(o,ki.min())),a=Ys().add(o),u=new ea(ki.min(),new Map,new Us(fi),s,a),[4,Il(r,u)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),Dl(r),[3,4];case 2:return[4,qc(r.bh,e,!1).then((function(){return Pl(r,e,n)})).catch(Yu)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Sl(t,e){return Xr(this,void 0,void 0,(function(){var n,r,i;return Zr(this,(function(o){switch(o.label){case 0:n=ci(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Lc(n.bh,e)];case 2:return i=o.sent(),Al(n,r,null),Nl(n,r),n.Vl.Na(r,"acknowledged"),[4,Ll(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Yu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Cl(t,e,n){return Xr(this,void 0,void 0,(function(){var r,i;return Zr(this,(function(o){switch(o.label){case 0:r=ci(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ci(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.zo.Pi(t,e).next((function(e){return ui(null!==e),r=e.keys(),n.zo.Ci(t,e)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}(r.bh,e)];case 2:return i=o.sent(),Al(r,e,n),Nl(r,e),r.Vl.Na(e,"rejected",n),[4,Ll(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Yu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function kl(t,e){return Xr(this,void 0,void 0,(function(){var n,r,i,o,s;return Zr(this,(function(a){switch(a.label){case 0:jh((n=ci(t)).yl)||ri("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=ci(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.zo.Vi(t)}))}(n.bh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=a.sent(),s=eu(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Nl(t,e){(t.Fl.get(e)||[]).forEach((function(t){t.resolve()})),t.Fl.delete(e)}function Al(t,e,n){var r=ci(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function Pl(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach((function(e){t.Nl.Fi(e)||xl(t,e)}))}function xl(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(Oh(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),Dl(t))}function Ol(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof fl?(t.Nl.nr(o.key,e),Rl(t,o)):o instanceof pl?(ri("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||xl(t,o.key)):ai()}}function Rl(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(ri("SyncEngine","New document in limbo: "+n),t.Dl.add(r),Dl(t))}function Dl(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new Oi(Ai.ot(e)),r=t.Ol.next();t.xl.set(r,new gl(n)),t.Cl=t.Cl.zt(n,r),xh(t.yl,new Zo(Ho(Mo(n.path)),r,2,Si.q))}}function Ll(t,e,n){return Xr(this,void 0,void 0,(function(){var r,i,o,s;return Zr(this,(function(a){switch(a.label){case 0:return r=ci(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach((function(t,a){s.push(r.Ll(a,e,n).then((function(t){if(t){r.Ml&&r.Vl.Ba(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Pc.oc(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.bl.ah(i),[4,function(t,e){return Xr(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h;return Zr(this,(function(l){switch(l.label){case 0:n=ci(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Wa.forEach(e,(function(e){return Wa.forEach(e.ic,(function(r){return n.persistence.Ti.nr(t,e.targetId,r)})).next((function(){return Wa.forEach(e.rc,(function(r){return n.persistence.Ti.ir(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!Ya(r=l.sent()))throw r;return ri("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.fc.get(a),c=u.Ot,h=u.Lt(c),n.fc=n.fc.zt(a,h));return[2]}}))}))}(r.bh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Ml(t,e){return Xr(this,void 0,void 0,(function(){var n,r;return Zr(this,(function(i){switch(i.label){case 0:return(n=ci(t)).currentUser.isEqual(e)?[3,3]:(ri("SyncEngine","User change. New user:",e.A()),[4,Dc(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fl.forEach((function(t){t.forEach((function(t){t.reject(new yi(gi.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fl.clear()}(n),n.Vl.Ua(e,r.mc,r.Ac),[4,Ll(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function jl(t,e){var n=ci(t),r=n.xl.get(e);if(r&&r.Pl)return Ys().add(r.key);var i=Ys(),o=n.Sl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.vl.get(u);i=i.Pe(c.view._l)}return i}function Fl(t,e){return Xr(this,void 0,void 0,(function(){var n,r,i;return Zr(this,(function(o){switch(o.label){case 0:return[4,Bc((n=ci(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&Ol(n,e.targetId,i.Il),i)]}}))}))}function Ul(t){return Xr(this,void 0,void 0,(function(){var e;return Zr(this,(function(n){return[2,Wc((e=ci(t)).bh).then((function(t){return Ll(e,t)}))]}))}))}function Vl(t,e,n,r){return Xr(this,void 0,void 0,(function(){var i,o;return Zr(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=ci(t),r=ci(n.zo);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.yi(t,e).next((function(e){return e?n.Tc.Xo(t,e):Wa.resolve(null)}))}))}((i=ci(t)).bh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Wh(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Al(i,e,r||null),Nl(i,e),function(t,e){ci(ci(t).zo).xi(e)}(i.bh,e)):ai(),s.label=4;case 4:return[4,Ll(i,o)];case 5:return s.sent(),[3,7];case 6:ri("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function ql(t,e){return Xr(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Zr(this,(function(h){switch(h.label){case 0:return Kl(n=ci(t)),Ql(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,Bl(n,r.it())]);case 1:return i=h.sent(),n.kl=!0,[4,Zh(n.yl,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)a=s[o],xh(n.yl,a);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(u=[],c=Promise.resolve(),n.Sl.forEach((function(t,e){n.Vl.Ma(e)?u.push(e):c=c.then((function(){return Pl(n,e),qc(n.bh,e,!0)})),Oh(n.yl,e)})),[4,c]);case 4:return h.sent(),[4,Bl(n,u)];case 5:return h.sent(),function(t){var e=ci(t);e.xl.forEach((function(t,n){Oh(e.yl,n)})),e.Nl.Oc(),e.xl=new Map,e.Cl=new Ms(Oi.H)}(n),n.kl=!1,[4,Zh(n.yl,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function Bl(t,e,n){return Xr(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v;return Zr(this,(function(g){switch(g.label){case 0:n=ci(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Sl.get(a))&&0!==c.length?[4,Vc(n.bh,Ho(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),h=0,l=c,g.label=3;case 3:return h<l.length?(f=l[h],p=n.vl.get(f),[4,Fl(n,p)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Hc(n.bh,a)];case 8:return v=g.sent(),[4,Vc(n.bh,v)];case 9:return u=g.sent(),[4,bl(n,Hl(v),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}}))}))}function Hl(t){return Lo(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Wl(t){var e=ci(t);return ci(ci(e.bh).persistence).Uo()}function zl(t,e,n,r){return Xr(this,void 0,void 0,(function(){var i,o,s;return Zr(this,(function(a){switch(a.label){case 0:return(i=ci(t)).kl?(ri("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Wc(i.bh)];case 3:return o=a.sent(),s=ea.Me(e,"current"===n),[4,Ll(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,qc(i.bh,e,!0)];case 6:return a.sent(),Pl(i,e,r),[3,8];case 7:ai(),a.label=8;case 8:return[2]}}))}))}function Gl(t,e,n){return Xr(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,l,f;return Zr(this,(function(p){switch(p.label){case 0:if(!(r=Kl(t)).kl)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Sl.has(s)?(ri("SyncEngine","Adding an already active target "+s),[3,5]):[4,Hc(r.bh,s)]):[3,6];case 2:return a=p.sent(),[4,Vc(r.bh,a)];case 3:return u=p.sent(),[4,bl(r,Hl(a),u.targetId,!1)];case 4:p.sent(),xh(r.yl,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Zr(this,(function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,qc(r.bh,t,!1).then((function(){Oh(r.yl,t),Pl(r,t)})).catch(Yu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Kl(t){var e=ci(t);return e.yl.Dh.Lh=Il.bind(null,e),e.yl.Dh.vn=jl.bind(null,e),e.yl.Dh.Mh=Tl.bind(null,e),e.bl.ah=il.bind(null,e.gl),e.bl.Bl=ol.bind(null,e.gl),e}function Ql(t){var e=ci(t);return e.yl.Dh.Bh=Sl.bind(null,e),e.yl.Dh.qh=Cl.bind(null,e),e}function Yl(t,e,n){var r=ci(t);(function(t,e,n){return Xr(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Zr(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=ci(t),r=ga(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.wo.Os(t,e.id)})).then((function(t){return!!t&&t.createTime._(r)>=0}))}(t.bh,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n.ql(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n.Ul(ll(r)),i=new hl(r,t.bh,e.Qt),[4,e.Ql()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.rl(o)]:[3,10];case 7:return(s=c.sent())&&n.Ul(s),[4,e.Ql()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return a=c.sent(),[4,Ll(t,a.Go,void 0)];case 12:return c.sent(),[4,function(t,e){var n=ci(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.wo.ks(t,e)}))}(t.bh,r)];case 13:return c.sent(),n.ql(a.progress),[3,15];case 14:return oi("SyncEngine","Loading bundle failed with "+(u=c.sent())),n.Kl(u),[3,15];case 15:return[2]}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(r,e,n).then((function(){r.Vl.Wa()}))}var Xl=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(e){switch(e.label){case 0:return this.Qt=wh(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}}))}))},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return Rc(this.persistence,new xc,t.Jl,this.Qt)},t.prototype.jl=function(t){return new eh(rh.ia,this.Qt)},t.prototype.Wl=function(t){return new ph},t.prototype.terminate=function(){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}}))}))},t}(),Zl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Yr(e,t),e.prototype.initialize=function(e){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,zc(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,Ql(this.Yl._a)];case 4:return n.sent(),[4,Wh(this.Yl.yl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Hl=function(t){return Rc(this.persistence,new xc,t.Jl,this.Qt)},e.prototype.zl=function(t){var e=this.persistence.Ti.lr;return new fc(e,t._s)},e.prototype.jl=function(t){var e=kc(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?Qu.Ys(this.cacheSizeBytes):Qu.ti;return new Tc(this.synchronizeTabs,e,t.clientId,n,t._s,bh(),_h(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new ph},e}(Xl),Jl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Yr(e,t),e.prototype.initialize=function(e){return Xr(this,void 0,void 0,(function(){var n,r=this;return Zr(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof fh?(this.Vl._a={eu:Vl.bind(null,n),nu:zl.bind(null,n),su:Gl.bind(null,n),Uo:Wl.bind(null,n),tu:Ul.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro((function(t){return Xr(r,void 0,void 0,(function(){return Zr(this,(function(e){switch(e.label){case 0:return[4,ql(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Wl=function(t){var e=bh();if(!fh.Kn(e))throw new yi(gi.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=kc(t.yu.t,t.yu.persistenceKey);return new fh(e,t._s,n,t.clientId,t.Jl)},e}(Zl),$l=function(){function t(){}return t.prototype.initialize=function(t,e){return Xr(this,void 0,void 0,(function(){var n=this;return Zr(this,(function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return El(n._a,t,1)},this.yl.Dh.n_=Ml.bind(null,this._a),[4,Zh(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.t_=function(t){return new el},t.prototype.Xl=function(t){var e,n=wh(t.yu.t),r=(e=t.yu,new mh(e));return function(t,e,n){return new Ch(t,e,n)}(t.credentials,r,n)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return El(s._a,t,0)},o=vh.Kn()?new vh:new dh,new Nh(e,n,r,i,o)},t.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){var a=new yl(t,e,n,r,i,o);return s&&(a.kl=!0),a}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},t.prototype.terminate=function(){return function(t){return Xr(this,void 0,void 0,(function(){var e;return Zr(this,(function(n){switch(n.label){case 0:return e=ci(t),ri("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,Ph(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}}))}))}(this.yl)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Xr(this,void 0,void 0,(function(){var r;return Zr(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(t){return[2]}))}))},releaseLock:function(){}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ef=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),nf=function(){function t(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new Ha,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then((function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.r_.cancel()},t.prototype.getMetadata=function(){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Ql=function(){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}}))}))},t.prototype.c_=function(){return Xr(this,void 0,void 0,(function(){var t,e,n,r;return Zr(this,(function(i){switch(i.label){case 0:return[4,this.a_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.o_.decode(t),n=Number(e),isNaN(n)&&this.u_("length string ("+e+") is not valid number"),[4,this.h_(n)]);case 2:return r=i.sent(),[2,new ul(JSON.parse(r),t.length+n)]}}))}))},t.prototype.l_=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.a_=function(){return Xr(this,void 0,void 0,(function(){var t,e;return Zr(this,(function(n){switch(n.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.h_=function(t){return Xr(this,void 0,void 0,(function(){var e;return Zr(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:n.sent()&&this.u_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.__=function(){return Xr(this,void 0,void 0,(function(){var t,e;return Zr(this,(function(n){switch(n.label){case 0:return[4,this.r_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),rf=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new yi(gi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new xi(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}(),of=function(t){this._methodName=t},sf=function(t){this.d_=t};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(t,e,n){if(!n)throw new yi(gi.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function uf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new yi(gi.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function cf(t,e,n,r){if(!0===e&&!0===r)throw new yi(gi.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function hf(t){if(!Oi.wt(t))throw new yi(gi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function lf(t){if(Oi.wt(t))throw new yi(gi.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function ff(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==(0,m.Z)(t)){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ai()}function pf(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new yi(gi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ff(t);throw new yi(gi.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function df(t,e){if(e<=0)throw new yi(gi.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new yi(gi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new yi(gi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,cf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),gf=new Map,yf=function(){function t(t,e){this.w_="(lite)",this.E_=new vf({}),this.T_=!1,t instanceof ti?(this.I_=t,this.m_=new wi):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new yi(gi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ti(t.options.projectId)}(t),this.m_=new Ii(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new yi(gi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new yi(gi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new vf(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new wi;switch(t.type){case"gapi":var e=t.client;return ui(!("object"!=(0,m.Z)(e)||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ti(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new yi(gi.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return t=this,(e=gf.get(t))&&(ri("ComponentProvider","Removing Datastore"),gf.delete(t),e.terminate()),Promise.resolve();var t,e},t}(),mf=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new _f(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),bf=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),_f=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Mo(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Yr(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new mf(this.firestore,null,new Oi(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(bf);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof sf&&(t=t.d_),af("collection","path",e),t instanceof yf)return lf(n=Ai.ot.apply(Ai,Jr([e],r))),new _f(t,null,n);if(!(t instanceof mf||t instanceof _f))throw new yi(gi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return lf(n=Ai.ot.apply(Ai,Jr([t.path],r)).child(Ai.ot(e))),new _f(t.firestore,null,n)}function If(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof sf&&(t=t.d_),1===arguments.length&&(e=li.u()),af("doc","path",e),t instanceof yf)return hf(n=Ai.ot.apply(Ai,Jr([e],r))),new mf(t,null,new Oi(n));if(!(t instanceof mf||t instanceof _f))throw new yi(gi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return hf(n=t.D_.child(Ai.ot.apply(Ai,Jr([e],r)))),new mf(t.firestore,t instanceof _f?t.v_:null,new Oi(n))}function Ef(t,e){return t instanceof sf&&(t=t.d_),e instanceof sf&&(e=e.d_),(t instanceof mf||t instanceof _f)&&(e instanceof mf||e instanceof _f)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Tf(t,e){return t instanceof sf&&(t=t.d_),e instanceof sf&&(e=e.d_),t instanceof bf&&e instanceof bf&&t.firestore===e.firestore&&zo(t.C_,e.C_)&&t.v_===e.v_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Sf=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new yi(gi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new yi(gi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return fi(this.x_,t.x_)||fi(this.N_,t.N_)},t}(),Cf=/^__.*__$/,kf=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new Ts(t,this.data,this.Gt,e,this.fieldTransforms):new Es(t,this.data,e,this.fieldTransforms)},t}(),Nf=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Ts(t,this.data,this.Gt,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ai()}}var Pf=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return Xf(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find((function(e){return t.nt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.nt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Af(this.k_)&&Cf.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),xf=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||wh(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Pf({k_:t,methodName:e,j_:n,path:xi.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function Of(t){var e=t.p_(),n=wh(t.I_);return new xf(t.I_,!!e.ignoreUndefinedProperties,n)}function Rf(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Gf("Data must be an object, but it was:",s,r);var a,u,c=Wf(r,s);if(o.merge)a=new Mi(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=Kf(e,f[l],n);if(!s.contains(p))throw new yi(gi.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Zf(h,p)||h.push(p)}a=new Mi(h),u=s.fieldTransforms.filter((function(t){return a.Tt(t.field)}))}else a=null,u=s.fieldTransforms;return new kf(new so(c),a,u)}var Df=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yr(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(of);function Lf(t,e,n){return new Pf({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var Mf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yr(e,t),e.prototype.z_=function(t){return new ps(t.path,new os)},e.prototype.isEqual=function(t){return t instanceof e},e}(of),jf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Yr(e,t),e.prototype.z_=function(t){var e=Lf(this,t,!0),n=this.H_.map((function(t){return Hf(t,e)})),r=new ss(n);return new ps(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(of),Ff=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Yr(e,t),e.prototype.z_=function(t){var e=Lf(this,t,!0),n=this.H_.map((function(t){return Hf(t,e)})),r=new us(n);return new ps(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(of),Uf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Yr(e,t),e.prototype.z_=function(t){var e=new hs(t.Qt,ts(t.Qt,this.J_));return new ps(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(of);function Vf(t,e,n,r){var i=t.G_(1,e,n);Gf("Data must be an object, but it was:",i,r);var o=[],s=new ao;Di(r,(function(t,r){var a=Yf(e,t,n);r instanceof sf&&(r=r.d_);var u=i.U_(a);if(r instanceof Df)o.push(a);else{var c=Hf(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Mi(o);return new Nf(s.Pt(),a,i.fieldTransforms)}function qf(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[Kf(e,r,n)],u=[i];if(o.length%2!=0)throw new yi(gi.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Kf(e,o[c])),u.push(o[c+1]);for(var h=[],l=new ao,f=a.length-1;f>=0;--f)if(!Zf(h,a[f])){var p=a[f],d=u[f];d instanceof sf&&(d=d.d_);var v=s.U_(p);if(d instanceof Df)h.push(p);else{var g=Hf(d,v);null!=g&&(h.push(p),l.set(p,g))}}var y=new Mi(h);return new Nf(l.Pt(),y,s.fieldTransforms)}function Bf(t,e,n,r){return void 0===r&&(r=!1),Hf(n,t.G_(r?4:3,e))}function Hf(t,e){if(t instanceof sf&&(t=t.d_),zf(t))return Gf("Unsupported field value:",e,t),Wf(t,e);if(t instanceof of)return function(t,e){if(!Af(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Hf(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof sf&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ts(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ci.fromDate(t);return{timestampValue:pa(e.Qt,n)}}if(t instanceof Ci)return n=new Ci(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:pa(e.Qt,n)};if(t instanceof Sf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof mi)return{bytesValue:da(e.Qt,t.I)};if(t instanceof mf){n=e.t;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:ya(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+ff(t))}(t,e)}function Wf(t,e){var n={};return Li(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):Di(t,(function(t,r){var i=Hf(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function zf(t){return!("object"!=(0,m.Z)(t)||null===t||t instanceof Array||t instanceof Date||t instanceof Ci||t instanceof Sf||t instanceof mi||t instanceof mf||t instanceof of)}function Gf(t,e,n){if(!zf(n)||!function(t){return"object"==(0,m.Z)(t)&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=ff(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function Kf(t,e,n){if(e instanceof sf&&(e=e.d_),e instanceof rf)return e.f_;if("string"==typeof e)return Yf(t,e);throw Xf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Qf=new RegExp("[~\\*/\\[\\]]");function Yf(t,e,n){if(e.search(Qf)>=0)throw Xf("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(rf.bind.apply(rf,Jr([void 0],e.split("."))))).f_}catch(U){throw Xf("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Xf(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new yi(gi.INVALID_ARGUMENT,(a+=". ")+t+u)}function Zf(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jf=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Xr(this,void 0,void 0,(function(){var e,n=this;return Zr(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new yi(gi.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Xr(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Zr(this,(function(u){switch(u.label){case 0:return n=ci(t),r=Ea(n.Qt)+"/documents",i={documents:e.map((function(t){return ba(n.Qt,t)}))},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){ui(!!e.found),e.found.name,e.found.updateTime;var n=_a(t,e.found.name),r=ga(e.found.updateTime),i=new so({mapValue:{fields:e.found.fields}});return new ho(n,r,i,{})}(t,e):"missing"in e?function(t,e){ui(!!e.missing),ui(!!e.readTime);var n=_a(t,e.missing),r=ga(e.readTime);return new lo(n,r)}(t,e):ai()}(n.Qt,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());ui(!!e),a.push(e)})),a)]}}))}))}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof lo||t instanceof ho?n.sf(t):ai()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new xs(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Xr(this,void 0,void 0,(function(){var t,e=this;return Zr(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Oi._t(n);e.mutations.push(new Os(r,e.jt(r)))})),[4,function(t,e){return Xr(this,void 0,void 0,(function(){var n,r,i;return Zr(this,(function(o){switch(o.label){case 0:return n=ci(t),r=Ea(n.Qt)+"/documents",i={writes:e.map((function(t){return ka(n.Qt,t)}))},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof ho)e=t.version;else{if(!(t instanceof lo))throw ai();e=ki.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new yi(gi.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?vs.updateTime(e):vs.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(ki.min()))throw new yi(gi.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vs.updateTime(e)}return vs.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),$f=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new Ih(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu((function(){return Xr(t,void 0,void 0,(function(){var t,e,n=this;return Zr(this,(function(r){return t=new Jf(this.Sh),(e=this.uf(t))&&e.then((function(e){n._s.Ps((function(){return t.commit().then((function(){n.Es.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Wi(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps((function(){return e.af(),Promise.resolve()}))):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ds(e)}return!1},t}(),tp=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=bi.UNAUTHENTICATED,this.clientId=li.u(),this._f=function(){},this.C=new Ha,this.credentials.v((function(t){ri("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()}))}return t.prototype.getConfiguration=function(){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this._s.wf)throw new yi(gi.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new Ha;return this._s.Tf((function(){return Xr(t,void 0,void 0,(function(){var t,n;return Zr(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=eu(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t,e){return Xr(this,void 0,void 0,(function(){var n,r,i=this;return Zr(this,(function(o){switch(o.label){case 0:return t._s.Af(),ri("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff((function(n){r.isEqual(n)||(r=n,t._s.po((function(){return Xr(i,void 0,void 0,(function(){return Zr(this,(function(t){switch(t.label){case 0:return[4,Dc(e.bh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Po((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function np(t,e){return Xr(this,void 0,void 0,(function(){var n,r;return Zr(this,(function(i){switch(i.label){case 0:return t._s.Af(),[4,rp(t)];case 1:return n=i.sent(),ri("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t._s.po((function(){return function(t,e){return Xr(this,void 0,void 0,(function(){var n,r;return Zr(this,(function(i){switch(i.label){case 0:return(n=ci(t))._s.Af(),ri("RemoteStore","RemoteStore received new credentials"),r=jh(n),n.Nh.add(3),[4,Ph(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,Ah(n)];case 3:return i.sent(),[2]}}))}))}(e.yl,n)}))})),t.If=e,[2]}}))}))}function rp(t){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(ri("FirestoreClient","Using default OfflineComponentProvider"),[4,ep(t,new Xl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function ip(t){return Xr(this,void 0,void 0,(function(){return Zr(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(ri("FirestoreClient","Using default OnlineComponentProvider"),[4,np(t,new $l)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function op(t){return rp(t).then((function(t){return t.persistence}))}function sp(t){return rp(t).then((function(t){return t.bh}))}function ap(t){return ip(t).then((function(t){return t.yl}))}function up(t){return ip(t).then((function(t){return t._a}))}function cp(t){return Xr(this,void 0,void 0,(function(){var e,n;return Zr(this,(function(r){switch(r.label){case 0:return[4,ip(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=ml.bind(null,e._a),n.Hh=_l.bind(null,e._a),n)]}}))}))}function hp(t,e,n){var r=this;void 0===n&&(n={});var i=new Ha;return t._s.Ps((function(){return Xr(r,void 0,void 0,(function(){var r;return Zr(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ef({next:function(o){e.Ps((function(){return rl(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new yi(gi.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new yi(gi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new al(Mo(n.path),o,{includeMetadataChanges:!0,nl:!0});return nl(t,s)},[4,cp(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}function lp(t,e,n){var r=this;void 0===n&&(n={});var i=new Ha;return t._s.Ps((function(){return Xr(r,void 0,void 0,(function(){var r;return Zr(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ef({next:function(n){e.Ps((function(){return rl(t,s)})),n.fromCache&&"server"===r.source?i.reject(new yi(gi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new al(n,o,{includeMetadataChanges:!0,nl:!0});return nl(t,s)},[4,cp(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}var fp=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new Ih(this,"async_queue_retry"),this.vf=function(){var e=_h();e&&ri("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=_h();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=_h();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return Xr(this,void 0,void 0,(function(){var t,e=this;return Zr(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!Ya(t=n.sent()))throw t;return ri("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,ii("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=tu.Ts(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&ai()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Xr(this,void 0,void 0,(function(){var t;return Zr(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ds-e.ds}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()}))},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function pp(t){return function(t,e){if("object"!=(0,m.Z)(t)||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var dp=function(){function t(){this.kf={},this.Mf=new Ha,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Mf.promise.catch(t)},t.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},t.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},t.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},t.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)},t}(),vp=-1,gp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new fp,r.w_="name"in e?e.name:"[DEFAULT]",r}return Yr(e,t),e.prototype.b_=function(){return this.qf||mp(this),this.qf.terminate()},e}(yf);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(t){return t.qf||mp(t),t.qf.df(),t.qf}function mp(t){var e=t.p_(),n=function(t,e,n){return new $r(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.qf=new tp(t.m_,t.Bf,n)}function bp(t,e,n){var r=this,i=new Ha;return t._s.enqueue((function(){return Xr(r,void 0,void 0,(function(){var r;return Zr(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,ep(t,n)];case 1:return o.sent(),[4,np(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===gi.FAILED_PRECONDITION||t.code===gi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function _p(t){if(t.R_||t.P_)throw new yi(gi.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wp=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),Ki(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ui(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(Vi(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw ai()}},t.prototype.Hf=function(t,e){var n=this,r={};return Di(t.fields||{},(function(t,i){r[t]=n.Uf(i,e)})),r},t.prototype.Gf=function(t){return new Sf(Ui(t.latitude),Ui(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.Uf(t,e)}))},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=Bi(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(Hi(t));default:return null}},t.prototype.Qf=function(t){var e=Fi(t);return new Ci(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=Ai.ot(t);ui(Ba(n));var r=new ti(n.get(1),n.get(3)),i=new Oi(n.Y(5));return r.isEqual(e)||ii("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Ip=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new mf(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new Ep(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(Tp("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),Ep=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yr(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Ip);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(t,e){return"string"==typeof e?Yf(t,e):e instanceof sf?e.d_.f_:e.f_}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t){if(Fo(t)&&0===t.xt.length)throw new yi(gi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Cp=function(){};function kp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var Np=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return Yr(e,t),e.prototype.td=function(t){var e=Of(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new yi(gi.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Lp(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var l=h[c];u.push(Dp(r,t,l))}a={arrayValue:{values:u}}}else a=Dp(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Lp(s,o),a=Bf(n,"where",s,"in"===o||"not-in"===o);var f=bo.create(i,o,a);return function(t,e){if(e.Ct()){var n=Vo(t);if(null!==n&&!n.isEqual(e.field))throw new yi(gi.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Uo(t);null!==r&&Mp(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new yi(gi.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new yi(gi.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t.C_,0,e,t.firestore.I_,this.ed,this.nd,this.sd);return new bf(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Do(t.path,t.collectionGroup,t.xt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Cp),Ap=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return Yr(e,t),e.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new yi(gi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new yi(gi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Po(e,n);return function(t,e){if(null===Uo(t)){var n=Vo(t);null!==n&&Mp(t,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new bf(t.firestore,t.v_,function(t,e){var n=t.xt.concat([e]);return new Do(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Cp),Pp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return Yr(e,t),e.prototype.td=function(t){return new bf(t.firestore,t.v_,Wo(t.C_,this.od,this.ad))},e}(Cp),xp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Yr(e,t),e.prototype.td=function(t){var e=Rp(t,this.type,this.ud,this.hd);return new bf(t.firestore,t.v_,function(t,e){return new Do(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Cp),Op=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Yr(e,t),e.prototype.td=function(t){var e=Rp(t,this.type,this.ud,this.hd);return new bf(t.firestore,t.v_,function(t,e){return new Do(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Cp);function Rp(t,e,n,r){if(n[0]instanceof sf&&(n[0]=n[0].d_),n[0]instanceof Ip)return function(t,e,n,r,i){if(!r)throw new yi(gi.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Bo(t);s<a.length;s++){var u=a[s];if(u.field.ut())o.push(to(e,r.key));else{var c=r.field(u.field);if(qi(c))throw new yi(gi.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.rt();throw new yi(gi.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new No(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=Of(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new yi(gi.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new yi(gi.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+(0,m.Z)(c));if(!qo(t)&&-1!==c.indexOf("/"))throw new yi(gi.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Ai.ot(c));if(!Oi.wt(h))throw new yi(gi.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new Oi(h);a.push(to(e,l))}else{var f=Bf(n,r,c);a.push(f)}}return new No(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Dp(t,e,n){if(n instanceof sf&&(n=n.d_),"string"==typeof n){if(""===n)throw new yi(gi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!qo(e)&&-1!==n.indexOf("/"))throw new yi(gi.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ai.ot(n));if(!Oi.wt(r))throw new yi(gi.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return to(t,new Oi(r))}if(n instanceof mf)return to(t,n.S_);throw new yi(gi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ff(n)+".")}function Lp(t,e){if(!Array.isArray(t)||0===t.length)throw new yi(gi.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new yi(gi.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Mp(t,e,n){if(!n.isEqual(e))throw new yi(gi.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Fp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Yr(e,t),e.prototype.Wf=function(t){return new mi(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new mf(this.firestore,null,e)},e}(wp),Up=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Vp=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).Yf=e,a.ld=e,a.metadata=o,a}return Yr(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new qp(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(Tp("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(Ip),qp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yr(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Vp),Bp=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new Up(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach((function(r){t.call(e,new qp(n.Yf,n.Xf,r.key,r,new Up(n._d.De.has(r.key),n._d.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new yi(gi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map((function(e){var r=new qp(t.Yf,t.Xf,e.doc.key,e.doc,new Up(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._d.Se;return t._d.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new qp(t.Yf,t.Xf,e.doc.key,e.doc,new Up(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Hp(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.dd=e),this.fd},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ai()}}function Wp(t,e){return t instanceof Vp&&e instanceof Vp?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof Bp&&e instanceof Bp&&t.Yf===e.Yf&&Tf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Yr(e,t),e.prototype.Wf=function(t){return new mi(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new mf(this.firestore,null,e)},e}(wp);function Gp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=pf(t,mf);var o=pf(t.firestore,gp),s=Of(o);return e instanceof sf&&(e=e.d_),Qp(o,[("string"==typeof e||e instanceof rf?qf(s,"updateDoc",t.S_,e,n,r):Vf(s,"updateDoc",t.S_,e)).F_(t.S_,vs.exists(!0))])}function Kp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof sf&&(t=t.d_);var s={includeMetadataChanges:!1},a=0;"object"!=(0,m.Z)(i[a])||pp(i[a])||(s=i[a],a++);var u,c,h,l={includeMetadataChanges:s.includeMetadataChanges};if(pp(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof mf)c=pf(t.firestore,gp),h=Mo(t.S_.path),u={next:function(e){i[a]&&i[a](Yp(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=pf(t,bf);c=pf(p.firestore,gp),h=p.C_;var d=new zp(c);u={next:function(t){i[a]&&i[a](new Bp(c,d,p,t))},error:i[a+1],complete:i[a+2]},Sp(t.C_)}return function(t,e,n,r){var i=this,o=new ef(r),s=new al(e,o,n);return t._s.Ps((function(){return Xr(i,void 0,void 0,(function(){var e;return Zr(this,(function(n){switch(n.label){case 0:return e=nl,[4,cp(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.i_(),t._s.Ps((function(){return Xr(i,void 0,void 0,(function(){var e;return Zr(this,(function(n){switch(n.label){case 0:return e=rl,[4,cp(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(yp(c),h,l,u)}function Qp(t,e){return function(t,e){var n=this,r=new Ha;return t._s.Ps((function(){return Xr(n,void 0,void 0,(function(){var n;return Zr(this,(function(i){switch(i.label){case 0:return n=wl,[4,up(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(yp(t),e)}function Yp(t,e,n){var r=n.docs.get(e.S_),i=new zp(t);return new Vp(t,i,e.S_,r,new Up(n.hasPendingWrites,n.fromCache),e.v_)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xp=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=Of(t)}return t.prototype.set=function(t,e,n){this.md();var r=Zp(t,this.Yf),i=jp(r.v_,e,n),o=Rf(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,vs.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=Zp(t,this.Yf);return e instanceof sf&&(e=e.d_),o="string"==typeof e||e instanceof rf?qf(this.Id,"WriteBatch.update",s.S_,e,n,r):Vf(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,vs.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=Zp(t,this.Yf);return this.Ed=this.Ed.concat(new xs(e.S_,vs.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new yi(gi.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Zp(t,e){if(t instanceof sf&&(t=t.d_),t.firestore!==e)throw new yi(gi.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return Yr(e,t),e.prototype.get=function(e){var n=this,r=Zp(e,this.Yf),i=new zp(this.Yf);return t.prototype.get.call(this,e).then((function(t){return new Vp(n.Yf,i,r.S_,t.Zf,new Up(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=Of(t)}return t.prototype.get=function(t){var e=this,n=Zp(t,this.Yf),r=new Fp(this.Yf);return this.Ad.ef([n.S_]).then((function(t){if(!t||1!==t.length)return ai();var i=t[0];if(i instanceof lo)return new Ip(e.Yf,r,n.S_,null,n.v_);if(i instanceof ho)return new Ip(e.Yf,r,i.key,i,n.v_);throw ai()}))},t.prototype.set=function(t,e,n){var r=Zp(t,this.Yf),i=jp(r.v_,e,n),o=Rf(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Zp(t,this.Yf);return e instanceof sf&&(e=e.d_),o="string"==typeof e||e instanceof rf?qf(this.Id,"Transaction.update",s.S_,e,n,r):Vf(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=Zp(t,this.Yf);return this.Ad.delete(e.S_),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(){if("undefined"==typeof Uint8Array)throw new yi(gi.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function td(){if("undefined"==typeof atob)throw new yi(gi.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ed=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yr(e,t),e.fromBase64String=function(t){return td(),new e(mi.fromBase64String(t))},e.fromUint8Array=function(t){return $p(),new e(mi.fromUint8Array(t))},e.prototype.toBase64=function(){return td(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return $p(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(sf),nd=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){_p(t=pf(t,gp));var n=yp(t),r=t.p_(),i=new $l;return bp(n,i,new Zl(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){_p(t=pf(t,gp));var e=yp(t),n=t.p_(),r=new $l;return bp(e,r,new Jl(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new yi(gi.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Ha;return t.Bf.Tf((function(){return Xr(e,void 0,void 0,(function(){var e;return Zr(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Xr(this,void 0,void 0,(function(){var e;return Zr(this,(function(n){switch(n.label){case 0:return Ga.Kn()?(e=t+"main",[4,Ga.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(kc(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t.d_)},t}(),rd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof ti||(i.Pd=e),i}return Yr(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=pf(t,yf)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&oi("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this.d_,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return Xr(e,void 0,void 0,(function(){var e,n;return Zr(this,(function(r){switch(r.label){case 0:return[4,op(t)];case 1:return e=r.sent(),[4,ap(t)];case 2:return n=r.sent(),[2,(e.yo(!0),function(t){var e=ci(t);return e.Nh.delete(0),Ah(e)}(n))]}}))}))}))}(yp(pf(this.d_,gp)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return Xr(e,void 0,void 0,(function(){var e,n;return Zr(this,(function(r){switch(r.label){case 0:return[4,op(t)];case 1:return e=r.sent(),[4,ap(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return Xr(this,void 0,void 0,(function(){var e;return Zr(this,(function(n){switch(n.label){case 0:return(e=ci(t)).Nh.add(0),[4,Ph(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(yp(pf(this.d_,gp)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&cf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Ha;return t._s.Ps((function(){return Xr(e,void 0,void 0,(function(){var e;return Zr(this,(function(r){switch(r.label){case 0:return e=kl,[4,up(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(yp(pf(this.d_,gp)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new ef(e);return t._s.Ps((function(){return Xr(n,void 0,void 0,(function(){var e;return Zr(this,(function(n){switch(n.label){case 0:return e=function(t,e){ci(t).Wh.add(e),e.next()},[4,cp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.i_(),t._s.Ps((function(){return Xr(n,void 0,void 0,(function(){var e;return Zr(this,(function(n){switch(n.label){case 0:return e=function(t,e){ci(t).Wh.delete(e)},[4,cp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(yp(t=pf(t,gp)),pp(e)?e:{next:e})}(this.d_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new yi(gi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new md(this,wf(this.d_,t))}catch(t){throw hd(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new cd(this,If(this.d_,t))}catch(t){throw hd(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new vd(this,function(t,e){if(t=pf(t,yf),af("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new yi(gi.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new bf(t,null,function(t){return new Do(Ai.ct(),t)}(e))}(this.d_,t))}catch(t){throw hd(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Ha;return t._s.Ps((function(){return Xr(n,void 0,void 0,(function(){var n;return Zr(this,(function(i){switch(i.label){case 0:return[4,function(t){return ip(t).then((function(t){return t.Sh}))}(t)];case 1:return n=i.sent(),new $f(t._s,n,e,r).run(),[2]}}))}))})),r.promise}(yp(t),(function(n){return e(new Jp(t,n))}))}(this.d_,(function(n){return t(new sd(e,n))}))},e.prototype.batch=function(){var t=this;return yp(this.d_),new ad(new Xp(this.d_,(function(e){return Qp(t.d_,e)})))},e.prototype.loadBundle=function(t){throw new yi(gi.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new yi(gi.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(sf),id=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Yr(e,t),e.prototype.Wf=function(t){return new ed(new mi(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return cd.yd(e,this.firestore,null)},e}(wp);function od(t){var e;e=t,ei.setLogLevel(e)}var sd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new id(e),r}return Yr(e,t),e.prototype.get=function(t){var e=this,n=bd(t);return this.d_.get(n).then((function(t){return new pd(e.Yf,new Vp(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=bd(t);return n?(uf("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=bd(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Jr([s,e,n],i)),this},e.prototype.delete=function(t){var e=bd(t);return this.d_.delete(e),this},e}(sf),ad=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yr(e,t),e.prototype.set=function(t,e,n){var r=bd(t);return n?(uf("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=bd(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Jr([s,e,n],i)),this},e.prototype.delete=function(t){var e=bd(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}(sf),ud=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return Yr(e,t),e.prototype.fromFirestore=function(t,e){var n=new qp(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new dd(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new id(t),n),i.set(n,o)),o},e}(sf);ud.Vd=new WeakMap;var cd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new id(e),r}return Yr(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new yi(gi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new mf(n.d_,r,new Oi(t)))},e.yd=function(t,n,r){return new e(n,new mf(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new md(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new md(this.firestore,wf(this.d_,t))}catch(t){throw hd(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof sf&&(t=t.d_),t instanceof mf&&Ef(this.d_,t)},e.prototype.set=function(t,e){e=uf("DocumentReference.set",e);try{return function(t,e,n){t=pf(t,mf);var r=pf(t.firestore,gp),i=jp(t.v_,e,n);return Qp(r,[Rf(Of(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,vs.Kt())])}(this.d_,t,e)}catch(t){throw hd(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Gp(this.d_,t):Gp.apply(void 0,Jr([this.d_,t,e],n))}catch(t){throw hd(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Qp(pf((t=this.d_).firestore,gp),[new xs(t.S_,vs.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ld(e),i=fd(e,(function(e){return new pd(t.firestore,new Vp(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))}));return Kp(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=pf(t,mf);var e=pf(t.firestore,gp),n=yp(e),r=new zp(e);return function(t,e){var n=this,r=new Ha;return t._s.Ps((function(){return Xr(n,void 0,void 0,(function(){var n;return Zr(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Xr(this,void 0,void 0,(function(){var r,i;return Zr(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ci(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Tc.Ho(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof ho?n.resolve(i):i instanceof lo?n.resolve(null):n.reject(new yi(gi.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=eu(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,sp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new Vp(e,r,t.S_,n,new Up(n instanceof ho&&n.Vt,!0),t.v_)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=pf(t,mf);var e=pf(t.firestore,gp);return hp(yp(e),t.S_,{source:"server"}).then((function(n){return Yp(e,t,n)}))}(this.d_):function(t){t=pf(t,mf);var e=pf(t.firestore,gp);return hp(yp(e),t.S_).then((function(n){return Yp(e,t,n)}))}(this.d_)).then((function(t){return new pd(e.firestore,new Vp(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(ud.gd(this.firestore,t)))},e}(sf);function hd(t,e,n){return t.message=t.message.replace(e,n),t}function ld(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==(0,m.Z)(r)&&!pp(r))return r}return{}}function fd(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=pp(t[0])?t[0]:pp(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var pd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Yr(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new cd(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return Wp(this.d_,t.d_)},e}(sf),dd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yr(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(pd),vd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new id(e),r}return Yr(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,kp(this.d_,function(t,e,n){var r=e,i=Tp("where",t);return new Np(i,r,n)}(t,n,r)))}catch(t){throw hd(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,kp(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=Tp("orderBy",t);return new Ap(r,n)}(t,n)))}catch(t){throw hd(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,kp(this.d_,function(t){return df("limit",t),new Pp("limit",t,"F")}(t)))}catch(t){throw hd(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,kp(this.d_,function(t){return df("limitToLast",t),new Pp("limitToLast",t,"L")}(t)))}catch(t){throw hd(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,kp(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xp("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw hd(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,kp(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xp("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw hd(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,kp(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Op("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw hd(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,kp(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Op("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw hd(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Tf(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=pf(t,bf);var e=pf(t.firestore,gp),n=yp(e),r=new zp(e);return function(t,e){var n=this,r=new Ha;return t._s.Ps((function(){return Xr(n,void 0,void 0,(function(){var n;return Zr(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Xr(this,void 0,void 0,(function(){var r,i,o,s,a;return Zr(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Bc(t,e,!0)];case 1:return a=u.sent(),r=new dl(e,a.Rc),i=r.fl(a.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=eu(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,sp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new Bp(e,r,t,n)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=pf(t,bf);var e=pf(t.firestore,gp),n=yp(e),r=new zp(e);return lp(n,t.C_,{source:"server"}).then((function(n){return new Bp(e,r,t,n)}))}(this.d_):function(t){t=pf(t,bf);var e=pf(t.firestore,gp),n=yp(e),r=new zp(e);return Sp(t.C_),lp(n,t.C_).then((function(n){return new Bp(e,r,t,n)}))}(this.d_)).then((function(t){return new yd(e.firestore,new Bp(e.firestore.d_,e.Xf,e.d_,t._d))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ld(e),i=fd(e,(function(e){return new yd(t.firestore,new Bp(t.firestore.d_,t.Xf,t.d_,e._d))}));return Kp(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(ud.gd(this.firestore,t)))},e}(sf),gd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Yr(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new dd(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}(sf),yd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Yr(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new vd(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map((function(e){return new dd(t.Yf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map((function(t){return new gd(e.Yf,t)}))},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach((function(r){t.call(e,new dd(n.Yf,r))}))},e.prototype.isEqual=function(t){return Wp(this.d_,t.d_)},e}(sf),md=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return Yr(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new cd(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new cd(this.firestore,void 0===t?If(this.d_):If(this.d_,t))}catch(t){throw hd(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=pf(t.firestore,gp),r=If(t),i=jp(t.v_,e);return Qp(n,[Rf(Of(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,vs.exists(!1))]).then((function(){return r}))}(this.d_,t).then((function(t){return new cd(e.firestore,t)}))},e.prototype.isEqual=function(t){return Ef(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(ud.gd(this.firestore,t)))},e}(vd);function bd(t){return t instanceof sf&&(t=t.d_),pf(t,mf)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _d=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(rf.bind.apply(rf,Jr([void 0],e))))||this}return Yr(e,t),e.documentId=function(){return new e(xi.ht().rt())},e.prototype.isEqual=function(t){return t instanceof sf&&(t=t.d_),t instanceof rf&&this.d_.f_.isEqual(t.f_)},e}(sf),wd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yr(e,t),e.serverTimestamp=function(){var t=new Mf("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Df("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new jf("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ff("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Uf("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}(sf);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(t){return function(t,e){var n=yp(t=pf(t,gp)),r=new dp;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new nf(t,e)}(function(t,e){if(t instanceof Uint8Array)return tf(t,e);if(t instanceof ArrayBuffer)return tf(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,wh(e));t._s.Ps((function(){return Xr(i,void 0,void 0,(function(){var e;return Zr(this,(function(n){switch(n.label){case 0:return e=Yl,[4,up(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(n,t.I_,e,r),r}(this.d_,t)}function Ed(t){var e,n,r=this;return(e=this.d_,n=t,function(t,e){var n=this;return t._s.enqueue((function(){return Xr(n,void 0,void 0,(function(){var n;return Zr(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=ci(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.wo.Ms(t,e)}))},[4,sp(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(yp(e=pf(e,gp)),n).then((function(t){return t?new bf(e,null,t.query):null}))).then((function(t){return t?new vd(r,t):null}))}var Td=n(5642),Sd={Firestore:rd,GeoPoint:Sf,Timestamp:Ci,Blob:ed,Transaction:sd,WriteBatch:ad,DocumentReference:cd,DocumentSnapshot:pd,Query:vd,QueryDocumentSnapshot:dd,QuerySnapshot:yd,CollectionReference:md,FieldPath:_d,FieldValue:wd,setLogLevel:od,CACHE_SIZE_UNLIMITED:vp};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Cd(t){!function(t,e){t.INTERNAL.registerComponent(new Td.wA("firestore",(function(t){var n=t.getProvider("app").getImmediate();return e(n,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Sd)))}(t,(function(t,e){return new rd(t,new gp(t,e),new nd)})),t.registerVersion("@firebase/firestore","2.1.7")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function kd(t){t.prototype.loadBundle=Id,t.prototype.namedQuery=Ed}Cd(y.Z),kd(rd);n(285),n(1637);var Nd=function(t,e){return Nd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Nd(t,e)};function Ad(t,e){function n(){this.constructor=t}Nd(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Pd(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function xd(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Od={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Rd=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return Ad(e,t),e}(Error);function Dd(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Ld(t,e,n){var r=Dd(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"===typeof a){if(!Od[a])return new Rd("internal","internal");r=Od[a],i=a}var u=s.message;"string"===typeof u&&(i=u),o=s.details,void 0!==o&&(o=n.decode(o))}}catch(c){}return"ok"===r?null:new Rd(r,i,o)}var Md=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return Pd(this,void 0,void 0,(function(){var t;return xd(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return t=e.sent(),t?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return Pd(this,void 0,void 0,(function(){return xd(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(e){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return Pd(this,void 0,void 0,(function(){var t,e;return xd(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}(),jd="type.googleapis.com/google.protobuf.Int64Value",Fd="type.googleapis.com/google.protobuf.UInt64Value";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Vd=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"===typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"===typeof t||"object"===(0,m.Z)(t))return Ud(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case jd:case Fd:var n=Number(t["value"]);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"===typeof t||"object"===(0,m.Z)(t)?Ud(t,(function(t){return e.decode(t)})):t},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new Rd("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}var Bd=function(){function t(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new Vd,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new Md(e,n),this.cancelAllRequests=new Promise((function(t){o.deleteService=function(){return t()}}));try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(a){this.customDomain=null,this.region=r}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;if(null!==this.emulatorOrigin){var n=this.emulatorOrigin;return n+"/"+e+"/"+this.region+"/"+t}return null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Pd(this,void 0,void 0,(function(){var r,i;return xd(this,(function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},t.prototype.call=function(t,e,n){return Pd(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,l,f,p,d;return xd(this,(function(v){switch(v.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return s=v.sent(),s.authToken&&(o["Authorization"]="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=n.timeout||7e4,u=qd(a),c=u.timer,h=u.promise,[4,Promise.race([Hd(c,this.postJSON(r,i,o)),h,Hd(c,this.cancelAllRequests)])];case 2:if(l=v.sent(),!l)throw new Rd("cancelled","Firebase Functions instance was deleted.");if(f=Ld(l.status,l.json,this.serializer),f)throw f;if(!l.json)throw new Rd("internal","Response is not valid JSON object.");if(p=l.json.data,"undefined"===typeof p&&(p=l.json.result),"undefined"===typeof p)throw new Rd("internal","Response is missing data field.");return d=this.serializer.decode(p),[2,{data:d}]}}))}))},t}();function Hd(t,e){return Pd(this,void 0,void 0,(function(){var n;return xd(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wd="functions";function zd(t,e){var n={Functions:Bd};function r(t,n){var r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("messaging");return new Bd(r,i,o,n,e)}t.INTERNAL.registerComponent(new Td.wA(Wd,r,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}var Gd="@firebase/functions",Kd="0.6.2";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
zd(y.Z,fetch.bind(self)),y.Z.registerVersion(Gd,Kd);n(2481),n(9254),n(6755),n(6373);var Qd=function(){return Qd=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Qd.apply(this,arguments)};function Yd(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Xd(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function Zd(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jd(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return s}function $d(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Jd(arguments[e]));return t}var tv,ev=n(6225),nv="@firebase/installations",rv="0.4.20",iv=1e4,ov="w:"+rv,sv="FIS_v2",av="https://firebaseinstallations.googleapis.com/v1",uv=36e5,cv="installations",hv="Installations",lv=(tv={},tv["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',tv["not-registered"]="Firebase Installation is not registered.",tv["installation-not-found"]="Firebase Installation not found.",tv["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',tv["app-offline"]="Could not process request. Application offline.",tv["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",tv),fv=new _.LL(cv,hv,lv);function pv(t){return t instanceof _.ZR&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t){var e=t.projectId;return av+"/projects/"+e+"/installations"}function vv(t){return{token:t.token,requestStatus:2,expiresIn:_v(t.expiresIn),creationTime:Date.now()}}function gv(t,e){return Yd(this,void 0,void 0,(function(){var n,r;return Xd(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,fv.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function yv(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function mv(t,e){var n=e.refreshToken,r=yv(t);return r.append("Authorization",wv(n)),r}function bv(t){return Yd(this,void 0,void 0,(function(){var e;return Xd(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return e=n.sent(),e.status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function _v(t){return Number(t.replace("s","000"))}function wv(t){return sv+" "+t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t,e){var n=e.fid;return Yd(this,void 0,void 0,(function(){var e,r,i,o,s,a,u;return Xd(this,(function(c){switch(c.label){case 0:return e=dv(t),r=yv(t),i={fid:n,authVersion:sv,appId:t.appId,sdkVersion:ov},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,bv((function(){return fetch(e,o)}))];case 1:return s=c.sent(),s.ok?[4,s.json()]:[3,3];case 2:return a=c.sent(),u={fid:a.fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:vv(a.authToken)},[2,u];case 3:return[4,gv("Create Installation",s)];case 4:throw c.sent()}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t){var e=btoa(String.fromCharCode.apply(String,$d(t)));return e.replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sv=/^[cdef][\w-]{21}$/,Cv="";function kv(){try{var t=new Uint8Array(17),e=self.crypto||self.msCrypto;e.getRandomValues(t),t[0]=112+t[0]%16;var n=Nv(t);return Sv.test(n)?n:Cv}catch($f){return Cv}}function Nv(t){var e=Tv(t);return e.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t){return t.appName+"!"+t.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pv=new Map;function xv(t,e){var n=Av(t);Dv(n,e),Lv(n,e)}function Ov(t,e){jv();var n=Av(t),r=Pv.get(n);r||(r=new Set,Pv.set(n,r)),r.add(e)}function Rv(t,e){var n=Av(t),r=Pv.get(n);r&&(r.delete(e),0===r.size&&Pv.delete(n),Fv())}function Dv(t,e){var n,r,i=Pv.get(t);if(i)try{for(var o=Zd(i),s=o.next();!s.done;s=o.next()){var a=s.value;a(e)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function Lv(t,e){var n=jv();n&&n.postMessage({key:t,fid:e}),Fv()}var Mv=null;function jv(){return!Mv&&"BroadcastChannel"in self&&(Mv=new BroadcastChannel("[Firebase] FID Change"),Mv.onmessage=function(t){Dv(t.data.key,t.data.fid)}),Mv}function Fv(){0===Pv.size&&Mv&&(Mv.close(),Mv=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uv="firebase-installations-database",Vv=1,qv="firebase-installations-store",Bv=null;function Hv(){return Bv||(Bv=(0,ev.openDb)(Uv,Vv,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(qv)}}))),Bv}function Wv(t,e){return Yd(this,void 0,void 0,(function(){var n,r,i,o,s;return Xd(this,(function(a){switch(a.label){case 0:return n=Av(t),[4,Hv()];case 1:return r=a.sent(),i=r.transaction(qv,"readwrite"),o=i.objectStore(qv),[4,o.get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||xv(t,e.fid),[2,e]}}))}))}function zv(t){return Yd(this,void 0,void 0,(function(){var e,n,r;return Xd(this,(function(i){switch(i.label){case 0:return e=Av(t),[4,Hv()];case 1:return n=i.sent(),r=n.transaction(qv,"readwrite"),[4,r.objectStore(qv).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Gv(t,e){return Yd(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Xd(this,(function(u){switch(u.label){case 0:return n=Av(t),[4,Hv()];case 1:return r=u.sent(),i=r.transaction(qv,"readwrite"),o=i.objectStore(qv),[4,o.get(n)];case 2:return s=u.sent(),a=e(s),void 0!==a?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||xv(t,a.fid),[2,a]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t){return Yd(this,void 0,void 0,(function(){var e,n,r;return Xd(this,(function(i){switch(i.label){case 0:return[4,Gv(t,(function(n){var r=Qv(n),i=Yv(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return n=i.sent(),n.fid!==Cv?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function Qv(t){var e=t||{fid:kv(),registrationStatus:0};return $v(e)}function Yv(t,e){if(0===e.registrationStatus){if(!navigator.onLine){var n=Promise.reject(fv.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Xv(t,r);return{installationEntry:r,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Zv(t)}:{installationEntry:e}}function Xv(t,e){return Yd(this,void 0,void 0,(function(){var n,r;return Xd(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,Iv(t,e)];case 1:return n=i.sent(),[2,Wv(t,n)];case 2:return r=i.sent(),pv(r)&&409===r.customData.serverCode?[4,zv(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Wv(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}function Zv(t){return Yd(this,void 0,void 0,(function(){var e,n,r,i;return Xd(this,(function(o){switch(o.label){case 0:return[4,Jv(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,Ev(100)];case 3:return o.sent(),[4,Jv(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Kv(t)];case 6:return n=o.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,e]}}))}))}function Jv(t){return Gv(t,(function(t){if(!t)throw fv.create("installation-not-found");return $v(t)}))}function $v(t){return tg(t)?{fid:t.fid,registrationStatus:0}:t}function tg(t){return 1===t.registrationStatus&&t.registrationTime+iv<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Yd(this,void 0,void 0,(function(){var t,i,o,s,a,u,c,h;return Xd(this,(function(l){switch(l.label){case 0:return t=ng(n,e),i=mv(n,e),o=r.getImmediate({optional:!0}),o&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:ov}},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,bv((function(){return fetch(t,a)}))];case 1:return u=l.sent(),u.ok?[4,u.json()]:[3,3];case 2:return c=l.sent(),h=vv(c),[2,h];case 3:return[4,gv("Generate Auth Token",u)];case 4:throw l.sent()}}))}))}function ng(t,e){var n=e.fid;return dv(t)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t,e){return void 0===e&&(e=!1),Yd(this,void 0,void 0,(function(){var n,r,i,o;return Xd(this,(function(s){switch(s.label){case 0:return[4,Gv(t.appConfig,(function(r){if(!ag(r))throw fv.create("not-registered");var i=r.authToken;if(!e&&ug(i))return r;if(1===i.requestStatus)return n=ig(t,e),r;if(!navigator.onLine)throw fv.create("app-offline");var o=hg(r);return n=sg(t,o),o}))];case 1:return r=s.sent(),n?[4,n]:[3,3];case 2:return o=s.sent(),[3,4];case 3:o=r.authToken,s.label=4;case 4:return i=o,[2,i]}}))}))}function ig(t,e){return Yd(this,void 0,void 0,(function(){var n,r;return Xd(this,(function(i){switch(i.label){case 0:return[4,og(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,Ev(100)];case 3:return i.sent(),[4,og(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,0===r.requestStatus?[2,rg(t,e)]:[2,r]}}))}))}function og(t){return Gv(t,(function(t){if(!ag(t))throw fv.create("not-registered");var e=t.authToken;return lg(e)?Qd(Qd({},t),{authToken:{requestStatus:0}}):t}))}function sg(t,e){return Yd(this,void 0,void 0,(function(){var n,r,i;return Xd(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,eg(t,e)];case 1:return n=o.sent(),i=Qd(Qd({},e),{authToken:n}),[4,Wv(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return r=o.sent(),!pv(r)||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,zv(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Qd(Qd({},e),{authToken:{requestStatus:0}}),[4,Wv(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}function ag(t){return void 0!==t&&2===t.registrationStatus}function ug(t){return 2===t.requestStatus&&!cg(t)}function cg(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+uv}function hg(t){var e={requestStatus:1,requestTime:Date.now()};return Qd(Qd({},t),{authToken:e})}function lg(t){return 1===t.requestStatus&&t.requestTime+iv<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t){return Yd(this,void 0,void 0,(function(){var e,n,r;return Xd(this,(function(i){switch(i.label){case 0:return[4,Kv(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,r=e.registrationPromise,r?r.catch(console.error):rg(t).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(t,e){return void 0===e&&(e=!1),Yd(this,void 0,void 0,(function(){var n;return Xd(this,(function(r){switch(r.label){case 0:return[4,dg(t.appConfig)];case 1:return r.sent(),[4,rg(t,e)];case 2:return n=r.sent(),[2,n.token]}}))}))}function dg(t){return Yd(this,void 0,void 0,(function(){var e;return Xd(this,(function(n){switch(n.label){case 0:return[4,Kv(t)];case 1:return e=n.sent().registrationPromise,e?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t,e){return Yd(this,void 0,void 0,(function(){var n,r,i,o;return Xd(this,(function(s){switch(s.label){case 0:return n=gg(t,e),r=mv(t,e),i={method:"DELETE",headers:r},[4,bv((function(){return fetch(n,i)}))];case 1:return o=s.sent(),o.ok?[3,3]:[4,gv("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}}))}))}function gg(t,e){var n=e.fid;return dv(t)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(t){return Yd(this,void 0,void 0,(function(){var e,n;return Xd(this,(function(r){switch(r.label){case 0:return e=t.appConfig,[4,Gv(e,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(n=r.sent(),!n)return[3,6];if(1!==n.registrationStatus)return[3,2];throw fv.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw fv.create("app-offline");case 3:return[4,vg(e,n)];case 4:return r.sent(),[4,zv(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t,e){var n=t.appConfig;return Ov(n,e),function(){Rv(n,e)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t){var e,n;if(!t||!t.options)throw _g("App Configuration");if(!t.name)throw _g("App Name");var r=["projectId","apiKey","appId"];try{for(var i=Zd(r),o=i.next();!o.done;o=i.next()){var s=o.value;if(!t.options[s])throw _g(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function _g(t){return fv.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t){var e="installations";t.INTERNAL.registerComponent(new Td.wA(e,(function(t){var e=t.getProvider("app").getImmediate(),n=bg(e),r=t.getProvider("platform-logger"),i={appConfig:n,platformLoggerProvider:r},o={app:e,getId:function(){return fg(i)},getToken:function(t){return pg(i,t)},delete:function(){return yg(i)},onIdChange:function(t){return mg(i,t)}};return o}),"PUBLIC")),t.registerVersion(nv,rv)}wg(y.Z);var Ig,Eg=function(){return Eg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Eg.apply(this,arguments)};function Tg(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Sg(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function Cg(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function kg(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return s}function Ng(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(kg(arguments[e]));return t}var Ag,Pg=(Ig={},Ig["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Ig["only-available-in-window"]="This method is available in a Window context.",Ig["only-available-in-sw"]="This method is available in a service worker context.",Ig["permission-default"]="The notification permission was not granted and dismissed instead.",Ig["permission-blocked"]="The notification permission was not granted and blocked instead.",Ig["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Ig["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Ig["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Ig["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Ig["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Ig["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Ig["token-update-no-token"]="FCM returned no token when updating the user to push.",Ig["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Ig["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Ig["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Ig["invalid-vapid-key"]="The public VAPID key must be a string.",Ig["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Ig),xg=new _.LL("messaging","Messaging",Pg),Og="/firebase-messaging-sw.js",Rg="/firebase-cloud-messaging-push-scope",Dg="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Lg="https://fcmregistrations.googleapis.com/v1",Mg="FCM_MSG",jg="FirebaseMessaging: ",Fg="google.c.a.e",Ug="google.c.a.c_id",Vg="google.c.a.ts",qg="google.c.a.c_l",Bg=1e3,Hg=3e3;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Wg(t){var e=new Uint8Array(t),n=btoa(String.fromCharCode.apply(String,Ng(e)));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zg(t){for(var e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t["PUSH_RECEIVED"]="push-received",t["NOTIFICATION_CLICKED"]="notification-clicked"})(Ag||(Ag={}));var Gg="fcm_token_details_db",Kg=5,Qg="fcm_token_object_Store";function Yg(t){return Tg(this,void 0,void 0,(function(){var e,n,r,i,o=this;return Sg(this,(function(s){switch(s.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=s.sent(),n=e.map((function(t){return t.name})),!n.includes(Gg))return[2,null];s.label=2;case 2:return r=null,[4,(0,ev.openDb)(Gg,Kg,(function(e){return Tg(o,void 0,void 0,(function(){var n,i,o,s;return Sg(this,(function(a){switch(a.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains(Qg)?(n=e.transaction.objectStore(Qg),[4,n.index("fcmSenderId").get(t)]):[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===e.oldVersion){if(o=i,!o.auth||!o.p256dh||!o.endpoint)return[2];r={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"===typeof o.vapidKey?o.vapidKey:Wg(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(o=i,r={token:o.fcmToken,createTime:o.createTime,subscriptionOptions:{auth:Wg(o.auth),p256dh:Wg(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:Wg(o.vapidKey)}});return[2]}}))}))}))];case 3:return i=s.sent(),i.close(),[4,(0,ev.deleteDb)(Gg)];case 4:return s.sent(),[4,(0,ev.deleteDb)("fcm_vapid_details_db")];case 5:return s.sent(),[4,(0,ev.deleteDb)("undefined")];case 6:return s.sent(),[2,Xg(r)?r:null]}}))}))}function Xg(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"===typeof t.createTime&&t.createTime>0&&"string"===typeof t.token&&t.token.length>0&&"string"===typeof e.auth&&e.auth.length>0&&"string"===typeof e.p256dh&&e.p256dh.length>0&&"string"===typeof e.endpoint&&e.endpoint.length>0&&"string"===typeof e.swScope&&e.swScope.length>0&&"string"===typeof e.vapidKey&&e.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zg="firebase-messaging-database",Jg=1,$g="firebase-messaging-store",ty=null;function ey(){return ty||(ty=(0,ev.openDb)(Zg,Jg,(function(t){switch(t.oldVersion){case 0:t.createObjectStore($g)}}))),ty}function ny(t){return Tg(this,void 0,void 0,(function(){var e,n,r,i;return Sg(this,(function(o){switch(o.label){case 0:return e=oy(t),[4,ey()];case 1:return n=o.sent(),[4,n.transaction($g).objectStore($g).get(e)];case 2:return r=o.sent(),r?[2,r]:[3,3];case 3:return[4,Yg(t.appConfig.senderId)];case 4:return i=o.sent(),i?[4,ry(t,i)]:[3,6];case 5:return o.sent(),[2,i];case 6:return[2]}}))}))}function ry(t,e){return Tg(this,void 0,void 0,(function(){var n,r,i;return Sg(this,(function(o){switch(o.label){case 0:return n=oy(t),[4,ey()];case 1:return r=o.sent(),i=r.transaction($g,"readwrite"),[4,i.objectStore($g).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function iy(t){return Tg(this,void 0,void 0,(function(){var e,n,r;return Sg(this,(function(i){switch(i.label){case 0:return e=oy(t),[4,ey()];case 1:return n=i.sent(),r=n.transaction($g,"readwrite"),[4,r.objectStore($g).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function oy(t){var e=t.appConfig;return e.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t,e){return Tg(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Sg(this,(function(c){switch(c.label){case 0:return[4,hy(t)];case 1:n=c.sent(),r=ly(e),i={method:"POST",headers:n,body:JSON.stringify(r)},c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(cy(t.appConfig),i)];case 3:return s=c.sent(),[4,s.json()];case 4:return o=c.sent(),[3,6];case 5:throw a=c.sent(),xg.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw u=o.error.message,xg.create("token-subscribe-failed",{errorInfo:u});if(!o.token)throw xg.create("token-subscribe-no-token");return[2,o.token]}}))}))}function ay(t,e){return Tg(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Sg(this,(function(c){switch(c.label){case 0:return[4,hy(t)];case 1:n=c.sent(),r=ly(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(cy(t.appConfig)+"/"+e.token,i)];case 3:return s=c.sent(),[4,s.json()];case 4:return o=c.sent(),[3,6];case 5:throw a=c.sent(),xg.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw u=o.error.message,xg.create("token-update-failed",{errorInfo:u});if(!o.token)throw xg.create("token-update-no-token");return[2,o.token]}}))}))}function uy(t,e){return Tg(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Sg(this,(function(u){switch(u.label){case 0:return[4,hy(t)];case 1:n=u.sent(),r={method:"DELETE",headers:n},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(cy(t.appConfig)+"/"+e,r)];case 3:return i=u.sent(),[4,i.json()];case 4:if(o=u.sent(),o.error)throw s=o.error.message,xg.create("token-unsubscribe-failed",{errorInfo:s});return[3,6];case 5:throw a=u.sent(),xg.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function cy(t){var e=t.projectId;return Lg+"/projects/"+e+"/registrations"}function hy(t){var e=t.appConfig,n=t.installations;return Tg(this,void 0,void 0,(function(){var t;return Sg(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function ly(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==Dg&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fy=6048e5;function py(t,e,n){return Tg(this,void 0,void 0,(function(){var r,i,o,s;return Sg(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw xg.create("permission-blocked");return[4,yy(e,n)];case 1:return r=a.sent(),[4,ny(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:Wg(r.getKey("auth")),p256dh:Wg(r.getKey("p256dh"))},i?[3,3]:[2,gy(t,o)];case 3:if(my(i.subscriptionOptions,o))return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,uy(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,gy(t,o)];case 8:return Date.now()>=i.createTime+fy?[2,vy({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}}))}))}function dy(t,e){return Tg(this,void 0,void 0,(function(){var n,r;return Sg(this,(function(i){switch(i.label){case 0:return[4,ny(t)];case 1:return n=i.sent(),n?[4,uy(t,n.token)]:[3,4];case 2:return i.sent(),[4,iy(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}}))}))}function vy(t,e,n){return Tg(this,void 0,void 0,(function(){var r,i,o;return Sg(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,ay(e,t)];case 1:return r=s.sent(),i=Eg(Eg({},t),{token:r,createTime:Date.now()}),[4,ry(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,dy(e,n)];case 4:throw s.sent(),o;case 5:return[2]}}))}))}function gy(t,e){return Tg(this,void 0,void 0,(function(){var n,r;return Sg(this,(function(i){switch(i.label){case 0:return[4,sy(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,ry(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function yy(t,e){return Tg(this,void 0,void 0,(function(){var n;return Sg(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zg(e)})]}}))}))}function my(t,e){var n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(t){var e={from:t.from,collapseKey:t.collapse_key};return _y(e,t),wy(e,t),Iy(e,t),e}function _y(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}function wy(t,e){e.data&&(t.data=e.data)}function Iy(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t){return"object"===(0,m.Z)(t)&&!!t&&Ug in t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sy=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!==typeof t)throw xg.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Tg(this,void 0,void 0,(function(){var n;return Sg(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,ny(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:Dg,r.label=2;case 2:return[2,py(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return dy(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw xg.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw xg.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw xg.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw xg.create("only-available-in-window")},t.prototype.onMessage=function(){throw xg.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw xg.create("only-available-in-window")},t.prototype.onPush=function(t){return Tg(this,void 0,void 0,(function(){var e,n,r,i;return Sg(this,(function(o){switch(o.label){case 0:return e=ky(t),e?[4,xy()]:(console.debug(jg+"failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return n=o.sent(),Ay(n)?[2,Py(n,e)]:(r=!1,e.notification?[4,Oy(Cy(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=by(e),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,Ty(Bg)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return Tg(this,void 0,void 0,(function(){var r,i;return Sg(this,(function(o){switch(o.label){case 0:return r=t.newSubscription,r?[3,2]:[4,dy(this.firebaseDependencies,self.registration)];case 1:return o.sent(),[2];case 2:return[4,ny(this.firebaseDependencies)];case 3:return i=o.sent(),[4,dy(this.firebaseDependencies,self.registration)];case 4:return o.sent(),[4,py(this.firebaseDependencies,self.registration,null!==(n=null===(e=null===i||void 0===i?void 0:i.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:Dg)];case 5:return o.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return Tg(this,void 0,void 0,(function(){var r,i,o,s,a;return Sg(this,(function(u){switch(u.label){case 0:return r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n[Mg],r?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),i=Ry(r),i?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,Ny(o)]):[2]):[2];case 1:return a=u.sent(),a?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,Ty(Hg)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=Ag.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}}))}))},t}();function Cy(t){var e,n=Eg({},t.notification);return n.data=(e={},e[Mg]=t,e),n}function ky(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}function Ny(t){return Tg(this,void 0,void 0,(function(){var e,n,r,i,o,s,a;return Sg(this,(function(u){switch(u.label){case 0:return[4,xy()];case 1:e=u.sent();try{for(n=Cg(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}}))}))}function Ay(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}function Py(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=Ag.PUSH_RECEIVED;try{for(var i=Cg(t),o=i.next();!o.done;o=i.next()){var s=o.value;s.postMessage(e)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function xy(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Oy(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}function Ry(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;return i||(Ey(t.data)?self.location.origin:null)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dy=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Tg(this,void 0,void 0,(function(){var e,n;return Sg(this,(function(r){switch(r.label){case 0:return e=t.data,e.isFirebaseMessaging?(this.onMessageCallback&&e.messageType===Ag.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(My(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),n=e.data,Ey(n)&&"1"===n[Fg]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Tg(this,void 0,void 0,(function(){return Sg(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw xg.create("permission-blocked");return[4,this.updateVapidKey(null===t||void 0===t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null===t||void 0===t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,py(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return Tg(this,void 0,void 0,(function(){return Sg(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=Dg),[2]}))}))},t.prototype.updateSwReg=function(t){return Tg(this,void 0,void 0,(function(){return Sg(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw xg.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return Tg(this,void 0,void 0,(function(){var t,e;return Sg(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register(Og,{scope:Rg})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),xg.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return Tg(this,void 0,void 0,(function(){return Sg(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,dy(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return Tg(this,void 0,void 0,(function(){var t;return Sg(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if(t=e.sent(),"granted"===t)return[2];throw"denied"===t?xg.create("permission-blocked"):xg.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw xg.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw xg.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw xg.create("invalid-sw-registration");if(this.swRegistration)throw xg.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw xg.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw xg.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return Tg(this,void 0,void 0,(function(){var n,r;return Sg(this,(function(i){switch(i.label){case 0:return n=Ly(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r=i.sent(),r.logEvent(n,{message_id:e[Ug],message_name:e[qg],message_time:e[Vg],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function Ly(t){switch(t){case Ag.NOTIFICATION_CLICKED:return"notification_open";case Ag.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function My(t){return delete t.messageType,delete t.isFirebaseMessaging,t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(t){var e,n;if(!t||!t.options)throw Fy("App Configuration Object");if(!t.name)throw Fy("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=t.options;try{for(var o=Cg(r),s=o.next();!s.done;s=o.next()){var a=s.value;if(!i[a])throw Fy(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return{appName:t.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function Fy(t){return xg.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uy="messaging";function Vy(t){var e=t.getProvider("app").getImmediate(),n=jy(e),r=t.getProvider("installations").getImmediate(),i=t.getProvider("analytics-internal"),o={app:e,appConfig:n,installations:r,analyticsProvider:i};if(!By())throw xg.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new Sy(o):new Dy(o)}var qy={isSupported:By};function By(){return self&&"ServiceWorkerGlobalScope"in self?Wy():Hy()}function Hy(){return"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function Wy(){return"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}y.Z.INTERNAL.registerComponent(new Td.wA(Uy,Vy,"PUBLIC").setServiceProps(qy));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var zy=function(t,e){return zy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},zy(t,e)};function Gy(t,e){function n(){this.constructor=t}zy(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ky=function(){return Ky=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ky.apply(this,arguments)};function Qy(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Yy(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function Xy(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Zy="firebasestorage.googleapis.com",Jy="storageBucket",$y=12e4,tm=6e5,em=function(t){function e(n,r){var i=t.call(this,nm(n),"Firebase Storage: "+r+" ("+nm(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Gy(e,t),e.prototype._codeEquals=function(t){return nm(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(_.ZR);function nm(t){return"storage/"+t}function rm(){var t="An unknown error occurred, please check the error payload for server response.";return new em("unknown",t)}function im(t){return new em("object-not-found","Object '"+t+"' does not exist.")}function om(t){return new em("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function sm(){var t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new em("unauthenticated",t)}function am(t){return new em("unauthorized","User does not have permission to access '"+t+"'.")}function um(){return new em("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function cm(){return new em("canceled","User canceled the upload/download.")}function hm(t){return new em("invalid-url","Invalid URL '"+t+"'.")}function lm(t){return new em("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function fm(){return new em("no-default-bucket","No default bucket found. Did you set the '"+Jy+"' property when initializing the app?")}function pm(){return new em("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function dm(){return new em("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function vm(){return new em("no-download-url","The given file does not have any download URLs.")}function gm(t){return new em("invalid-argument",t)}function ym(){return new em("app-deleted","The Firebase app was deleted.")}function mm(t){return new em("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bm(t,e){return new em("invalid-format","String does not match format '"+t+"': "+e)}function _m(t){throw new em("internal-error","Internal error: "+t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wm={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Im=function(){function t(t,e){this.data=t,this.contentType=e||null}return t}();function Em(t,e){switch(t){case wm.RAW:return new Im(Tm(e));case wm.BASE64:case wm.BASE64URL:return new Im(Cm(t,e));case wm.DATA_URL:return new Im(Nm(e),Am(e))}throw rm()}function Tm(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296===(64512&r)){var i=n<t.length-1&&56320===(64512&t.charCodeAt(n+1));if(i){var o=r,s=t.charCodeAt(++n);r=65536|(1023&o)<<10|1023&s,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189)}else 56320===(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Sm(t){var e;try{e=decodeURIComponent(t)}catch(n){throw bm(wm.DATA_URL,"Malformed data URL.")}return Tm(e)}function Cm(t,e){switch(t){case wm.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r){var i=n?"-":"_";throw bm(t,"Invalid character '"+i+"' found: is it base64url encoded?")}break;case wm.BASE64URL:var o=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(o||s){i=o?"+":"/";throw bm(t,"Invalid character '"+i+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/");break}var a;try{a=atob(e)}catch(h){throw bm(t,"Invalid character found")}for(var u=new Uint8Array(a.length),c=0;c<a.length;c++)u[c]=a.charCodeAt(c);return u}var km=function(){function t(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw bm(wm.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=Pm(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1)}return t}();function Nm(t){var e=new km(t);return e.base64?Cm(wm.BASE64,e.rest):Sm(e.rest)}function Am(t){var e=new km(t);return e.contentType}function Pm(t,e){var n=t.length>=e.length;return!!n&&t.substring(t.length-e.length)===e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xm,Om={STATE_CHANGED:"state_changed"},Rm={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Dm(t){switch(t){case"running":case"pausing":case"canceling":return Rm.RUNNING;case"paused":return Rm.PAUSED;case"success":return Rm.SUCCESS;case"canceled":return Rm.CANCELED;case"error":return Rm.ERROR;default:return Rm.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["NO_ERROR"]=0]="NO_ERROR",t[t["NETWORK_ERROR"]=1]="NETWORK_ERROR",t[t["ABORT"]=2]="ABORT"})(xm||(xm={}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Lm=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=xm.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=xm.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=xm.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw _m("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw _m("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw _m("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw _m("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Mm=function(){function t(){}return t.prototype.createXhrIo=function(){return new Lm},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function jm(t){return void 0!==t}function Fm(t){return"function"===typeof t}function Um(t){return"object"===(0,m.Z)(t)&&!Array.isArray(t)}function Vm(t){return"string"===typeof t||t instanceof String}function qm(t){return Bm()&&t instanceof Blob}function Bm(){return"undefined"!==typeof Blob}function Hm(t,e,n,r){if(r<e)throw gm("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw gm("Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function zm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Wm();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Bm())return new Blob(t);throw new em("unsupported-environment","This browser doesn't seem to support creating Blobs")}function Gm(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Km=function(){function t(t,e){var n=0,r="";qm(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(qm(this.data_)){var r=this.data_,i=Gm(r,e,n);return null===i?null:new t(i)}var o=new Uint8Array(this.data_.buffer,e,n-e);return new t(o,!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Bm()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(zm.apply(null,r))}var i=e.map((function(t){return Vm(t)?Em(wm.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),Qm=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw lm(e)},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)";function i(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}var o="(/(.*))?$",s=new RegExp("^gs://"+r+o,"i"),a={bucket:1,path:3};function u(t){t.path_=decodeURIComponent(t.path)}for(var c="v[A-Za-z0-9_]+",h=Zy.replace(/[.]/g,"\\."),l="(/([^?#]*).*)?$",f=new RegExp("^https?://"+h+"/"+c+"/b/"+r+"/o"+l,"i"),p={bucket:1,path:3},d="(?:storage.googleapis.com|storage.cloud.google.com)",v="([^?#]*)",g=new RegExp("^https?://"+d+"/"+r+"/"+v,"i"),y={bucket:1,path:2},m=[{regex:s,indices:a,postModify:i},{regex:f,indices:p,postModify:u},{regex:g,indices:y,postModify:u}],b=0;b<m.length;b++){var _=m[b],w=_.regex.exec(e);if(w){var I=w[_.indices.bucket],E=w[_.indices.path];E||(E=""),n=new t(I,E),_.postModify(n);break}}if(null==n)throw hm(e);return n},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ym(t){var e;try{e=JSON.parse(t)}catch(n){return null}return Um(e)?e:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t){if(0===t.length)return null;var e=t.lastIndexOf("/");if(-1===e)return"";var n=t.slice(0,e);return n}function Zm(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}function Jm(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t){return"https://"+Zy+"/v0"+t}function tb(t){var e=encodeURIComponent,n="?";for(var r in t)if(t.hasOwnProperty(r)){var i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t,e){return e}var nb=function(){function t(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||eb}return t}(),rb=null;function ib(t){return!Vm(t)||t.length<2?t:Jm(t)}function ob(){if(rb)return rb;var t=[];function e(t,e){return ib(e)}t.push(new nb("bucket")),t.push(new nb("generation")),t.push(new nb("metageneration")),t.push(new nb("name","fullPath",!0));var n=new nb("name");function r(t,e){return void 0!==e?Number(e):e}n.xform=e,t.push(n);var i=new nb("size");return i.xform=r,t.push(i),t.push(new nb("timeCreated")),t.push(new nb("updated")),t.push(new nb("md5Hash",null,!0)),t.push(new nb("cacheControl",null,!0)),t.push(new nb("contentDisposition",null,!0)),t.push(new nb("contentEncoding",null,!0)),t.push(new nb("contentLanguage",null,!0)),t.push(new nb("contentType",null,!0)),t.push(new nb("metadata","customMetadata",!0)),rb=t,rb}function sb(t,e){function n(){var n=t["bucket"],r=t["fullPath"],i=new Qm(n,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function ab(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return sb(r,t),r}function ub(t,e,n){var r=Ym(e);if(null===r)return null;var i=r;return ab(t,i,n)}function cb(t,e){var n=Ym(e);if(null===n)return null;if(!Vm(n["downloadTokens"]))return null;var r=n["downloadTokens"];if(0===r.length)return null;var i=encodeURIComponent,o=r.split(","),s=o.map((function(e){var n=t["bucket"],r=t["fullPath"],o="/b/"+i(n)+"/o/"+i(r),s=$m(o),a=tb({alt:"media",token:e});return s+a}));return s[0]}function hb(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lb="prefixes",fb="items";function pb(t,e,n){var r={prefixes:[],items:[],nextPageToken:n["nextPageToken"]};if(n[lb])for(var i=0,o=n[lb];i<o.length;i++){var s=o[i],a=s.replace(/\/$/,""),u=t._makeStorageReference(new Qm(e,a));r.prefixes.push(u)}if(n[fb])for(var c=0,h=n[fb];c<h.length;c++){var l=h[c];u=t._makeStorageReference(new Qm(e,l["name"]));r.items.push(u)}return r}function db(t,e,n){var r=Ym(n);if(null===r)return null;var i=r;return pb(t,e,i)}var vb=function(){function t(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(t){if(!t)throw rm()}function yb(t,e){function n(n,r){var i=ub(t,r,e);return gb(null!==i),i}return n}function mb(t,e){function n(n,r){var i=db(t,e,r);return gb(null!==i),i}return n}function bb(t,e){function n(n,r){var i=ub(t,r,e);return gb(null!==i),cb(i,r)}return n}function _b(t){function e(e,n){var r;return r=401===e.getStatus()?sm():402===e.getStatus()?om(t.bucket):403===e.getStatus()?am(t.path):n,r.serverResponse=n.serverResponse,r}return e}function wb(t){var e=_b(t);function n(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=im(t.path)),i.serverResponse=r.serverResponse,i}return n}function Ib(t,e,n){var r=e.fullServerUrl(),i=$m(r),o="GET",s=t.maxOperationRetryTime,a=new vb(i,o,yb(t,n),s);return a.errorHandler=wb(e),a}function Eb(t,e,n,r,i){var o={};e.isRoot?o["prefix"]="":o["prefix"]=e.path+"/",n&&n.length>0&&(o["delimiter"]=n),r&&(o["pageToken"]=r),i&&(o["maxResults"]=i);var s=e.bucketOnlyServerUrl(),a=$m(s),u="GET",c=t.maxOperationRetryTime,h=new vb(a,u,mb(t,e.bucket),c);return h.urlParams=o,h.errorHandler=_b(e),h}function Tb(t,e,n){var r=e.fullServerUrl(),i=$m(r),o="GET",s=t.maxOperationRetryTime,a=new vb(i,o,bb(t,n),s);return a.errorHandler=wb(e),a}function Sb(t,e,n,r){var i=e.fullServerUrl(),o=$m(i),s="PATCH",a=hb(n,r),u={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,h=new vb(o,s,yb(t,r),c);return h.headers=u,h.body=a,h.errorHandler=wb(e),h}function Cb(t,e){var n=e.fullServerUrl(),r=$m(n),i="DELETE",o=t.maxOperationRetryTime;function s(t,e){}var a=new vb(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=wb(e),a}function kb(t,e){return t&&t["contentType"]||e&&e.type()||"application/octet-stream"}function Nb(t,e,n){var r=Object.assign({},n);return r["fullPath"]=t.path,r["size"]=e.size(),r["contentType"]||(r["contentType"]=kb(null,e)),r}function Ab(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}var u=a();s["Content-Type"]="multipart/related; boundary="+u;var c=Nb(e,r,i),h=hb(c,n),l="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+h+"\r\n--"+u+"\r\nContent-Type: "+c["contentType"]+"\r\n\r\n",f="\r\n--"+u+"--",p=Km.getBlob(l,r,f);if(null===p)throw pm();var d={name:c["fullPath"]},v=$m(o),g="POST",y=t.maxUploadRetryTime,m=new vb(v,g,yb(t,n),y);return m.urlParams=d,m.headers=s,m.body=p.uploadData(),m.errorHandler=_b(e),m}var Pb=function(){function t(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}return t}();function xb(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(i){gb(!1)}var r=e||["active"];return gb(!!n&&-1!==r.indexOf(n)),n}function Ob(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Nb(e,r,i),a={name:s["fullPath"]},u=$m(o),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s["contentType"],"Content-Type":"application/json; charset=utf-8"},l=hb(s,n),f=t.maxUploadRetryTime;function p(t){var e;xb(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){gb(!1)}return gb(Vm(e)),e}var d=new vb(u,c,p,f);return d.urlParams=a,d.headers=h,d.body=l,d.errorHandler=_b(e),d}function Rb(t,e,n,r){var i={"X-Goog-Upload-Command":"query"};function o(t){var e=xb(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){gb(!1)}n||gb(!1);var i=Number(n);return gb(!isNaN(i)),new Pb(i,r.size(),"final"===e)}var s="POST",a=t.maxUploadRetryTime,u=new vb(n,s,o,a);return u.headers=i,u.errorHandler=_b(e),u}var Db=262144;function Lb(t,e,n,r,i,o,s,a){var u=new Pb(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw dm();var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,p=h===c?"upload, finalize":"upload",d={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":u.current},v=r.slice(l,f);if(null===v)throw pm();function g(t,n){var i,s=xb(t,["active","final"]),a=u.current+h,c=r.size();return i="final"===s?yb(e,o)(t,n):null,new Pb(a,c,"final"===s,i)}var y="POST",m=e.maxUploadRetryTime,b=new vb(n,y,g,m);return b.headers=d,b.body=v.uploadData(),b.progressCallback=a||null,b.errorHandler=_b(t),b}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mb=function(){function t(t,e,n){var r=Fm(t)||null!=e||null!=n;if(r)this.next=t,this.error=e,this.complete=n;else{var i=t;this.next=i.next,this.error=i.error,this.complete=i.complete}}return t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fb=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=ob(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then((function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused");break}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=Ob(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=Rb(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=Db*this._chunkMultiplier,n=new Pb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=Lb(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(a){return t._error=a,void t._transition("error")}var s=t._ref.storage._makeRequest(o,i);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){var t=Db*this._chunkMultiplier;t<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=Ib(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=Ab(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":this._state=t,void 0!==this._request&&this._request.cancel();break;case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=cm(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Dm(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Mb(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise();var e=this._observers.slice();e.forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Dm(this._state)){case Rm.SUCCESS:jb(this._resolve.bind(null,this.snapshot))();break;case Rm.CANCELED:case Rm.ERROR:var e=this._reject;jb(e.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){var e=Dm(this._state);switch(e){case Rm.RUNNING:case Rm.PAUSED:t.next&&jb(t.next.bind(t,this.snapshot))();break;case Rm.SUCCESS:t.complete&&jb(t.complete.bind(t))();break;case Rm.CANCELED:case Rm.ERROR:t.error&&jb(t.error.bind(t,this._error))();break;default:t.error&&jb(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Ub=function(){function t(t,e){this._service=t,this._location=e instanceof Qm?e:Qm.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Qm(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Jm(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=Xm(this._location.path);if(null===e)return null;var n=new Qm(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw mm(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Fb(t,new Km(e),n)}function qb(t){var e={prefixes:[],items:[]};return Bb(t,e).then((function(){return e}))}function Bb(t,e,n){return Qy(this,void 0,void 0,(function(){var r,i,o,s;return Yy(this,(function(a){switch(a.label){case 0:return r={pageToken:n},[4,Hb(t,r)];case 1:return i=a.sent(),(o=e.prefixes).push.apply(o,i.prefixes),(s=e.items).push.apply(s,i.items),null==i.nextPageToken?[3,3]:[4,Bb(t,e,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Hb(t,e){return Qy(this,void 0,void 0,(function(){var n,r,i;return Yy(this,(function(o){switch(o.label){case 0:return null!=e&&"number"===typeof e.maxResults&&Hm("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=o.sent(),r=e||{},i=Eb(t.storage,t._location,"/",r.pageToken,r.maxResults),[2,t.storage._makeRequest(i,n).getPromise()]}}))}))}function Wb(t){return Qy(this,void 0,void 0,(function(){var e,n;return Yy(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=Ib(t.storage,t._location,ob()),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}function zb(t,e){return Qy(this,void 0,void 0,(function(){var n,r;return Yy(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=Sb(t.storage,t._location,e,ob()),[2,t.storage._makeRequest(r,n).getPromise()]}}))}))}function Gb(t){return Qy(this,void 0,void 0,(function(){var e,n;return Yy(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=Tb(t.storage,t._location,ob()),[2,t.storage._makeRequest(n,e).getPromise().then((function(t){if(null===t)throw vm();return t}))]}}))}))}function Kb(t){return Qy(this,void 0,void 0,(function(){var e,n;return Yy(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=Cb(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}function Qb(t,e){var n=Zm(t._location.path,e),r=new Qm(t._location.bucket,n);return new Ub(t.storage,r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yb=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Xb=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Yb(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Yb(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"===typeof e?function(t){return e(new Yb(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Yb(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Zb=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Jb(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Jb(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Jb=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){var n=Qb(this._delegate,e);return new t(n,this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Xb(Vb(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=wm.RAW),this._throwIfRoot("putString");var r=Em(e,t),i=Ky({},n);return null==i["contentType"]&&null!=r.contentType&&(i["contentType"]=r.contentType),new Xb(new Fb(this._delegate,new Km(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return qb(this._delegate).then((function(e){return new Zb(e,t.storage)}))},t.prototype.list=function(t){var e=this;return Hb(this._delegate,t).then((function(t){return new Zb(t,e.storage)}))},t.prototype.getMetadata=function(){return Wb(this._delegate)},t.prototype.updateMetadata=function(t){return zb(this._delegate,t)},t.prototype.getDownloadURL=function(){return Gb(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),Kb(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw mm(t)},t}(),$b=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function t_(t,e,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function h(e){i=setTimeout((function(){i=null,t(l,a())}),e)}function l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,Xy([null,t],e));else{var i,l=a()||o;if(l)c.call.apply(c,Xy([null,t],e));else r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),h(i)}}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(s=2),clearTimeout(i),h(0)):t||(s=1)))}return h(0),setTimeout((function(){o=!0,p(!0)}),n),p}function e_(t){t(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n_=function(){function t(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){if(n)e(!1,new r_(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null,n=n;var r=n.getErrorCode()===xm.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new r_(s,n))}else{var a=n.getErrorCode()===xm.ABORT;e(!1,new r_(!1,null,a))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}function n(e,n){var r=t.resolve_,i=t.reject_,o=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(o,o.getResponseText());jm(s)?r(s):r()}catch(u){i(u)}else if(null!==o){var a=rm();a.serverResponse=o.getResponseText(),t.errorCallback_?i(t.errorCallback_(o,a)):i(a)}else if(n.canceled){a=t.appDelete_?ym():cm();i(a)}else{a=um();i(a)}}this.canceled_?n(!1,new r_(!1,null,!0)):this.backoffId_=t_(e,n,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&e_(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=[408,429],r=-1!==n.indexOf(t),i=-1!==this.additionalRetryCodes_.indexOf(t);return e||r||i},t}(),r_=function(){function t(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}return t}();function i_(t,e){null!==e&&e.length>0&&(t["Authorization"]="Firebase "+e)}function o_(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}function s_(t,e){e&&(t["X-Firebase-GMPID"]=e)}function a_(t,e,n,r,i){var o=tb(t.urlParams),s=t.url+o,a=Object.assign({},t.headers);return s_(a,e),i_(a,n),o_(a,i),new n_(s,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(t){return/^[A-Za-z]+:\/\//.test(t)}function c_(t,e){return new Ub(t,e)}function h_(t,e){if(t instanceof p_){var n=t;if(null==n._bucket)throw fm();var r=new Ub(n,n._bucket);return null!=e?h_(r,e):r}if(void 0!==e){if(e.includes(".."))throw gm('`path` param cannot contain ".."');return Qb(t,e)}return t}function l_(t,e){if(e&&u_(e)){if(t instanceof p_)return c_(t,e);throw gm("To use ref(service, url), the first argument must be a Storage instance.")}return h_(t,e)}function f_(t){var e=null===t||void 0===t?void 0:t[Jy];return null==e?null:Qm.makeFromBucketSpec(e)}var p_=function(){function t(t,e,n,r,i){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$y,this._maxUploadRetryTime=tm,this._requests=new Set,this._bucket=null!=r?Qm.makeFromBucketSpec(r):f_(this.app.options)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Hm("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Hm("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Qy(this,void 0,void 0,(function(){var t,e;return Yy(this,(function(n){switch(n.label){case 0:return t=this._authProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:if(e=n.sent(),null!==e)return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Ub(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new $b(ym());var r=a_(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}(),d_=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(u_(t))throw gm("ref() expected a child path but got a URL, use refFromURL instead.");return new Jb(l_(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!u_(t))throw gm("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Qm.makeFromUrl(t)}catch(e){throw gm("refFromUrl() expected a valid full URL but got an invalid one.")}return new Jb(l_(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}(),v_="@firebase/storage",g_="0.4.3",y_="storage";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=new d_(n,new p_(n,r,new Mm,e,y.Z.SDK_VERSION));return i}function b_(t){var e={TaskState:Rm,TaskEvent:Om,StringFormat:wm,Storage:p_,Reference:Jb};t.INTERNAL.registerComponent(new Td.wA(y_,m_,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(v_,g_)}b_(y.Z);var __=function(){return __=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},__.apply(this,arguments)};function w_(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var I_,E_,T_,S_="@firebase/performance",C_="0.4.6",k_=C_,N_="FB-PERF-TRACE-START",A_="FB-PERF-TRACE-STOP",P_="FB-PERF-TRACE-MEASURE",x_="_wt_",O_="_fp",R_="_fcp",D_="_fid",L_="@firebase/performance/config",M_="@firebase/performance/configexpire",j_="performance",F_="Performance",U_=(I_={},I_["trace started"]="Trace {$traceName} was started before.",I_["trace stopped"]="Trace {$traceName} is not running.",I_["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",I_["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",I_["no window"]="Window is not available.",I_["no app id"]="App id is not available.",I_["no project id"]="Project id is not available.",I_["no api key"]="Api key is not available.",I_["invalid cc log"]="Attempted to queue invalid cc event",I_["FB not default"]="Performance can only start when Firebase app instance is the default one.",I_["RC response not ok"]="RC response is not ok",I_["invalid attribute name"]="Attribute name {$attributeName} is invalid.",I_["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",I_["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",I_["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",I_),V_=new _.LL(j_,F_,U_),q_=new b.Yd(F_);q_.logLevel=b["in"].INFO;var B_,H_=function(){function t(t){if(this.window=t,!t)throw V_.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,_.hl)()||(q_.info("IndexedDB is not supported by current browswer"),!1):(q_.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){if(this.PerformanceObserver){var n=new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}}));n.observe({entryTypes:[t]})}},t.getInstance=function(){return void 0===E_&&(E_=new t(T_)),E_},t}();function W_(t){T_=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t,e){var n=t.length-e.length;if(n<0||n>1)throw V_.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G_,K_,Q_=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=z_("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=z_("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw V_.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw V_.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw V_.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===B_&&(B_=new t),B_},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(){var t=Q_.getInstance().installationsService.getId();return t.then((function(t){G_=t})),t}function X_(){return G_}function Z_(){var t=Q_.getInstance().installationsService.getToken();return t.then((function(t){})),t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["UNKNOWN"]=0]="UNKNOWN",t[t["VISIBLE"]=1]="VISIBLE",t[t["HIDDEN"]=2]="HIDDEN"})(K_||(K_={}));var J_=["firebase_","google_","ga_"],$_=new RegExp("^[a-zA-Z]\\w*$"),tw=40,ew=100;function nw(){var t=H_.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function rw(){var t=H_.getInstance().document,e=t.visibilityState;switch(e){case"visible":return K_.VISIBLE;case"hidden":return K_.HIDDEN;default:return K_.UNKNOWN}}function iw(){var t=H_.getInstance().navigator,e=t.connection,n=e&&e.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function ow(t){if(0===t.length||t.length>tw)return!1;var e=J_.some((function(e){return t.startsWith(e)}));return!e&&!!t.match($_)}function sw(t){return 0!==t.length&&t.length<=ew}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aw="0.0.1",uw={loggingEnabled:!0},cw="FIREBASE_INSTALLATIONS_AUTH";function hw(t){var e=lw();return e?(vw(e),Promise.resolve()):dw(t).then(vw).then((function(t){return fw(t)}),(function(){}))}function lw(){var t=H_.getInstance().localStorage;if(t){var e=t.getItem(M_);if(e&&gw(e)){var n=t.getItem(L_);if(n)try{var r=JSON.parse(n);return r}catch($f){return}}}}function fw(t){var e=H_.getInstance().localStorage;t&&e&&(e.setItem(L_,JSON.stringify(t)),e.setItem(M_,String(Date.now()+60*Q_.getInstance().configTimeToLive*60*1e3)))}var pw="Could not fetch config, will use default configs";function dw(t){return Z_().then((function(e){var n=Q_.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+Q_.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:cw+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:Q_.getInstance().getAppId(),app_version:k_,sdk_version:aw})});return fetch(i).then((function(t){if(t.ok)return t.json();throw V_.create("RC response not ok")}))})).catch((function(){q_.info(pw)}))}function vw(t){if(!t)return t;var e=Q_.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=uw.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=yw(e.tracesSamplingRate),e.logNetworkAfterSampling=yw(e.networkRequestsSamplingRate),t}function gw(t){return Number(t)>Date.now()}function yw(t){return Math.random()<=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mw,bw=1;function _w(){return bw=2,mw=mw||Iw(),mw}function ww(){return 3===bw}function Iw(){return Ew().then((function(){return Y_()})).then((function(t){return hw(t)})).then((function(){return Tw()}),(function(){return Tw()}))}function Ew(){var t=H_.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function n(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}function Tw(){bw=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sw,Cw=1e4,kw=5500,Nw=3,Aw=1e3,Pw=Nw,xw=[],Ow=!1;function Rw(){Ow||(Dw(kw),Ow=!0)}function Dw(t){setTimeout((function(){if(0!==Pw)return xw.length?void Lw():Dw(Cw)}),t)}function Lw(){var t=xw.splice(0,Aw),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Q_.getInstance().logSource,log_event:e};Mw(n,t).catch((function(){xw=w_(t,xw),Pw--,q_.info("Tries left: "+Pw+"."),Dw(Cw)}))}function Mw(t,e){return jw(t).then((function(t){return t.ok||q_.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=Cw;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(xw=w_(e,xw),q_.info("Retry transport request later.")),Pw=Nw,Dw(r)}))}function jw(t){var e=Q_.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}function Fw(t){if(!t.eventTime||!t.message)throw V_.create("invalid cc log");xw=w_(xw,[t])}function Uw(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(void 0,e);Fw({message:r,eventTime:Date.now()})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(t,e){Sw||(Sw=Uw(Ww)),Sw(t,e)}function qw(t){var e=Q_.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&H_.getInstance().requiredApisAvailable()&&(t.isAuto&&rw()!==K_.VISIBLE||(ww()?Bw(t):_w().then((function(){return Bw(t)}),(function(){return Bw(t)}))))}function Bw(t){if(X_()){var e=Q_.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return Vw(t,1)}),0)}}function Hw(t){var e=Q_.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return Vw(t,0)}),0)}}function Ww(t,e){return 0===e?zw(t):Gw(t)}function zw(t){var e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:Kw(),network_request_metric:e};return JSON.stringify(n)}function Gw(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:Kw(),trace_metric:e};return JSON.stringify(r)}function Kw(){return{google_app_id:Q_.getInstance().getAppId(),app_instance_id:X_(),web_app_info:{sdk_version:k_,page_url:H_.getInstance().getUrl(),service_worker_status:nw(),visibility_state:rw(),effective_connection_type:iw()},application_process_state:0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qw=100,Yw="_",Xw=[O_,R_,D_];function Zw(t,e){return!(0===t.length||t.length>Qw)&&(e&&e.startsWith(x_)&&Xw.indexOf(t)>-1||!t.startsWith(Yw))}function Jw(t){var e=Math.floor(t);return e<t&&q_.info("Metric value should be an Integer, setting the value as : "+e+"."),e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $w=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=H_.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=N_+"-"+this.randomId+"-"+this.name,this.traceStopMark=A_+"-"+this.randomId+"-"+this.name,this.traceMeasure=n||P_+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw V_.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw V_.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),qw(this)},t.prototype.record=function(t,e,n){if(t<=0)throw V_.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw V_.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=__({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}qw(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!Zw(t,this.name))throw V_.create("invalid custom metric name",{customMetricName:t});this.counters[t]=Jw(e)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=ow(t),r=sw(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw V_.create("invalid attribute name",{attributeName:t});if(!r)throw V_.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return __({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=H_.getInstance().getUrl();if(i){var o=new t(x_+i,!0),s=Math.floor(1e3*H_.getInstance().getTimeOrigin());o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));var a="first-paint",u="first-contentful-paint";if(n){var c=n.find((function(t){return t.name===a}));c&&c.startTime&&o.putMetric(O_,Math.floor(1e3*c.startTime));var h=n.find((function(t){return t.name===u}));h&&h.startTime&&o.putMetric(R_,Math.floor(1e3*h.startTime)),r&&o.putMetric(D_,Math.floor(1e3*r))}qw(o)}},t.createUserTimingTrace=function(e){var n=new t(e,!1,e);qw(n)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(t){var e=t;if(e&&void 0!==e.responseStart){var n=H_.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime)),s=e.name&&e.name.split("?")[0],a={url:s,responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o};Hw(a)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eI=5e3;function nI(){X_()&&(setTimeout((function(){return iI()}),0),setTimeout((function(){return rI()}),0),setTimeout((function(){return oI()}),0))}function rI(){for(var t=H_.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){var i=r[n];tI(i)}t.setupObserver("resource",tI)}function iI(){var t=H_.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){$w.createOobTrace(e,n),r=void 0}),eI);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),$w.createOobTrace(e,n,t))}))}else $w.createOobTrace(e,n)}function oI(){for(var t=H_.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){var i=r[n];sI(i)}t.setupObserver("measure",sI)}function sI(t){var e=t.name;e.substring(0,P_.length)!==P_&&$w.createUserTimingTrace(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aI=function(){function t(t){this.app=t,H_.getInstance().requiredApisAvailable()&&(0,_.eu)().then((function(t){t&&(Rw(),_w().then(nI,nI))})).catch((function(t){q_.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new $w(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return Q_.getInstance().instrumentationEnabled},set:function(t){Q_.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return Q_.getInstance().dataCollectionEnabled},set:function(t){Q_.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}(),uI="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t){var e=function(t,e){if(t.name!==uI)throw V_.create("FB not default");if("undefined"===typeof window)throw V_.create("no window");return W_(window),Q_.getInstance().firebaseAppInstance=t,Q_.getInstance().installationsService=e,new aI(t)};t.INTERNAL.registerComponent(new Td.wA("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion(S_,C_)}cI(y.Z);var hI=function(){return hI=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},hI.apply(this,arguments)};function lI(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function fI(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pI,dI,vI="firebase_id",gI="origin",yI=6e4,mI="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bI="https://www.googletagmanager.com/gtag/js";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _I(t,e,n,r,i){return lI(this,void 0,void 0,(function(){var o,s;return fI(this,(function(a){switch(a.label){case 0:return i&&i.global?(t(pI.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=hI(hI({},r),{send_to:o}),t(pI.EVENT,n,s),a.label=3;case 3:return[2]}}))}))}function wI(t,e,n,r){return lI(this,void 0,void 0,(function(){var i;return fI(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(pI.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(pI.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))}function II(t,e,n,r){return lI(this,void 0,void 0,(function(){var i;return fI(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(pI.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(pI.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))}function EI(t,e,n,r){return lI(this,void 0,void 0,(function(){var i,o,s,a,u;return fI(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)a=s[o],i["user_properties."+a]=n[a];return t(pI.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(pI.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))}function TI(t,e){return lI(this,void 0,void 0,(function(){var n;return fI(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t["EVENT"]="event",t["SET"]="set",t["CONFIG"]="config"})(pI||(pI={})),function(t){t["ADD_SHIPPING_INFO"]="add_shipping_info",t["ADD_PAYMENT_INFO"]="add_payment_info",t["ADD_TO_CART"]="add_to_cart",t["ADD_TO_WISHLIST"]="add_to_wishlist",t["BEGIN_CHECKOUT"]="begin_checkout",t["CHECKOUT_PROGRESS"]="checkout_progress",t["EXCEPTION"]="exception",t["GENERATE_LEAD"]="generate_lead",t["LOGIN"]="login",t["PAGE_VIEW"]="page_view",t["PURCHASE"]="purchase",t["REFUND"]="refund",t["REMOVE_FROM_CART"]="remove_from_cart",t["SCREEN_VIEW"]="screen_view",t["SEARCH"]="search",t["SELECT_CONTENT"]="select_content",t["SELECT_ITEM"]="select_item",t["SELECT_PROMOTION"]="select_promotion",t["SET_CHECKOUT_OPTION"]="set_checkout_option",t["SHARE"]="share",t["SIGN_UP"]="sign_up",t["TIMING_COMPLETE"]="timing_complete",t["VIEW_CART"]="view_cart",t["VIEW_ITEM"]="view_item",t["VIEW_ITEM_LIST"]="view_item_list",t["VIEW_PROMOTION"]="view_promotion",t["VIEW_SEARCH_RESULTS"]="view_search_results"}(dI||(dI={}));var SI,CI=new b.Yd("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e){var n=document.createElement("script");n.src=bI+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}function NI(t){var e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function AI(t,e,n,r,i,o){return lI(this,void 0,void 0,(function(){var s,a,u,c;return fI(this,(function(h){switch(h.label){case 0:s=r[i],h.label=1;case 1:return h.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return h.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=h.sent(),u=a.find((function(t){return t.measurementId===i})),u?[4,e[u.appId]]:[3,6];case 5:h.sent(),h.label=6;case 6:return[3,8];case 7:return c=h.sent(),CI.error(c),[3,8];case 8:return t(pI.CONFIG,i,o),[2]}}))}))}function PI(t,e,n,r,i){return lI(this,void 0,void 0,(function(){var o,s,a,u,c,h,l,f,p;return fI(this,(function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),o=[],i&&i["send_to"]?(s=i["send_to"],Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=d.sent(),u=function(t){var n=a.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,h=s;c<h.length;c++)if(l=h[c],f=u(l),"break"===f)break;d.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return d.sent(),t(pI.EVENT,r,i||{}),[3,5];case 4:return p=d.sent(),CI.error(p),[3,5];case 5:return[2]}}))}))}function xI(t,e,n,r){function i(i,o,s){return lI(this,void 0,void 0,(function(){var a;return fI(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==pI.EVENT?[3,2]:[4,PI(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==pI.CONFIG?[3,4]:[4,AI(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(pI.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),CI.error(a),[3,7];case 7:return[2]}}))}))}return i}function OI(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=xI(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function RI(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(bI))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DI=(SI={},SI["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",SI["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",SI["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",SI["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",SI["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",SI["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",SI["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",SI["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',SI["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',SI),LI=new _.LL("analytics","Analytics",DI),MI=30,jI=1e3,FI=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=jI),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}(),UI=new FI;function VI(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function qI(t){var e;return lI(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return fI(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:VI(r)},o=mI.replace("{app-id}",n),[4,fetch(o,i)];case 1:if(s=c.sent(),200===s.status||304===s.status)return[3,6];a="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,s.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(a=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw LI.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a});case 6:return[2,s.json()]}}))}))}function BI(t,e,n){return void 0===e&&(e=UI),lI(this,void 0,void 0,(function(){var r,i,o,s,a,u,c=this;return fI(this,(function(h){if(r=t.options,i=r.appId,o=r.apiKey,s=r.measurementId,!i)throw LI.create("no-app-id");if(!o){if(s)return[2,{measurementId:s,appId:i}];throw LI.create("no-api-key")}return a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new GI,setTimeout((function(){return lI(c,void 0,void 0,(function(){return fI(this,(function(t){return u.abort(),[2]}))}))}),void 0!==n?n:yI),[2,HI({appId:i,apiKey:o,measurementId:s},a,u,e)]}))}))}function HI(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=UI),lI(this,void 0,void 0,(function(){var e,s,a,u,c,h,l;return fI(this,(function(f){switch(f.label){case 0:e=t.appId,s=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,WI(n,i)];case 2:return f.sent(),[3,4];case 3:if(a=f.sent(),s)return CI.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return f.trys.push([4,6,,7]),[4,qI(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(c=f.sent(),!zI(c)){if(r.deleteThrottleMetadata(e),s)return CI.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return h=503===Number(c.customData.httpStatus)?(0,_.$s)(o,r.intervalMillis,MI):(0,_.$s)(o,r.intervalMillis),l={throttleEndTimeMillis:Date.now()+h,backoffCount:o+1},r.setThrottleMetadata(e,l),CI.debug("Calling attemptFetch again in "+h+" millis"),[2,HI(t,l,n,r)];case 7:return[2]}}))}))}function WI(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(LI.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}function zI(t){if(!(t instanceof _.ZR)||!t.customData)return!1;var e=Number(t.customData["httpStatus"]);return 429===e||500===e||503===e||504===e}var GI=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(){return lI(this,void 0,void 0,(function(){var t;return fI(this,(function(e){switch(e.label){case 0:return(0,_.hl)()?[3,1]:(CI.warn(LI.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,(0,_.eu)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),CI.warn(LI.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}function QI(t,e,n,r,i,o){return lI(this,void 0,void 0,(function(){var s,a,u,c,h,l,f;return fI(this,(function(p){switch(p.label){case 0:return s=BI(t),s.then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&CI.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return CI.error(t)})),e.push(s),a=KI().then((function(t){return t?r.getId():void 0})),[4,Promise.all([s,a])];case 1:return u=p.sent(),c=u[0],h=u[1],RI()||kI(o,c.measurementId),i("js",new Date),f={},f[gI]="firebase",f.update=!0,l=f,null!=h&&(l[vI]=h),i(pI.CONFIG,c.measurementId,l),[2,c.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YI,XI,ZI={},JI=[],$I={},tE="dataLayer",eE="gtag",nE=!1;function rE(t){if(nE)throw LI.create("already-initialized");t.dataLayerName&&(tE=t.dataLayerName),t.gtagName&&(eE=t.gtagName)}function iE(){var t=[];if((0,_.ru)()&&t.push("This is a browser extension environment."),(0,_.zI)()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=LI.create("invalid-analytics-context",{errorInfo:e});CI.warn(n.message)}}function oE(t,e){iE();var n=t.options.appId;if(!n)throw LI.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw LI.create("no-api-key");CI.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=ZI[n])throw LI.create("already-exists",{id:n});if(!nE){NI(tE);var r=OI(ZI,JI,$I,tE,eE),i=r.wrappedGtag,o=r.gtagCore;XI=i,YI=o,nE=!0}ZI[n]=QI(t,JI,$I,e,YI,tE);var s={app:t,logEvent:function(t,e,r){_I(XI,ZI[n],t,e,r).catch((function(t){return CI.error(t)}))},setCurrentScreen:function(t,e){wI(XI,ZI[n],t,e).catch((function(t){return CI.error(t)}))},setUserId:function(t,e){II(XI,ZI[n],t,e).catch((function(t){return CI.error(t)}))},setUserProperties:function(t,e){EI(XI,ZI[n],t,e).catch((function(t){return CI.error(t)}))},setAnalyticsCollectionEnabled:function(t){TI(ZI[n],t).catch((function(t){return CI.error(t)}))},INTERNAL:{delete:function(){return delete ZI[n],Promise.resolve()}}};return s}var sE="@firebase/analytics",aE="0.6.4",uE="analytics";function cE(t){function e(t){try{var e=t.getProvider(uE).getImmediate();return{logEvent:e.logEvent}}catch(n){throw LI.create("interop-component-reg-failed",{reason:n})}}t.INTERNAL.registerComponent(new Td.wA(uE,(function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("installations").getImmediate();return oE(e,n)}),"PUBLIC").setServiceProps({settings:rE,EventName:dI,isSupported:hE})),t.INTERNAL.registerComponent(new Td.wA("analytics-internal",e,"PRIVATE")),t.registerVersion(sE,aE)}function hE(){return lI(this,void 0,void 0,(function(){var t;return fI(this,(function(e){switch(e.label){case 0:if((0,_.ru)())return[2,!1];if(!(0,_.zI)())return[2,!1];if(!(0,_.hl)())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,(0,_.eu)()];case 2:return t=e.sent(),[2,t];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))}cE(y.Z);var lE=function(){return lE=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},lE.apply(this,arguments)};function fE(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function pE(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var dE,vE=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return fE(this,void 0,void 0,(function(){var e,n,r,i,o;return pE(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],r=e[1],r&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}}))}))},t}(),gE=(dE={},dE["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",dE["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",dE["registration-api-key"]="Undefined API key. Check Firebase app initialization.",dE["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",dE["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",dE["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",dE["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",dE["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",dE["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",dE["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',dE["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',dE["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",dE["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",dE),yE=new _.LL("remoteconfig","Remote Config",gE);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(t,e){return t instanceof _.ZR&&-1!==t.code.indexOf(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(t){return void 0===t&&(t=navigator),t.languages&&t.languages[0]||t.language}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _E=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return fE(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,h,l,f,p,d,v,g,y,m,b;return pE(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=_.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:bE()},u={method:"POST",headers:s,body:JSON.stringify(a)},c=fetch(o,u),h=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([c,h])];case 3:return _.sent(),[4,c];case 4:return l=_.sent(),[3,6];case 5:throw f=_.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),yE.create(p,{originalErrorMessage:f.message});case 6:if(d=l.status,v=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];m=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,l.json()];case 8:return m=_.sent(),[3,10];case 9:throw b=_.sent(),yE.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:g=m["entries"],y=m["state"],_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===y?d=500:"NO_CHANGE"===y?d=304:"NO_TEMPLATE"!==y&&"EMPTY_CONFIG"!==y||(g={}),304!==d&&200!==d)throw yE.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:v,config:g}]}}))}))},t}(),wE=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),IE=!1,EE="",TE=0,SE=["1","true","t","yes","y","on"],CE=function(){function t(t,e){void 0===e&&(e=EE),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"===this._source?IE:SE.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return TE;var t=Number(this._value);return isNaN(t)&&(t=TE),t},t.prototype.getSource=function(){return this._source},t}(),kE=6e4,NE=432e5,AE=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:kE,minimumFetchIntervalMillis:NE},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=b["in"].DEBUG;break;case"silent":this._logger.logLevel=b["in"].SILENT;break;default:this._logger.logLevel=b["in"].ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return fE(this,void 0,void 0,(function(){var t,e,n;return pE(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return fE(this,void 0,void 0,(function(){var t,e,n,r=this;return pE(this,(function(i){switch(i.label){case 0:t=new wE,setTimeout((function(){return fE(r,void 0,void 0,(function(){return pE(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=mE(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return fE(this,void 0,void 0,(function(){return pE(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return PE(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new CE("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new CE("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new CE("static"))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(lE(lE({},t),e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t,e){var n=t.target.error||void 0;return yE.create(e,{originalErrorMessage:n&&n.message})}var OE="app_namespace_store",RE="firebase_remote_config",DE=1;function LE(){return new Promise((function(t,e){var n=indexedDB.open(RE,DE);n.onerror=function(t){e(xE(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(OE,{keyPath:"compositeKey"})}}}))}var ME=function(){function t(t,e,n,r){void 0===r&&(r=LE()),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return fE(this,void 0,void 0,(function(){var e,n=this;return pE(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([OE],"readonly"),s=o.objectStore(OE),a=n.createCompositeKey(t);try{var u=s.get(a);u.onerror=function(t){i(xE(t,"storage-get"))},u.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(c){i(yE.create("storage-get",{originalErrorMessage:c&&c.message}))}}))]}}))}))},t.prototype.set=function(t,e){return fE(this,void 0,void 0,(function(){var n,r=this;return pE(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var s=n.transaction([OE],"readwrite"),a=s.objectStore(OE),u=r.createCompositeKey(t);try{var c=a.put({compositeKey:u,value:e});c.onerror=function(t){o(xE(t,"storage-set"))},c.onsuccess=function(){i()}}catch(h){o(yE.create("storage-set",{originalErrorMessage:h&&h.message}))}}))]}}))}))},t.prototype.delete=function(t){return fE(this,void 0,void 0,(function(){var e,n=this;return pE(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([OE],"readwrite"),s=o.objectStore(OE),a=n.createCompositeKey(t);try{var u=s.delete(a);u.onerror=function(t){i(xE(t,"storage-delete"))},u.onsuccess=function(){r()}}catch(c){i(yE.create("storage-delete",{originalErrorMessage:c&&c.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),jE=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return fE(this,void 0,void 0,(function(){var t,e,n,r,i,o;return pE(this,(function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return r=s.sent(),r&&(this.lastFetchStatus=r),[4,e];case 2:return i=s.sent(),i&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return o=s.sent(),o&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function FE(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(yE.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}function UE(t){if(!(t instanceof _.ZR)||!t.customData)return!1;var e=Number(t.customData["httpStatus"]);return 429===e||500===e||503===e||504===e}var VE=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return fE(this,void 0,void 0,(function(){var e;return pE(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return fE(this,void 0,void 0,(function(){var e,i,o;return pE(this,(function(s){switch(s.label){case 0:return[4,FE(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(i=s.sent(),!UE(i))throw i;return o={throttleEndTimeMillis:Date.now()+(0,_.$s)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),qE="@firebase/remote-config",BE="0.1.31";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function HE(t){function e(e,n){var r=e.getProvider("app").getImmediate(),i=e.getProvider("installations").getImmediate();if("undefined"===typeof window)throw yE.create("registration-window");var o=r.options,s=o.projectId,a=o.apiKey,u=o.appId;if(!s)throw yE.create("registration-project-id");if(!a)throw yE.create("registration-api-key");if(!u)throw yE.create("registration-app-id");n=n||"firebase";var c=new ME(u,r.name,n),h=new jE(c),l=new b.Yd(qE);l.logLevel=b["in"].ERROR;var f=new _E(i,t.SDK_VERSION,n,s,a,u),p=new VE(f,c),d=new vE(p,c,h,l),v=new AE(r,d,h,c,l);return v.ensureInitialized(),v}t.INTERNAL.registerComponent(new Td.wA("remoteConfig",e,"PUBLIC").setMultipleInstances(!0)),t.registerVersion(qE,BE)}HE(y.Z);var WE="firebase",zE="8.2.9";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
y.Z.registerVersion(WE,zE,"app");var GE="firebase",KE="8.2.9";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),y.Z.registerVersion(GE,KE);var QE={apiKey:"AIzaSyDMq3A7By9ta-qqbzvEO_4NlarfGzdZKDY",authDomain:"chat-c5b5c.firebaseapp.com",projectId:"chat-c5b5c",storageBucket:"chat-c5b5c.appspot.com",messagingSenderId:"950527293092",appId:"1:950527293092:web:bb6b17e9aabdaeeb31d831",databaseURL:"https://chat-c5b5c-default-rtdb.firebaseio.com/"},YE=y.Z.initializeApp(QE),XE=YE,ZE={name:"chat",data:function(){return{userName:"",showMessage:"",to:null,participants:[{id:"user1",name:"Matteo",imageUrl:"https://avatars3.githubusercontent.com/u/1915989?s=230&v=4"},{id:"user2",name:"Support",imageUrl:"https://avatars3.githubusercontent.com/u/37018832?s=200&v=4"},{id:"user2",name:"eslam",imageUrl:"https://avatars3.githubusercontent.com/u/37018832?s=200&v=4"}],titleImageUrl:"https://a.slack-edge.com/66f9/img/avatars-teams/ava_0001-34.png",messageList:[{type:"text",author:"me",data:{text:"Say yes!"}},{type:"text",author:"user1",data:{text:"No."}},{type:"text",author:"user2",data:{text:"Wow."}}],newMessagesCount:0,isChatOpen:!1,showTypingIndicator:"",colors:{header:{bg:"#6366f1",text:"#ffffff"},launcher:{bg:"#6366f1"},messageList:{bg:"#ffffff"},sentMessage:{bg:"#6366f1",text:"#ffffff"},receivedMessage:{bg:"#eaeaea",text:"#222222"},userInput:{bg:"#f4f7f9",text:"#565867"}},alwaysScrollToBottom:!1,messageStyling:!0}},methods:{updateUsername:function(){this.name=this.userName,console.log(this.userName),this.userName=""},sendMessage2:function(){var t={text:this.showMessage,from:this.name,to:this.to};XE.database().ref("messages").push(t),this.showMessage=""},sendMessage:function(t){t.length>0&&(this.newMessagesCount=this.isChatOpen?this.newMessagesCount:this.newMessagesCount+1,this.onMessageWasSent({author:"support",type:"text",data:{text:t}}))},onMessageWasSent:function(t){XE.database().ref("messages").push(t),this.showMessage="",this.messageList=[].concat(g(this.messageList),[t])},openChat:function(){this.isChatOpen=!0,this.newMessagesCount=0},closeChat:function(){this.isChatOpen=!1},handleScrollToTop:function(){},handleOnType:function(){console.log("Emit typing event")},editMessage:function(t){var e=this.messageList.find((function(e){return e.id===t.id}));e.isEdited=!0,e.data.text=t.data.text}},created:function(){var t=this,e=XE.database().ref("messages");e.on("value",(function(e){var n=e.val(),r=[];Object.keys(n).forEach((function(t){r.push({id:t,username:n[t].from?n[t].from:n[t].username||"test",to:n[t].to,text:n[t].text})})),t.messageList=[].concat(g(t.messageList),[r])}))}},JE=ZE,$E=n(3736),tT=(0,$E.Z)(JE,c,h,!1,null,null,null),eT=tT.exports,nT={props:["singleProjectHeader"],data:function(){return{open:!1}},components:{Chat:eT},methods:{openChat:function(){this.$refs.open.openChat()}}},rT=nT,iT=(0,$E.Z)(rT,a,u,!1,null,null,null),oT=iT.exports,sT=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"active flex justify-start mt-7"},[n("img",{staticClass:"rounded-xl cursor-pointer shadow-lg",attrs:{src:t.selected,alt:"Real Estate"}})]),n("div",{staticClass:"thum-img flex justify-start"},t._l(t.projectImages,(function(e){return n("img",{key:e.id,staticClass:"rounded-xl cursor-pointer shadow-lg",class:{active:e.img==t.selected},attrs:{src:e.img,alt:e.title},on:{click:function(n){return t.choose(e.img)}}})})),0)])},aT=[],uT={name:"swiper",data:function(){return{selected:"http://holrmagazine.com/wp-content/uploads/2022/05/folksgrowth.com-real-estate-business.jpg",projectImages:[{id:1,title:"Real Estate",img:"https://blog.hubspot.com/hubfs/Sales_Blog/real-estate-business-compressor.jpg"},{id:2,title:"Real Estate",img:"https://c3c5e8m9.stackpathcdn.com/sites/g/files/aatuss191/files/2018-10/Edelman_Website_Real_Estate_Image_0.jpg"},{id:3,title:"Real Estate",img:"http://holrmagazine.com/wp-content/uploads/2022/05/folksgrowth.com-real-estate-business.jpg"}]}},methods:{choose:function(t){this.selected=t}}},cT=uT,hT=(0,$E.Z)(cT,sT,aT,!1,null,null,null),lT=hT.exports,fT=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block sm:flex gap-0 sm:gap-10 mt-14"},[n("div",{staticClass:"w-full sm:w-1/3 text-left"},[n("div",{staticClass:"mb-7"},[n("p",{staticClass:"font-general-medium text-base sm:text-2xl text-secondary-dark dark:text-secondary-light mb-2"},[t._v(" "+t._s(t.projectInfo.clientHeading)+" ")]),n("ul",{staticClass:"leading-loose"},t._l(t.projectInfo.companyInfos,(function(e){return n("li",{key:e,staticClass:"font-general-regular text-xs sm:text-lg text-ternary-dark dark:text-ternary-light"},[n("span",[t._v(t._s(e.title)+": ")]),n("a",{class:"Website"==e.title||"Phone"==e.title?"hover:underline cursor-pointer":"",attrs:{href:"#","aria-label":"Project Website and Phone"}},[t._v(t._s(e.details))])])})),0)]),n("div",[n("p",{staticClass:"font-general-medium text-base sm:text-2xl text-ternary-dark dark:text-ternary-light mb-2"},[t._v(" "+t._s(t.projectInfo.socialSharingsHeading)+" ")]),n("div",{staticClass:"flex items-center gap-3 mt-5"},t._l(t.projectInfo.socialSharings,(function(t){return n("a",{key:t.id,staticClass:"bg-ternary-light dark:bg-ternary-dark text-gray-400 hover:text-primary-dark dark:hover:text-primary-light p-2 rounded-lg shadow-sm duration-500",attrs:{href:t.url,target:"__blank","aria-label":"Share Project"}},[n("i",{staticClass:"w-4 lg:w-5 h-4 lg:h-5",attrs:{"data-feather":t.icon}})])})),0)])]),n("div",{staticClass:"w-full sm:w-2/3 text-left mt-10 sm:mt-0"},[n("p",{staticClass:"font-general-medium text-primary-dark dark:text-primary-light text-base sm:text-2xl font-bold mb-7"},[t._v(" "+t._s(t.projectInfo.projectDetailsHeading)+" ")]),t._l(t.projectInfo.projectDetails,(function(e){return n("p",{key:e.id,staticClass:"font-general-regular mb-5 text-xs sm:text-lg text-ternary-dark dark:text-ternary-light"},[t._v(" "+t._s(e.details)+" ")])})),n("div",{staticClass:"mb-7"},[n("p",{staticClass:"font-general-medium text-primary-dark dark:text-primary-light text-base sm:text-2xl font-bold mb-7"},[t._v(" "+t._s(t.projectInfo.objectivesHeading)+" ")]),n("p",{staticClass:"font-general-regular text-primary-dark dark:text-primary-light text-base sm:text-xl font-bold mb-4 pb-2 text-left border-b"},[t._v(" "+t._s(t.categoryInfo.categoryHeading)+" ")]),n("div",{staticClass:"grid grid-cols-3 sm:grid-cols-4 gap-10"},t._l(t.categoryInfo.categoryProducts,(function(e){return n("div",{key:e.id},[n("img",{staticClass:"rounded-xl cursor-pointer",attrs:{src:e.img,alt:e.title}}),n("h5",{staticClass:"font-general-regular text-primary-dark dark:text-primary-light text-sm font-bold my-1 text-left"},[t._v(" "+t._s(e.title)+" ")]),n("p",{staticClass:"text-sm"},[t._v(t._s(e.desc))])])})),0)])],2)])},pT=[],dT={props:["projectInfo","categoryInfo"],mounted:function(){s().replace()},updated:function(){s().replace()}},vT=dT,gT=(0,$E.Z)(vT,fT,pT,!1,null,null,null),yT=gT.exports,mT={name:"Projects",components:{ProjectHeader:oT,Swiper:lT,ProjectInfo:yT},data:function(){return{singleProjectHeader:{singleProjectTitle:"Real Estate company",singleProjectDate:"Jul 26, 2021",singleProjectTag:"Real Estate"},projectImages:[{id:1,title:"Real Estate",img:"https://www.google.com/url?sa=i&url=https%3A%2F%2Fblog.hubspot.com%2Fsales%2Freal-estate-business&psig=AOvVaw2VvE66rwutLGEOWEuEDE26&ust=1654239321584000&source=images&cd=vfe&ved=0CAwQjRxqFwoTCKi-1--XjvgCFQAAAAAdAAAAABAO"},{id:2,title:"Real Estate",img:"https://c3c5e8m9.stackpathcdn.com/sites/g/files/aatuss191/files/2018-10/Edelman_Website_Real_Estate_Image_0.jpg"},{id:3,title:"Real Estate",img:"http://holrmagazine.com/wp-content/uploads/2022/05/folksgrowth.com-real-estate-business.jpg"}],projectInfo:{clientHeading:"About Company",companyInfos:[{id:1,title:"Name",details:"Company Ltd"},{id:2,title:"Services",details:"Real Estate"},{id:3,title:"Website",details:"https://company.com"},{id:4,title:"Phone",details:"555 8888 888"}],objectivesHeading:"Categories",objectivesDetails:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Optio, natus! Quibusdam enim quod in esse, mollitia molestias incidunt quas ipsa accusamus veniam.",projectDetailsHeading:"About Us",projectDetails:[{id:1,details:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Nihil vel illum asperiores dignissimos cumque quibusdam et fugiat voluptatem nobis suscipit explicabo, eaque consequatur nesciunt, fugit eligendi corporis laudantium adipisci soluta? Lorem ipsum, dolor sit amet consectetur adipisicing elit. Incidunt totam dolorum, ducimus obcaecati, voluptas facilis molestias nobis ut quam natus similique inventore excepturi optio ipsa deleniti fugit illo. Unde, amet! Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ipsum illo necessitatibus perspiciatis! Aperiam perferendis labore temporibus, eos culpa corporis recusandae quas, fuga voluptatibus nesciunt odit libero tenetur neque consequatur ea."},{id:2,details:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Nihil vel illum asperiores dignissimos cumque quibusdam et fugiat voluptatem nobis suscipit explicabo, eaque consequatur nesciunt, fugit eligendi corporis laudantium adipisci soluta?"}],socialSharingsHeading:"Follow Us",socialSharings:[{id:1,name:"Twitter",icon:"twitter",url:""},{id:2,name:"Instagram",icon:"instagram",url:""},{id:3,name:"Facebook",icon:"facebook",url:""},{id:4,name:"LinkedIn",icon:"linkedin",url:""},{id:5,name:"Youtube",icon:"youtube",url:""}]},categoryInfo:{categoryHeading:"Real Estate",categoryProducts:[{id:1,title:"Modernly Designed Real Estate Surrounded by Nature in Alanya",desc:"Lorem ipsum dolor, sit amet consectetur",img:"https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcQGJuGT6cIvDI7VJAbuddMJkSijQq6vpLpm57dUeUKLMrq974BmN542rjCOSEJ_YYoP5ABVZjDdUOXtiPeJWQOWog8pLq6UG_ZEtfkK1abA&usqp=CAE"},{id:2,title:"Real Estate in a Comprehensive Housing Project in North Cyprus",desc:"Lorem ipsum dolor, sit amet consectetur",img:"https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcQGBTelIkoJR23dDqbJcaKt9GT1-qxEorTQxGTtX4qxiN1TYVUdcEq4mJ7p9uZypW8CFO1CIaeEuCMiZzjdm5EKNoEsxW6UMgxZXC5cZ0E&usqp=CAE"},{id:3,title:"Fully Furnished Real Estate in Belek Kadriya",desc:"Lorem ipsum dolor, sit amet consectetur",img:"https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcSfCjKYW3BVKXG20R9ep2mAFvvzTAphO-MYWvbQ7Q8JmMnHc9e4LAJZL_l25jMNU8w_mHf5GV6ji0Q3JuNdM-su-cqvtr8tSqJ8fik7qsGX&usqp=CAE"},{id:4,title:"Antalya Luxury Real Estate with Rich Complex Features",desc:"Lorem ipsum dolor, sit amet consectetur",img:"https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcQu6xJpYOuq1tvwWi8k28T70UACOK-gyQHojmeIYgLaVMBVWdRrQqC-XsLup6qmYlOADlmmsUkqykLtvb7d-mEpHB65uLmYC0RJcEKqLTmv&usqp=CAE"}]},relatedProject:{relatedProjectsHeading:"Related Companies",relatedProjects:[{id:1,title:"Mobile UI",img:n(3087)},{id:2,title:"Web Application",img:n(597)},{id:3,title:"UI Design",img:n(9952)},{id:4,title:"Kabul Mobile App UI",img:n(4398)}]}}},mounted:function(){s().replace()},updated:function(){s().replace()},methods:{}},bT=mT,_T=(0,$E.Z)(bT,r,i,!1,null,"1e17dc6a",null),wT=_T.exports},7023:function(t,e,n){var r=n(7854),i=r.isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&i(t)}},4986:function(t,e,n){var r=n(8113);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},6650:function(t,e,n){var r=n(1702),i=n(7466),o=n(1340),s=n(8415),a=n(4488),u=r(s),c=r("".slice),h=Math.ceil,l=function(t){return function(e,n,r){var s,l,f=o(a(e)),p=i(n),d=f.length,v=void 0===r?" ":o(r);return p<=d||""==v?f:(s=p-d,l=u(v,h(s/v.length)),l.length>s&&(l=c(l,0,s)),t?f+l:l+f)}};t.exports={start:l(!1),end:l(!0)}},2262:function(t,e,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),s=n(9303),a=n(1223);r({target:"Array",proto:!0},{at:function(t){var e=i(this),n=o(e),r=s(t),a=r>=0?r:n+r;return a<0||a>=n?void 0:e[a]}}),a("at")},5192:function(t,e,n){var r=n(2109),i=n(7023);r({target:"Number",stat:!0},{isFinite:i})},3161:function(t,e,n){var r=n(2109),i=n(5988);r({target:"Number",stat:!0},{isInteger:i})},4363:function(t,e,n){var r=n(2109);r({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},5994:function(t,e,n){var r=n(2109);r({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},9720:function(t,e,n){var r=n(2109),i=n(4699).entries;r({target:"Object",stat:!0},{entries:function(t){return i(t)}})},4506:function(t,e,n){"use strict";var r=n(2109),i=n(1702),o=n(4488),s=n(9303),a=n(1340),u=n(7293),c=i("".charAt),h=u((function(){return"\ud842"!=="ð ®·".at(-2)}));r({target:"String",proto:!0,forced:h},{at:function(t){var e=a(o(this)),n=e.length,r=s(t),i=r>=0?r:n+r;return i<0||i>=n?void 0:c(e,i)}})},6373:function(t,e,n){"use strict";var r=n(2109),i=n(7854),o=n(6916),s=n(1702),a=n(4994),u=n(4488),c=n(7466),h=n(1340),l=n(9670),f=n(4326),p=n(7976),d=n(7850),v=n(7066),g=n(8173),y=n(1320),m=n(7293),b=n(5112),_=n(6707),w=n(1530),I=n(7651),E=n(9909),T=n(1913),S=b("matchAll"),C="RegExp String",k=C+" Iterator",N=E.set,A=E.getterFor(k),P=RegExp.prototype,x=i.TypeError,O=s(v),R=s("".indexOf),D=s("".matchAll),L=!!D&&!m((function(){D("a",/./)})),M=a((function(t,e,n,r){N(this,{type:k,regexp:t,string:e,global:n,unicode:r,done:!1})}),C,(function(){var t=A(this);if(t.done)return{value:void 0,done:!0};var e=t.regexp,n=t.string,r=I(e,n);return null===r?{value:void 0,done:t.done=!0}:t.global?(""===h(r[0])&&(e.lastIndex=w(n,c(e.lastIndex),t.unicode)),{value:r,done:!1}):(t.done=!0,{value:r,done:!1})})),j=function(t){var e,n,r,i,o,s,a=l(this),u=h(t);return e=_(a,RegExp),n=a.flags,void 0===n&&p(P,a)&&!("flags"in P)&&(n=O(a)),r=void 0===n?"":h(n),i=new e(e===RegExp?a.source:a,r),o=!!~R(r,"g"),s=!!~R(r,"u"),i.lastIndex=c(a.lastIndex),new M(i,u,o,s)};r({target:"String",proto:!0,forced:L},{matchAll:function(t){var e,n,r,i,s=u(this);if(null!=t){if(d(t)&&(e=h(u("flags"in P?t.flags:O(t))),!~R(e,"g")))throw x("`.matchAll` does not allow non-global regexes");if(L)return D(s,t);if(r=g(t,S),void 0===r&&T&&"RegExp"==f(t)&&(r=j),r)return o(r,t,s)}else if(L)return D(s,t);return n=h(s),i=new RegExp(t,"g"),T?o(j,i,n):i[S](n)}}),T||S in P||y(P,S,j)},3112:function(t,e,n){"use strict";var r=n(2109),i=n(6650).start,o=n(4986);r({target:"String",proto:!0,forced:o},{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},2443:function(t,e,n){var r=n(7235);r("asyncIterator")},5125:function(t,e,n){var r=n(9843);r("Int32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},9669:function(t,e,n){"use strict";n.d(e,{Z:function(){return U}});var r=n(9726);n(8309),n(1539),n(4747),n(8783),n(3948),n(1249),n(3753),n(1532),n(7941),n(4916),n(4723),n(9600),n(7327),n(2526),n(5003),n(1299),n(1817),n(2165),n(1703),n(2222),n(2443);var i=function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)};var o,s,a=n(3836),u=n(5642),c=n(2864),h=(o={},o["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",o["bad-app-name"]="Illegal App name: '{$appName}",o["duplicate-app"]="Firebase App named '{$appName}' already exists",o["app-deleted"]="Firebase App named '{$appName}' already deleted",o["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",o["invalid-log-argument"]="First argument to `onLog` must be null or a function.",o),l=new a.LL("app","Firebase",h),f="@firebase/app",p="0.6.15",d="@firebase/analytics",v="@firebase/auth",g="@firebase/database",y="@firebase/functions",m="@firebase/installations",b="@firebase/messaging",_="@firebase/performance",w="@firebase/remote-config",I="@firebase/storage",E="@firebase/firestore",T="firebase-wrapper",S="[DEFAULT]",C=(s={},s[f]="fire-core",s[d]="fire-analytics",s[v]="fire-auth",s[g]="fire-rtdb",s[y]="fire-fn",s[m]="fire-iid",s[b]="fire-fcm",s[_]="fire-perf",s[w]="fire-rc",s[I]="fire-gcs",s[E]="fire-fst",s["fire-js"]="fire-js",s[T]="fire-js-all",s),k=new c.Yd("@firebase/app"),N=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,a.p$)(t),this.container=new u.H0(e.name),this._addComponent(new u.wA("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=S),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=S),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){k.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();N.prototype.name&&N.prototype.options||N.prototype.delete||console.log("dc");var A="8.2.9";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P(t){var e={},n=new Map,i={__esModule:!0,initializeApp:h,app:s,registerVersion:d,setLogLevel:c.Ub,onLog:v,apps:null,SDK_VERSION:A,INTERNAL:{registerComponent:p,removeApp:o,components:n,useAsService:g}};function o(t){delete e[t]}function s(t){if(t=t||S,!(0,a.r3)(e,t))throw l.create("no-app",{appName:t});return e[t]}function h(n,o){if(void 0===o&&(o={}),"object"!==(0,r.Z)(o)||null===o){var s=o;o={name:s}}var u=o;void 0===u.name&&(u.name=S);var c=u.name;if("string"!==typeof c||!c)throw l.create("bad-app-name",{appName:String(c)});if((0,a.r3)(e,c))throw l.create("duplicate-app",{appName:c});var h=new t(n,u,i);return e[c]=h,h}function f(){return Object.keys(e).map((function(t){return e[t]}))}function p(r){var o=r.name;if(n.has(o))return k.debug("There were multiple attempts to register component "+o+"."),"PUBLIC"===r.type?i[o]:null;if(n.set(o,r),"PUBLIC"===r.type){var u=function(t){if(void 0===t&&(t=s()),"function"!==typeof t[o])throw l.create("invalid-app-argument",{appName:o});return t[o]()};void 0!==r.serviceProps&&(0,a.ZB)(u,r.serviceProps),i[o]=u,t.prototype[o]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,o);return n.apply(this,r.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++){var f=h[c];e[f]._addComponent(r)}return"PUBLIC"===r.type?i[o]:null}function d(t,e,n){var r,i=null!==(r=C[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&a.push("and"),s&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void k.warn(a.join(" "))}p(new u.wA(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))}function v(t,e){if(null!==t&&"function"!==typeof t)throw l.create("invalid-log-argument");(0,c.Am)(t,e)}function g(t,e){if("serverAuth"===e)return null;var n=e;return n}return i["default"]=i,Object.defineProperty(i,"apps",{get:f}),s["App"]=t,i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x(){var t=P(N);function e(e){(0,a.ZB)(t,e)}return t.INTERNAL=i(i({},t.INTERNAL),{createFirebaseNamespace:x,extendNamespace:e,createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),t}var O=x(),R=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map((function(t){if(D(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(t,e){t.INTERNAL.registerComponent(new u.wA("platform-logger",(function(t){return new R(t)}),"PRIVATE")),t.registerVersion(f,p,e),t.registerVersion("fire-js","")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if((0,a.jU)()&&void 0!==self.firebase){k.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var M=self.firebase.SDK_VERSION;M&&M.indexOf("LITE")>=0&&k.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var j=O.initializeApp;O.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,a.UG)()&&k.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),j.apply(void 0,t)};var F=O;L(F);var U=F},5642:function(t,e,n){"use strict";n.d(e,{wA:function(){return h},H0:function(){return v},zt:function(){return f}});n(8309),n(1532),n(1539),n(8783),n(3948),n(1703),n(1038),n(1249),n(7327),n(9726),n(2526),n(5003),n(1299),n(1817),n(2165),n(2222),n(2443);var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};function i(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function o(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function s(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return s}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}var c=n(3836),h=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),l="[DEFAULT]",f=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=l);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new c.BH;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r({identifier:l,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(a){if(i)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,d(t))try{this.getOrInitializeService(l)}catch(p){}try{for(var r=s(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=a(i.value,2),u=o[0],c=o[1],h=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService(h);c.resolve(f)}catch(p){}}}catch(v){e={error:v}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=l),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return i(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(u(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=l),this.instances.has(t)},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,p(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:l:t},t}();function p(t){return t===l?void 0:t}function d(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){var e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new f(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},598:function(t,e,n){"use strict";var r=n(9726),i=(n(1539),n(9714),n(1703),n(9653),n(2707),n(9600),n(4916),n(7601),n(4603),n(8450),n(8386),n(4765),n(3123),n(7042),n(5306),n(3753),n(2481),n(8309),n(4747),n(7941),n(8862),n(1532),n(8783),n(3948),n(9826),n(1038),n(7327),n(2222),n(4553),n(561),n(1249),n(189),n(4723),n(3371),n(9669)),o=(n(2526),n(5003),n(1299),n(1817),n(2165),n(2443),function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)});function s(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var a=function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},a.apply(this,arguments)};function u(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function c(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function h(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)s.push(r.value)}catch(P){i={error:P}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return s}function f(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t}var p=n(3836),d=n(2864),v=n(5642);t=n.hmd(t);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var g=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,p.Pz)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,p.cI)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),y=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,p.r3)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),m=function(t){try{if("undefined"!==typeof window&&"undefined"!==typeof window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new g(e)}}catch(n){}return new y},b=m("localStorage"),_=m("sessionStorage"),w=new d.Yd("@firebase/database"),I=function(){var t=1;return function(){return t++}}(),E=function(t){var e=(0,p.dS)(t),n=new p.gQ;n.update(e);var r=n.digest();return p.US.encodeByteArray(r)},T=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var i="",o=0;o<e.length;o++){var s=e[o];Array.isArray(s)||s&&"object"===(0,r.Z)(s)&&"number"===typeof s.length?i+=t.apply(null,s):"object"===(0,r.Z)(s)?i+=(0,p.Pz)(s):i+=s,i+=" "}return i},S=null,C=!0,k=function(t,e){(0,p.hu)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(w.logLevel=d["in"].VERBOSE,S=w.log.bind(w),e&&_.set("logging_enabled",!0)):"function"===typeof t?S=t:(S=null,_.remove("logging_enabled"))},N=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===C&&(C=!1,null===S&&!0===_.get("logging_enabled")&&k(!0)),S){var n=T.apply(null,t);S(n)}},A=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];N.apply(void 0,f([t],e))}},P=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+T.apply(void 0,f(t));w.error(n)},x=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+T.apply(void 0,f(t));throw w.error(n),new Error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+T.apply(void 0,f(t));w.warn(n)},R=function(){"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},D=function(t){return"number"===typeof t&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},L=function(t){if((0,p.Yr)()||"complete"===document.readyState)t();else{var e=!1,n=function n(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}},M="[MIN_NAME]",j="[MAX_NAME]",F=function(t,e){if(t===e)return 0;if(t===M||e===j)return-1;if(e===M||t===j)return 1;var n=Z(t),r=Z(e);return null!==n?null!==r?n-r===0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},U=function(t,e){return t===e?0:t<e?-1:1},V=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,p.Pz)(e))},q=function t(e){if("object"!==(0,r.Z)(e)||null===e)return(0,p.Pz)(e);var n=[];for(var i in e)n.push(i);n.sort();for(var o="{",s=0;s<n.length;s++)0!==s&&(o+=","),o+=(0,p.Pz)(n[s]),o+=":",o+=t(e[n[s]]);return o+="}",o},B=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var W=function(t){(0,p.hu)(!D(t),"Invalid JSON number");var e,n,r,i,o,s=11,a=52,u=(1<<s-1)-1;0===t?(n=0,r=0,e=1/t===-1/0?1:0):(e=t<0,t=Math.abs(t),t>=Math.pow(2,1-u)?(i=Math.min(Math.floor(Math.log(t)/Math.LN2),u),n=i+u,r=Math.round(t*Math.pow(2,a-i)-Math.pow(2,a))):(n=0,r=Math.round(t/Math.pow(2,1-u-a))));var c=[];for(o=a;o;o-=1)c.push(r%2?1:0),r=Math.floor(r/2);for(o=s;o;o-=1)c.push(n%2?1:0),n=Math.floor(n/2);c.push(e?1:0),c.reverse();var h=c.join(""),l="";for(o=0;o<64;o+=8){var f=parseInt(h.substr(o,8),2).toString(16);1===f.length&&(f="0"+f),l+=f}return l.toLowerCase()},z=function(){return!("object"!==("undefined"===typeof window?"undefined":(0,r.Z)(window))||!window["chrome"]||!window["chrome"]["extension"]||/^chrome/.test(window.location.href))},G=function(){return"object"===("undefined"===typeof Windows?"undefined":(0,r.Z)(Windows))&&"object"===(0,r.Z)(Windows.UI)},K=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r},Q=new RegExp("^-?(0*)\\d{1,10}$"),Y=-2147483648,X=2147483647,Z=function(t){if(Q.test(t)){var e=Number(t);if(e>=Y&&e<=X)return e}return null},J=function(t){try{t()}catch(e){setTimeout((function(){var t=e.stack||"";throw O("Exception was thrown by user callback.",t),e}),Math.floor(0))}},$=function(){var t="object"===("undefined"===typeof window?"undefined":(0,r.Z)(window))&&window["navigator"]&&window["navigator"]["userAgent"]||"";return t.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},tt=function(t,e){var n=setTimeout(t,e);return"object"===(0,r.Z)(n)&&n["unref"]&&n["unref"](),n},et=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function nt(){return new et("")}function rt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function it(t){return t.pieces_.length-t.pieceNum_}function ot(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new et(t.pieces_,e)}function st(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function at(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ut(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function ct(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new et(e,0)}function ht(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof et)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new et(n,0)}function lt(t){return t.pieceNum_>=t.pieces_.length}function ft(t,e){var n=rt(t),r=rt(e);if(null===n)return e;if(n===r)return ft(ot(t),ot(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function pt(t,e){for(var n=ut(t,0),r=ut(e,0),i=0;i<n.length&&i<r.length;i++){var o=F(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function dt(t,e){if(it(t)!==it(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function vt(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(it(t)>it(e))return!1;while(n<t.pieces_.length){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var gt=function(){function t(t,e){this.errorPrefix_=e,this.parts_=ut(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,p.ug)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=(0,p.ug)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=(0,p.ug)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),yt="5",mt="v",bt="s",_t="r",wt="f",It=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Et="ls",Tt="p",St="websocket",Ct="long_polling",kt=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=b.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&b.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if((0,p.hu)("string"===typeof t,"typeof type must == string"),(0,p.hu)("object"===(0,r.Z)(e),"typeof params must == object"),t===St)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Ct)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e["ns"]=this.namespace);var i=[];return H(e,(function(t,e){i.push(t+"="+e)})),n+i.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Nt(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}function At(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=h(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):O("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}var Pt,xt,Ot=function(t,e){var n=Rt(t),r=n.namespace;"firebase.com"===n.domain&&x(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||x("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||R();var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new kt(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new et(n.pathString)}},Rt=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"===typeof t){var c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(h,l)),h<l&&(i=Nt(t.substring(h,l)));var f=At(t.substring(Math.min(t.length,l)));c=e.indexOf(":"),c>=0?(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f["ns"])}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},Dt=/[\[\].#$\/\u0000-\u001F\u007F]/,Lt=/[\[\].#$\u0000-\u001F\u007F]/,Mt=10485760,jt=function(t){return"string"===typeof t&&0!==t.length&&!Dt.test(t)},Ft=function(t){return"string"===typeof t&&0!==t.length&&!Lt.test(t)},Ut=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Ft(t)},Vt=function(t){return null===t||"string"===typeof t||"number"===typeof t&&!D(t)||t&&"object"===(0,r.Z)(t)&&(0,p.r3)(t,".sv")},qt=function(t,e,n,r,i){i&&void 0===n||Bt((0,p.gK)(t,e,i),n,r)},Bt=function t(e,n,i){var o=i instanceof et?new gt(i,e):i;if(void 0===n)throw new Error(e+"contains undefined "+o.toErrorString());if("function"===typeof n)throw new Error(e+"contains a function "+o.toErrorString()+" with contents = "+n.toString());if(D(n))throw new Error(e+"contains "+n.toString()+" "+o.toErrorString());if("string"===typeof n&&n.length>Mt/3&&(0,p.ug)(n)>Mt)throw new Error(e+"contains a string greater than "+Mt+" utf8 bytes "+o.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"===(0,r.Z)(n)){var s=!1,a=!1;if(H(n,(function(n,r){if(".value"===n)s=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!jt(n)))throw new Error(e+" contains an invalid key ("+n+") "+o.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');o.push(n),t(e,r,o),o.pop()})),s&&a)throw new Error(e+' contains ".value" child '+o.toErrorString()+" in addition to actual children.")}},Ht=function(t,e){var n,r;for(n=0;n<e.length;n++){r=e[n];for(var i=ut(r),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!jt(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(pt);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&vt(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},Wt=function(t,e,n,i,o){if(!o||void 0!==n){var s=(0,p.gK)(t,e,o);if(!n||"object"!==(0,r.Z)(n)||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];H(n,(function(t,e){var n=new et(t);if(Bt(s,e,ht(i,n)),".priority"===st(n)&&!Vt(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),Ht(s,a)}},zt=function(t,e,n,r){if(!r||void 0!==n){if(D(n))throw new Error((0,p.gK)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Vt(n))throw new Error((0,p.gK)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Gt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,p.gK)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Kt=function(t,e,n,r){if((!r||void 0!==n)&&!jt(n))throw new Error((0,p.gK)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Qt=function(t,e,n,r){if((!r||void 0!==n)&&!Ft(n))throw new Error((0,p.gK)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Yt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Qt(t,e,n,r)},Xt=function(t,e){if(".info"===rt(e))throw new Error(t+" failed = Can't modify data under /.info/")},Zt=function(t,e,n){var r=n.path.toString();if("string"!==typeof n.repoInfo.host||0===n.repoInfo.host.length||!jt(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!Ut(r))throw new Error((0,p.gK)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Jt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error((0,p.gK)(t,e,r)+"must be a boolean.")},$t=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){(0,p.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,p.Wj)("OnDisconnect.cancel",1,t,!0);var e=new p.BH;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){(0,p.Dv)("OnDisconnect.remove",0,1,arguments.length),Xt("OnDisconnect.remove",this.path_),(0,p.Wj)("OnDisconnect.remove",1,t,!0);var e=new p.BH;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){(0,p.Dv)("OnDisconnect.set",1,2,arguments.length),Xt("OnDisconnect.set",this.path_),qt("OnDisconnect.set",1,t,this.path_,!1),(0,p.Wj)("OnDisconnect.set",2,e,!0);var n=new p.BH;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){(0,p.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),Xt("OnDisconnect.setWithPriority",this.path_),qt("OnDisconnect.setWithPriority",1,t,this.path_,!1),zt("OnDisconnect.setWithPriority",2,e,!1),(0,p.Wj)("OnDisconnect.setWithPriority",3,n,!0);var r=new p.BH;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if((0,p.Dv)("OnDisconnect.update",1,2,arguments.length),Xt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wt("OnDisconnect.update",1,t,this.path_,!1),(0,p.Wj)("OnDisconnect.update",2,e,!0);var i=new p.BH;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),te=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,p.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),ee="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ne="-",re="z",ie=786,oe=function(){var t=0,e=[];return function(n){var r,i=n===t;t=n;var o=new Array(8);for(r=7;r>=0;r--)o[r]=ee.charAt(n%64),n=Math.floor(n/64);(0,p.hu)(0===n,"Cannot push at time == 0");var s=o.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)s+=ee.charAt(e[r]);return(0,p.hu)(20===s.length,"nextPushId: Length should be 20."),s}}(),se=function(t){if(t===""+X)return ne;var e=Z(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<ie)return n.push(ne),n.join("");var i=n.length-1;while(i>=0&&n[i]===re)i--;if(-1===i)return j;var o=n[i],s=ee.charAt(ee.indexOf(o)+1);return n[i]=s,n.slice(0,i+1).join("")},ae=function(t){if(t===""+Y)return M;var e=Z(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return n[n.length-1]===ne?1===n.length?""+X:(delete n[n.length-1],n.join("")):(n[n.length-1]=ee.charAt(ee.indexOf(n[n.length-1])-1),n.join("")+re.repeat(ie-n.length))},ue=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),ce=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new ue(M,t),r=new ue(M,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return ue.MIN},t}(),he=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Pt},set:function(t){Pt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return F(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,p.g5)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return ue.MIN},e.prototype.maxPost=function(){return new ue(j,Pt)},e.prototype.makePost=function(t,e){return(0,p.hu)("string"===typeof t,"KeyIndex indexValue must always be a string."),new ue(t,Pt)},e.prototype.toString=function(){return".key"},e}(ce),le=new he;function fe(t){xt=t}var pe,de,ve,ge=function(t){return"number"===typeof t?"number:"+W(t):"string:"+t},ye=function(t){if(t.isLeafNode()){var e=t.val();(0,p.hu)("string"===typeof e||"number"===typeof e||"object"===(0,r.Z)(e)&&(0,p.r3)(e,".sv"),"Priority must be a string or number.")}else(0,p.hu)(t===xt||t.isEmpty(),"priority of unexpected type.");(0,p.hu)(t===xt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},me=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,p.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ye(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return pe},set:function(t){pe=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return lt(e)?this:".priority"===rt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=rt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,p.hu)(".priority"!==r||1===it(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ot(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+ge(this.priorityNode_.val())+":");var e=(0,r.Z)(this.value_);t+=e+":",t+="number"===e?W(this.value_):this.value_,this.lazyHash_=E(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,p.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=(0,r.Z)(e.value_),i=(0,r.Z)(this.value_),o=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(i);return(0,p.hu)(o>=0,"Unknown leaf type: "+n),(0,p.hu)(s>=0,"Unknown leaf type: "+i),o===s?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();function be(t){de=t}function _e(t){ve=t}var we,Ie,Ee=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?F(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return ue.MIN},e.prototype.maxPost=function(){return new ue(j,new me("[PRIORITY-POST]",ve))},e.prototype.makePost=function(t,e){var n=de(t);return new ue(e,new me("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(ce),Te=new Ee,Se=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];var o=1;while(!t.isEmpty())if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_){e=e.left;while(!e.isEmpty())this.nodeStack_.push(e),e=e.right}else{e=e.right;while(!e.isEmpty())this.nodeStack_.push(e),e=e.left}return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ce=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Ne.EMPTY_NODE,this.right=null!=o?o:Ne.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Ne.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()},t.prototype.remove=function(t,e){var n,r;if(n=this,e(t,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ne.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),ke=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ce(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Ne=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ce.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ce.BLACK,null,null))},t.prototype.get=function(t){var e,n=this.root_;while(!n.isEmpty()){if(e=this.comparator_(t,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){var e,n=this.root_,r=null;while(!n.isEmpty()){if(e=this.comparator_(t,n.key),0===e){if(n.left.isEmpty())return r?r.key:null;n=n.left;while(!n.right.isEmpty())n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Se(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Se(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Se(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Se(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new ke,t}(),Ae=Math.log(2),Pe=function(){function t(t){var e=function(t){return parseInt(Math.log(t)/Ae,10)},n=function(t){return parseInt(Array(t+1).join("1"),2)};this.count=e(t+1),this.current_=this.count-1;var r=n(this.count);this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),xe=function(t,e,n,r){t.sort(e);var i=function e(r,i){var o,s,a=i-r;if(0===a)return null;if(1===a)return o=t[r],s=n?n(o):o,new Ce(s,o.node,Ce.BLACK,null,null);var u=parseInt(a/2,10)+r,c=e(r,u),h=e(u+1,i);return o=t[u],s=n?n(o):o,new Ce(s,o.node,Ce.BLACK,c,h)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),h=t[o],l=n?n(h):h;u(new Ce(l,h.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var h=e.nextBitIsOne(),l=Math.pow(2,e.count-(c+1));h?a(l,Ce.BLACK):(a(l,Ce.BLACK),a(l,Ce.RED))}return o},s=new Pe(t.length),a=o(s);return new Ne(r||e,a)},Oe={},Re=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,p.hu)(Oe&&Te,"ChildrenNode.ts has not been loaded"),we=we||new t({".priority":Oe},{".priority":Te}),we},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,p.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ne?e:null},t.prototype.hasIndex=function(t){return(0,p.r3)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,p.hu)(e!==le,"KeyIndex always exists and isn't meant to be added to the IndexMap.");var r,i=[],o=!1,s=n.getIterator(ue.Wrap),u=s.getNext();while(u)o=o||e.isDefinedOn(u.node),i.push(u),u=s.getNext();r=o?xe(i,e.getCompare()):Oe;var c=e.toString(),h=a({},this.indexSet_);h[c]=e;var l=a({},this.indexes_);return l[c]=r,new t(l,h)},t.prototype.addToIndexes=function(e,n){var r=this,i=(0,p.UI)(this.indexes_,(function(t,i){var o=(0,p.DV)(r.indexSet_,i);if((0,p.hu)(o,"Missing index implementation for "+i),t===Oe){if(o.isDefinedOn(e.node)){var s=[],a=n.getIterator(ue.Wrap),u=a.getNext();while(u)u.name!==e.name&&s.push(u),u=a.getNext();return s.push(e),xe(s,o.getCompare())}return Oe}var c=n.get(e.name),h=t;return c&&(h=h.remove(new ue(e.name,c))),h.insert(e,e.node)}));return new t(i,this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){var r=(0,p.UI)(this.indexes_,(function(t){if(t===Oe)return t;var r=n.get(e.name);return r?t.remove(new ue(e.name,r)):t}));return new t(r,this.indexSet_)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function De(t,e){return F(t.name,e.name)}function Le(t,e){return F(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ye(this.priorityNode_),this.children_.isEmpty()&&(0,p.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Ie||(Ie=new t(new Ne(Le),null,Re.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Ie},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Ie:e},t.prototype.getChild=function(t){var e=rt(t);return null===e?this:this.getImmediateChild(e).getChild(ot(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,p.hu)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new ue(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?Ie:this.priorityNode_;return new t(i,s,o)},t.prototype.updateChild=function(t,e){var n=rt(t);if(null===n)return e;(0,p.hu)(".priority"!==rt(t)||1===it(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(ot(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Te,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+ge(this.getPriority().val())+":"),this.forEachChild(Te,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":E(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new ue(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new ue(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new ue(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));var r=this.children_.getIteratorFrom(t.name,ue.Wrap),i=r.peek();while(null!=i&&e.compare(i,t)<0)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));var r=this.children_.getReverseIteratorFrom(t.name,ue.Wrap),i=r.peek();while(null!=i&&e.compare(i,t)>0)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Fe?-1:0},t.prototype.withIndex=function(e){if(e===le||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===le||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){var n=this.getIterator(Te),r=e.getIterator(Te),i=n.getNext(),o=r.getNext();while(i&&o){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===le?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),je=function(t){function e(){return t.call(this,new Ne(Le),Me.EMPTY_NODE,Re.Default)||this}return s(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Me.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Me),Fe=new je;Object.defineProperties(ue,{MIN:{value:new ue(M,Me.EMPTY_NODE)},MAX:{value:new ue(j,Fe)}}),he.__EMPTY_NODE=Me.EMPTY_NODE,me.__childrenNodeConstructor=Me,fe(Fe),_e(Fe);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ue=!0;function Ve(t,e){if(void 0===e&&(e=null),null===t)return Me.EMPTY_NODE;if("object"===(0,r.Z)(t)&&".priority"in t&&(e=t[".priority"]),(0,p.hu)(null===e||"string"===typeof e||"number"===typeof e||"object"===(0,r.Z)(e)&&".sv"in e,"Invalid priority type found: "+(0,r.Z)(e)),"object"===(0,r.Z)(t)&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!==(0,r.Z)(t)||".sv"in t){var n=t;return new me(n,Ve(e))}if(t instanceof Array||!Ue){var i=Me.EMPTY_NODE;return H(t,(function(e,n){if((0,p.r3)(t,e)&&"."!==e.substring(0,1)){var r=Ve(n);!r.isLeafNode()&&r.isEmpty()||(i=i.updateImmediateChild(e,r))}})),i.updatePriority(Ve(e))}var o=[],s=!1,a=t;if(H(a,(function(t,e){if("."!==t.substring(0,1)){var n=Ve(e);n.isEmpty()||(s=s||!n.getPriority().isEmpty(),o.push(new ue(t,n)))}})),0===o.length)return Me.EMPTY_NODE;var u=xe(o,De,(function(t){return t.name}),Le);if(s){var c=xe(o,Te.getCompare());return new Me(u,Ve(e),new Re({".priority":c},{".priority":Te}))}return new Me(u,Ve(e),Re.Default)}be(Ve);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var qe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?F(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return ue.MIN},e.prototype.maxPost=function(){return ue.MAX},e.prototype.makePost=function(t,e){var n=Ve(t);return new ue(e,n)},e.prototype.toString=function(){return".value"},e}(ce),Be=new qe,He=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,p.hu)(!lt(e)&&".priority"!==rt(e),"Can't create PathIndex with empty path or .priority key"),n}return s(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?F(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Ve(t),r=Me.EMPTY_NODE.updateChild(this.indexPath_,n);return new ue(e,r)},e.prototype.maxPost=function(){var t=Me.EMPTY_NODE.updateChild(this.indexPath_,Fe);return new ue(j,t)},e.prototype.toString=function(){return ut(this.indexPath_,0).join("/")},e}(ce),We=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return(0,p.Dv)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return(0,p.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return(0,p.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return(0,p.Dv)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){(0,p.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Qt("DataSnapshot.child",1,e,!1);var n=new et(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Te)},t.prototype.hasChild=function(t){(0,p.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Qt("DataSnapshot.hasChild",1,t,!1);var e=new et(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return(0,p.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if((0,p.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,p.Wj)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Te))}))},t.prototype.hasChildren=function(){return(0,p.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,p.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return(0,p.Dv)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),ze=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,p.Pz)(this.snapshot.exportVal())},t}(),Ge=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ke=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new ze("value",this,new We(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){(0,p.hu)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Ge(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Qe=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,(0,p.r3)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Ge(this,t,e):null},t.prototype.createEvent=function(t,e){(0,p.hu)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new ze(t.type,this,new We(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){(0,p.hu)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length,s=i.length;if(o===s){if(1===o){var a=r[0],u=i[0];return u===a&&(!e.callbacks_[a]||!this.callbacks_[u]||e.callbacks_[a]===this.callbacks_[u])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ye(t){return{type:"value",snapshotNode:t}}function Xe(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ze(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Je(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function $e(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn,en=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){(0,p.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Ze(e,s)):(0,p.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Xe(e,n)):o.trackChildChange(Je(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Te,(function(t,r){e.hasChild(t)||n.trackChildChange(Ze(t,r))})),e.isLeafNode()||e.forEachChild(Te,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Je(e,r,i))}else n.trackChildChange(Xe(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Me.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),nn=function(){function t(e){this.indexedFilter_=new en(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new ue(e,n))||(n=Me.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Me.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Me.EMPTY_NODE);var i=this;return e.forEachChild(Te,(function(t,e){i.matches(new ue(t,e))||(r=r.updateImmediateChild(t,Me.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),rn=function(){function t(t){this.rangedFilter_=new nn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new ue(e,n))||(n=Me.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Me.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Me.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);var o=0;while(i.hasNext()&&o<this.limit_){var s=i.getNext(),a=void 0;if(a=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0,!a)break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=e.withIndex(this.index_),r=r.updatePriority(Me.EMPTY_NODE);var u=void 0,c=void 0,h=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();h=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();o=0;var f=!1;while(i.hasNext()){s=i.getNext();!f&&h(u,s)<=0&&(f=!0);a=f&&o<this.limit_&&h(s,c)<=0;a?o++:r=r.updateImmediateChild(s.name,Me.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;(0,p.hu)(a.numChildren()===this.limit_,"");var u=new ue(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);while(null!=f&&(f.name===e||a.hasChild(f.name)))f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:o(f,u),v=h&&!n.isEmpty()&&d>=0;if(v)return null!=i&&i.trackChildChange(Je(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Ze(e,l));var g=a.updateImmediateChild(e,Me.EMPTY_NODE),y=null!=f&&this.rangedFilter_.matches(f);return y?(null!=i&&i.trackChildChange(Xe(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&o(c,u)>=0?(null!=i&&(i.trackChildChange(Ze(c.name,c.node)),i.trackChildChange(Xe(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,Me.EMPTY_NODE)):t},t}(),on=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Te}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return(0,p.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,p.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:M},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,p.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,p.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:j},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,p.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Te},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t){return t.loadsAllData()?new en(t.getIndex()):t.hasLimit()?new rn(t):new nn(t)}function an(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function un(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function cn(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function hn(t,e,n){var r;if(t.index_===le)"string"===typeof e&&(e=se(e)),r=cn(t,e,n);else{var i=void 0;i=null==n?j:se(n),r=cn(t,e,i)}return r.startAfterSet_=!0,r}function ln(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function fn(t,e,n){var r,i;return t.index_===le?("string"===typeof e&&(e=ae(e)),i=ln(t,e,n)):(r=null==n?M:ae(n),i=ln(t,e,r)),i.endBeforeSet_=!0,i}function pn(t,e){var n=t.copy();return n.index_=e,n}function dn(t){var e,n={};return t.isDefault()||(t.index_===Te?e="$priority":t.index_===Be?e="$value":t.index_===le?e="$key":((0,p.hu)(t.index_ instanceof He,"Unrecognized index type!"),e=t.index_.toString()),n["orderBy"]=(0,p.Pz)(e),t.startSet_&&(n["startAt"]=(0,p.Pz)(t.indexStartValue_),t.startNameSet_&&(n["startAt"]+=","+(0,p.Pz)(t.indexStartName_))),t.endSet_&&(n["endAt"]=(0,p.Pz)(t.indexEndValue_),t.endNameSet_&&(n["endAt"]+=","+(0,p.Pz)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n["limitToFirst"]=t.limit_:n["limitToLast"]=t.limit_)),n}function vn(t){var e={};if(t.startSet_&&(e["sp"]=t.indexStartValue_,t.startNameSet_&&(e["sn"]=t.indexStartName_)),t.endSet_&&(e["ep"]=t.indexEndValue_,t.endNameSet_&&(e["en"]=t.indexEndName_)),t.limitSet_){e["l"]=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e["vf"]=n}return t.index_!==Te&&(e["i"]=t.index_.toString()),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return(0,p.hu)(tn,"Reference.ts has not been loaded"),tn},set:function(t){tn=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===le){var i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){var s=t.getIndexStartName();if(s!==M)throw new Error(i);if("string"!==typeof e)throw new Error(o)}if(t.hasEnd()){var a=t.getIndexEndName();if(a!==j)throw new Error(i);if("string"!==typeof n)throw new Error(o)}}else if(t.getIndex()===Te){if(null!=e&&!Vt(e)||null!=n&&!Vt(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,p.hu)(t.getIndex()instanceof He||t.getIndex()===Be,"unknown index type."),null!=e&&"object"===(0,r.Z)(e)||null!=n&&"object"===(0,r.Z)(n))throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return(0,p.Dv)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){(0,p.Dv)("Query.on",2,4,arguments.length),Gt("Query.on",1,e,!1),(0,p.Wj)("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[e]=n,this.onChildEvent(s,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Ke(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Qe(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){(0,p.Dv)("Query.off",0,3,arguments.length),Gt("Query.off",1,t,!0),(0,p.Wj)("Query.off",2,e,!0),(0,p.lb)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new Ke(o,null,n||null)}else t&&(e&&(i={},i[t]=e),r=new Qe(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var o=this;(0,p.Dv)("Query.once",1,4,arguments.length),Gt("Query.once",1,e,!1),(0,p.Wj)("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),a=!0,u=new p.BH;u.promise.catch((function(){}));var c=function t(r){a&&(a=!1,o.off(e,t),n&&n.bind(s.context)(r),u.resolve(r))};return this.on(e,c,(function(t){o.off(e,c),s.cancel&&s.cancel.bind(s.context)(t),u.reject(t)})),u.promise},t.prototype.limitToFirst=function(e){if((0,p.Dv)("Query.limitToFirst",1,1,arguments.length),"number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,an(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if((0,p.Dv)("Query.limitToLast",1,1,arguments.length),"number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,un(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if((0,p.Dv)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Qt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new et(e);if(lt(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new He(n),i=pn(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){(0,p.Dv)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=pn(this.queryParams_,le);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){(0,p.Dv)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=pn(this.queryParams_,Te);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){(0,p.Dv)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=pn(this.queryParams_,Be);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),(0,p.Dv)("Query.startAt",0,2,arguments.length),qt("Query.startAt",1,e,this.path,!0),Kt("Query.startAt",2,n,!0);var r=cn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),(0,p.Dv)("Query.startAfter",0,2,arguments.length),qt("Query.startAfter",1,e,this.path,!1),Kt("Query.startAfter",2,n,!0);var r=hn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),(0,p.Dv)("Query.endAt",0,2,arguments.length),qt("Query.endAt",1,e,this.path,!0),Kt("Query.endAt",2,n,!0);var r=ln(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),(0,p.Dv)("Query.endBefore",0,2,arguments.length),qt("Query.endBefore",1,e,this.path,!1),Kt("Query.endBefore",2,n,!0);var r=fn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if((0,p.Dv)("Query.equalTo",1,2,arguments.length),qt("Query.equalTo",1,t,this.path,!1),Kt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return(0,p.Dv)("Query.toString",0,0,arguments.length),this.repo.toString()+at(this.path)},t.prototype.toJSON=function(){return(0,p.Dv)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return vn(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=q(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if((0,p.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=dt(this.path,e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var i={cancel:null,context:null};if(e&&n)i.cancel=e,(0,p.Wj)(t,3,i.cancel,!0),i.context=n,(0,p.lb)(t,4,i.context,!0);else if(e)if("object"===(0,r.Z)(e)&&null!==e)i.context=e;else{if("function"!==typeof e)throw new Error((0,p.gK)(t,3,!0)+" must either be a cancel callback or a context object.");i.cancel=e}return i},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),yn=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){var n=this.node_.getImmediateChild(e);return new t(n)},t.prototype.node=function(){return this.node_},t}(),mn=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=ht(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),bn=function(t){return t=t||{},t["timestamp"]=t["timestamp"]||(new Date).getTime(),t},_n=function(t,e,n){return t&&"object"===(0,r.Z)(t)?((0,p.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"===typeof t[".sv"]?wn(t[".sv"],e,n):"object"===(0,r.Z)(t[".sv"])?In(t[".sv"],e):void(0,p.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},wn=function(t,e,n){switch(t){case"timestamp":return n["timestamp"];default:(0,p.hu)(!1,"Unexpected server value: "+t)}},In=function(t,e,n){t.hasOwnProperty("increment")||(0,p.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t["increment"];"number"!==typeof r&&(0,p.hu)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,p.hu)(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i,s=o.getValue();return"number"!==typeof s?r:s+r},En=function(t,e,n,r){return Sn(e,new mn(n,t),r)},Tn=function(t,e,n){return Sn(t,new yn(e),n)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t,e,n){var r,i=t.getPriority().val(),o=_n(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=_n(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new me(a,Ve(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new me(o))),u.forEachChild(Te,(function(t,i){var o=Sn(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn,kn=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!lt(t)&&this.children.size>0){var e=rt(t);if(t=ot(t),this.children.has(e)){var n=this.children.get(e);return n.find(t)}return null}return null},t.prototype.remember=function(e,n){if(lt(e))this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=rt(e);this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=ot(e),i.remember(e,n)}},t.prototype.forget=function(t){if(lt(t))return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Te,(function(t,e){n.remember(new et(t),e)})),this.forget(t)}if(this.children.size>0){var r=rt(t);if(t=ot(t),this.children.has(r)){var i=this.children.get(r).forget(t);i&&this.children.delete(r)}return 0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new et(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function An(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Pn(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["OVERWRITE"]=0]="OVERWRITE",t[t["MERGE"]=1]="MERGE",t[t["ACK_USER_WRITE"]=2]="ACK_USER_WRITE",t[t["LISTEN_COMPLETE"]=3]="LISTEN_COMPLETE"})(Cn||(Cn={}));var xn,On=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Cn.ACK_USER_WRITE,this.source=Nn()}return t.prototype.operationForChild=function(e){if(lt(this.path)){if(null!=this.affectedTree.value)return(0,p.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new et(e));return new t(nt(),n,this.revert)}return(0,p.hu)(rt(this.path)===e,"operationForChild called for unrelated child."),new t(ot(this.path),this.affectedTree,this.revert)},t}(),Rn=function(){return xn||(xn=new Ne(U)),xn},Dn=function(){function t(t,e){void 0===e&&(e=Rn()),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return H(e,(function(t,e){n=n.set(new et(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:nt(),value:this.value};if(lt(t))return null;var n=rt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(ot(t),e);if(null!=i){var o=ht(new et(n),i.path);return{path:o,value:i.value}}return null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(lt(e))return this;var n=rt(e),r=this.children.get(n);return null!==r?r.subtree(ot(e)):new t(null)},t.prototype.set=function(e,n){if(lt(e))return new t(n,this.children);var r=rt(e),i=this.children.get(r)||new t(null),o=i.set(ot(e),n),s=this.children.insert(r,o);return new t(this.value,s)},t.prototype.remove=function(e){if(lt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=rt(e),r=this.children.get(n);if(r){var i=r.remove(ot(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(lt(t))return this.value;var e=rt(t),n=this.children.get(e);return n?n.get(ot(t)):null},t.prototype.setTree=function(e,n){if(lt(e))return n;var r=rt(e),i=this.children.get(r)||new t(null),o=i.setTree(ot(e),n),s=void 0;return s=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new t(this.value,s)},t.prototype.fold=function(t){return this.fold_(nt(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(ht(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,nt(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(lt(t))return null;var i=rt(t),o=this.children.get(i);return o?o.findOnPath_(ot(t),ht(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,nt(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(lt(e))return this;this.value&&r(n,this.value);var i=rt(e),o=this.children.get(i);return o?o.foreachOnPath_(ot(e),ht(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(nt(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(ht(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Ln=function(){function t(t,e){this.source=t,this.path=e,this.type=Cn.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return lt(this.path)?new t(this.source,nt()):new t(this.source,ot(this.path))},t}(),Mn=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Cn.OVERWRITE}return t.prototype.operationForChild=function(e){return lt(this.path)?new t(this.source,nt(),this.snap.getImmediateChild(e)):new t(this.source,ot(this.path),this.snap)},t}(),jn=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Cn.MERGE}return t.prototype.operationForChild=function(e){if(lt(this.path)){var n=this.children.subtree(new et(e));return n.isEmpty()?null:n.value?new Mn(this.source,nt(),n.value):new t(this.source,nt(),n)}return(0,p.hu)(rt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ot(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Fn=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(lt(t))return this.isFullyInitialized()&&!this.filtered_;var e=rt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Un=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new Fn(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new Fn(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t}(),Vn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,p.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,p.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Je(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Ze(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Xe(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,p.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Je(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),qn=function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}(),Bn=new qn,Hn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Fn(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Wn=function(){function t(t,e){this.viewCache=t,this.changes=e}return t}(),zn=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){(0,p.hu)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),(0,p.hu)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,s,a=new Vn;if(n.type===Cn.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,a):((0,p.hu)(u.source.fromServer,"Unknown source."),s=u.source.tagged||e.getServerCache().isFiltered()&&!lt(u.path),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,s,a))}else if(n.type===Cn.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,a):((0,p.hu)(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,s,a))}else if(n.type===Cn.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(e,h.path,r,i,a):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,a)}else{if(n.type!==Cn.LISTEN_COMPLETE)throw(0,p.g5)("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,a)}var l=a.getChanges();return t.maybeAddValueEvent_(e,o,l),new Wn(o,l)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Ye(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,a=void 0;if(lt(e))if((0,p.hu)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof Me?u:Me.EMPTY_NODE,h=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var f=rt(e);if(".priority"===f){(0,p.hu)(1===it(e),"Can't have a priority with additional path components");var d=o.getNode();a=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,d,a);s=null!=v?this.filter_.updatePriority(d,v):o.getNode()}else{var g=ot(e),y=void 0;if(o.isCompleteForChild(f)){a=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),a);y=null!=m?o.getNode().getImmediateChild(f).updateChild(g,m):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());s=null!=y?this.filter_.updateChild(o.getNode(),f,y,g,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||lt(e),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(lt(e))a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),h,null)}else{var l=rt(e);if(!u.isCompleteForPath(e)&&it(e)>1)return t;var f=ot(e),p=u.getNode().getImmediateChild(l),d=p.updateChild(f,n);a=".priority"===l?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),l,d,f,Bn,null)}var v=t.updateServerSnap(a,u.isFullyInitialized()||lt(e),c.filtersNodes()),g=new Hn(r,v,i);return this.generateEventCacheAfterServerEvent_(v,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Hn(r,t,i);if(lt(e))a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var h=rt(e);if(".priority"===h)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var l=ot(e),f=u.getNode().getImmediateChild(h),p=void 0;if(lt(l))p=n;else{var d=c.getCompleteChild(h);p=null!=d?".priority"===st(l)&&d.getChild(ct(l)).isEmpty()?d:d.updateChild(l,n):Me.EMPTY_NODE}if(f.equals(p))s=t;else{var v=this.filter_.updateChild(u.getNode(),h,p,l,c,o);s=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var h=ht(n,r);t.cacheHasChild_(e,rt(h))&&(u=a.applyUserOverwrite_(u,h,c,i,o,s))})),r.foreach((function(r,c){var h=ht(n,r);t.cacheHasChild_(e,rt(h))||(u=a.applyUserOverwrite_(u,h,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=lt(e)?n:new Dn(null).setTree(e,n);var h=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(h.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),l=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new et(e),l,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!h.hasChild(e)&&!u){var l=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(l,n);c=a.applyServerOverwrite_(c,new et(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(lt(e)&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(lt(e)){var u=new Dn(null);return a.getNode().forEachChild(le,(function(t,e){u=u.set(new et(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=new Dn(null);return n.foreach((function(t,n){var r=ht(e,t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||lt(e),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Bn,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new Hn(n,t,r),a=t.getEventCache().getNode(),u=void 0;if(lt(e)||".priority"===rt(e)){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();(0,p.hu)(h instanceof Me,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(a,c,i)}else{var l=rt(e),f=n.calcCompleteChild(l,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(l)&&(f=a.getImmediateChild(l)),u=null!=f?this.filter_.updateChild(a,l,f,ot(e),s,i):t.getEventCache().getNode().hasChild(l)?this.filter_.updateChild(a,l,Me.EMPTY_NODE,ot(e),s,i):a,u.isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap()),o.isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i)))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(nt()),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),Gn=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t,e,n,r){var i=[],o=[];return e.forEach((function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push($e(e.childName,e.snapshotNode))})),Qn(t,i,"child_removed",e,r,n),Qn(t,i,"child_added",e,r,n),Qn(t,i,"child_moved",o,r,n),Qn(t,i,"child_changed",e,r,n),Qn(t,i,"value",e,r,n),i}function Qn(t,e,n,r,i,o){var s=r.filter((function(t){return t.type===n}));s.sort((function(e,n){return Xn(t,e,n)})),s.forEach((function(n){var r=Yn(t,n,o);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function Yn(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Xn(t,e,n){if(null==e.childName||null==n.childName)throw(0,p.g5)("Should only compare child_ events.");var r=new ue(e.childName,e.snapshotNode),i=new ue(n.childName,n.snapshotNode);return t.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zn,Jn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new en(n.getIndex()),i=sn(n);this.processor_=new zn(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Me.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Me.EMPTY_NODE,s.getNode(),null),c=new Fn(a,o.isFullyInitialized(),r.filtersNodes()),h=new Fn(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Un(h,c),this.eventGenerator_=new Gn(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!lt(t)&&!e.getImmediateChild(rt(t)).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){(0,p.hu)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===Cn.MERGE&&null!==t.source.queryId&&((0,p.hu)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),(0,p.hu)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),(0,p.hu)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];if(!e.getNode().isLeafNode()){var r=e.getNode();r.forEachChild(Te,(function(t,e){n.push(Xe(t,e))}))}return e.isFullyInitialized()&&n.push(Ye(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return Kn(this.eventGenerator_,t,e,r)},t}(),$n=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return(0,p.hu)(Zn,"Reference.ts has not been loaded"),Zn},set:function(t){(0,p.hu)(!Zn,"__referenceConstructor has already been defined"),Zn=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return(0,p.hu)(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=h(this.views.values()),c=u.next();!c.done;c=u.next()){s=c.value;a=a.concat(s.applyOperation(t,e,n))}}catch(l){r={error:l}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},t.prototype.getView=function(t,e,n,r){var i=t.queryIdentifier(),o=this.views.get(i);if(!o){var s=e.calcCompleteEventCache(r?n:null),a=!1;s?a=!0:n instanceof Me?(s=e.calcCompleteEventChildren(n),a=!1):(s=Me.EMPTY_NODE,a=!1);var u=new Un(new Fn(s,a,!1),new Fn(n,r,!1));return new Jn(t,u)}return o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=this.getView(t,n,r,i);return this.views.has(t.queryIdentifier())||this.views.set(t.queryIdentifier(),o),o.addEventRegistration(e),o.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,s=e.queryIdentifier(),a=[],u=[],c=this.hasCompleteView();if("default"===s)try{for(var f=h(this.views.entries()),p=f.next();!p.done;p=f.next()){var d=l(p.value,2),v=d[0],g=d[1];u=u.concat(g.removeEventRegistration(n,r)),g.isEmpty()&&(this.views.delete(v),g.getQuery().getQueryParams().loadsAllData()||a.push(g.getQuery()))}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}else{g=this.views.get(s);g&&(u=u.concat(g.removeEventRegistration(n,r)),g.isEmpty()&&(this.views.delete(s),g.getQuery().getQueryParams().loadsAllData()||a.push(g.getQuery())))}return c&&!this.hasCompleteView()&&a.push(new t.__referenceConstructor(e.repo,e.path)),{removed:a,events:u}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=h(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=h(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(t)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){var e=t.getQueryParams();if(e.loadsAllData())return this.getCompleteView();var n=t.queryIdentifier();return this.views.get(n)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=h(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),tr=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Dn(null))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,e,n){if(lt(e))return new tr(new Dn(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=ft(i,e);return o=o.updateChild(s,n),new tr(t.writeTree_.set(i,o))}var a=new Dn(n),u=t.writeTree_.setTree(e,a);return new tr(u)}function nr(t,e,n){var r=t;return H(n,(function(t,n){r=er(r,ht(e,t),n)})),r}function rr(t,e){if(lt(e))return tr.empty();var n=t.writeTree_.setTree(e,new Dn(null));return new tr(n)}function ir(t,e){return null!=or(t,e)}function or(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(ft(n.path,e)):null}function sr(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Te,(function(t,n){e.push(new ue(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new ue(t,n.value))})),e}function ar(t,e){if(lt(e))return t;var n=or(t,e);return new tr(null!=n?new Dn(n):t.writeTree_.subtree(e))}function ur(t){return t.writeTree_.isEmpty()}function cr(t,e){return hr(nt(),t.writeTree_,e)}function hr(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?((0,p.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=hr(ht(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(ht(t,".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lr=function(){function t(){this.visibleWrites_=tr.empty(),this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new fr(t,this)},t.prototype.addOverwrite=function(t,e,n,r){(0,p.hu)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=er(this.visibleWrites_,t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){(0,p.hu)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=nr(this.visibleWrites_,t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));(0,p.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);var i=r.visible,o=!1,s=this.allWrites_.length-1;while(i&&s>=0){var a=this.allWrites_[s];a.visible&&(s>=n&&this.recordContainsPath_(a,r.path)?i=!1:vt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return this.resetTree_(),!0;if(r.snap)this.visibleWrites_=rr(this.visibleWrites_,r.path);else{var u=r.children;H(u,(function(t){e.visibleWrites_=rr(e.visibleWrites_,ht(r.path,t))}))}return!0}return!1},t.prototype.getCompleteWriteData=function(t){return or(this.visibleWrites_,t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=ar(this.visibleWrites_,e);if(!i&&ur(o))return n;if(i||null!=n||ir(o,nt())){var s=function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(vt(t.path,e)||vt(e,t.path))},a=t.layerTree_(this.allWrites_,s,e);h=n||Me.EMPTY_NODE;return cr(a,h)}return null}var u=or(this.visibleWrites_,e);if(null!=u)return u;var c=ar(this.visibleWrites_,e);if(ur(c))return n;if(null!=n||ir(c,nt())){var h=n||Me.EMPTY_NODE;return cr(c,h)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Me.EMPTY_NODE,r=or(this.visibleWrites_,t);if(r)return r.isLeafNode()||r.forEachChild(Te,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=ar(this.visibleWrites_,t);return e.forEachChild(Te,(function(t,e){var r=cr(ar(i,new et(t)),e);n=n.updateImmediateChild(t,r)})),sr(i).forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}var o=ar(this.visibleWrites_,t);return sr(o).forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){(0,p.hu)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=ht(t,e);if(ir(this.visibleWrites_,i))return null;var o=ar(this.visibleWrites_,i);return ur(o)?r.getChild(e):cr(o,r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=ht(t,e),i=or(this.visibleWrites_,r);if(null!=i)return i;if(n.isCompleteForChild(e)){var o=ar(this.visibleWrites_,r);return cr(o,n.getNode().getImmediateChild(e))}return null},t.prototype.shadowingWrite=function(t){return or(this.visibleWrites_,t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=ar(this.visibleWrites_,t),u=or(a,nt());if(null!=u)s=u;else{if(null==e)return[];s=cr(a,e)}if(s=s.withIndex(o),s.isEmpty()||s.isLeafNode())return[];var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();while(f&&c.length<r)0!==h(f,n)&&c.push(f),f=l.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return vt(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&vt(ht(t.path,n),e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,nt()),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=tr.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)vt(n,s)?(a=ft(n,s),r=er(r,a,o.snap)):vt(s,n)&&(a=ft(s,n),r=er(r,nt(),o.snap.getChild(a)));else{if(!o.children)throw(0,p.g5)("WriteRecord should have .snap or .children");if(vt(n,s))a=ft(n,s),r=nr(r,a,o.children);else if(vt(s,n))if(a=ft(s,n),lt(a))r=nr(r,nt(),o.children);else{var u=(0,p.DV)(o.children,rt(a));if(u){var c=u.getChild(ot(a));r=er(r,nt(),c)}}}}}return r},t}(),fr=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(ht(this.treePath_,t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(ht(this.treePath_,e),this.writeTree_)},t}(),pr=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=new Dn(null),this.pendingWriteTree_=new lr,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Mn(Nn(),t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Dn.fromObject(e);return this.applyOperationToSyncPoints_(new jn(Nn(),t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t),r=this.pendingWriteTree_.removeWrite(t);if(r){var i=new Dn(null);return null!=n.snap?i=i.set(nt(),!0):H(n.children,(function(t){i=i.set(new et(t),!0)})),this.applyOperationToSyncPoints_(new On(n.path,i,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Mn(An(),t,e))},t.prototype.applyServerMerge=function(t,e){var n=Dn.fromObject(e);return this.applyOperationToSyncPoints_(new jn(An(),t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Ln(An(),t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=ft(s,e),c=new Mn(Pn(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=ft(s,e),c=Dn.fromObject(n),h=new jn(Pn(a),u,c);return this.applyTaggedOperation_(s,h)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=ft(o,e),u=new Ln(Pn(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=ft(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var s,a=this.syncPointTree_.get(r);if(a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(nt())):(a=new $n,this.syncPointTree_=this.syncPointTree_.set(r,a)),null!=i)s=!0;else{s=!1,i=Me.EMPTY_NODE;var u=this.syncPointTree_.subtree(r);u.foreachChild((function(t,e){var n=e.getCompleteServerCache(nt());n&&(i=i.updateImmediateChild(t,n))}))}var c=a.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var h=t.makeQueryKey_(e);(0,p.hu)(!this.queryToTagMap.has(h),"View does not exist, but we have a tag");var l=t.getNextQueryTag_();this.queryToTagMap.set(h,l),this.tagToQueryMap.set(l,h)}var f=this.pendingWriteTree_.childWrites(r),d=a.addEventRegistration(e,n,f,i,s);if(!c&&!o){var v=a.viewForQuery(e);d=d.concat(this.setupListener_(e,v))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var h=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),l=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(h&&!l){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var v=p[d],g=v.getQuery(),y=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(g),this.tagForQuery_(g),y.hashFn,y.onComplete)}}if(!l&&c.length>0&&!r)if(h){var m=null;this.listenProvider_.stopListening(t.queryForListening_(e),m)}else c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}));this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=!0,r=this.pendingWriteTree_,i=this.syncPointTree_.findOnPath(t,(function(e,n){var r=ft(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return r.calcCompleteEventCache(t,i,e,n)},t.prototype.getServerValue=function(t){var e=t.path,n=null;this.syncPointTree_.foreachOnPath(e,(function(t,r){var i=ft(t,e);n=n||r.getCompleteServerCache(i)}));var r=this.syncPointTree_.get(e);r?n=n||r.getCompleteServerCache(nt()):(r=new $n,this.syncPointTree_=this.syncPointTree_.set(e,r));var i=null!=n,o=i?new Fn(n,!0,!1):null,s=this.pendingWriteTree_.childWrites(t.path),a=r.getView(t,s,i?o.getNode():Me.EMPTY_NODE,i);return a.getCompleteNode()},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView()){var r=e.getCompleteView();return[r]}var i=[];return e&&(i=e.getQueryViews()),H(n,(function(t,e){i=i.concat(e)})),i}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),s=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),a=this.syncPointTree_.subtree(r);if(i)(0,p.hu)(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=a.fold((function(t,e,n){if(!lt(t)&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),H(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var h=u[c];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return s},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){var e=t.getServerCache()||Me.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=K(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return(0,p.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new et(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);(0,p.hu)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(nt()))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(lt(t.path))return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(nt());null==n&&null!=i&&(n=i.getCompleteServerCache(nt()));var o=[],s=rt(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,h=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(nt());null==n&&null!=o&&(n=o.getCompleteServerCache(nt()));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),dr=function(){function t(){this.rootNode_=Me.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),vr=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,p.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,p.p$)(this.counters_)},t}(),gr=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new vr),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),yr=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=a({},t);return this.last_&&H(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),mr=1e4,br=3e4,_r=3e5,wr=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new yr(t);var n=mr+(br-mr)*Math.random();tt(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;H(e,(function(e,i){i>0&&(0,p.r3)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),tt(this.reportStats_.bind(this),Math.floor(2*Math.random()*_r))},t}(),Ir=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t}();function Er(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||dt(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Tr(t,e,n){Er(t,n),Cr(t,(function(t){return dt(t,e)}))}function Sr(t,e,n){Er(t,n),Cr(t,(function(t){return vt(t,e)||vt(e,t)}))}function Cr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];if(i){var o=i.path;e(o)?(kr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function kr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();S&&N("event: "+n.toString()),J(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nr=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,p.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=f(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,p.hu)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Ar=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document["hidden"]?(n="visibilitychange",e="hidden"):"undefined"!==typeof document["mozHidden"]?(n="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document["msHidden"]?(n="msvisibilitychange",e="msHidden"):"undefined"!==typeof document["webkitHidden"]&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return s(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,p.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Nr),Pr=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||(0,p.uI)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return s(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,p.hu)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Nr),xr=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&J((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;while(this.pendingResponses[this.currentResponseNum]){var o=r();if("break"===o)break}},t}(),Or="start",Rr="close",Dr="pLPCommand",Lr="pRTLPCB",Mr="id",jr="pw",Fr="ser",Ur="cb",Vr="seg",qr="ts",Br="d",Hr="dframe",Wr=1870,zr=30,Gr=Wr-zr,Kr=25e3,Qr=3e4,Yr=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=A(t),this.stats_=gr.getCollection(e),this.urlFn=function(t){return e.connectionURL(Ct,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new xr(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(Qr)),L((function(){if(!n.isClosed_){n.scriptTagHolder=new Xr((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=l(t,5),i=r[0],o=r[1],s=r[2];r[3],r[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Or)n.id=o,n.password=s;else{if(i!==Rr)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=l(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={};t[Or]="t",t[Fr]=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t[Ur]=n.scriptTagHolder.uniqueCallbackIdentifier),t[mt]=yt,n.transportSessionId&&(t[bt]=n.transportSessionId),n.lastSessionId&&(t[Et]=n.lastSessionId),n.applicationId&&(t[Tt]=n.applicationId),"undefined"!==typeof location&&location.hostname&&It.test(location.hostname)&&(t[_t]=wt);var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(0,p.Yr)()&&(!!t.forceAllow_||!t.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!z()&&!G())},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,p.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,p.h$)(e),r=B(n,Gr),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,p.Yr)()){this.myDisconnFrame=document.createElement("iframe");var n={};n[Hr]="t",n[Mr]=t,n[jr]=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,p.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Xr=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,p.Yr)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=I(),window[Dr+this.uniqueCallbackIdentifier]=e,window[Lr+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){var s=document.domain;o='<script>document.domain="'+s+'";<\/script>'}var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){N("frame writing exception"),u.stack&&N(u.stack),N(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{var e=t.contentWindow.document;e||N("No IE domain setting required")}catch(r){var n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){this.myID=t,this.myPW=e,this.alive=!0;while(this.newRequest_());},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[Mr]=this.myID,t[jr]=this.myPW,t[Fr]=this.currentSerial;var e=this.urlFn(t),n="",r=0;while(this.pendingSegs.length>0){var i=this.pendingSegs[0];if(!(i.d.length+zr+n.length<=Wr))break;var o=this.pendingSegs.shift();n=n+"&"+Vr+r+"="+o.seg+"&"+qr+r+"="+o.ts+"&"+Br+r+"="+o.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(Kr)),o=function(){clearTimeout(i),r()};this.addTag(t,o)},t.prototype.addTag=function(t,e){var n=this;(0,p.Yr)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){N("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),Zr="";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t){Zr=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $r=16384,ti=45e3,ei=null;"undefined"!==typeof MozWebSocket?ei=MozWebSocket:"undefined"!==typeof WebSocket&&(ei=WebSocket);var ni,ri=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=A(this.connId),this.stats_=gr.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={};return r[mt]=yt,!(0,p.Yr)()&&"undefined"!==typeof location&&location.hostname&&It.test(location.hostname)&&(r[_t]=wt),e&&(r[bt]=e),n&&(r[Et]=n),t.connectionURL(St,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,b.set("previous_websocket_failure",!0);try{if((0,p.Yr)()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/"+yt+"/"+Zr+"/"+process.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}},o={NODE_ENV:"production",BASE_URL:"/"},s=0===this.connURL.indexOf("wss://")?o["HTTPS_PROXY"]||o["https_proxy"]:o["HTTP_PROXY"]||o["http_proxy"];s&&(i["proxy"]={origin:s}),this.mySock=new ei(this.connURL,[],i)}else{i={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new ei(this.connURL,[],i)}}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==ei&&!t.forceDisallow_},t.previouslyFailed=function(){return b.isInMemoryStorage||!0===b.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){b.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,p.cI)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,p.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t["data"];if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,p.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=B(e,$r);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(ti))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),ii=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Yr,ri]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=ri&&ri["isAvailable"](),o=i&&!ri.previouslyFailed();if(e.webSocketOnly&&(i||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[ri];else{var s=this.transports_=[];try{for(var a=h(t.ALL_TRANSPORTS),u=a.next();!u.done;u=a.next()){var c=u.value;c&&c["isAvailable"]()&&s.push(c)}}catch(l){n={error:l}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),oi=6e4,si=5e3,ai=10240,ui=102400,ci="t",hi="d",li="s",fi="r",pi="e",di="o",vi="a",gi="n",yi="p",mi="h",bi=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=A("c:"+this.id+":"),this.transportManager_=new ii(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e["responsesRequiredToBeHealthy"]||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e["healthyTimeout"]||0;i>0&&(this.healthyTimeout_=tt((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>ui?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>ai?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if(ci in t){var e=t[ci];e===vi?this.upgradeIfSecondaryHealthy_():e===fi?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):e===di&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=V("t",t),n=V("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:yi,d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:vi,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:gi,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=V("t",t),n=V("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=V(ci,t);if(hi in t){var n=t[hi];if(e===mi)this.onHandshake_(n);else if(e===gi){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===li?this.onConnectionShutdown_(n):e===fi?this.onReset_(n):e===pi?P("Server Error: "+n):e===di?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):P("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),yt!==n&&O("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t["responsesRequiredToBeHealthy"]||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),tt((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(oi))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):tt((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(si))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:yi,d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(b.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),_i=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),wi=1e3,Ii=3e5,Ei=3e3,Ti=3e4,Si=1.3,Ci=3e4,ki="server_kill",Ni=3,Ai=function(t){function e(n,r,i,o,s,a,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=o,c.onServerInfoUpdate_=s,c.authTokenProvider_=a,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=A("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=wi,c.maxReconnectDelay_=Ii,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!(0,p.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),Ar.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&Pr.getInstance().on("online",c.onOnline_,c),c}return s(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_((0,p.Pz)(i)),(0,p.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new p.BH,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t["d"];"ok"===t["s"]?(e.onDataUpdate_(r["p"],i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),Ei),this.connected_&&this.sendGet_(o),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),(0,p.hu)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),(0,p.hu)(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i},a="q";t.tag&&(s["q"]=r.queryObject(),s["t"]=t.tag),s["h"]=t.hashFn(),this.sendRequest(a,s,(function(s){var a=s["d"],u=s["s"];e.warnOnListenWarnings_(a,r);var c=n.listens.get(i)&&n.listens.get(i).get(o);c===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"===(0,r.Z)(t)&&(0,p.r3)(t,"w")){var n=(0,p.DV)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var i='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',o=e.path.toString();O("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+i+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e=t&&40===t.length;(e||(0,p.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ti)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,p.w9)(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i["noauth"]=!0:"object"===(0,r.Z)(this.authOverride_)&&(i["authvar"]=this.authOverride_),this.sendRequest(n,i,(function(n){var r=n["s"],i=n["d"]||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),(0,p.hu)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query");var i=this.removeListen_(n,r);i&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t},o="n";r&&(i["q"]=n,i["t"]=r),this.sendRequest(o,i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t["s"],t["d"])}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o["h"]=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r["s"],r["d"])}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){var n=t["s"];if("ok"!==n){var r=t["d"];e.log_("reportStats","Error sending stats: "+r)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,p.Pz)(t));var e=t["r"],n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t["b"]))}else{if("error"in t)throw"A server-side error has occurred: "+t["error"];"a"in t&&this.onDataPush_(t["a"],t["b"])}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e["p"],e["d"],!1,e["t"]):"m"===t?this.onDataUpdate_(e["p"],e["d"],!0,e["t"]):"c"===t?this.onListenRevoked_(e["p"],e["q"]):"ac"===t?this.onAuthRevoked_(e["s"],e["d"]):"sd"===t?this.onSecurityDebugPacket_(e):P("Unrecognized action received from server: "+(0,p.Pz)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,p.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=wi,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=wi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){var t=(new Date).getTime()-this.lastConnectionEstablishedTime_;t>Ci&&(this.reconnectDelay_=wi),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Si)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this,a=this.lastSessionId,u=!1,c=null,h=function(){c?c.close():(u=!0,i())},l=function(t){(0,p.hu)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)};this.realtime_={close:h,sendRequest:l};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(t){u?N("getToken() completed but was canceled"):(N("getToken() completed. Creating connection."),s.authToken_=t&&t.accessToken,c=new bi(o,s.repoInfo_,s.applicationId_,n,r,i,(function(t){O(t+" ("+s.repoInfo_.toString()+")"),s.interrupt(ki)}),a))})).then(null,(function(e){s.log_("Failed to get token: "+e),u||(t.repoInfo_.nodeAdmin&&O(e),h())}))}},e.prototype.interrupt=function(t){N("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){N("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,p.xb)(this.interruptReasons_)&&(this.reconnectDelay_=wi,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return q(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new et(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){N("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ni&&(this.reconnectDelay_=Ti,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t["msg"].replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=h(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,h(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(p){n={error:p}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);while(this.onDisconnectRequestQueue_.length){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,p.Yr)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Zr.replace(/\./g,"-")]=1,(0,p.uI)()?t["framework.cordova"]=1:(0,p.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Pr.getInstance().currentlyOnline();return(0,p.xb)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(_i),Pi=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=A("p:rest:"),i.listens_={},i}return s(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,p.hu)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=e.getListenId_(t,r),u={};this.listens_[a]=u;var c=dn(t.getQueryParams());this.restRequest_(s+".json",c,(function(t,e){var n,c=e;(404===t&&(c=null,t=null),null===t&&o.onDataUpdate_(s,c,!1,r),(0,p.DV)(o.listens_,a)===u)&&(n=t?401===t?"permission_denied":"rest_error:"+t:"ok",i(n,null))}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=dn(t.getQueryParams()),r=t.path.toString(),i=new p.BH;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e["format"]="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e["auth"]=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,p.xO)(e);r.log_("Sending REST request for "+s);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(n&&4===a.readyState){r.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);var t=null;if(a.status>=200&&a.status<300){try{t=(0,p.cI)(a.responseText)}catch(e){O("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&O("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))},e}(_i),xi=function(){function t(){this.children={},this.childCount=0,this.value=null}return t}(),Oi=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new xi),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){var n=e instanceof et?e:new et(e),r=this,i=rt(n);while(null!==i){var o=(0,p.DV)(r.node_.children,i)||new xi;r=new t(i,r,o),n=ot(n),i=rt(n)}return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){(0,p.hu)("undefined"!==typeof t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;H(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){var n=e?this:this.parent();while(null!==n){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new et(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=(0,p.r3)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),Ri="repo_interrupt",Di=25;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["RUN"]=0]="RUN",t[t["SENT"]=1]="SENT",t[t["COMPLETED"]=2]="COMPLETED",t[t["SENT_NEEDS_ABORT"]=3]="SENT_NEEDS_ABORT",t[t["NEEDS_ABORT"]=4]="NEEDS_ABORT"})(ni||(ni={}));var Li=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ir,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new kn,this.transactionQueueTree_=new Oi,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=gr.getCollection(this.repoInfo_),this.forceRestClient_||$())this.server_=new Pi(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options["databaseAuthVariableOverride"];if("undefined"!==typeof e&&null!==e){if("object"!==(0,r.Z)(e))throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,p.Pz)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new Ai(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=gr.getOrCreateReporter(this.repoInfo_,(function(){return new wr(t.stats_,t.server_)})),this.infoData_=new dr,this.infoSyncTree_=new pr({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new pr({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);Sr(t.eventQueue_,e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new et(".info/serverTimeOffset")),e=t.val()||0;return(new Date).getTime()+e},t.prototype.generateServerValues=function(){return bn({timestamp:this.serverTime()})},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new et(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=(0,p.UI)(e,(function(t){return Ve(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=Ve(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=(0,p.UI)(e,(function(t){return Ve(t)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=Ve(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),Sr(this.eventQueue_,h,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;H(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new et("/.info/"+t),r=Ve(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);Sr(this.eventQueue_,n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this,n=this.serverSyncTree_.getServerValue(t);return null!=n?Promise.resolve(new We(n,t.getRef(),t.getQueryParams().getIndex())):this.server_.get(t).then((function(n){var r=Ve(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return Tr(e.eventQueue_,t.path,i),Promise.resolve(new We(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){return e.log_("get for query "+(0,p.Pz)(t)+" failed: "+n),Promise.reject(new Error(n))}))},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Ve(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=Tn(s,a,o),c=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);Er(this.eventQueue_,h),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||O("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);Sr(i.eventQueue_,t,s),i.callOnCompleteCallback(r,e,n)}));var l=this.abortTransactions_(t);this.rerunTransactions_(l),Sr(this.eventQueue_,l,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(H(e,(function(e,n){i=!1,s[e]=En(ht(t,e),Ve(n),r.serverSyncTree_,o)})),i)N("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);Er(this.eventQueue_,u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||O("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;Sr(r.eventQueue_,u,s),r.callOnCompleteCallback(n,e,i)})),H(e,(function(e){var n=r.abortTransactions_(ht(t,e));r.rerunTransactions_(n)})),Sr(this.eventQueue_,t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new kn;this.onDisconnect_.forEachTree(nt(),(function(r,i){var o=En(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(nt(),(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new kn,Sr(this.eventQueue_,nt(),r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Ve(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Ve(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if((0,p.xb)(e))return N("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&H(e,(function(e,n){var i=Ve(n);r.onDisconnect_.remember(ht(t,e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===rt(t.path)?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),Tr(this.eventQueue_,t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===rt(t.path)?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),Tr(this.eventQueue_,t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Ri)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Ri)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!==typeof console){var e;t?(this.statsListener_||(this.statsListener_=new yr(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);H(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),N.apply(void 0,f([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&J((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new Bi(this))},enumerable:!1,configurable:!0}),t.prototype.startTransaction=function(t,e,n,i){this.log_("transaction on "+t);var o=function(){},s=new Mi(this,t);s.on("value",o);var a=function(){s.off("value",o)},u={path:t,update:e,onComplete:n,status:null,order:I(),applyLocally:i,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=this.getLatestState_(t);u.currentInputSnapshot=c;var h=u.update(c.val());if(void 0===h){if(u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete){var l=new We(u.currentInputSnapshot,new Mi(this,u.path),Te);u.onComplete(null,!1,l)}}else{Bt("transaction failed: Data returned ",h,u.path),u.status=ni.RUN;var f=this.transactionQueueTree_.subTree(t),d=f.getValue()||[];d.push(u),f.setValue(d);var v=void 0;if("object"===(0,r.Z)(h)&&null!==h&&(0,p.r3)(h,".priority"))v=(0,p.DV)(h,".priority"),(0,p.hu)(Vt(v),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var g=this.serverSyncTree_.calcCompleteEventCache(t)||Me.EMPTY_NODE;v=g.getPriority().val()}var y=this.generateServerValues(),m=Ve(h,v),b=Tn(m,c,y);u.currentOutputSnapshotRaw=m,u.currentOutputSnapshotResolved=b,u.currentWriteId=this.getNextWriteId_();var _=this.serverSyncTree_.applyUserOverwrite(t,b,u.currentWriteId,u.applyLocally);Sr(this.eventQueue_,t,_),this.sendReadyTransactions_()}},t.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Me.EMPTY_NODE},t.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);(0,p.hu)(n.length>0,"Sending zero length transaction queue");var r=n.every((function(t){return t.status===ni.RUN}));r&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},t.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,s=i.hash(),a=0;a<e.length;a++){var u=e[a];(0,p.hu)(u.status===ni.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=ni.SENT,u.retryCount++;var c=ft(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var h=o.val(!0),l=t;this.server_.put(l.toString(),h,(function(r){n.log_("transaction put response",{path:l.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=ni.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new Mi(n,e[s].path),c=new We(a,u,Te);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),Sr(n.eventQueue_,t,i);for(s=0;s<o.length;s++)J(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status===ni.SENT_NEEDS_ABORT?e[s].status=ni.NEEDS_ABORT:e[s].status=ni.RUN;else{O("transaction at "+l.toString()+" failed: "+r);for(s=0;s<e.length;s++)e[s].status=ni.NEEDS_ABORT,e[s].abortReason=r}n.rerunTransactions_(t)}}),s)},t.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},t.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],i=[],o=t.filter((function(t){return t.status===ni.RUN})),s=o.map((function(t){return t.currentWriteId})),a=0;a<t.length;a++){var u=t[a],c=ft(e,u.path),h=!1,l=void 0;if((0,p.hu)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===ni.NEEDS_ABORT)h=!0,l=u.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else if(u.status===ni.RUN)if(u.retryCount>=Di)h=!0,l="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else{var f=this.getLatestState_(u.path,s);u.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){Bt("transaction failed: Data returned ",d,u.path);var v=Ve(d),g="object"===(0,r.Z)(d)&&null!=d&&(0,p.r3)(d,".priority");g||(v=v.updatePriority(f.getPriority()));var y=u.currentWriteId,m=this.generateServerValues(),b=Tn(v,f,m);u.currentOutputSnapshotRaw=v,u.currentOutputSnapshotResolved=b,u.currentWriteId=this.getNextWriteId_(),s.splice(s.indexOf(y),1),i=i.concat(this.serverSyncTree_.applyUserOverwrite(u.path,b,u.currentWriteId,u.applyLocally)),i=i.concat(this.serverSyncTree_.ackUserWrite(y,!0))}else h=!0,l="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0))}if(Sr(this.eventQueue_,e,i),i=[],h&&(t[a].status=ni.COMPLETED,function(t){setTimeout(t,Math.floor(0))}(t[a].unwatcher),t[a].onComplete))if("nodata"===l){var _=new Mi(this,t[a].path),w=t[a].currentInputSnapshot,I=new We(w,_,Te);n.push(t[a].onComplete.bind(null,null,!1,I))}else n.push(t[a].onComplete.bind(null,new Error(l),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(a=0;a<n.length;a++)J(n[a]);this.sendReadyTransactions_()}},t.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;e=rt(t);while(null!==e&&null===n.getValue())n=n.subTree(e),t=ot(t),e=rt(t);return n},t.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},t.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},t.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==ni.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},t.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},t.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===ni.SENT_NEEDS_ABORT);else if(e[o].status===ni.SENT)(0,p.hu)(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=ni.SENT_NEEDS_ABORT,e[o].abortReason="set";else if((0,p.hu)(e[o].status===ni.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){var s=null;n.push(e[o].onComplete.bind(null,new Error("set"),!1,s))}-1===i?t.setValue(null):e.length=i+1,Sr(this.eventQueue_,t.path(),r);for(o=0;o<n.length;o++)J(n[o])}},t}(),Mi=function(t){function e(e,n){var r=this;if(!(e instanceof Li))throw new Error("new Reference() no longer supported - use app.database().");return r=t.call(this,e,n,new on,!1)||this,r}return s(e,t),e.prototype.getKey=function(){return(0,p.Dv)("Reference.key",0,0,arguments.length),lt(this.path)?null:st(this.path)},e.prototype.child=function(t){return(0,p.Dv)("Reference.child",1,1,arguments.length),"number"===typeof t?t=String(t):t instanceof et||(null===rt(this.path)?Yt("Reference.child",1,t,!1):Qt("Reference.child",1,t,!1)),new e(this.repo,ht(this.path,t))},e.prototype.getParent=function(){(0,p.Dv)("Reference.parent",0,0,arguments.length);var t=ct(this.path);return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){(0,p.Dv)("Reference.root",0,0,arguments.length);var t=this;while(null!==t.getParent())t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){(0,p.Dv)("Reference.set",1,2,arguments.length),Xt("Reference.set",this.path),qt("Reference.set",1,t,this.path,!1),(0,p.Wj)("Reference.set",2,e,!0);var n=new p.BH;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if((0,p.Dv)("Reference.update",1,2,arguments.length),Xt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wt("Reference.update",1,t,this.path,!1),(0,p.Wj)("Reference.update",2,e,!0);var i=new p.BH;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if((0,p.Dv)("Reference.setWithPriority",2,3,arguments.length),Xt("Reference.setWithPriority",this.path),qt("Reference.setWithPriority",1,t,this.path,!1),zt("Reference.setWithPriority",2,e,!1),(0,p.Wj)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new p.BH;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return(0,p.Dv)("Reference.remove",0,1,arguments.length),Xt("Reference.remove",this.path),(0,p.Wj)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if((0,p.Dv)("Reference.transaction",1,3,arguments.length),Xt("Reference.transaction",this.path),(0,p.Wj)("Reference.transaction",1,t,!1),(0,p.Wj)("Reference.transaction",2,e,!0),Jt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new p.BH;"function"===typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new te(n,i)),"function"===typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){(0,p.Dv)("Reference.setPriority",1,2,arguments.length),Xt("Reference.setPriority",this.path),zt("Reference.setPriority",1,t,!1),(0,p.Wj)("Reference.setPriority",2,e,!0);var n=new p.BH;return this.repo.setWithPriority(ht(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){(0,p.Dv)("Reference.push",0,2,arguments.length),Xt("Reference.push",this.path),qt("Reference.push",1,t,this.path,!0),(0,p.Wj)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=oe(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"===typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return Xt("Reference.onDisconnect",this.path),new $t(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(gn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.__referenceConstructor=Mi,$n.__referenceConstructor=Mi;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ji,Fi=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(N("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',O(t)},t}(),Ui=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),Vi="FIREBASE_DATABASE_EMULATOR_HOST",qi=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return ji||(ji=new t),ji},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=h(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,h(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(l){n={error:l}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=h(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,h(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(l){n={error:l}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new kt(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new Ui)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||x("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),N("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=Ot(i,r),a=s.repoInfo,u=void 0;"undefined"!==typeof process&&(u={NODE_ENV:"production",BASE_URL:"/"}[Vi]),u?(o=!0,i="http://"+u+"?ns="+a.namespace,s=Ot(i,r),a=s.repoInfo):o=!s.repoInfo.secure;var c=r&&o?new Ui:new Fi(t,e);Zt("Invalid Firebase Database URL",1,s),lt(s.path)||x("Database URL must point to the root of a Firebase Database (not including a child path).");var h=this.createRepo(a,t,c);return h.database},t.prototype.deleteRepo=function(t){var e=(0,p.DV)(this.repos_,t.app.name);e&&(0,p.DV)(e,t.key)===t||x("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=(0,p.DV)(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=(0,p.DV)(r,t.toURLString());return i&&x("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Li(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),Bi=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return u(e,void 0,void 0,(function(){return c(this,(function(t){return this.checkDeleted_("delete"),qi.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof Li||x("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Mi(this.repo_,nt())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?x("Cannot call useEmulator() after instance has already been initialized."):qi.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),(0,p.Dv)("database.ref",0,1,arguments.length),t instanceof Mi?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),(0,p.Dv)(e,1,1,arguments.length);var n=Ot(t,this.repo_.repoInfo_.nodeAdmin);Zt(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||x(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&x("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){(0,p.Dv)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){(0,p.Dv)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Hi=function(){ri.forceDisallow(),Yr.forceAllow()},Wi=function(){Yr.forceDisallow()},zi=function(){return ri["isAvailable"]()},Gi=function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},Ki=function(t,e){t.repo.stats(e)},Qi=function(t,e){t.repo.statsIncrementCounter(e)},Yi=function(t){return t.repo.dataUpdateCount},Xi=function(t,e){return t.repo.interceptServerData_(e)};function Zi(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;Jr(r);var u=new v.zt("auth-internal",new v.H0("database-standalone"));return u.setComponent(new v.wA("auth-internal",(function(){return i}),"PRIVATE")),{instance:qi.getInstance().databaseFromApp(e,u,n,a),namespace:o}}var Ji=Object.freeze({__proto__:null,forceLongPolling:Hi,forceWebSockets:Wi,isWebSocketsAvailable:zi,setSecurityDebugCallback:Gi,stats:Ki,statsIncrementCounter:Qi,dataUpdateCount:Yi,interceptServerData:Xi,initStandalone:Zi}),$i=Ai;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ai.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Ai.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var to=bi,eo=function(t){var e=Ai.prototype.put;return Ai.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Ai.prototype.put=e}},no=kt,ro=function(t){return t.queryIdentifier()},io=function(t){qi.getInstance().forceRestClient(t)},oo=Object.freeze({__proto__:null,DataConnection:$i,RealTimeConnection:to,hijackHash:eo,ConnectionTarget:no,queryIdentifier:ro,forceRestClient:io}),so="@firebase/database",ao="0.9.4",uo=Bi.ServerValue;function co(e){Jr(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new v.wA("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return qi.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:Mi,Query:gn,Database:Bi,DataSnapshot:We,enableLogging:k,INTERNAL:Ji,ServerValue:uo,TEST_ACCESS:oo}).setMultipleInstances(!0));e.registerVersion(so,ao),(0,p.Yr)()&&(t.exports=n)}co(i.Z)},2864:function(t,e,n){"use strict";n.d(e,{Am:function(){return p},Ub:function(){return f},Yd:function(){return l},in:function(){return o}});var r;n(8309),n(1703),n(1539),n(9600),n(7327),n(1249),n(9714),n(8862);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function i(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var o,s=[];(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(o||(o={}));var a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=(r={},r[o.DEBUG]="log",r[o.VERBOSE]="log",r[o.INFO]="info",r[o.WARN]="warn",r[o.ERROR]="error",r),h=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,i(["["+o+"]  "+t.name+":"],n))}},l=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.DEBUG],t)),this._logHandler.apply(this,i([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.VERBOSE],t)),this._logHandler.apply(this,i([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.INFO],t)),this._logHandler.apply(this,i([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.WARN],t)),this._logHandler.apply(this,i([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.ERROR],t)),this._logHandler.apply(this,i([this,o.ERROR],t))},t}();function f(t){s.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++){var u=i[r];n(u)}}},3836:function(t,e,n){"use strict";n.d(e,{BH:function(){return y},LL:function(){return R},ZR:function(){return O},gQ:function(){return G},zI:function(){return P},hu:function(){return a},g5:function(){return u},US:function(){return l},h$:function(){return f},$s:function(){return at},r3:function(){return q},ne:function(){return K},p$:function(){return d},ZB:function(){return v},gK:function(){return J},z$:function(){return m},GJ:function(){return V},jU:function(){return w},ru:function(){return I},d:function(){return T},xb:function(){return H},w1:function(){return S},hl:function(){return N},uI:function(){return b},UG:function(){return _},Yr:function(){return k},b$:function(){return E},Mn:function(){return C},w9:function(){return U},cI:function(){return M},UI:function(){return W},xO:function(){return z},DV:function(){return B},ug:function(){return nt},dS:function(){return et},Pz:function(){return j},Dv:function(){return Z},Wj:function(){return $},lb:function(){return tt},eu:function(){return A}});var r=n(9726),i=(n(1703),n(9600),n(5505),n(7714),n(2801),n(1174),n(1539),n(4916),n(7601),n(6699),n(2023),n(8309),n(5306),n(8862),n(3123),n(4747),n(9720),n(5192),n(9653),n(2526),n(5003),n(1299),n(1817),n(2165),n(8783),n(3948),n(2222),n(2443),function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},i(t,e)});function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var s={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},a=function(t,e){if(!t)throw u(e)},u=function(t){return new Error("Firebase Database ("+s.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},c=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},h=function(t){var e=[],n=0,r=0;while(n<t.length){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){o=t[n++];var s=t[n++],a=t[n++],u=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&a)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(c(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):h(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length,a=s?n[t.charAt(i)]:0;++i;var u=i<t.length,c=u?n[t.charAt(i)]:64;++i;var h=i<t.length,l=h?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==c||null==l)throw Error();var f=o<<2|a>>4;if(r.push(f),64!==c){var p=a<<4&240|c>>2;if(r.push(p),64!==l){var d=c<<6&192|l;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},f=function(t){var e=c(t);return l.encodeByteArray(e,!0)},p=function(t){try{return l.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function d(t){return v(void 0,t)}function v(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&g(r)&&(t[r]=v(t[r],e[r]));return t}function g(t){return"__proto__"!==t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var y=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function b(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())}function _(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function w(){return"object"===("undefined"===typeof self?"undefined":(0,r.Z)(self))&&self.self===self}function I(){var t="object"===("undefined"===typeof chrome?"undefined":(0,r.Z)(chrome))?chrome.runtime:"object"===("undefined"===typeof browser?"undefined":(0,r.Z)(browser))?browser.runtime:void 0;return"object"===(0,r.Z)(t)&&void 0!==t.id}function E(){return"object"===("undefined"===typeof navigator?"undefined":(0,r.Z)(navigator))&&"ReactNative"===navigator["product"]}function T(){return m().indexOf("Electron/")>=0}function S(){var t=m();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C(){return m().indexOf("MSAppHost/")>=0}function k(){return!0===s.NODE_CLIENT||!0===s.NODE_ADMIN}function N(){return"indexedDB"in self&&null!=indexedDB}function A(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))}function P(){return!(!navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x="FirebaseError",O=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name=x,Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,R.prototype.create),o}return o(e,t),e}(Error),R=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?D(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new O(i,a,r);return u},t}();function D(t,e){return t.replace(L,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var L=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M(t){return JSON.parse(t)}function j(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var F=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=M(p(o[0])||""),n=M(p(o[1])||""),i=o[2],r=n["d"]||{},delete n["d"]}catch(s){}return{header:e,claims:n,data:r,signature:i}},U=function(t){var e=F(t),n=e.claims;return!!n&&"object"===(0,r.Z)(n)&&n.hasOwnProperty("iat")},V=function(t){var e=F(t).claims;return"object"===(0,r.Z)(e)&&!0===e["admin"]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function q(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function B(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function H(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function W(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r],s=o[0],a=o[1];n(s,a)}return e.length?"&"+e.join("&"):""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var G=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;while(r<e){if(0===o)while(r<=n)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){while(r<e)if(i[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else while(r<e)if(i[o]=t[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function K(t,e){var n=new Q(t,e);return n.subscribe.bind(n)}var Q=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=Y(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=X),void 0===r.error&&(r.error=X),void 0===r.complete&&(r.complete=X);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function Y(t,e){if("object"!==(0,r.Z)(t)||null===t)return!1;for(var n=0,i=e;n<i.length;n++){var o=i[n];if(o in t&&"function"===typeof t[o])return!0}return!1}function X(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i){var o=t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}};function J(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument ",i}function $(t,e,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(J(t,e,r)+"must be a valid function.")}function tt(t,e,n,i){if((!i||n)&&("object"!==(0,r.Z)(n)||null===n))throw new Error(J(t,e,i)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,a(r<t.length,"Surrogate pair missing trail surrogate.");var s=t.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},nt=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},rt=1e3,it=2,ot=144e5,st=.5;function at(t,e,n){void 0===e&&(e=rt),void 0===n&&(n=it);var r=e*Math.pow(n,t),i=Math.round(st*r*(Math.random()-.5)*2);return Math.min(ot,r+i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */},6225:function(t,e,n){var r,i,o,s=n(7964)["default"];n(7042),n(1539),n(4747),n(4916),n(5306),function(n,a){"object"===s(e)?a(e):(i=[e],r=a,o="function"===typeof r?r.apply(e,i):r,void 0===o||(t.exports=o))}(0,(function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,s){i=t[e].apply(t,r),n(i).then(o,s)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new h(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function s(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function a(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function h(t,e){this._cursor=t,this._request=e}function l(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}function v(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))}function g(t){return r(indexedDB,"deleteDatabase",[t])}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(h,"_cursor",["direction","key","primaryKey","value"]),s(h,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(h.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new h(t,e._request)}))}))})})),l.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},l.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(l,"_store",["name","keyPath","indexNames","autoIncrement"]),s(l,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(l,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(l,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new l(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new l(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[l,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,l].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=v,t.deleteDb=g,Object.defineProperty(t,"__esModule",{value:!0})}))},3087:function(t,e,n){"use strict";t.exports=n.p+"img/mobile-project-1.8b4f9e2f.jpg"},4398:function(t,e,n){"use strict";t.exports=n.p+"img/mobile-project-2.9bd76372.jpg"},9952:function(t,e,n){"use strict";t.exports=n.p+"img/ui-project-2.afd87ce7.jpg"},597:function(t,e,n){"use strict";t.exports=n.p+"img/web-project-1.d1debdf5.jpg"}}]);
//# sourceMappingURL=856-legacy.c5177cc7.js.map