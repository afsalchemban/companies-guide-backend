(self["webpackChunkcompany_guide"]=self["webpackChunkcompany_guide"]||[]).push([[260],{4260:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return dT}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container mx-auto mt-5 sm:mt-10 sm:mt-20 mb-16"},[n("ProjectHeader",{attrs:{singleProjectHeader:t.singleProjectHeader}}),n("Swiper"),n("ProjectInfo",{attrs:{projectInfo:t.projectInfo,categoryInfo:t.categoryInfo}})],1)},i=[],o=n(775),s=n.n(o),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"flex items-center"},[n("div",{staticClass:"w-7 h-7 sm:w-14 sm:h-14 rounded-lg sm:rounded-xl flex items-center justify-center Clogo cursor-pointer shadow-lg font-general-medium text-left text-md sm:text-3xl font-bold text-primary-dark dark:text-primary-light mt-14 sm:mt-20 mb-7 mr-2 sm:mr-5"},[t._v(" R ")]),n("p",{staticClass:"font-general-medium text-left xl-text-4xl lg:text-3xl md:text-xl sm:text-md font-bold text-primary-dark dark:text-primary-light mt-14 sm:mt-20 mb-7"},[t._v(" "+t._s(t.singleProjectHeader.singleProjectTitle)+" ")]),t._m(0)]),n("div",{staticClass:"flex"},[n("div",{staticClass:"flex items-center mr-10"},[n("i",{staticClass:"w-4 h-4 text-ternary-dark dark:text-ternary-light",attrs:{"data-feather":"clock"}}),n("span",{staticClass:"font-general-medium ml-1 sm:ml-2 text-xs sm:text-md txt-mobile2 leading-none text-primary-dark dark:text-primary-light"},[t._v(t._s(t.singleProjectHeader.singleProjectDate))])]),n("div",{staticClass:"flex items-center"},[n("i",{staticClass:"w-4 h-4 text-ternary-dark dark:text-ternary-light",attrs:{"data-feather":"tag"}}),n("span",{staticClass:"font-general-medium ml-1 sm:ml-2 text-xs sm:text-md txt-mobile2 leading-none text-primary-dark dark:text-primary-light"},[t._v(t._s(t.singleProjectHeader.singleProjectTag))])]),n("div",{staticClass:"ml-10 flex items-center",attrs:{role:"button"}},[n("router-link",{staticClass:"flex items-center",attrs:{to:"/settings"}},[n("i",{staticClass:"w-4 h-4 text-ternary-dark dark:text-ternary-light",attrs:{"data-feather":"settings"}}),n("span",{staticClass:"font-general-medium ml-1 sm:ml-2 text-xs sm:text-md txt-mobile2 leading-none text-primary-dark dark:text-primary-light"},[t._v("Settings")])])],1),n("div",{staticClass:"flex items-center ml-10 chat-box rounded-xl",on:{click:function(e){return t.openChat()}}},[n("i",{staticClass:"w-4 h-4 text-ternary-dark dark:text-ternary-light",attrs:{"data-feather":"message-circle"}}),n("span",{staticClass:"font-general-medium ml-1 sm:ml-2 text-xs sm:text-md txt-mobile2 leading-none text-primary-dark dark:text-primary-light"},[t._v("Chat")])])]),n("Chat",{ref:"open"})],1)},u=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"verified mt-9 sm:mt-16 ml-1 sm:ml-3"},[n("span",[t._v("✔")])])}],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("beautiful-chat",{attrs:{participants:t.participants,titleImageUrl:t.titleImageUrl,onMessageWasSent:t.onMessageWasSent,messageList:t.messageList,newMessagesCount:t.newMessagesCount,isOpen:t.isChatOpen,close:t.closeChat,icons:t.icons,open:t.openChat,showEmoji:!0,showFile:!0,showEdition:!0,showDeletion:!0,showTypingIndicator:t.showTypingIndicator,showLauncher:!1,showCloseButton:!0,colors:t.colors,alwaysScrollToBottom:t.alwaysScrollToBottom,disableUserListToggle:!1,messageStyling:t.messageStyling},on:{onType:t.handleOnType,edit:t.editMessage}})],1)},h=[],l=n(8386);n(1703),n(4633),n(8675),n(3462);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function r(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}var i=r(this);function o(t,n){if(n){var r=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in r||(r[s]={}),r=r[s]}t=t[t.length-1],o=r[t],n=n(o),n!=o&&null!=n&&e(r,t,{configurable:!0,writable:!0,value:n})}}function s(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:s(t)}}o("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(A){this.f(A)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(A){n.reject(A)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(rr){o(rr)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=a(t),o=i.next();!o.done;o=i.next())r(o.value).Qa(e,n)}))},e.all=function(t){var n=a(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){s[e]=n,a--,0==a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,r(i.value).Qa(o(s.length-1),e),i=n.next()}while(!i.done)}))},e}));var u=u||{},c=this||self,h=/^[\w+/_-]+[=]{0,2}$/,f=null;function p(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&h.test(t)?t:""}function d(){}function v(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function y(t){var e=v(t);return"array"==e||"object"==e&&"number"==typeof t.length}function m(t){return"function"==v(t)}function b(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function _(t){return Object.prototype.hasOwnProperty.call(t,w)&&t[w]||(t[w]=++I)}var w="closure_uid_"+(1e9*Math.random()>>>0),I=0;function E(t,e,n){return t.call.apply(t.bind,arguments)}function T(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function S(t,e,n){return S=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?E:T,S.apply(null,arguments)}function C(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var k=Date.now;function N(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function P(t){return t}function x(t,e,n){this.code=D+t,this.message=e||L[t]||"",this.a=n||null}function O(t){var e=t&&t.code;return e?new x(e.substring(D.length),t.message,t.serverResponse):null}N(x,Error),x.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},x.prototype.toJSON=function(){return this.w()};var R,D="auth/",L={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},M={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function j(t){for(var e in M)if(M[e].id===t)return t=M[e],{firebaseEndpoint:t.Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function F(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function U(t){if(Error.captureStackTrace)Error.captureStackTrace(this,U);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function V(t,e){t=t.split("%s");for(var n="",r=t.length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");U.call(this,n+t[r])}function q(t,e){throw new V("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function B(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function H(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function W(){this.b=this.a=null}R=j("__EID__")?"__EID__":void 0,N(U,Error),U.prototype.name="CustomError",N(V,U),V.prototype.name="AssertionError",B.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var z=new B((function(){return new K}),(function(t){t.reset()}));function G(){var t=Re,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function K(){this.next=this.b=this.a=null}W.prototype.add=function(t,e){var n=z.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},K.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},K.prototype.reset=function(){this.next=this.b=this.a=null};var Q=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Y=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function X(t,e){for(var n="string"===typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}var J=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"===typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},$=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"===typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},Z=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function tt(t){t:{for(var e=ua,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}function et(t,e){return 0<=Q(t,e)}function nt(t,e){var n;return e=Q(t,e),(n=0<=e)&&Array.prototype.splice.call(t,e,1),n}function rt(t,e){X(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function it(t){return Array.prototype.concat.apply([],arguments)}function ot(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var st,at=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},ut=/&/g,ct=/</g,ht=/>/g,lt=/"/g,ft=/'/g,pt=/\x00/g,dt=/[\x00&<>"']/;function vt(t,e){return-1!=t.indexOf(e)}function yt(t,e){return t<e?-1:t>e?1:0}t:{var gt=c.navigator;if(gt){var mt=gt.userAgent;if(mt){st=mt;break t}}st=""}function bt(t){return vt(st,t)}function _t(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function wt(t){for(var e in t)return!1;return!0}function It(t){var e,n={};for(e in t)n[e]=t[e];return n}var Et="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Tt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(var o=0;o<Et.length;o++)n=Et[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function St(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if(r=r||c,r.Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&"undefined"!=typeof i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(b(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;q("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function Ct(t,e){this.a=t===Pt&&e||"",this.b=At}function kt(t){return t instanceof Ct&&t.constructor===Ct&&t.b===At?t.a:(q("expected object of type Const, got '"+t+"'"),"type_error:Const")}Ct.prototype.sa=!0,Ct.prototype.ra=function(){return this.a},Ct.prototype.toString=function(){return"Const{"+this.a+"}"};var Nt,At={},Pt={};function xt(){if(void 0===Nt){var t=null,e=c.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:P,createScript:P,createScriptURL:P})}catch(n){c.console&&c.console.error(n.message)}Nt=t}else Nt=t}return Nt}function Ot(t,e){this.a=e===jt?t:""}function Rt(t){return t instanceof Ot&&t.constructor===Ot?t.a:(q("expected object of type TrustedResourceUrl, got '"+t+"' of type "+v(t)),"type_error:TrustedResourceUrl")}function Dt(t,e){var n=kt(t);if(!Mt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(Lt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return t=e[r],t instanceof Ct?kt(t):encodeURIComponent(String(t))})),Ft(t)}Ot.prototype.sa=!0,Ot.prototype.ra=function(){return this.a.toString()},Ot.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Lt=/%{(\w+)}/g,Mt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,jt={};function Ft(t){var e=xt();return t=e?e.createScriptURL(t):t,new Ot(t,jt)}function Ut(t,e){this.a=e===Gt?t:""}function Vt(t){return t instanceof Ut&&t.constructor===Ut?t.a:(q("expected object of type SafeUrl, got '"+t+"' of type "+v(t)),"type_error:SafeUrl")}Ut.prototype.sa=!0,Ut.prototype.ra=function(){return this.a.toString()},Ut.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var qt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Bt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ht=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Wt(t){if(t instanceof Ut)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Ht.test(t))t=new Ut(t,Gt);else{t=String(t),t=t.replace(/(%0A|%0D)/g,"");var e=t.match(Bt);t=e&&qt.test(e[1])?new Ut(t,Gt):null}return t}function zt(t){return t instanceof Ut?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Ht.test(t)||(t="about:invalid#zClosurez"),new Ut(t,Gt))}var Gt={},Kt=new Ut("about:invalid#zClosurez",Gt);function Qt(t,e,n){this.a=n===Xt?t:""}function Yt(t){return t instanceof Qt&&t.constructor===Qt?t.a:(q("expected object of type SafeHtml, got '"+t+"' of type "+v(t)),"type_error:SafeHtml")}Qt.prototype.sa=!0,Qt.prototype.ra=function(){return this.a.toString()},Qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Xt={};function Jt(t,e){St(t,"HTMLScriptElement"),t.src=Rt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=c?e=p(e.document):(null===f&&(f=p(c.document)),e=f),e&&t.setAttribute("nonce",e)}function $t(t,e,n,r){return t=t instanceof Ut?t:zt(t),e=e||c,n=n instanceof Ct?kt(n):n||"",e.open(Vt(t),n,r,void 0)}function Zt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function te(t){return dt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(ut,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(ct,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(ht,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(lt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ft,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(pt,"&#0;"))),t}function ee(t){return ee[" "](t),t}function ne(t,e){var n=ve;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}ee[" "]=d;var re,ie=bt("Opera"),oe=bt("Trident")||bt("MSIE"),se=bt("Edge"),ae=se||oe,ue=bt("Gecko")&&!(vt(st.toLowerCase(),"webkit")&&!bt("Edge"))&&!(bt("Trident")||bt("MSIE"))&&!bt("Edge"),ce=vt(st.toLowerCase(),"webkit")&&!bt("Edge");function he(){var t=c.document;return t?t.documentMode:void 0}t:{var le="",fe=function(){var t=st;return ue?/rv:([^\);]+)(\)|;)/.exec(t):se?/Edge\/([\d\.]+)/.exec(t):oe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):ce?/WebKit\/(\S+)/.exec(t):ie?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(fe&&(le=fe?fe[1]:""),oe){var pe=he();if(null!=pe&&pe>parseFloat(le)){re=String(pe);break t}}re=le}var de,ve={};function ye(t){return ne(t,(function(){for(var e=0,n=at(String(re)).split("."),r=at(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=yt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||yt(0==s[2].length,0==a[2].length)||yt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(c.document&&oe){var ge=he();de=ge||(parseInt(re,10)||void 0)}else de=void 0;var me=de;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(nd){}var be=!oe||9<=Number(me);function _e(t){var e=document;return"string"===typeof t?e.getElementById(t):t}function we(t,e){_t(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Te.hasOwnProperty(n)?t.setAttribute(Te[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var Ie,Ee,Te={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Se(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!be&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',te(s.name),'"'),s.type){o.push(' type="',te(s.type),'"');var a={};Tt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=ke(i,o),s&&("string"===typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):we(o,s)),2<r.length&&Ce(i,o,r),o}function Ce(t,e,n){function r(n){n&&e.appendChild("string"===typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!y(o)||b(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(b(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(m(o)){s="function"==typeof o.item;break t}}s=!1}Y(s?ot(o):o,r)}}}function ke(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function Ne(t){c.setTimeout((function(){throw t}),0)}function Ae(){var t=c.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!bt("Presto")&&(t=function(){var t=ke(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;t=e.document,t.open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=S((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!bt("Trident")&&!bt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var t=n.Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){c.setTimeout(t,0)}}function Pe(t,e){Ee||xe(),Oe||(Ee(),Oe=!0),Re.add(t,e)}function xe(){if(c.Promise&&c.Promise.resolve){var t=c.Promise.resolve(void 0);Ee=function(){t.then(De)}}else Ee=function(){var t=De;!m(c.setImmediate)||c.Window&&c.Window.prototype&&!bt("Edge")&&c.Window.prototype.setImmediate==c.setImmediate?(Ie||(Ie=Ae()),Ie(t)):c.setImmediate(t)}}var Oe=!1,Re=new W;function De(){for(var t;t=G();){try{t.a.call(t.b)}catch(e){Ne(e)}H(z,t)}Oe=!1}function Le(t,e){if(this.a=Me,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=d)try{var n=this;t.call(e,(function(t){Xe(n,je,t)}),(function(t){if(!(t instanceof sn))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}Xe(n,Fe,t)}))}catch(r){Xe(this,Fe,r)}}var Me=0,je=2,Fe=3;function Ue(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ue.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ve=new B((function(){return new Ue}),(function(t){t.reset()}));function qe(t,e,n){var r=Ve.get();return r.g=t,r.b=e,r.f=n,r}function Be(t){if(t instanceof Le)return t;var e=new Le(d);return Xe(e,je,t),e}function He(t){return new Le((function(e,n){n(t)}))}function We(t,e,n){Je(t,e,n,null)||Pe(C(e,t))}function ze(t){return new Le((function(e,n){var r=t.length,i=[];if(r)for(var o,s=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},u=0;u<t.length;u++)o=t[u],We(o,C(s,u),a);else e(i)}))}function Ge(t){return new Le((function(e){var n=t.length,r=[];if(n)for(var i,o=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},s=0;s<t.length;s++)i=t[s],We(i,C(o,s,!0),C(o,s,!1));else e(r)}))}function Ke(t,e){if(t.a==Me)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Me&&1==r?Ke(n,e):(o?(r=o,r.next==n.f&&(n.f=r),r.next=r.next.next):tn(n),en(n,i,Fe,e)))}t.c=null}else Xe(t,Fe,e)}function Qe(t,e){t.b||t.a!=je&&t.a!=Fe||Ze(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ye(t,e,n,r){var i=qe(null,null,null);return i.a=new Le((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(A){o(A)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof sn?o(e):t(i)}catch(A){o(A)}}:o})),i.a.c=t,Qe(t,i),i.a}function Xe(t,e,n){t.a==Me&&(t===n&&(e=Fe,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Je(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ze(t),e!=Fe||n instanceof sn||rn(t,n)))}function Je(t,e,n,r){if(t instanceof Le)return Qe(t,qe(e||d,n||null,r)),!0;if(F(t))return t.then(e,n,r),!0;if(b(t))try{var i=t.then;if(m(i))return $e(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function $e(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(u){o(u)}}function Ze(t){t.h||(t.h=!0,Pe(t.gc,t))}function tn(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function en(t,e,n,r){if(n==Fe&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,nn(e,n,r);else try{e.c?e.g.call(e.f):nn(e,n,r)}catch(i){on.call(null,i)}H(Ve,e)}function nn(t,e,n){e==je?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}function rn(t,e){t.g=!0,Pe((function(){t.g&&on.call(null,e)}))}Le.prototype.then=function(t,e,n){return Ye(this,m(t)?t:null,m(e)?e:null,n)},Le.prototype.$goog_Thenable=!0,t=Le.prototype,t.oa=function(t,e){return t=qe(t,t,e),t.c=!0,Qe(this,t),this},t.o=function(t,e){return Ye(this,null,t,e)},t.cancel=function(t){if(this.a==Me){var e=new sn(t);Pe((function(){Ke(this,e)}),this)}},t.$c=function(t){this.a=Me,Xe(this,je,t)},t.ad=function(t){this.a=Me,Xe(this,Fe,t)},t.gc=function(){for(var t;t=tn(this);)en(this,t,this.a,this.i);this.h=!1};var on=Ne;function sn(t){U.call(this,t)}function an(){0!=un&&(cn[_(this)]=this),this.xa=this.xa,this.pa=this.pa}N(sn,U),sn.prototype.name="cancel";var un=0,cn={};function hn(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=un)){var e=_(t);if(0!=un&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete cn[e]}}an.prototype.xa=!1,an.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var ln=Object.freeze||function(t){return t},fn=!oe||9<=Number(me),pn=oe&&!ye("9"),dn=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{c.addEventListener("test",d,e),c.removeEventListener("test",d,e)}catch(n){}return t}();function vn(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function yn(t,e){if(vn.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(ue){t:{try{ee(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:gn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}vn.prototype.preventDefault=function(){this.defaultPrevented=!0},N(yn,vn);var gn=ln({2:"touch",3:"pen",4:"mouse"});yn.prototype.preventDefault=function(){yn.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,pn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},yn.prototype.g=function(){return this.a};var mn="closure_listenable_"+(1e6*Math.random()|0),bn=0;function _n(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++bn,this.va=this.Pa=!1}function wn(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function In(t){this.src=t,this.a={},this.b=0}function En(t,e){var n=e.type;n in t.a&&nt(t.a[n],e)&&(wn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Tn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}In.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var s=Tn(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):(e=new _n(e,this.src,o,!!r,i),e.Pa=n,t.push(e)),e};var Sn="closure_lm_"+(1e6*Math.random()|0),Cn={};function kn(t,e,n,r,i){if(r&&r.once)Pn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)kn(t,e[o],n,r,i);else n=Un(n),t&&t[mn]?qn(t,e,n,b(r)?!!r.capture:!!r,i):Nn(t,e,n,!1,r,i)}function Nn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=b(i)?!!i.capture:!!i,a=jn(t);if(a||(t[Sn]=a=new In(t)),n=a.add(e,n,r,s,o),!n.proxy){if(r=An(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)dn||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Rn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function An(){var t=Mn,e=fn?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function Pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Pn(t,e[o],n,r,i);else n=Un(n),t&&t[mn]?Bn(t,e,n,b(r)?!!r.capture:!!r,i):Nn(t,e,n,!0,r,i)}function xn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)xn(t,e[o],n,r,i);else r=b(r)?!!r.capture:!!r,n=Un(n),t&&t[mn]?(t=t.v,e=String(e).toString(),e in t.a&&(o=t.a[e],n=Tn(o,n,r,i),-1<n&&(wn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=jn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Tn(e,n,r,i)),(n=-1<t?e[t]:null)&&On(n))}function On(t){if("number"!==typeof t&&t&&!t.va){var e=t.src;if(e&&e[mn])En(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Rn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=jn(e))?(En(n,t),0==n.b&&(n.src=null,e[Sn]=null)):wn(t)}}}function Rn(t){return t in Cn?Cn[t]:Cn[t]="on"+t}function Dn(t,e,n,r){var i=!0;if((t=jn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=Ln(o,r),i=i&&!1!==o)}return i}function Ln(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&On(t),n.call(r,e)}function Mn(t,e){if(t.va)return!0;if(!fn){if(!e)t:{e=["window","event"];for(var n=c,r=0;r<e.length;r++)if(n=n[e[r]],null==n){e=null;break t}e=n}if(r=e,e=new yn(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=Dn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=Dn(r[i],t,!1,e),n=n&&o}return n}return Ln(t,new yn(e,this))}function jn(t){return t=t[Sn],t instanceof In?t:null}var Fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Un(t){return m(t)?t:(t[Fn]||(t[Fn]=function(e){return t.handleEvent(e)}),t[Fn])}function Vn(){an.call(this),this.v=new In(this),this.ac=this,this.gb=null}function qn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Bn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Hn(t,e,n,r){if(e=t.v.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Va||s.src;s.Pa&&En(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Wn(t,e,n){if(m(t))n&&(t=S(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=S(t.handleEvent,t)}return 2147483647<Number(e)?-1:c.setTimeout(t,e||0)}function zn(t){var e=null;return new Le((function(n,r){e=Wn((function(){n(void 0)}),t),-1==e&&r(Error("Failed to schedule timer."))})).o((function(t){throw c.clearTimeout(e),t}))}function Gn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"===typeof t)return t.split("");if(y(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Kn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(y(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Qn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(y(t)||"string"===typeof t)Y(t,e,void 0);else for(var n=Kn(t),r=Gn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}function Yn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Yn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Xn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Jn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Jn(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Jn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}N(Vn,an),Vn.prototype[mn]=!0,Vn.prototype.addEventListener=function(t,e,n,r){kn(this,t,e,n,r)},Vn.prototype.removeEventListener=function(t,e,n,r){xn(this,t,e,n,r)},Vn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"===typeof t)t=new vn(t,n);else if(t instanceof vn)t.target=t.target||n;else{var i=t;t=new vn(r,n),Tt(t,i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=Hn(s,r,!0,t)&&i}if(s=t.b=n,i=Hn(s,r,!0,t)&&i,i=Hn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)s=t.b=e[o],i=Hn(s,r,!1,t)&&i;return i},Vn.prototype.Da=function(){if(Vn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)wn(n[r]);delete e.a[t],e.b--}}this.gb=null},t=Yn.prototype,t.W=function(){Xn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Xn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Jn(this.b,t)?this.b[t]:e},t.set=function(t,e){Jn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var $n=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Zn(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function tr(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof tr?(this.i=void 0!==e?e:t.i,er(this,t.c),this.l=t.l,this.a=t.a,nr(this,t.g),this.f=t.f,ir(this,Er(t.b)),this.h=t.h):t&&(n=String(t).match($n))?(this.i=!!e,er(this,n[1]||"",!0),this.l=cr(n[2]||""),this.a=cr(n[3]||"",!0),nr(this,n[4]),this.f=cr(n[5]||"",!0),ir(this,n[6]||"",!0),this.h=cr(n[7]||"")):(this.i=!!e,this.b=new gr(null,this.i))}function er(t,e,n){t.c=n?cr(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function nr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function ir(t,e,n){e instanceof gr?(t.b=e,Sr(t.b,t.i)):(n||(e=hr(e,vr)),t.b=new gr(e,t.i))}function or(t,e,n){t.b.set(e,n)}function sr(t,e){return t.b.get(e)}function ar(t){return t instanceof tr?new tr(t):new tr(t,void 0)}function ur(t,e,n,r){var i=new tr(null,void 0);return t&&er(i,t),e&&(i.a=e),n&&nr(i,n),r&&(i.f=r),i}function cr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function hr(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,lr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function lr(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}tr.prototype.toString=function(){var t=[],e=this.c;e&&t.push(hr(e,fr,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(hr(e,fr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.g,null!=n&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(hr(n,"/"==n.charAt(0)?dr:pr,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",hr(n,yr)),t.join("")},tr.prototype.resolve=function(t){var e=new tr(this),n=!!t.c;n?er(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)nr(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(i=r,".."==i||"."==i)r="";else if(vt(i,"./")||vt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?ir(e,Er(t.b)):n=!!t.h,n&&(e.h=t.h),e};var fr=/[#\/\?@]/g,pr=/[#\?:]/g,dr=/[#\?]/g,vr=/[#\?@]/g,yr=/#/g;function gr(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function mr(t){t.a||(t.a=new Yn,t.b=0,t.c&&Zn(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function br(t){var e=Kn(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new gr(null,void 0);t=Gn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Ir(n,i,o):n.add(i,o)}return n}function _r(t,e){mr(t),e=Tr(t,e),Jn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Jn(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Xn(t)))}function wr(t,e){return mr(t),e=Tr(t,e),Jn(t.a.b,e)}function Ir(t,e,n){_r(t,e),0<n.length&&(t.c=null,t.a.set(Tr(t,e),ot(n)),t.b+=n.length)}function Er(t){var e=new gr;return e.c=t.c,t.a&&(e.a=new Yn(t.a),e.b=t.b),e}function Tr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Sr(t,e){e&&!t.f&&(mr(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(_r(this,e),Ir(this,n,t))}),t)),t.f=e}function Cr(t){var e=[];return Nr(new kr,t,e),e.join("")}function kr(){}function Nr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),Nr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&(o=e[r],"function"!=typeof o&&(n.push(i),xr(r,n),n.push(":"),Nr(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":xr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}t=gr.prototype,t.add=function(t,e){mr(this),this.c=null,t=Tr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){mr(this),this.a.forEach((function(n,r){Y(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){mr(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){mr(this);var e=[];if("string"===typeof t)wr(this,t)&&(e=it(e,this.a.get(Tr(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=it(e,t[n])}return e},t.set=function(t,e){return mr(this),this.c=null,t=Tr(this,t),wr(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Ar={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Pr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function xr(t,e){e.push('"',t.replace(Pr,(function(t){var e=Ar[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Ar[t]=e),e})),'"')}function Or(){var t=ni();return oe&&!!me&&11==me||/Edge\/\d+/.test(t)}function Rr(){return c.window&&c.window.location.href||self&&self.location&&self.location.href||""}function Dr(t,e){e=e||c.window;var n="about:blank";t&&(n=Vt(Wt(t)||Kt)),e.location.href=n}function Lr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<Lr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function Mr(){var t=ni();return t=Zr(t)!=$r?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null,!(t&&30>t)&&(!oe||!me||9<me)}function jr(t){return t=(t||ni()).toLowerCase(),!!(t.match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Fr(t){t=t||c.window;try{t.close()}catch(e){}}function Ur(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=ni().toLowerCase(),r&&(e.target=r,vt(n,"crios/")&&(e.target="_blank")),Zr(ni())==Jr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ut?n:Wt("undefined"!=typeof n.href?n.href:String(n))||Kt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((bt("iPhone")&&!bt("iPod")&&!bt("iPad")||bt("iPad")||bt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(s=ke(document,"A"),St(s,"HTMLAnchorElement"),e=e instanceof Ut?e:zt(e),s.href=Vt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),t=document.createEvent("MouseEvent"),t.initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=$t("",r,n,s),t=Vt(e),s&&(ae&&vt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+te(t)+'">',t=(r=xt())?r.createHTML(t):t,t=new Qt(t,null,Xt),r=s.document)&&(r.write(Yt(t)),r.close())):(s=$t(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(g){}return s}function Vr(t){return new Le((function(e){function n(){zn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}return n()}))}var qr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Br=/^[^@]+@[^@]+$/;function Hr(){var t=null;return new Le((function(e){"complete"==c.document.readyState?e():(t=function(){e()},Pn(window,"load",t))})).o((function(e){throw xn(window,"load",t),e}))}function Wr(){return zr(void 0)?Hr().then((function(){return new Le((function(t,e){var n=c.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):He(Error("Cordova must run in an Android or iOS file scheme."))}function zr(t){return t=t||ni(),!("file:"!==ai()&&"ionic:"!==ai()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gr(){var t=c.window;try{return!(!t||t==t.top)}catch(e){return!1}}function Kr(){return"undefined"!==typeof c.WorkerGlobalScope&&"function"===typeof c.importScripts}function Qr(){return l.Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":l.Z.INTERNAL.hasOwnProperty("node")?"Node":Kr()?"Worker":"Browser"}function Yr(){var t=Qr();return"ReactNative"===t||"Node"===t}function Xr(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}var Jr="Firefox",$r="Chrome";function Zr(t){var e=t.toLowerCase();return vt(e,"opera/")||vt(e,"opr/")||vt(e,"opios/")?"Opera":vt(e,"iemobile")?"IEMobile":vt(e,"msie")||vt(e,"trident/")?"IE":vt(e,"edge/")?"Edge":vt(e,"firefox/")?Jr:vt(e,"silk/")?"Silk":vt(e,"blackberry")?"Blackberry":vt(e,"webos")?"Webos":!vt(e,"safari/")||vt(e,"chrome/")||vt(e,"crios/")||vt(e,"android")?!vt(e,"chrome/")&&!vt(e,"crios/")||vt(e,"edge/")?vt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":$r:"Safari"}var ti={md:"FirebaseCore-web",od:"FirebaseUI-web"};function ei(t,e){e=e||[];var n,r=[],i={};for(n in ti)i[ti[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),e=r,e.length||(e=["FirebaseCore-web"]),r=Qr(),"Browser"===r?(i=ni(),r=Zr(i)):"Worker"===r&&(i=ni(),r=Zr(i)+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function ni(){return c.navigator&&c.navigator.userAgent||""}function ri(t,e){t=t.split("."),e=e||c;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function ii(){try{var t=c.localStorage,e=fi();if(t)return t.setItem(e,"1"),t.removeItem(e),!Or()||!!c.indexedDB}catch(n){return Kr()&&!!c.indexedDB}return!1}function oi(){return(si()||"chrome-extension:"===ai()||zr())&&!Yr()&&ii()&&!Kr()}function si(){return"http:"===ai()||"https:"===ai()}function ai(){return c.location&&c.location.protocol||null}function ui(t){return t=t||ni(),!jr(t)&&Zr(t)!=Jr}function ci(t){return"undefined"===typeof t?null:Cr(t)}function hi(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function li(t){if(null!==t)return JSON.parse(t)}function fi(t){return t||Math.floor(1e9*Math.random()).toString()}function pi(t){return t=t||ni(),"Safari"!=Zr(t)&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function di(){var t=c.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function vi(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=ni(),e=Qr(),this.b=jr(t)||"ReactNative"===e}function yi(){var t=c.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function gi(){var t=c.document,e=null;return yi()||!t?Be():new Le((function(n){e=function(){yi()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}function mi(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function bi(){return!(!ri("fireauth.oauthhelper",c)&&!ri("fireauth.iframe",c))}function _i(){var t=c.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}function wi(){var t=c.navigator;return t&&t.serviceWorker?Be().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Be(null)}vi.prototype.get=function(){var t=c.navigator;return!t||"boolean"!==typeof t.onLine||!si()&&"chrome-extension:"!==ai()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Ii,Ei={};function Ti(t){Ei[t]||(Ei[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var Si={};Object.defineProperty(Si,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Si,"abcd",{configurable:!0,enumerable:!0,value:2}),Ii=2==Si.abcd}catch(nd){Ii=!1}function Ci(t,e,n){Ii?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function ki(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Ci(t,n,e[n])}function Ni(t){var e={};return ki(e,t),e}function Ai(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Pi(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}function xi(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Ci(e,n,xi(t[n]));return e}function Oi(t){var e=t&&(t[ji]?"phone":null);if(!(e&&t&&t[Mi]))throw new x("internal-error","Internal assert: invalid MultiFactorInfo object");Ci(this,"uid",t[Mi]),Ci(this,"displayName",t[Di]||null);var n=null;t[Li]&&(n=new Date(t[Li]).toUTCString()),Ci(this,"enrollmentTime",n),Ci(this,"factorId",e)}function Ri(t){try{var e=new Fi(t)}catch(n){e=null}return e}Oi.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Di="displayName",Li="enrolledAt",Mi="mfaEnrollmentId",ji="phoneInfo";function Fi(t){Oi.call(this,t),Ci(this,"phoneNumber",t[ji])}function Ui(t){var e={},n=t[Hi],r=t[zi],i=t[Gi];if(t=Ri(t[Wi]),!i||i!=qi&&i!=Bi&&!n||i==Bi&&!r||i==Vi&&!t)throw Error("Invalid checkActionCode response!");i==Bi?(e[Qi]=n||null,e[Xi]=n||null,e[Ki]=r):(e[Qi]=r||null,e[Xi]=r||null,e[Ki]=n||null),e[Yi]=t||null,Ci(this,$i,i),Ci(this,Ji,xi(e))}N(Fi,Oi),Fi.prototype.w=function(){var t=Fi.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Vi="REVERT_SECOND_FACTOR_ADDITION",qi="EMAIL_SIGNIN",Bi="VERIFY_AND_CHANGE_EMAIL",Hi="email",Wi="mfaInfo",zi="newEmail",Gi="requestType",Ki="email",Qi="fromEmail",Yi="multiFactorInfo",Xi="previousEmail",Ji="data",$i="operation";function Zi(t){t=ar(t);var e=sr(t,to)||null,n=sr(t,eo)||null,r=sr(t,io)||null;if(r=r&&so[r]||null,!e||!n||!r)throw new x("argument-error",to+", "+eo+"and "+io+" are required in a valid action code URL.");ki(this,{apiKey:e,operation:r,code:n,continueUrl:sr(t,no)||null,languageCode:sr(t,ro)||null,tenantId:sr(t,oo)||null})}var to="apiKey",eo="oobCode",no="continueUrl",ro="languageCode",io="mode",oo="tenantId",so={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Vi,signIn:qi,verifyAndChangeEmail:Bi,verifyEmail:"VERIFY_EMAIL"};function ao(t){try{return new Zi(t)}catch(e){return null}}function uo(t){var e=t[po];if("undefined"===typeof e)throw new x("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new x("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[co];if(n&&"object"===typeof n){e=n[go];var r=n[vo];if(n=n[yo],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new x("argument-error",vo+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new x("argument-error",yo+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new x("argument-error",go+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new x("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new x("argument-error",co+" property must be a non null object when specified.");if(this.f=null,(e=t[fo])&&"object"===typeof e){if(e=e[mo],"string"===typeof e&&e.length)this.f=e;else if("undefined"!==typeof e)throw new x("argument-error",mo+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new x("argument-error",fo+" property must be a non null object when specified.");if(e=t[lo],"undefined"!==typeof e&&"boolean"!==typeof e)throw new x("argument-error",lo+" property must be a boolean when specified.");if(this.c=!!e,t=t[ho],"undefined"!==typeof t&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new x("argument-error",ho+" property must be a non empty string when specified.");this.i=t||null}var co="android",ho="dynamicLinkDomain",lo="handleCodeInApp",fo="iOS",po="url",vo="installApp",yo="minimumVersion",go="packageName",mo="bundleId";function bo(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}function _o(t){return $(t,(function(t){return t=t.toString(16),1<t.length?t:"0"+t})).join("")}var wo=null;function Io(t){var e=[];return Eo(t,(function(t){e.push(t)})),e}function Eo(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=wo[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}To();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}function To(){if(!wo){wo={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===wo[o]&&(wo[o]=i)}}}function So(t){var e=ko(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Co(t){try{return new So(t)}catch(e){return null}}function ko(t){if(!t)return null;if(t=t.split("."),3!=t.length)return null;t=t[1];for(var e=(4-t.length%4)%4,n=0;n<e;n++)t+=".";try{var r=Io(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=r[e++],u=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&a)-65536;t[n++]=String.fromCharCode(55296+(u>>10)),t[n++]=String.fromCharCode(56320+(1023&u))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(A){}return null}So.prototype.T=function(){return this.f},So.prototype.l=function(){return this.c},So.prototype.toString=function(){return this.h};var No="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ao=["client_id","response_type","scope","redirect_uri","state"],Po={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Ao},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Ao},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Ao},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:No},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function xo(t){for(var e in Po)if(Po[e].fa==t)return Po[e];return null}function Oo(t){var e={};e["facebook.com"]=jo,e["google.com"]=Uo,e["github.com"]=Fo,e["twitter.com"]=Vo;var n=t&&t[Do];try{if(n)return e[n]?new e[n](t):new Mo(t);if("undefined"!==typeof t[Ro])return new Lo(t)}catch(r){}return null}var Ro="idToken",Do="providerId";function Lo(t){var e=t[Do];if(!e&&t[Ro]){var n=Co(t[Ro]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Ci(this,"providerId",e),Ci(this,"isNewUser",n)}function Mo(t){Lo.call(this,t),t=li(t.rawUserInfo||"{}"),Ci(this,"profile",xi(t||{}))}function jo(t){if(Mo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Fo(t){if(Mo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ci(this,"username",this.profile&&this.profile.login||null)}function Uo(t){if(Mo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Vo(t){if(Mo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ci(this,"username",t.screenName||null)}function qo(t){var e=ar(t),n=sr(e,"link"),r=sr(ar(n),"link");return e=sr(e,"deep_link_id"),sr(ar(e),"link")||e||r||n||t}function Bo(t,e){if(!t&&!e)throw new x("internal-error","Internal assert: no raw session string available");if(t&&e)throw new x("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Ho:Wo}N(Mo,Lo),N(jo,Mo),N(Fo,Mo),N(Uo,Mo),N(Vo,Mo);var Ho="enroll",Wo="signin";function zo(){}function Go(t,e){return t.then((function(t){if(t[Ua]){var n=Co(t[Ua]);if(!n||e!=n.i)throw new x("user-mismatch");return t}throw new x("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==D+"user-not-found"?new x("user-mismatch"):t}))}function Ko(t,e){if(!e)throw new x("internal-error","failed to construct a credential");this.a=e,Ci(this,"providerId",t),Ci(this,"signInMethod",t)}function Qo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Yo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Ko(t.providerId,t.pendingToken)}catch(e){}return null}function Xo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Ci(this,"idToken",e.idToken),e.accessToken&&Ci(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Ci(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new x("internal-error","failed to construct a credential");Ci(this,"accessToken",e.oauthToken),Ci(this,"secret",e.oauthTokenSecret)}Ci(this,"providerId",t),Ci(this,"signInMethod",n)}function Jo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:br(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function $o(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Xo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function Zo(t,e){this.Qc=e||[],ki(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(xo(t)||{}).Ja||null,this.ob=null}function ts(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new x("argument-error",'SAML provider IDs must be prefixed with "saml."');Zo.call(this,t,[])}function es(t){Zo.call(this,t,Ao),this.a=[]}function ns(){es.call(this,"facebook.com")}function rs(t){if(!t)throw new x("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return b(t)&&(e=t.accessToken),(new ns).credential({accessToken:e})}function is(){es.call(this,"github.com")}function os(t){if(!t)throw new x("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return b(t)&&(e=t.accessToken),(new is).credential({accessToken:e})}function ss(){es.call(this,"google.com"),this.Ca("profile")}function as(t,e){var n=t;return b(t)&&(n=t.idToken,e=t.accessToken),(new ss).credential({idToken:n,accessToken:e})}function us(){Zo.call(this,"twitter.com",No)}function cs(t,e){var n=t;if(b(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new x("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Xo("twitter.com",n,"twitter.com")}function hs(t,e,n){this.a=t,this.f=e,Ci(this,"providerId","password"),Ci(this,"signInMethod",n===fs.EMAIL_LINK_SIGN_IN_METHOD?fs.EMAIL_LINK_SIGN_IN_METHOD:fs.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ls(t){return t&&t.email&&t.password?new hs(t.email,t.password,t.signInMethod):null}function fs(){ki(this,{providerId:"password",isOAuthProvider:!1})}function ps(t,e){if(e=ds(e),!e)throw new x("argument-error","Invalid email link!");return new hs(t,e.code,fs.EMAIL_LINK_SIGN_IN_METHOD)}function ds(t){return t=qo(t),(t=ao(t))&&t.operation===qi?t:null}function vs(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new x("internal-error");this.a=t,Ci(this,"providerId","phone"),this.fa="phone",Ci(this,"signInMethod","phone")}function ys(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return Y(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new vs(e)}return null}function gs(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function ms(t){try{this.a=t||l.Z.auth()}catch(e){throw new x("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ki(this,{providerId:"phone",isOAuthProvider:!1})}function bs(t,e){if(!t)throw new x("missing-verification-id");if(!e)throw new x("missing-verification-code");return new vs({eb:t,cb:e})}function _s(t){if(t.temporaryProof&&t.phoneNumber)return new vs({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return as(o,n);case"facebook.com":return rs(n);case"github.com":return os(n);case"twitter.com":return cs(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new Ko(e,s):new Xo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new es(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(g){return null}}function ws(t){if(!t.isOAuthProvider)throw new x("invalid-oauth-provider")}function Is(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new x("invalid-auth-event");if(this.g&&this.a)throw new x("invalid-auth-event");if(this.g&&!this.f)throw new x("invalid-auth-event")}function Es(t){return t=t||{},t.type?new Is(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&O(t.error),t.postBody,t.tenantId):null}function Ts(){this.b=null,this.a=[]}Bo.prototype.Ha=function(){return this.a?Be(this.a):Be(this.b)},Bo.prototype.w=function(){return this.type==Ho?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},zo.prototype.ka=function(){},zo.prototype.b=function(){},zo.prototype.c=function(){},zo.prototype.w=function(){},Ko.prototype.ka=function(t){return vu(t,Qo(this))},Ko.prototype.b=function(t,e){var n=Qo(this);return n.idToken=e,yu(t,n)},Ko.prototype.c=function(t,e){return Go(gu(t,Qo(this)),e)},Ko.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Xo.prototype.ka=function(t){return vu(t,Jo(this))},Xo.prototype.b=function(t,e){var n=Jo(this);return n.idToken=e,yu(t,n)},Xo.prototype.c=function(t,e){var n=Jo(this);return Go(gu(t,n),e)},Xo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Zo.prototype.Ka=function(t){return this.Ib=It(t),this},N(ts,Zo),N(es,Zo),es.prototype.Ca=function(t){return et(this.a,t)||this.a.push(t),this},es.prototype.Qb=function(){return ot(this.a)},es.prototype.credential=function(t,e){var n;if(n=b(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null},!n.idToken&&!n.accessToken)throw new x("argument-error","credential failed: must provide the ID token and/or the access token.");return new Xo(this.providerId,n,this.providerId)},N(ns,es),Ci(ns,"PROVIDER_ID","facebook.com"),Ci(ns,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),N(is,es),Ci(is,"PROVIDER_ID","github.com"),Ci(is,"GITHUB_SIGN_IN_METHOD","github.com"),N(ss,es),Ci(ss,"PROVIDER_ID","google.com"),Ci(ss,"GOOGLE_SIGN_IN_METHOD","google.com"),N(us,Zo),Ci(us,"PROVIDER_ID","twitter.com"),Ci(us,"TWITTER_SIGN_IN_METHOD","twitter.com"),hs.prototype.ka=function(t){return this.signInMethod==fs.EMAIL_LINK_SIGN_IN_METHOD?$u(t,Su,{email:this.a,oobCode:this.f}):$u(t,Ku,{email:this.a,password:this.f})},hs.prototype.b=function(t,e){return this.signInMethod==fs.EMAIL_LINK_SIGN_IN_METHOD?$u(t,Cu,{idToken:e,email:this.a,oobCode:this.f}):$u(t,Uu,{idToken:e,email:this.a,password:this.f})},hs.prototype.c=function(t,e){return Go(this.ka(t),e)},hs.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ki(fs,{PROVIDER_ID:"password"}),ki(fs,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ki(fs,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),vs.prototype.ka=function(t){return t.fb(gs(this))},vs.prototype.b=function(t,e){var n=gs(this);return n.idToken=e,$u(t,Yu,n)},vs.prototype.c=function(t,e){var n=gs(this);return n.operation="REAUTH",t=$u(t,Xu,n),Go(t,e)},vs.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},ms.prototype.fb=function(t,e){var n=this.a.a;return Be(e.verify()).then((function(r){if("string"!==typeof r)throw new x("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i,o=b(t)?t.session:null,s=b(t)?t.phoneNumber:t;return i=o&&o.type==Ho?o.Ha().then((function(t){return uu(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r}})})):o&&o.type==Wo?o.Ha().then((function(e){return hu(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):au(n,{phoneNumber:s,recaptchaToken:r}),i.then((function(t){return"function"===typeof e.reset&&e.reset(),t}),(function(t){throw"function"===typeof e.reset&&e.reset(),t}));default:throw new x("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},ki(ms,{PROVIDER_ID:"phone"}),ki(ms,{PHONE_SIGN_IN_METHOD:"phone"}),Is.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Is.prototype.T=function(){return this.h},Is.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ss,Cs=null;function ks(t){var e=Cs;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},t=ri("universalLinks.subscribe",c),"function"===typeof t&&t(null,e.b))}function Ns(t){var e="unauthorized-domain",n=void 0,r=ar(t);t=r.a,r=r.c,"chrome-extension"==r?n=Zt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Zt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",x.call(this,e,n)}function As(t,e,n){x.call(this,t,n),t=e||{},t.Jb&&Ci(this,"email",t.Jb),t.ea&&Ci(this,"phoneNumber",t.ea),t.credential&&Ci(this,"credential",t.credential),t.Zb&&Ci(this,"tenantId",t.Zb)}function Ps(t){if(t.code){var e=t.code||"";0==e.indexOf(D)&&(e=e.substring(D.length));var n={credential:_s(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new x(e,t.message||void 0);return new As(e,n,t.message)}return null}function xs(){}function Os(t){return t.c||(t.c=t.b())}function Rs(){}function Ds(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Ls(){}function Ms(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=S(this.qc,this),this.a.onerror=S(this.Sb,this),this.a.onprogress=S(this.rc,this),this.a.ontimeout=S(this.vc,this)}function js(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Fs(t,e,n){this.reset(t,e,n,void 0,void 0)}N(Ns,x),N(As,x),As.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&Tt(t,e),t},As.prototype.toJSON=function(){return this.w()},xs.prototype.c=null,N(Rs,xs),Rs.prototype.a=function(){var t=Ds(this);return t?new ActiveXObject(t):new XMLHttpRequest},Rs.prototype.b=function(){var t={};return Ds(this)&&(t[0]=!0,t[1]=!0),t},Ss=new Rs,N(Ls,xs),Ls.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Ms;throw Error("Unsupported browser")},Ls.prototype.b=function(){return{}},t=Ms.prototype,t.open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,js(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",js(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,js(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Fs.prototype.a=null;function Us(t){this.f=t,this.b=this.c=this.a=null}function Vs(t,e){this.name=t,this.value=e}Fs.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||k(),delete this.a},Vs.prototype.toString=function(){return this.name};var qs=new Vs("SEVERE",1e3),Bs=new Vs("WARNING",900),Hs=new Vs("CONFIG",700),Ws=new Vs("FINE",500);function zs(t){return t.c?t.c:t.a?zs(t.a):(q("Root logger has no level set."),null)}Us.prototype.log=function(t,e,n){if(t.value>=zs(this).value)for(m(e)&&(e=e()),t=new Fs(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Gs={},Ks=null;function Qs(t){var e;if(Ks||(Ks=new Us(""),Gs[""]=Ks,Ks.c=Hs),!(e=Gs[t])){e=new Us(t);var n=t.lastIndexOf("."),r=t.substr(n+1);n=Qs(t.substr(0,n)),n.b||(n.b={}),n.b[r]=e,e.a=n,Gs[t]=e}return e}function Ys(t,e){t&&t.log(Ws,e,void 0)}function Xs(t){this.f=t}function Js(t){Vn.call(this),this.u=t,this.h=void 0,this.readyState=$s,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Qs("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}N(Xs,xs),Xs.prototype.a=function(){return new Js(this.f)},Xs.prototype.b=function(t){return function(){return t}}({}),N(Js,Vn);var $s=0;function Zs(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ta(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ea(t)}function ea(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function na(t){Vn.call(this),this.headers=new Yn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=ra,this.u=this.S=!1}t=Js.prototype,t.open=function(t,e){if(this.readyState!=$s)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ea(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ta(this)),this.readyState=$s},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ea(this)),this.a&&(this.readyState=3,ea(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):"undefined"!==typeof c.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,Zs(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ta(this):ea(this),3==this.readyState&&Zs(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ta(this))},t.sc=function(t){this.a&&(this.response=t,ta(this))},t.Ua=function(t){var e=this.i;e&&e.log(Bs,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ta(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(Bs,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(Bs,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Js.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),N(na,Vn);var ra="";na.prototype.b=Qs("goog.net.XhrIo");var ia=/^https?$/i,oa=["POST","PUT"];function sa(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ss.a(),t.C=t.D?Os(t.D):Os(Ss),t.a.onreadystatechange=S(t.Vb,t);try{Ys(t.b,ga(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(s){return Ys(t.b,ga(t,"Error opening Xhr: "+s.message)),void ca(t,s)}e=r||"";var o=new Yn(t.headers);i&&Qn(i,(function(t,e){o.set(e,t)})),i=tt(o.Y()),r=c.FormData&&e instanceof c.FormData,!et(oa,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{pa(t),0<t.g&&(t.u=aa(t.a),Ys(t.b,ga(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=S(t.Ma,t)):t.s=Wn(t.Ma,t.g,t)),Ys(t.b,ga(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){Ys(t.b,ga(t,"Send error: "+s.message)),ca(t,s)}}function aa(t){return oe&&ye(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function ua(t){return"content-type"==t.toLowerCase()}function ca(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ha(t),fa(t)}function ha(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function la(t){if(t.c&&"undefined"!=typeof u)if(t.C[1]&&4==da(t)&&2==va(t))Ys(t.b,ga(t,"Local request error detected and ignored"));else if(t.i&&4==da(t))Wn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==da(t)){Ys(t.b,ga(t,"Request complete")),t.c=!1;try{var e,n=va(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match($n)[1]||null;if(!o&&c.self&&c.self.location){var s=c.self.location.protocol;o=s.substr(0,s.length-1)}i=!ia.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var a=2<da(t)?t.a.statusText:""}catch(h){Ys(t.b,"Can not get status: "+h.message),a=""}t.h=a+" ["+va(t)+"]",ha(t)}}finally{fa(t)}}}function fa(t,e){if(t.a){pa(t);var n=t.a,r=t.C[0]?d:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(qs,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function pa(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(c.clearTimeout(t.s),t.s=null)}function da(t){return t.a?t.a.readyState:0}function va(t){try{return 2<da(t)?t.a.status:-1}catch(e){return-1}}function ya(t){try{return t.a?t.a.responseText:""}catch(e){return Ys(t.b,"Can not get responseText: "+e.message),""}}function ga(t,e){return e+" ["+t.R+" "+t.l+" "+va(t)+"]"}function ma(t){var e=xa;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function ba(t,e,n){t.a=!0,t.c=n,t.f=!e,Ta(t)}function _a(t){if(t.a){if(!t.v)throw new Sa(t);t.v=!1}}function wa(t,e){Ia(t,null,e,void 0)}function Ia(t,e,n,r){t.g.push([e,n,r]),t.a&&Ta(t)}function Ea(t){return Z(t.g,(function(t){return m(t[1])}))}function Ta(t){if(t.h&&t.a&&Ea(t)){var e=t.h,n=Na[e];n&&(c.clearTimeout(n.a),delete Na[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var a=o.call(i||t.s,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(F(e)||"function"===typeof c.Promise&&e instanceof c.Promise)&&(r=!0,t.i=!0)}catch(u){e=u,t.f=!0,Ea(t)||(n=!0)}}t.c=e,r&&(a=S(t.m,t,!0),r=S(t.m,t,!1),e instanceof ma?(Ia(e,a,r),e.C=!0):e.then(a,r)),n&&(e=new ka(e),Na[e.a]=e,t.h=e.a)}function Sa(){U.call(this)}function Ca(){U.call(this)}function ka(t){this.a=c.setTimeout(S(this.c,this),0),this.b=t}t=na.prototype,t.Ma=function(){"undefined"!=typeof u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ys(this.b,ga(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Ys(this.b,ga(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),fa(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),fa(this,!0)),na.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?la(this):this.Jc())},t.Jc=function(){la(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ra:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(qs,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return Ys(this.b,"Can not get response: "+e.message),null}},ma.prototype.cancel=function(t){if(this.a)this.c instanceof ma&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Ca(this),_a(this),ba(this,!1,t))}},ma.prototype.m=function(t,e){this.i=!1,ba(this,t,e)},ma.prototype.then=function(t,e,n){var r,i,o=new Le((function(t,e){r=t,i=e}));return Ia(this,r,(function(t){t instanceof Ca?o.cancel():i(t)})),o.then(t,e,n)},ma.prototype.$goog_Thenable=!0,N(Sa,U),Sa.prototype.message="Deferred has already fired",Sa.prototype.name="AlreadyCalledError",N(Ca,U),Ca.prototype.message="Deferred was canceled",Ca.prototype.name="CanceledError",ka.prototype.c=function(){throw delete Na[this.a],this.b};var Na={};function Aa(t){var e={},n=e.document||document,r=Rt(t).toString(),i=ke(document,"SCRIPT"),o={Wb:i,Ma:void 0},s=new ma(o),a=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(a=window.setTimeout((function(){Oa(i,!0);var t=new La(Da,"Timeout reached for loading script "+r);_a(s),ba(s,!1,t)}),u),o.Ma=a),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Oa(i,e.xd||!1,a),_a(s),ba(s,!0,null))},i.onerror=function(){Oa(i,!0,a);var t=new La(Ra,"Error while loading script "+r);_a(s),ba(s,!1,t)},o=e.attributes||{},Tt(o,{type:"text/javascript",charset:"UTF-8"}),we(i,o),Jt(i,t),Pa(n).appendChild(i),s}function Pa(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}function xa(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Oa(t,!0,this.Ma)}}function Oa(t,e,n){null!=n&&c.clearTimeout(n),t.onload=d,t.onerror=d,t.onreadystatechange=d,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ra=0,Da=1;function La(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),U.call(this,n),this.code=t}function Ma(t){this.f=t}function ja(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Va,this.g=It(t.secureTokenHeaders||qa),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Ba,this.a=It(t.firebaseHeaders||Ha),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Qr(),n=c.XMLHttpRequest||n&&l.Z.INTERNAL.node&&l.Z.INTERNAL.node.XMLHttpRequest,!n&&!Kr())throw new x("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Kr()?this.f=new Xs(self):Yr()?this.f=new Ma(n):this.f=new Ls,this.b=null}N(La,U),N(Ma,xs),Ma.prototype.a=function(){return new this.f},Ma.prototype.b=function(){return{}};var Fa,Ua="idToken",Va=new vi(3e4,6e4),qa={"Content-Type":"application/x-www-form-urlencoded"},Ba=new vi(3e4,6e4),Ha={"Content-Type":"application/json"};function Wa(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function za(t,e){e&&(t.l=Ga("https://securetoken.googleapis.com/v1/token",e),t.h=Ga("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Ga("https://identitytoolkit.googleapis.com/v2/",e))}function Ga(t,e){return t=ar(t),e=ar(e.url),t.f=t.a+t.f,er(t,e.c),t.a=e.a,nr(t,e.g),t.toString()}function Ka(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Qa(t,e,n,r,i,o,s){Mr()||Kr()?t=S(t.u,t):(Fa||(Fa=new Le((function(t,e){Ja(t,e)}))),t=S(t.s,t)),t(e,n,r,i,o,s)}ja.prototype.T=function(){return this.b},ja.prototype.u=function(t,e,n,r,i,o){if(Kr()&&("undefined"===typeof c.fetch||"undefined"===typeof c.Headers||"undefined"===typeof c.Request))throw new x("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new na(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout((function(){s.dispatchEvent("timeout")}),o)}qn(s,"complete",(function(){a&&clearTimeout(a);var t=null;try{t=JSON.parse(ya(this))||null}catch(A){t=null}e&&e(t)})),Bn(s,"ready",(function(){a&&clearTimeout(a),hn(this)})),Bn(s,"timeout",(function(){a&&clearTimeout(a),hn(this),e&&e(null)})),sa(s,t,n,r,i)};var Ya=new Ct(Pt,"https://apis.google.com/js/client.js?onload=%{onload}"),Xa="__fcb"+Math.floor(1e6*Math.random()).toString();function Ja(t,e){if(((window.gapi||{}).client||{}).request)t();else{c[Xa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=Dt(Ya,{onload:Xa});wa(Aa(n),(function(){e(Error("CORS_UNSUPPORTED"))}))}}function $a(t,e){return new Le((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Qa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(tc(t)):t.access_token&&t.refresh_token?n(t):r(new x("internal-error")):r(new x("network-request-failed"))}),"POST",br(e).toString(),t.g,t.m.get()):r(new x("internal-error"))}))}function Za(t,e,n,r,i,o,s){var a=ar(e+n);or(a,"key",t.c),s&&or(a,"cb",k().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&or(a,c,i[c]);return new Le((function(e,n){Qa(t,a.toString(),(function(t){t?t.error?n(tc(t,o||{})):e(t):n(new x("network-request-failed"))}),r,u?void 0:Cr(hi(i)),t.a,t.v.get())}))}function tu(t){if(t=t.email,"string"!==typeof t||!Br.test(t))throw new x("invalid-email")}function eu(t){"email"in t&&tu(t)}function nu(t,e){return $u(t,Iu,{identifier:e,continueUri:si()?Rr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}function ru(t){return $u(t,Du,{}).then((function(t){return t.authorizedDomains||[]}))}function iu(t){if(!t[Ua]){if(t.mfaPendingCredential)throw new x("multi-factor-auth-required",null,It(t));throw new x("internal-error")}}function ou(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new x("internal-error")}else{if(!t.sessionInfo)throw new x("missing-verification-id");if(!t.code)throw new x("missing-verification-code")}}ja.prototype.s=function(t,e,n,r,i){var o=this;Fa.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},ja.prototype.zb=function(){return $u(this,Vu,{})},ja.prototype.Bb=function(t,e){return $u(this,Fu,{idToken:t,email:e})},ja.prototype.Cb=function(t,e){return $u(this,Uu,{idToken:t,password:e})};var su={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function au(t,e){return $u(t,ju,e)}function uu(t,e){return $u(t,qu,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}function cu(t){if(!t.phoneVerificationInfo)throw new x("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new x("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new x("missing-verification-code")}function hu(t,e){return $u(t,Bu,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}function lu(t,e,n){return $u(t,Tu,{idToken:e,deleteProvider:n})}function fu(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new x("internal-error")}function pu(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(t=new gr(t.postBody),wr(t,"nonce")&&(e.nonce=t.get("nonce")))),e}function du(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Ps(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Ps(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Ps(t)):t.errorMessage&&(e=Zu(t.errorMessage)),e)throw e;iu(t)}function vu(t,e){return e.returnIdpCredential=!0,$u(t,Hu,e)}function yu(t,e){return e.returnIdpCredential=!0,$u(t,zu,e)}function gu(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,$u(t,Wu,e)}function mu(t){if(!t.oobCode)throw new x("invalid-action-code")}t=ja.prototype,t.Db=function(t,e){var n={idToken:t},r=[];return _t(su,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),$u(this,Fu,n)},t.vb=function(t,e){return t={requestType:"PASSWORD_RESET",email:t},Tt(t,e),$u(this,Ru,t)},t.wb=function(t,e){return t={requestType:"EMAIL_SIGNIN",email:t},Tt(t,e),$u(this,Pu,t)},t.ub=function(t,e){return t={requestType:"VERIFY_EMAIL",idToken:t},Tt(t,e),$u(this,xu,t)},t.Eb=function(t,e,n){return t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},Tt(t,n),$u(this,Ou,t)},t.fb=function(t){return $u(this,Qu,t)},t.nb=function(t,e){return $u(this,Mu,{oobCode:t,newPassword:e})},t.Ra=function(t){return $u(this,_u,{oobCode:t})},t.jb=function(t){return $u(this,bu,{oobCode:t})};var bu={endpoint:"setAccountInfo",A:mu,Z:"email",B:!0},_u={endpoint:"resetPassword",A:mu,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new x("internal-error")},B:!0},wu={endpoint:"signupNewUser",A:function(t){if(tu(t),!t.password)throw new x("weak-password")},G:iu,V:!0,B:!0},Iu={endpoint:"createAuthUri",B:!0},Eu={endpoint:"deleteAccount",N:["idToken"]},Tu={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new x("internal-error")}},Su={endpoint:"emailLinkSignin",N:["email","oobCode"],A:tu,G:iu,V:!0,B:!0},Cu={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:tu,G:iu,V:!0},ku={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:cu,G:iu,B:!0,Na:!0},Nu={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:cu,G:iu,B:!0,Na:!0},Au={endpoint:"getAccountInfo"},Pu={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new x("internal-error");tu(t)},Z:"email",B:!0},xu={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new x("internal-error")},Z:"email",B:!0},Ou={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new x("internal-error")},Z:"email",B:!0},Ru={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new x("internal-error");tu(t)},Z:"email",B:!0},Du={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Lu={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new x("internal-error")}},Mu={endpoint:"resetPassword",A:mu,Z:"email",B:!0},ju={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Fu={endpoint:"setAccountInfo",N:["idToken"],A:eu,V:!0},Uu={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(eu(t),!t.password)throw new x("weak-password")},G:iu,V:!0},Vu={endpoint:"signupNewUser",G:iu,V:!0,B:!0},qu={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new x("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new x("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new x("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new x("internal-error")},B:!0,Na:!0},Bu={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new x("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new x("internal-error")},B:!0,Na:!0},Hu={endpoint:"verifyAssertion",A:fu,Ya:pu,G:du,V:!0,B:!0},Wu={endpoint:"verifyAssertion",A:fu,Ya:pu,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new x("user-not-found");if(t.errorMessage)throw Zu(t.errorMessage);iu(t)},V:!0,B:!0},zu={endpoint:"verifyAssertion",A:function(t){if(fu(t),!t.idToken)throw new x("internal-error")},Ya:pu,G:du,V:!0},Gu={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new x("invalid-custom-token")},G:iu,V:!0,B:!0},Ku={endpoint:"verifyPassword",A:function(t){if(tu(t),!t.password)throw new x("wrong-password")},G:iu,V:!0,B:!0},Qu={endpoint:"verifyPhoneNumber",A:ou,G:iu,B:!0},Yu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new x("internal-error");ou(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Ps(t);iu(t)}},Xu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ou,G:iu,B:!0},Ju={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ua]^!!t.refreshToken)throw new x("internal-error")},B:!0,Na:!0};function $u(t,e,n){if(!Pi(n,e.N))return He(new x("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return Be(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&"undefined"===typeof n.tenantId&&(n.tenantId=t.b),Za(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new x("internal-error");return r[e.Z]}))}function Zu(t){return tc({error:{errors:[{message:t}],code:400,message:t}})}function tc(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new x(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},Tt(r,e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new x(r[i],e);return!e&&t&&(e=ci(t)),new x("internal-error",e)}function ec(t){this.b=t,this.a=null,this.rb=nc(this)}function nc(t){return cc().then((function(){return new Le((function(e,n){ri("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:ri("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),ac.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}function rc(t,e){return t.rb.then((function(){return new Le((function(n){t.a.send(e.type,e,n,ri("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}function ic(t,e){t.rb.then((function(){t.a.register("authEvent",e,ri("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}var oc=new Ct(Pt,"https://apis.google.com/js/api.js?onload=%{onload}"),sc=new vi(3e4,6e4),ac=new vi(5e3,15e3),uc=null;function cc(){return uc||(uc=new Le((function(t,e){function n(){di(),ri("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){di(),e(Error("Network Error"))},timeout:sc.get()})}if(ri("gapi.iframes.Iframe"))t();else if(ri("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();c[r]=function(){ri("gapi.load")?n():e(Error("Network Error"))},r=Dt(oc,{onload:r}),Be(Aa(r)).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw uc=null,t})))}function hc(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?(t=ar(this.g.url),t=ur(t.c,t.a,t.g,"/emulator/auth/iframe")):t=ur("https",this.l,null,"/__/auth/iframe"),this.a=t,or(this.a,"apiKey",this.h),or(this.a,"appName",this.i),this.b=null,this.c=[]}function lc(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function fc(t){try{return l.Z.app(t).auth().Ga()}catch(e){return[]}}function pc(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function dc(t){var e=Rr();return ru(t).then((function(t){t:{var n=ar(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=ar(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:qr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Ns(Rr())}))}function vc(t){return t.m||(t.m=Hr().then((function(){if(!t.u){var e=t.c,n=t.i,r=fc(t.b),i=new hc(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=ot(r||[]),t.u=i.toString()}t.v=new ec(t.u),mc(t)}))),t.m}function yc(t){return t.l||(t.C=t.c?ei(t.c,fc(t.b)):null,t.l=new ja(t.g,j(t.i),t.C),t.f&&za(t.l,t.f)),t.l}function gc(t,e,n,r,i,o,s,a,u,c,h,l){return t=new lc(t,e,n,r,i,l),t.l=o,t.g=s,t.i=a,t.b=It(u||null),t.f=c,t.yb(h).toString()}function mc(t){if(!t.v)throw Error("IfcHandler must be initialized!");ic(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Es(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return n={},n.status=r?"ACK":"ERROR",Be(n)}return n.status="ERROR",Be(n)}))}function bc(t){var e={type:"webStorageSupport"};return vc(t).then((function(){return rc(t.v,e)})).then((function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))}function _c(t){if(this.a=t||l.Z.INTERNAL.reactNative&&l.Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new x("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function wc(t){this.b=t,this.a={},this.f=S(this.c,this)}hc.prototype.toString=function(){return this.f?or(this.a,"v",this.f):_r(this.a.b,"v"),this.b?or(this.a,"eid",this.b):_r(this.a.b,"eid"),this.c.length?or(this.a,"fw",this.c.join(",")):_r(this.a.b,"fw"),this.a.toString()},lc.prototype.yb=function(t){return this.h=t,this},lc.prototype.toString=function(){if(this.v){var t=ar(this.v.url);t=ur(t.c,t.a,t.g,"/emulator/auth/handler")}else t=ur("https",this.u,null,"/__/auth/handler");if(or(t,"apiKey",this.s),or(t,"appName",this.c),or(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=l.Z.app(this.c).auth().la()}catch(g){n=null}for(var r in e.ob=n,or(t,"providerId",this.a.providerId),n=this.a,e=hi(n.Ib),e)e[r]=e[r].toString();r=n.Qc,e=It(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),wt(e)||or(t,"customParameters",ci(e))}if("function"===typeof this.a.Qb&&(n=this.a.Qb(),n.length&&or(t,"scopes",n.join(","))),this.l?or(t,"redirectUrl",this.l):_r(t.b,"redirectUrl"),this.g?or(t,"eventId",this.g):_r(t.b,"eventId"),this.i?or(t,"v",this.i):_r(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!sr(t,s)&&or(t,s,this.b[s]);return this.h?or(t,"tid",this.h):_r(t.b,"tid"),this.f?or(t,"eid",this.f):_r(t.b,"eid"),s=fc(this.c),s.length&&or(t,"fw",s.join(",")),t.toString()},t=pc.prototype,t.Ob=function(t,e,n){var r=new x("popup-closed-by-user"),i=new x("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){bc(o).then((function(n){n||(t&&Fr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return Vr(t)})).then((function(){if(!s)return zn(n).then((function(){e(r)}))}))},t.Xb=function(){var t=ni();return!ui(t)&&!pi(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,s,a){if(!t)return He(new x("popup-blocked"));if(s&&!ui())return this.ma().o((function(e){Fr(t),i(e)})),r(),Be();this.a||(this.a=dc(yc(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw Fr(t),i(e),e}));return r(),e})).then((function(){if(ws(n),!s){var r=gc(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f);Dr(r,t)}})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=dc(yc(this)));var i=this;return this.a.then((function(){ws(e);var o=gc(i.s,i.g,i.b,t,e,Rr(),n,i.c,void 0,i.i,r,i.f);Dr(o)})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return vc(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new x("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){rt(this.h,(function(e){return e==t}))},t=_c.prototype,t.get=function(t){return Be(this.a.getItem(t)).then((function(t){return t&&li(t)}))},t.set=function(t,e){return Be(this.a.setItem(t,ci(e)))},t.U=function(t){return Be(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var Ic,Ec=[];function Tc(){var t=Kr()?self:null;if(Y(Ec,(function(n){n.b==t&&(e=n)})),!e){var e=new wc(t);Ec.push(e)}return e}function Sc(t,e,n){wt(t.a)&&t.b.addEventListener("message",t.f),"undefined"===typeof t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Cc(t){this.a=t}function kc(t){this.c=t,this.b=!1,this.a=[]}function Nc(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return He(Error("connection_unavailable"));var h=r?800:50,l="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Le((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))},c={messageChannel:l,onMessage:o},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Ac(t,c),e})).o((function(e){throw Ac(t,c),e}))}function Ac(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),rt(t.a,(function(t){return t==e}))}}function Pc(){if(!Lc())throw new x("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=c.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Kr()&&self?(this.v=Tc(),Sc(this.v,"keyChanged",(function(e,n){return Vc(t).then((function(e){return 0<e.length&&Y(t.a,(function(t){t(e)})),{keyProcessed:et(e,n.key)}}))})),Sc(this.v,"ping",(function(){return Be(["keyChanged"])}))):wi().then((function(e){(t.h=e)&&(t.g=new kc(new Cc(e)),Nc(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&et(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function xc(t){return new Le((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}function Oc(t){return new Le((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){r=r.target.result,r.objectStoreNames.contains("firebaseLocalStorage")?e(r):xc(t).then((function(){return Oc(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Rc(t){return t.i||(t.i=Oc(t)),t.i}function Dc(t,e){function n(i,o){Rc(t).then(e).then(i).o((function(e){if(!(3<++r))return Rc(t).then((function(e){return e.close(),t.i=void 0,n(i,o)})).o((function(t){o(t)}));o(e)}))}var r=0;return new Le(n)}function Lc(){try{return!!c.indexedDB}catch(nd){return!1}}function Mc(t){return t.objectStore("firebaseLocalStorage")}function jc(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Fc(t){return new Le((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Uc(t,e){return t.g&&t.h&&_i()===t.h?Nc(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Be()}function Vc(t){return Rc(t).then((function(t){var e=Mc(jc(t,!1));return e.getAll?Fc(e.getAll()):new Le((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e["continue"]()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=Lr(t.c,n),t.c=n}return r}))}function qc(t){function e(){t.f=setTimeout((function(){t.l=Vc(t).then((function(e){0<e.length&&Y(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Bc(t),e()}function Bc(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Hc(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Be().then((function(){if(Lc()){var t=fi(),r="__sak"+t;return Ic||(Ic=new Pc),n=Ic,n.set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){Y(e.a,(function(e){e(t)}))})),t}))}function Wc(){this.a={},this.type="inMemory"}function zc(){if(!Kc()){if("Node"==Qr())throw new x("internal-error","The LocalStorage compatibility library was not found.");throw new x("web-storage-unsupported")}this.a=Gc()||l.Z.INTERNAL.node.localStorage,this.type="localStorage"}function Gc(){try{var t=c.localStorage,e=fi();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Kc(){var t="Node"==Qr();if(t=Gc()||t&&l.Z.INTERNAL.node&&l.Z.INTERNAL.node.localStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}function Qc(){this.type="nullStorage"}function Yc(){if(!Jc()){if("Node"==Qr())throw new x("internal-error","The SessionStorage compatibility library was not found.");throw new x("web-storage-unsupported")}this.a=Xc()||l.Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Xc(){try{var t=c.sessionStorage,e=fi();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Jc(){var t="Node"==Qr();if(t=Xc()||t&&l.Z.INTERNAL.node&&l.Z.INTERNAL.node.sessionStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}function $c(){var t={};t.Browser=eh,t.Node=nh,t.ReactNative=rh,t.Worker=ih,this.a=t[Qr()]}wc.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];Y(r,(function(e){i.push(Be().then((function(){return e(t.origin,t.data.data)})))})),Ge(i).then((function(r){var i=[];Y(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),Y(i,(function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Cc.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},kc.prototype.close=function(){for(;0<this.a.length;)Ac(this,this.a[0]);this.b=!0},t=Pc.prototype,t.set=function(t,e){var n=this,r=!1;return Dc(this,(function(e){return e=Mc(jc(e,!0)),Fc(e.get(t))})).then((function(i){return Dc(n,(function(o){if(o=Mc(jc(o,!0)),i)return i.value=e,Fc(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Fc(o.add(s))}))})).then((function(){return n.c[t]=e,Uc(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Dc(this,(function(e){return Fc(Mc(jc(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Dc(this,(function(r){return n=!0,e.b++,Fc(Mc(jc(r,!0))["delete"](t))})).then((function(){return delete e.c[t],Uc(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&qc(this),this.a.push(t)},t.ia=function(t){rt(this.a,(function(e){return e==t})),0==this.a.length&&Bc(this)},t=Hc.prototype,t.get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){rt(this.a,(function(e){return e==t}))},t=Wc.prototype,t.get=function(t){return Be(this.a[t])},t.set=function(t,e){return this.a[t]=e,Be()},t.U=function(t){return delete this.a[t],Be()},t.ca=function(){},t.ia=function(){},t=zc.prototype,t.get=function(t){var e=this;return Be().then((function(){var n=e.a.getItem(t);return li(n)}))},t.set=function(t,e){var n=this;return Be().then((function(){var r=ci(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Be().then((function(){e.a.removeItem(t)}))},t.ca=function(t){c.window&&kn(c.window,"storage",t)},t.ia=function(t){c.window&&xn(c.window,"storage",t)},t=Qc.prototype,t.get=function(){return Be(null)},t.set=function(){return Be()},t.U=function(){return Be()},t.ca=function(){},t.ia=function(){},t=Yc.prototype,t.get=function(t){var e=this;return Be().then((function(){var n=e.a.getItem(t);return li(n)}))},t.set=function(t,e){var n=this;return Be().then((function(){var r=ci(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Be().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Zc,th,eh={F:zc,bb:Yc},nh={F:zc,bb:Yc},rh={F:_c,bb:Qc},ih={F:zc,bb:Qc},oh={rd:"local",NONE:"none",td:"session"};function sh(t){var e=new x("invalid-persistence-type"),n=new x("unsupported-persistence-type");t:{for(r in oh)if(oh[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(Qr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Lc()&&"none"!==t)throw n;break;default:if(!ii()&&"none"!==t)throw n}}function ah(){var t=!(pi(ni())||!Gr()),e=ui(),n=ii();this.m=t,this.h=e,this.l=n,this.a={},Zc||(Zc=new $c),t=Zc;try{this.g=!Or()&&bi()||!c.indexedDB?new t.a.F:new Hc(Kr()?new Wc:new t.a.F)}catch(r){this.g=new Wc,this.h=!0}try{this.i=new t.a.bb}catch(r){this.i=new Wc}this.v=new Wc,this.f=S(this.Yb,this),this.b={}}function uh(){return th||(th=new ah),th}function ch(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function hh(t,e){return"firebase:"+t.name+(e?":"+e:"")}function lh(t,e,n){var r=hh(e,n),i=ch(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=li(c.localStorage.getItem(r))}catch(g){}if(s&&!o)return c.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&c.localStorage.removeItem(r)}))}function fh(t,e,n){return n=hh(e,n),"local"==e.F&&(t.b[n]=null),ch(t,e.F).U(n)}function ph(t){dh(t),t.c=setInterval((function(){for(var e in t.a){var n=c.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new yn({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}function dh(t){t.c&&(clearInterval(t.c),t.c=null)}function vh(t){this.a=t,this.b=uh()}t=ah.prototype,t.get=function(t,e){return ch(this,t.F).get(hh(t,e))},t.set=function(t,e,n){var r=hh(t,n),i=this,o=ch(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=hh(t,e),this.l&&(this.b[t]=c.localStorage.getItem(t)),wt(this.a)&&(ch(this,"local").ca(this.f),this.h||(Or()||!bi())&&c.indexedDB||!this.l||ph(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=hh(t,e),this.a[t]&&(rt(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),wt(this.a)&&(ch(this,"local").ia(this.f),dh(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=c.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?ch(this,"local").ia(this.f):dh(this),this.m)if(n=c.localStorage.getItem(e),r=t.a.newValue,r!==n)null!==r?c.localStorage.setItem(e,r):c.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"===typeof t.a.a)return;var o=this;n=function(){"undefined"===typeof t.a.a&&o.b[e]===c.localStorage.getItem(e)||(o.b[e]=c.localStorage.getItem(e),o.mb(e))},oe&&me&&10==me&&c.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else Y(t,S(this.mb,this))},t.mb=function(t){this.a[t]&&Y(this.a[t],(function(t){t()}))};var yh,gh={name:"authEvent",F:"local"};function mh(t){return t.b.get(gh,t.a).then((function(t){return Es(t)}))}function bh(){this.a=uh()}function _h(){this.b=-1}function wh(t,e){this.b=Ih,this.f=c.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=c.Int32Array?new Int32Array(64):Array(64),void 0===yh&&(yh=c.Int32Array?new Int32Array(Ah):Ah),this.reset()}N(wh,_h);for(var Ih=64,Eh=Ih-1,Th=[],Sh=0;Sh<Eh;Sh++)Th[Sh]=0;var Ch=it(128,Th);function kh(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=c&h^~c&l,o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0,s=s+(0|yh[e])|0,s=o+(s+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function Nh(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"===typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(kh(t),i=0);else{if(!y(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(kh(t),i=0)}}t.c=i,t.g+=n}wh.prototype.reset=function(){this.g=this.c=0,this.a=c.Int32Array?new Int32Array(this.h):ot(this.h)};var Ah=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ph(){wh.call(this,8,xh)}N(Ph,wh);var xh=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Oh(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new bh,this.g=new vh(this.h),this.f=null,this.b=[],this.a=this.c=null}function Rh(t){return new x("invalid-cordova-configuration",t)}function Dh(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}function Lh(t){var e=new Ph;Nh(e,t),t=[];var n=8*e.g;56>e.c?Nh(e,Ch,56-e.c):Nh(e,Ch,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(kh(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return _o(t)}function Mh(t,e,n,r,i){var o=Dh(),s=new Is(e,r,null,o,new x("no-auth-event"),null,i),a=ri("BuildInfo.packageName",c);if("string"!==typeof a)throw new x("invalid-cordova-configuration");var u=ri("BuildInfo.displayName",c),h={};if(ni().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=a;else{if(!ni().toLowerCase().match(/android/))return He(new x("operation-not-supported-in-this-environment"));h.apn=a}u&&(h.appDisplayName=u),o=Lh(o),h.sessionId=o;var l=gc(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(gh,s.w(),e)})).then((function(){var e=ri("cordova.plugins.browsertab.isAvailable",c);if("function"!==typeof e)throw new x("invalid-cordova-configuration");var n=null;e((function(e){if(e){if(n=ri("cordova.plugins.browsertab.openUrl",c),"function"!==typeof n)throw new x("invalid-cordova-configuration");n(l)}else{if(n=ri("cordova.InAppBrowser.open",c),"function"!==typeof n)throw new x("invalid-cordova-configuration");e=ni(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}function jh(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Fh(t){return t.f||(t.f=t.ma().then((function(){return new Le((function(e){function n(r){return e(r),t.Sa(n),!1}t.Ea(n),Vh(t)}))}))),t.f}function Uh(t){var e=null;return mh(t.g).then((function(n){return e=n,n=t.g,fh(n.b,gh,n.a)})).then((function(){return e}))}function Vh(t){function e(e){r=!0,i&&i.cancel(),Uh(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;i=qo(e.url),-1!=i.indexOf("/__/auth/callback")&&(o=ar(i),o=li(sr(o,"firebaseError")||null),o=(o="object"===typeof o?O(o):null)?new Is(r.c,r.b,null,null,o,null,r.T()):new Is(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}jh(t,i)}))}var n=new Is("unknown",null,null,null,new x("no-auth-event")),r=!1,i=zn(500).then((function(){return Uh(t).then((function(){r||jh(t,n)}))})),o=c.handleOpenURL;c.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(ri("BuildInfo.packageName",c).toLowerCase()+"://")&&e({url:t}),"function"===typeof o)try{o(t)}catch(g){console.error(g)}},Cs||(Cs=new Ts),ks(e)}function qh(t){this.a=t,this.b=uh()}t=Oh.prototype,t.ma=function(){return this.Ia?this.Ia:this.Ia=Wr().then((function(){if("function"!==typeof ri("universalLinks.subscribe",c))throw Rh("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof ri("BuildInfo.packageName",c))throw Rh("cordova-plugin-buildinfo is not installed");if("function"!==typeof ri("cordova.plugins.browsertab.openUrl",c))throw Rh("cordova-plugin-browsertab is not installed");if("function"!==typeof ri("cordova.InAppBrowser.open",c))throw Rh("cordova-plugin-inappbrowser is not installed")}),(function(){throw new x("cordova-not-ready")}))},t.Ob=function(t,e){return e(new x("operation-not-supported-in-this-environment")),Be()},t.Mb=function(){return He(new x("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return He(new x("redirect-operation-pending"));var i=this,o=c.document,s=null,a=null,u=null,h=null;return this.c=Be().then((function(){return ws(e),Fh(i)})).then((function(){return Mh(i,t,e,n,r)})).then((function(){return new Le((function(t,e){a=function(){var e=ri("cordova.plugins.browsertab.close",c);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),u=function(){s||(s=zn(2e3).then((function(){e(new x("redirect-cancelled-by-user"))})))},h=function(){yi()&&u()},o.addEventListener("resume",u,!1),ni().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Uh(i).then((function(){throw t}))}))})).oa((function(){u&&o.removeEventListener("resume",u,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),a&&i.Sa(a),i.c=null}))},t.Ea=function(t){this.b.push(t),Fh(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Is("unknown",null,null,null,new x("no-auth-event")),t(e))}))},t.Sa=function(t){rt(this.b,(function(e){return e==t}))};var Bh={name:"pendingRedirect",F:"session"};function Hh(t){return t.b.set(Bh,"pending",t.a)}function Wh(t){return fh(t.b,Bh,t.a)}function zh(t){return t.b.get(Bh,t.a).then((function(t){return"pending"==t}))}function Gh(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=S(this.s,this),this.b=new al,this.C=new vl,this.g=new qh(ol(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Kh(this.D,this.v,this.m,R,this.J)}function Kh(t,e,n,r,i){var o=l.Z.SDK_VERSION||null;return zr()?new Oh(t,e,n,o,r,i):new pc(t,e,n,o,r,i)}function Qh(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Yh(t){t.a.Xb()&&Qh(t).o((function(e){var n=new Is("unknown",null,null,null,new x("operation-not-supported-in-this-environment"));el(e)&&t.s(n)})),t.a.Tb()||ul(t.b)}function Xh(t,e){et(t.h,e)||t.h.push(e),t.f||zh(t.g).then((function(e){e?Wh(t.g).then((function(){Qh(t).o((function(e){var n=new Is("unknown",null,null,null,new x("operation-not-supported-in-this-environment"));el(e)&&t.s(n)}))})):Yh(t)})).o((function(){Yh(t)}))}function Jh(t,e){rt(t.h,(function(t){return t==e}))}Gh.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Kh(this.D,this.v,this.m,null,this.J),this.i={}},Gh.prototype.s=function(t){if(!t)throw new x("invalid-auth-event");if(6e5<=k()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=k())),e=!0;break}}return ul(this.b),e};var $h=new vi(2e3,1e4),Zh=new vi(3e4,6e4);function tl(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function el(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function nl(t,e,n,r,i){var o;return Hh(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(el(e))throw new x("operation-not-supported-in-this-environment");return o=e,Wh(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new Le((function(){})):Wh(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function rl(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),$h.get())}Gh.prototype.qa=function(){return this.b.qa()};var il={};function ol(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function sl(t,e,n,r){var i=ol(e,n,r);return il[i]||(il[i]=new Gh(t,e,n,r)),il[i]}function al(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function ul(t){t.g||(t.g=!0,pl(t,!1,null,null))}function cl(t){t.g&&!t.i&&pl(t,!1,null,null)}function hl(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){pl(t,a,e,null)})).o((function(e){pl(t,a,null,e)}))}function ll(t,e){if(t.b=function(){return He(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}function fl(t,e){if(t.b=function(){return Be(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function pl(t,e,n,r){e?r?ll(t,r):fl(t,n):fl(t,{user:null}),t.f=[],t.c=[]}function dl(t){var e=new x("timeout");t.a&&t.a.cancel(),t.a=zn(Zh.get()).then((function(){t.b||(t.g=!0,pl(t,!0,null,e))}))}function vl(){}function yl(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}function gl(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function ml(t,e){this.a=e,Ci(this,"verificationId",t)}function bl(t,e,n,r){return new ms(t).fb(e,n).then((function(t){return new ml(t,r)}))}function _l(t){var e=ko(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new x("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ki(this,{token:t,expirationTime:mi(1e3*e.exp),authTime:mi(1e3*e.auth_time),issuedAtTime:mi(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function wl(t,e,n){var r=e&&e[El];if(!r)throw new x("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=It(e),this.g=n,this.c=new Bo(null,r),this.b=[];var i=this;Y(e[Il]||[],(function(t){(t=Ri(t))&&i.b.push(t)})),Ci(this,"auth",this.a),Ci(this,"session",this.c),Ci(this,"hints",this.b)}al.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},al.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(pl(this,!0,null,t.a),Be()):e.Fa(n,r)?hl(this,t,e):He(new x("invalid-auth-event")):(pl(this,!1,null,null),Be())}else He(new x("invalid-auth-event"))},al.prototype.qa=function(){var t=this;return new Le((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),dl(t))}))},vl.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Be()):e.Fa(n,r)?yl(t,e):He(new x("invalid-auth-event"))}else He(new x("invalid-auth-event"))},ml.prototype.confirm=function(t){return t=bs(this.verificationId,t),this.a(t)};var Il="mfaInfo",El="mfaPendingCredential";function Tl(t,e,n,r){x.call(this,"multi-factor-auth-required",r,e),this.b=new wl(t,e,n),Ci(this,"resolver",this.b)}function Sl(t,e,n){if(t&&b(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Tl(e,t.serverResponse,n,t.message)}catch(r){}return null}function Cl(){}function kl(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),Tt(n,{phoneVerificationInfo:gs(t.a)}),$u(e,ku,n)}))}function Nl(t,e,n){return n.Ha().then((function(n){return n={mfaPendingCredential:n},Tt(n,{phoneVerificationInfo:gs(t.a)}),$u(e,Nu,n)}))}function Al(t){Ci(this,"factorId",t.fa),this.a=t}function Pl(t){if(Al.call(this,t),this.a.fa!=ms.PROVIDER_ID)throw new x("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function xl(t,e){for(var n in vn.call(this,t),e)this[n]=e[n]}function Ol(t,e){this.a=t,this.b=[],this.c=S(this.yc,this),kn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&Y(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[Mi]=t.uid),t.displayName&&(r[Di]=t.displayName),t.enrollmentTime&&(r[Li]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ji]=t.phoneNumber);try{e=new Fi(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),Dl(this,n)}function Rl(t){var e=[];return Y(t.mfaInfo||[],(function(t){(t=Ri(t))&&e.push(t)})),e}function Dl(t,e){t.b=e,Ci(t,"enrolledFactors",e)}function Ll(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Ml(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function jl(t,e){t.stop(),t.b=zn(Ml(t,e)).then((function(){return gi()})).then((function(){return t.h()})).then((function(){jl(t,!0)})).o((function(e){t.i(e)&&jl(t,!1)}))}function Fl(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function Ul(t,e){"undefined"===typeof e&&(t.b?(e=t.b,e=e.a-e.g):e=0),t.c=Date.now()+1e3*e}function Vl(t,e){t.b=Co(e[Ua]||""),t.a=e.refreshToken,e=e.expiresIn,Ul(t,"undefined"!==typeof e?Number(e):void 0)}function ql(t,e){t.b=e.b,t.a=e.a,t.c=e.c}function Bl(t,e){return $a(t.f,e).then((function(e){return t.b=Co(e.access_token),t.a=e.refresh_token,Ul(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function Hl(t,e){this.a=t||null,this.b=e||null,ki(this,{lastSignInTime:mi(e||null),creationTime:mi(t||null)})}function Wl(t){return new Hl(t.a,t.b)}function zl(t,e,n,r,i,o){ki(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Gl(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=l.Z.SDK_VERSION?ei(l.Z.SDK_VERSION):null;this.a=new ja(this.l,j(R),r),t.emulatorConfig&&za(this.a,t.emulatorConfig),this.b=new Fl(this.a),ef(this,e[Ua]),Vl(this.b,e),Ci(this,"refreshToken",this.b.a),sf(this,n||{}),Vn.call(this),this.R=!1,this.s&&oi()&&(this.i=sl(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=$l(this),this.aa=S(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){za(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){Yl(i,t.f)},this.ba=null,this.O=new Ol(this,n),Ci(this,"multiFactor",this.O)}function Kl(t,e){t.ja&&xn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&kn(e,"languageCodeChanged",t.Oa)}function Ql(t,e){t.X&&xn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&kn(e,"emulatorConfigChanged",t.Aa)}function Yl(t,e){t.$=e,Ka(t.a,l.Z.SDK_VERSION?ei(l.Z.SDK_VERSION,t.$):null)}function Xl(t,e){t.ba&&xn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&kn(e,"frameworkChanged",t.Ba)}function Jl(t){try{return l.Z.app(t.m).auth()}catch(e){throw new x("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function $l(t){return new Ll((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}function Zl(t){t.D||t.u.b||(t.u.start(),xn(t,"tokenChanged",t.aa),kn(t,"tokenChanged",t.aa))}function tf(t){xn(t,"tokenChanged",t.aa),t.u.stop()}function ef(t,e){t.za=e,Ci(t,"_lat",e)}function nf(t,e){rt(t.S,(function(t){return t==e}))}function rf(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Ge(e).then((function(){return t}))}function of(t){t.i&&!t.R&&(t.R=!0,Xh(t.i,t))}function sf(t,e){ki(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Hl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function af(){}function uf(t){return Be().then((function(){if(t.D)throw new x("app-deleted")}))}function cf(t){return $(t.providerData,(function(t){return t.providerId}))}function hf(t,e){e&&(lf(t,e.providerId),t.providerData.push(e))}function lf(t,e){rt(t.providerData,(function(t){return t.providerId==e}))}function ff(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Ci(t,e,n)}function pf(t,e){t!=e&&(ki(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Ci(t,"metadata",Wl(e.metadata)):Ci(t,"metadata",new Hl),Y(e.providerData,(function(e){hf(t,e)})),ql(t.b,e.b),Ci(t,"refreshToken",t.b.a),Dl(t.O,e.O.b))}function df(t){return t.I().then((function(e){var n=t.isAnonymous;return yf(t,e).then((function(){return n||ff(t,"isAnonymous",!1),e}))}))}function vf(t,e){e[Ua]&&t.za!=e[Ua]&&(Vl(t.b,e),t.dispatchEvent(new xl("tokenChanged")),ef(t,e[Ua]),ff(t,"refreshToken",t.b.a))}function yf(t,e){return $u(t.a,Au,{idToken:e}).then(S(t.Kc,t))}function gf(t){return(t=t.providerUserInfo)&&t.length?$(t,(function(t){return new zl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}function mf(t,e){return df(t).then((function(){if(et(cf(t),e))return rf(t).then((function(){throw new x("provider-already-linked")}))}))}function bf(t,e,n){var r=_s(e);return e=Oo(e),Ni({user:t,credential:r,additionalUserInfo:e,operationType:n})}function _f(t,e){return vf(t,e),t.reload().then((function(){return t}))}function wf(t,e,n,r,i){if(!oi())return He(new x("operation-not-supported-in-this-environment"));if(t.h&&!i)return He(t.h);var o=xo(n.providerId),s=fi(t.uid+":::"),a=null;(!ui()||Gr())&&t.s&&n.isOAuthProvider&&(a=gc(t.s,t.l,t.m,e,n,null,s,l.Z.SDK_VERSION||null,null,null,t.tenantId));var u=Ur(a,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Ef(t),!i)return t.I().then((function(){}))})).then((function(){return tl(t.i,u,e,n,s,!!a,t.tenantId)})).then((function(){return new Le((function(n,r){t.na(e,null,new x("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=rl(t.i,t,e,u,s)}))})).then((function(t){return u&&Fr(u),t?Ni(t):null})).o((function(t){throw u&&Fr(u),t})),Tf(t,r,i)}function If(t,e,n,r,i){if(!oi())return He(new x("operation-not-supported-in-this-environment"));if(t.h&&!i)return He(t.h);var o=null,s=fi(t.uid+":::");return r=r().then((function(){if(Ef(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,rf(t)})).then((function(e){return t.ha&&(e=t.ha,e=e.b.set(Pf,t.w(),e.a)),e})).then((function(){return nl(t.i,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return xf(t.ha);throw o})).then((function(){if(o)throw o})),Tf(t,r,i)}function Ef(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new x("internal-error");throw new x("auth-domain-config-required")}}function Tf(t,e,n){var r=Sf(t,e,n);return t.J.push(r),r.oa((function(){nt(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Sl(e.w(),Jl(t),S(t.jc,t))),n||e}))}function Sf(t,e,n){return t.h&&!n?(e.cancel(),He(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new xl("userInvalidated")),t.h=e),e}))}function Cf(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ua]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Gl(e,n,t);return t.providerData&&Y(t.providerData,(function(t){t&&hf(i,Ni(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function kf(t,e,n,r){var i=new Gl(t,e);return n&&(i.ha=n),r&&Yl(i,r),i.reload().then((function(){return i}))}function Nf(t,e,n,r){var i=t.b,o={};return o[Ua]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new Gl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Yl(e,r),pf(e,t),e}function Af(t){this.a=t,this.b=uh()}wl.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=It(e.f);return delete n[Il],delete n[El],Tt(n,t),e.g(n)}))},N(Tl,x),Cl.prototype.sb=function(t,e,n){return e.type==Ho?kl(this,t,e,n):Nl(this,t,e)},N(Al,Cl),N(Pl,Al),N(xl,vn),t=Ol.prototype,t.yc=function(t){Dl(this,Rl(t.hd))},t.Rb=function(){return this.a.I().then((function(t){return new Bo(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return vf(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"===typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return $u(r,Ju,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=J(e.b,(function(t){return t.uid!=n}));return Dl(e,r),vf(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:$(this.b,(function(t){return t.w()}))}}},Ll.prototype.start=function(){this.a=this.c,jl(this,!0)},Ll.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Fl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},Fl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?He(new x("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?Bl(this,{grant_type:"refresh_token",refresh_token:this.a}):Be(null):Be({accessToken:this.b.toString(),refreshToken:this.a})},Hl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},N(Gl,Vn),Gl.prototype.wa=function(t){this.ya=t,Wa(this.a,t)},Gl.prototype.la=function(){return this.ya},Gl.prototype.Ga=function(){return ot(this.$)},Gl.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Ci(Gl.prototype,"providerId","firebase"),t=Gl.prototype,t.reload=function(){var t=this;return Tf(this,uf(this).then((function(){return df(t).then((function(){return rf(t)})).then(af)})))},t.oc=function(t){return this.I(t).then((function(t){return new _l(t)}))},t.I=function(t){var e=this;return Tf(this,uf(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new x("internal-error");return t.accessToken!=e.za&&(ef(e,t.accessToken),e.dispatchEvent(new xl("tokenChanged"))),ff(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(t=t.users,!t||!t.length)throw new x("internal-error");t=t[0],sf(this,{uid:t.localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=gf(t),n=0;n<e.length;n++)hf(this,e[n]);ff(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new xl("userReloaded",{hd:t}))},t.Lc=function(t){return Ti("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Tf(this,t.c(this.a,this.uid).then((function(t){return vf(e,t),n=bf(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Ti("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Tf(this,mf(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=bf(e,t,"link"),_f(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Tf(this,mf(this,"phone").then((function(){return bl(Jl(n),t,e,S(n.qb,n))})))},t.Mc=function(t,e){var n=this;return Tf(this,Be().then((function(){return bl(Jl(n),t,e,S(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return Tf(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return vf(e,t),e.reload()})))},t.ed=function(t){var e=this;return Tf(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return vf(e,t),e.reload()})))},t.Cb=function(t){var e=this;return Tf(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return vf(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return uf(this);var e=this;return Tf(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return vf(e,t),ff(e,"displayName",t.displayName||null),ff(e,"photoURL",t.photoUrl||null),Y(e.providerData,(function(t){"password"===t.providerId&&(Ci(t,"displayName",e.displayName),Ci(t,"photoURL",e.photoURL))})),rf(e)})).then(af))},t.cd=function(t){var e=this;return Tf(this,df(this).then((function(n){return et(cf(e),t)?lu(e.a,n,[t]).then((function(t){var n={};return Y(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),Y(cf(e),(function(t){n[t]||lf(e,t)})),n[ms.PROVIDER_ID]||Ci(e,"phoneNumber",null),rf(e)})):rf(e).then((function(){throw new x("no-such-provider")}))})))},t.delete=function(){var t=this;return Tf(this,this.I().then((function(e){return $u(t.a,Eu,{idToken:e})})).then((function(){t.dispatchEvent(new xl("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");Kl(t,null),Ql(t,null),Xl(t,null),t.J=[],t.D=!0,tf(t),Ci(t,"refreshToken",null),t.i&&Jh(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?S(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?S(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?S(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?S(this.Lb,this):null},t.Ec=function(t){var e=this;return wf(this,"linkViaPopup",t,(function(){return mf(e,t.providerId).then((function(){return rf(e)}))}),!1)},t.Nc=function(t){return wf(this,"reauthViaPopup",t,(function(){return Be()}),!0)},t.Fc=function(t){var e=this;return If(this,"linkViaRedirect",t,(function(){return mf(e,t.providerId)}),!1)},t.Oc=function(t){return If(this,"reauthViaRedirect",t,(function(){return Be()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return n=this.I().then((function(n){return yu(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=bf(i,t,"link"),_f(i,t)})).then((function(){return o})),Tf(this,n)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null,s=Be().then((function(){return Go(gu(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=bf(i,t,"reauthenticate"),vf(i,t),i.h=null,i.reload()})).then((function(){return o}));return Tf(this,s,!0)},t.ub=function(t){var e=this,n=null;return Tf(this,this.I().then((function(e){return n=e,"undefined"===typeof t||wt(t)?{}:bo(new uo(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return Tf(this,this.I().then((function(t){return r=t,"undefined"===typeof e||wt(e)?{}:bo(new uo(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return t=Go(Be(t),n.uid).then((function(t){return e=bf(n,t,"reauthenticate"),vf(n,t),n.h=null,n.reload()})).then((function(){return e})),Tf(this,t,!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&Tt(t,this.metadata.w()),Y(this.providerData,(function(e){t.providerData.push(Ai(e))})),Tt(t,this.O.w()),t};var Pf={name:"redirectUser",F:"session"};function xf(t){return fh(t.b,Pf,t.a)}function Of(t,e){return t.b.get(Pf,t.a).then((function(t){return t&&e&&(t.authDomain=e),Cf(t||{})}))}function Rf(t){this.a=t,this.b=uh(),this.c=null,this.f=Lf(this),this.b.addListener(jf("local"),this.a,S(this.g,this))}function Df(t,e){var n,r=[];for(n in oh)oh[n]!==e&&r.push(fh(t.b,jf(oh[n]),t.a));return r.push(fh(t.b,Mf,t.a)),ze(r)}function Lf(t){var e=jf("local"),n=jf("session"),r=jf("none");return lh(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Mf,t.a).then((function(t){return t?jf(t):e}))}))}))})).then((function(e){return t.c=e,Df(t,e.F)})).o((function(){t.c||(t.c=e)}))}Rf.prototype.g=function(){var t=this,e=jf("local");Bf(this,(function(){return Be().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Df(t,"local").then((function(){t.c=e}))}))}))};var Mf={name:"persistence",F:"session"};function jf(t){return{name:"authUser",F:t}}function Ff(t){return Bf(t,(function(){return t.b.set(Mf,t.c.F,t.a)}))}function Uf(t,e){return Bf(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function Vf(t){return Bf(t,(function(){return fh(t.b,t.c,t.a)}))}function qf(t,e,n){return Bf(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Cf(t||{})}))}))}function Bf(t,e){return t.f=t.f.then(e,e),t.f}function Hf(t){if(this.l=!1,Ci(this,"settings",new gl),Ci(this,"app",t),!ip(this).options||!ip(this).options.apiKey)throw new x("invalid-api-key");t=l.Z.SDK_VERSION?ei(l.Z.SDK_VERSION):null,this.a=new ja(ip(this).options&&ip(this).options.apiKey,j(R),t),this.R=[],this.s=[],this.O=[],this.hb=l.Z.INTERNAL.createSubscribe(S(this.zc,this)),this.X=void 0,this.bc=l.Z.INTERNAL.createSubscribe(S(this.Ac,this)),Zf(this,null),this.i=new Rf(ip(this).options.apiKey+":"+ip(this).name),this.D=new Af(ip(this).options.apiKey+":"+ip(this).name),this.$=cp(this,ep(this)),this.h=cp(this,np(this)),this.ba=!1,this.ja=S(this.Zc,this),this.Ba=S(this.da,this),this.ya=S(this.mc,this),this.za=S(this.wc,this),this.Aa=S(this.xc,this),this.b=null,Xf(this),this.INTERNAL={},this.INTERNAL["delete"]=S(this.delete,this),this.INTERNAL.logFramework=S(this.Gc,this),this.u=0,Vn.call(this),Qf(this),this.J=[],this.P=null}function Wf(t){vn.call(this,"languageCodeChanged"),this.h=t}function zf(t){vn.call(this,"emulatorConfigChanged"),this.c=t}function Gf(t){vn.call(this,"frameworkChanged"),this.f=t}function Kf(t){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),c.document&&!t&&Hr().then((function(){var t=c.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),c.document.body.appendChild(t)}))}function Qf(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=ar(this.P.url);t=Ni({protocol:t.c,host:t.a,port:t.g,options:Ni({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}function Yf(t){return t.Oa||He(new x("auth-domain-config-required"))}function Xf(t){var e=ip(t).options.authDomain,n=ip(t).options.apiKey;e&&oi()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=sl(e,n,ip(t).name,t.P),Xh(t.b,t),op(t)&&of(op(t)),t.m){of(t.m);var r=t.m;r.wa(t.la()),Kl(r,t),r=t.m,Yl(r,t.J),Xl(r,t),r=t.m,za(r.a,t.P),Ql(r,t),t.m=null}return t.b}})))}function Jf(t){if(!oi())return He(new x("operation-not-supported-in-this-environment"));var e=Yf(t).then((function(){return t.b.qa()})).then((function(t){return t?Ni(t):null}));return cp(t,e)}function $f(t,e){var n={};return n.apiKey=ip(t).options.apiKey,n.authDomain=ip(t).options.authDomain,n.appName=ip(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return kf(n,e,t.D,t.Ga())})).then((function(e){return op(t)&&e.uid==op(t).uid?(pf(op(t),e),t.da(e)):(Zf(t,e),of(e),t.da(e))})).then((function(){ap(t)}))}function Zf(t,e){op(t)&&(nf(op(t),t.Ba),xn(op(t),"tokenChanged",t.ya),xn(op(t),"userDeleted",t.za),xn(op(t),"userInvalidated",t.Aa),tf(op(t))),e&&(e.S.push(t.Ba),kn(e,"tokenChanged",t.ya),kn(e,"userDeleted",t.za),kn(e,"userInvalidated",t.Aa),0<t.u&&Zl(e)),Ci(t,"currentUser",e),e&&(e.wa(t.la()),Kl(e,t),Yl(e,t.J),Xl(e,t),za(e.a,t.P),Ql(e,t))}function tp(t){var e=Of(t.D,ip(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),xf(t.D)}));return cp(t,e)}function ep(t){var e=ip(t).options.authDomain,n=tp(t).then((function(){return qf(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return Uf(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:Vf(t.i)}))):null})).then((function(e){Zf(t,e||null)}));return cp(t,n)}function np(t){return t.$.then((function(){return Jf(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(jf("local"),e.a,t.ja)}}))}function rp(t,e){var n=null,r=null;return cp(t,e.then((function(e){return n=_s(e),r=Oo(e),$f(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Sl(e.w(),t,S(t.kc,t))),n||e})).then((function(){return Ni({user:op(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function ip(t){return t.app}function op(t){return t.currentUser}function sp(t){return op(t)&&op(t)._lat||null}function ap(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](sp(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](sp(t))}}function up(t,e){t.O.push(e),cp(t,t.h.then((function(){!t.l&&et(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(sp(t)))})))}function cp(t,e){return t.R.push(e),e.oa((function(){nt(t.R,e)})),e}function hp(){}function lp(){this.a={},this.b=1e12}Rf.prototype.xb=function(t){var e=null,n=this;return sh(t),Bf(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Df(n,t)})).then((function(){if(n.c=jf(t),e)return n.b.set(n.c,e,n.a)})):Be()}))},N(Hf,Vn),N(Wf,vn),N(zf,vn),N(Gf,vn),t=Hf.prototype,t.xb=function(t){return t=this.i.xb(t),cp(this,t)},t.wa=function(t){this.aa===t||this.l||(this.aa=t,Wa(this.a,this.aa),this.dispatchEvent(new Wf(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=c.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new x("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");e=!!e&&!!e.disableWarnings,Kf(e),this.P={url:t,ec:e},this.settings.ib=!0,za(this.a,this.P),this.dispatchEvent(new zf(this.P))}},t.Gc=function(t){this.J.push(t),Ka(this.a,l.Z.SDK_VERSION?ei(l.Z.SDK_VERSION,this.J):null),this.dispatchEvent(new Gf(this.J))},t.Ga=function(){return ot(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:ip(this).options.apiKey,authDomain:ip(this).options.authDomain,appName:ip(this).name,currentUser:op(this)&&op(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?S(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return rp(i,vu(i.a,o))}))},t.Xc=function(t){if(!oi())return He(new x("operation-not-supported-in-this-environment"));var e=this,n=xo(t.providerId),r=fi(),i=null;(!ui()||Gr())&&ip(this).options.authDomain&&t.isOAuthProvider&&(i=gc(ip(this).options.authDomain,ip(this).options.apiKey,ip(this).name,"signInViaPopup",t,null,r,l.Z.SDK_VERSION||null,null,null,this.T(),this.P));var o=Ur(i,n&&n.ua,n&&n.ta);return n=Yf(this).then((function(n){return tl(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new Le((function(t,n){e.na("signInViaPopup",null,new x("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=rl(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&Fr(o),t?Ni(t):null})).o((function(t){throw o&&Fr(o),t})),cp(this,n)},t.Yc=function(t){if(!oi())return He(new x("operation-not-supported-in-this-environment"));var e=this,n=Yf(this).then((function(){return Ff(e.i)})).then((function(){return nl(e.b,"signInViaRedirect",t,void 0,e.T())}));return cp(this,n)},t.qa=function(){var t=this;return Jf(this).then((function(e){return t.b&&cl(t.b.b),e})).o((function(e){throw t.b&&cl(t.b.b),e}))},t.dd=function(t){if(!t)return He(new x("null-user"));if(this.S!=t.tenantId)return He(new x("tenant-id-mismatch"));var e=this,n={};n.apiKey=ip(this).options.apiKey,n.authDomain=ip(this).options.authDomain,n.appName=ip(this).name;var r=Nf(t,n,e.D,e.Ga());return cp(this,this.h.then((function(){if(ip(e).options.apiKey!=t.l)return r.reload()})).then((function(){return op(e)&&t.uid==op(e).uid?(pf(op(e),t),e.da(t)):(Zf(e,r),of(r),e.da(r))})).then((function(){ap(e)})))},t.Ab=function(){var t=this,e=this.h.then((function(){return t.b&&cl(t.b.b),op(t)?(Zf(t,null),Vf(t.i).then((function(){ap(t)}))):Be()}));return cp(this,e)},t.Zc=function(){var t=this;return qf(this.i,ip(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=op(t)&&e){n=op(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return pf(op(t),e),op(t).I();(op(t)||e)&&(Zf(t,e),e&&(of(e),e.ha=t.D),t.b&&Xh(t.b,t),ap(t))}}))},t.da=function(t){return Uf(this.i,t)},t.mc=function(){ap(this),this.da(op(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return rp(e,Be(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(op(e))}))},t.Ac=function(t){var e=this;up(this,(function(){t.next(op(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof t?t(op(r)):"function"===typeof t.next&&t.next(op(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"===typeof t?t(op(r)):"function"===typeof t.next&&t.next(op(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this,n=this.h.then((function(){return op(e)?op(e).I(t).then((function(t){return{accessToken:t}})):null}));return cp(this,n)},t.Tc=function(t){var e=this;return this.h.then((function(){return rp(e,$u(e.a,Gu,{token:t}))})).then((function(t){var n=t.user;return ff(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return rp(n,$u(n.a,Ku,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return rp(n,$u(n.a,wu,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return rp(e,t.ka(e.a))}))},t.Sc=function(t){return Ti("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=op(t);if(e&&e.isAnonymous){var n=Ni({providerId:null,isNewUser:!1});return Ni({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return rp(t,t.a.zb()).then((function(e){var n=e.user;return ff(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return op(this)&&op(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&op(this)&&Zl(op(this))},t.Pc=function(t){var e=this;Y(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&op(this)&&tf(op(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),cp(this,this.h.then((function(){e.l||et(e.s,t)&&t(sp(e))})))},t.removeAuthTokenListener=function(t){rt(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i,t.b.removeListener(jf("local"),t.a,this.ja)),this.b&&(Jh(this.b,this),cl(this.b.b)),Promise.resolve()},t.hc=function(t){return cp(this,nu(this.a,t))},t.Bc=function(t){return!!ds(t)},t.wb=function(t,e){var n=this;return cp(this,Be().then((function(){var t=new uo(e);if(!t.c)throw new x("argument-error",lo+" must be true when sending sign in link to email");return bo(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return cp(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return cp(this,this.a.Ra(t).then((function(t){return new Ui(t)})))},t.jb=function(t){return cp(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return cp(this,Be().then((function(){return"undefined"===typeof e||wt(e)?{}:bo(new uo(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return cp(this,bl(this,t,e,S(this.$a,this)))},t.Vc=function(t,e){var n=this;return cp(this,Be().then((function(){var r=e||Rr(),i=ps(t,r);if(r=ds(r),!r)throw new x("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new x("tenant-id-mismatch");return n.$a(i)})))},hp.prototype.render=function(){},hp.prototype.reset=function(){},hp.prototype.getResponse=function(){},hp.prototype.execute=function(){};var fp=null;function pp(t,e){return(e=dp(e))&&t.a[e]||null}function dp(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function vp(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=_e(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():kn(this.f,"click",this.i)}function yp(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function gp(){}function mp(){}lp.prototype.render=function(t,e){return this.a[this.b.toString()]=new vp(t,e),this.b++},lp.prototype.reset=function(t){var e=pp(this,t);t=dp(t),e&&t&&(e.delete(),delete this.a[t])},lp.prototype.getResponse=function(t){return(t=pp(this,t))?t.getResponse():null},lp.prototype.execute=function(t){(t=pp(this,t))&&t.execute()},vp.prototype.getResponse=function(){return yp(this),this.b},vp.prototype.execute=function(){yp(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=Xr();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},vp.prototype.delete=function(){yp(this),this.g=!0,clearTimeout(this.a),this.a=null,xn(this.f,"click",this.i)},Ci(gp,"FACTOR_ID","phone"),mp.prototype.g=function(){return fp||(fp=new lp),Be(fp)},mp.prototype.c=function(){};var bp=null;function _p(){this.b=c.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var wp=new Ct(Pt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ip=new vi(3e4,6e4);_p.prototype.g=function(t){var e=this;return new Le((function(n,r){var i=setTimeout((function(){r(new x("network-request-failed"))}),Ip.get());if(!c.grecaptcha||t!==e.f&&!e.b){c[e.a]=function(){if(c.grecaptcha){e.f=t;var o=c.grecaptcha.render;c.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(c.grecaptcha)}else clearTimeout(i),r(new x("internal-error"));delete c[e.a]};var o=Dt(wp,{onload:e.a,hl:t||""});Be(Aa(o)).o((function(){clearTimeout(i),r(new x("internal-error","Unable to load external reCAPTCHA dependencies!"))}))}else clearTimeout(i),n(c.grecaptcha)}))},_p.prototype.c=function(){this.b--};var Ep=null;function Tp(t,e,n,r,i,o,s){if(Ci(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s?(bp||(bp=new mp),s=bp):(Ep||(Ep=new _p),s=Ep),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[kp])throw new x("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Np],!c.document)throw new x("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!_e(e)||!this.i&&_e(e).hasChildNodes())throw new x("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ja(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var u=this.a[Sp];this.a[Sp]=function(t){if(Ap(a,t),"function"===typeof u)u(t);else if("string"===typeof u){var e=ri(u,c);"function"===typeof e&&e(t)}};var h=this.a[Cp];this.a[Cp]=function(){if(Ap(a,null),"function"===typeof h)h();else if("string"===typeof h){var t=ri(h,c);"function"===typeof t&&t()}}}var Sp="callback",Cp="expired-callback",kp="sitekey",Np="size";function Ap(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Pp(t,e){rt(t.l,(function(t){return t==e}))}function xp(t,e){return t.h.push(e),e.oa((function(){nt(t.h,e)})),e}function Op(t){if(t.D)throw new x("internal-error","RecaptchaVerifier instance has been destroyed.")}function Rp(t,e,n){var r=!1;try{this.b=n||l.Z.app()}catch(s){throw new x("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new x("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=l.Z.SDK_VERSION?ei(l.Z.SDK_VERSION,o):null,Tp.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(g){t=null}return t}),o,j(R),r)}function Dp(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new x("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Lp.length)throw new x("internal-error","Argument validator received an unsupported number of arguments.");n=Lp[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new x("argument-error",t+" failed: "+r)}t=Tp.prototype,t.Ia=function(){var t=this;return this.f?this.f:this.f=xp(this,Be().then((function(){if(si()&&!Kr())return Hr();throw new x("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,$u(t.s,Lu,{})})).then((function(e){t.a[kp]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Op(this);var t=this;return xp(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=_e(e);e=Se("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Op(this);var t=this;return xp(this,this.render().then((function(e){return new Le((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(Pp(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Op(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Op(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=_e(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},N(Rp,Tp);var Lp="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Mp(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"===typeof t}}}function jp(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"===typeof t}}}function Fp(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:b}}function Up(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"===typeof t}}}function Vp(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function qp(){return{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}}}function Bp(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Hf)}}}function Hp(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof l.Z.app.App)}}}function Wp(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function zp(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}}function Gp(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Kp(t,e){return b(t)&&"string"===typeof t.type&&t.type===e&&"function"===typeof t.Ha}function Qp(t){return b(t)&&"string"===typeof t.uid}function Yp(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}}function Xp(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Jp(t,e){for(var n in e){var r=e[n].name;t[r]=td(r,t[n],e[n].j)}}function $p(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:C((function(t){return this[t]}),n),set:C((function(t,e,n,r){Dp(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function Zp(t,e,n,r){t[e]=td(e,n,r)}function td(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Dp(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=ed(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}function ed(t){return t=t.split("."),t[t.length-1]}Jp(Hf.prototype,{jb:{name:"applyActionCode",j:[Mp("code")]},Ra:{name:"checkActionCode",j:[Mp("code")]},nb:{name:"confirmPasswordReset",j:[Mp("code"),Mp("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Mp("email"),Mp("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Mp("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Mp("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Xp(Fp(),Up(),"nextOrObserver"),Up("opt_error",!0),Up("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Xp(Fp(),Up(),"nextOrObserver"),Up("opt_error",!0),Up("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Mp("email"),Xp(Fp("opt_actionCodeSettings",!0),Vp(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Mp("email"),Fp("actionCodeSettings")]},xb:{name:"setPersistence",j:[Mp("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Wp()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Wp()]},Tc:{name:"signInWithCustomToken",j:[Mp("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Mp("email"),Mp("password")]},Vc:{name:"signInWithEmailLink",j:[Mp("email"),Mp("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Mp("phoneNumber"),Yp()]},Xc:{name:"signInWithPopup",j:[Gp()]},Yc:{name:"signInWithRedirect",j:[Gp()]},dd:{name:"updateCurrentUser",j:[Xp(function(t){return{name:"user",K:"an instance of Firebase User",optional:!!t,M:function(t){return!!(t&&t instanceof Gl)}}}(),Vp(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Mp(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Mp("url"),Fp("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Mp("code")]}}),$p(Hf.prototype,{lc:{name:"languageCode",kb:Xp(Mp(),Vp(),"languageCode")},ti:{name:"tenantId",kb:Xp(Mp(),Vp(),"tenantId")}}),Hf.Persistence=oh,Hf.Persistence.LOCAL="local",Hf.Persistence.SESSION="session",Hf.Persistence.NONE="none",Jp(Gl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[jp("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[jp("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Wp()]},qb:{name:"linkWithCredential",j:[Wp()]},Dc:{name:"linkWithPhoneNumber",j:[Mp("phoneNumber"),Yp()]},Ec:{name:"linkWithPopup",j:[Gp()]},Fc:{name:"linkWithRedirect",j:[Gp()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Wp()]},tb:{name:"reauthenticateWithCredential",j:[Wp()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Mp("phoneNumber"),Yp()]},Nc:{name:"reauthenticateWithPopup",j:[Gp()]},Oc:{name:"reauthenticateWithRedirect",j:[Gp()]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Xp(Fp("opt_actionCodeSettings",!0),Vp(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Mp(null,!0)]},cd:{name:"unlink",j:[Mp("provider")]},Bb:{name:"updateEmail",j:[Mp("email")]},Cb:{name:"updatePassword",j:[Mp("password")]},ed:{name:"updatePhoneNumber",j:[Wp("phone")]},Db:{name:"updateProfile",j:[Fp("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Mp("email"),Xp(Fp("opt_actionCodeSettings",!0),Vp(null,!0),"opt_actionCodeSettings",!0)]}}),Jp(lp.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jp(hp.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jp(Le.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),$p(gl.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:jp("appVerificationDisabledForTesting")}}),Jp(ml.prototype,{confirm:{name:"confirm",j:[Mp("verificationCode")]}}),Zp(zo,"fromJSON",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var e,n=[$o,ls,ys,Yo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Xp(Mp(),Fp(),"json")]),Zp(fs,"credential",(function(t,e){return new hs(t,e)}),[Mp("email"),Mp("password")]),Jp(hs.prototype,{w:{name:"toJSON",j:[Mp(null,!0)]}}),Jp(ns.prototype,{Ca:{name:"addScope",j:[Mp("scope")]},Ka:{name:"setCustomParameters",j:[Fp("customOAuthParameters")]}}),Zp(ns,"credential",rs,[Xp(Mp(),Fp(),"token")]),Zp(fs,"credentialWithLink",ps,[Mp("email"),Mp("emailLink")]),Jp(is.prototype,{Ca:{name:"addScope",j:[Mp("scope")]},Ka:{name:"setCustomParameters",j:[Fp("customOAuthParameters")]}}),Zp(is,"credential",os,[Xp(Mp(),Fp(),"token")]),Jp(ss.prototype,{Ca:{name:"addScope",j:[Mp("scope")]},Ka:{name:"setCustomParameters",j:[Fp("customOAuthParameters")]}}),Zp(ss,"credential",as,[Xp(Mp(),Xp(Fp(),Vp()),"idToken"),Xp(Mp(),Vp(),"accessToken",!0)]),Jp(us.prototype,{Ka:{name:"setCustomParameters",j:[Fp("customOAuthParameters")]}}),Zp(us,"credential",cs,[Xp(Mp(),Fp(),"token"),Mp("secret",!0)]),Jp(es.prototype,{Ca:{name:"addScope",j:[Mp("scope")]},credential:{name:"credential",j:[Xp(Mp(),Xp(Fp(),Vp()),"optionsOrIdToken"),Xp(Mp(),Vp(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Fp("customOAuthParameters")]}}),Jp(Xo.prototype,{w:{name:"toJSON",j:[Mp(null,!0)]}}),Jp(Ko.prototype,{w:{name:"toJSON",j:[Mp(null,!0)]}}),Zp(ms,"credential",bs,[Mp("verificationId"),Mp("verificationCode")]),Jp(ms.prototype,{fb:{name:"verifyPhoneNumber",j:[Xp(Mp(),function(t,e){return{name:t||"phoneInfoOptions",K:"valid phone info options",optional:!!e,M:function(t){return!!t&&(t.session&&t.phoneNumber?Kp(t.session,Ho)&&"string"===typeof t.phoneNumber:t.session&&t.multiFactorHint?Kp(t.session,Wo)&&Qp(t.multiFactorHint):t.session&&t.multiFactorUid?Kp(t.session,Wo)&&"string"===typeof t.multiFactorUid:!!t.phoneNumber&&"string"===typeof t.phoneNumber)}}}(),"phoneInfoOptions"),Yp()]}}),Jp(vs.prototype,{w:{name:"toJSON",j:[Mp(null,!0)]}}),Jp(x.prototype,{toJSON:{name:"toJSON",j:[Mp(null,!0)]}}),Jp(As.prototype,{toJSON:{name:"toJSON",j:[Mp(null,!0)]}}),Jp(Ns.prototype,{toJSON:{name:"toJSON",j:[Mp(null,!0)]}}),Jp(Tl.prototype,{toJSON:{name:"toJSON",j:[Mp(null,!0)]}}),Jp(wl.prototype,{Rc:{name:"resolveSignIn",j:[zp()]}}),Jp(Ol.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[zp(),Mp("displayName",!0)]},bd:{name:"unenroll",j:[Xp({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Qp},Mp(),"multiFactorInfoIdentifier")]}}),Jp(Rp.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Zp(Zi,"parseLink",ao,[Mp("link")]),Zp(gp,"assertion",(function(t){return new Pl(t)}),[Wp("phone")]),function(){if("undefined"===typeof l.Z||!l.Z.INTERNAL||!l.Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:qi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Vi,VERIFY_AND_CHANGE_EMAIL:Bi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Hf,AuthCredential:zo,Error:x};Zp(t,"EmailAuthProvider",fs,[]),Zp(t,"FacebookAuthProvider",ns,[]),Zp(t,"GithubAuthProvider",is,[]),Zp(t,"GoogleAuthProvider",ss,[]),Zp(t,"TwitterAuthProvider",us,[]),Zp(t,"OAuthProvider",es,[Mp("providerId")]),Zp(t,"SAMLAuthProvider",ts,[Mp("providerId")]),Zp(t,"PhoneAuthProvider",ms,[Bp()]),Zp(t,"RecaptchaVerifier",Rp,[Xp(Mp(),qp(),"recaptchaContainer"),Fp("recaptchaParameters",!0),Hp()]),Zp(t,"ActionCodeURL",Zi,[]),Zp(t,"PhoneMultiFactorGenerator",gp,[]),l.Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return t=t.getProvider("app").getImmediate(),new Hf(t)},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),l.Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return t=t.getProvider("auth").getImmediate(),{getUid:S(t.getUid,t),getToken:S(t.nc,t),addAuthTokenListener:S(t.cc,t),removeAuthTokenListener:S(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),l.Z.registerVersion("@firebase/auth","0.16.4"),l.Z.INTERNAL.extendNamespace({User:Gl})}()}).apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});n(598);var f=n(2864),p=n(3836),d=function(t,e){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},d(t,e)};function v(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function y(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var g,m="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},b=b||{},_=m||self;function w(){}function I(t){var e=typeof t;return e="object"!=e?e:t?Array.isArray(t)?"array":e:"null","array"==e||"object"==e&&"number"==typeof t.length}function E(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function T(t){return Object.prototype.hasOwnProperty.call(t,S)&&t[S]||(t[S]=++C)}var S="closure_uid_"+(1e9*Math.random()>>>0),C=0;function k(t,e,n){return t.call.apply(t.bind,arguments)}function N(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function A(t,e,n){return A=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?k:N,A.apply(null,arguments)}function P(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function x(){return Date.now()}function O(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function R(){this.j=this.j,this.i=this.i}var D=0;R.prototype.j=!1,R.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0!=D))T(this)},R.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var L=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},M=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function j(t){t:{for(var e=Xn,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}function F(t){return Array.prototype.concat.apply([],arguments)}function U(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function V(t){return/^[\s\xa0]*$/.test(t)}var q,B=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function H(t,e){return-1!=t.indexOf(e)}function W(t,e){return t<e?-1:t>e?1:0}t:{var z=_.navigator;if(z){var G=z.userAgent;if(G){q=G;break t}}q=""}function K(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Q(t){var e={};for(var n in t)e[n]=t[n];return e}var Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(var o=0;o<Y.length;o++)n=Y[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function J(t){return J[" "](t),t}function $(t,e){var n=lt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}J[" "]=w;var Z,tt=H(q,"Opera"),et=H(q,"Trident")||H(q,"MSIE"),nt=H(q,"Edge"),rt=nt||et,it=H(q,"Gecko")&&!(H(q.toLowerCase(),"webkit")&&!H(q,"Edge"))&&!(H(q,"Trident")||H(q,"MSIE"))&&!H(q,"Edge"),ot=H(q.toLowerCase(),"webkit")&&!H(q,"Edge");function st(){var t=_.document;return t?t.documentMode:void 0}t:{var at="",ut=function(){var t=q;return it?/rv:([^\);]+)(\)|;)/.exec(t):nt?/Edge\/([\d\.]+)/.exec(t):et?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):ot?/WebKit\/(\S+)/.exec(t):tt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(ut&&(at=ut?ut[1]:""),et){var ct=st();if(null!=ct&&ct>parseFloat(at)){Z=String(ct);break t}}Z=at}var ht,lt={};function ft(t){return $(t,(function(){for(var e=0,n=B(String(Z)).split("."),r=B(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=W(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||W(0==s[2].length,0==a[2].length)||W(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(_.document&&et){var pt=st();ht=pt||(parseInt(Z,10)||void 0)}else ht=void 0;var dt=ht,vt=!et||9<=Number(dt),yt=et&&!ft("9"),gt=function(){if(!_.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{_.addEventListener("test",w,e),_.removeEventListener("test",w,e)}catch(n){}return t}();function mt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function bt(t,e){if(mt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(it){t:{try{J(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:_t[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}mt.prototype.b=function(){this.defaultPrevented=!0},O(bt,mt);var _t={2:"touch",3:"pen",4:"mouse"};bt.prototype.b=function(){bt.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,yt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var wt="closure_listenable_"+(1e6*Math.random()|0),It=0;function Et(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++It,this.Y=this.Z=!1}function Tt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function St(t){this.src=t,this.a={},this.b=0}function Ct(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=L(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Tt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function kt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}St.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var s=kt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):(e=new Et(e,this.src,o,!!r,i),e.Z=n,t.push(e)),e};var Nt="closure_lm_"+(1e6*Math.random()|0),At={};function Pt(t,e,n,r,i){if(r&&r.once)return Rt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Pt(t,e[o],n,r,i);return null}return n=qt(n),t&&t[wt]?t.va(e,n,E(r)?!!r.capture:!!r,i):xt(t,e,n,!1,r,i)}function xt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=E(i)?!!i.capture:!!i;if(s&&!vt)return null;var a=Ut(t);if(a||(t[Nt]=a=new St(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=Ot(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)gt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Mt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ot(){var t=Ft,e=vt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function Rt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Rt(t,e[o],n,r,i);return null}return n=qt(n),t&&t[wt]?t.wa(e,n,E(r)?!!r.capture:!!r,i):xt(t,e,n,!0,r,i)}function Dt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Dt(t,e[o],n,r,i);else r=E(r)?!!r.capture:!!r,n=qt(n),t&&t[wt]?(t=t.c,e=String(e).toString(),e in t.a&&(o=t.a[e],n=kt(o,n,r,i),-1<n&&(Tt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Ut(t))&&(e=t.a[e.toString()],t=-1,e&&(t=kt(e,n,r,i)),(n=-1<t?e[t]:null)&&Lt(n))}function Lt(t){if("number"!==typeof t&&t&&!t.Y){var e=t.src;if(e&&e[wt])Ct(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Mt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ut(e))?(Ct(n,t),0==n.b&&(n.src=null,e[Nt]=null)):Tt(t)}}}function Mt(t){return t in At?At[t]:At[t]="on"+t}function jt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Lt(t),n.call(r,e)}function Ft(t,e){if(t.Y)return!0;if(!vt){if(!e)t:{e=["window","event"];for(var n=_,r=0;r<e.length;r++)if(n=n[e[r]],null==n){e=null;break t}e=n}return e=new bt(e,this),jt(t,e)}return jt(t,new bt(e,this))}function Ut(t){return t=t[Nt],t instanceof St?t:null}var Vt="__closure_events_fn_"+(1e9*Math.random()>>>0);function qt(t){return"function"===typeof t?t:(t[Vt]||(t[Vt]=function(e){return t.handleEvent(e)}),t[Vt])}function Bt(){R.call(this),this.c=new St(this),this.J=this,this.C=null}function Ht(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"===typeof e)e=new mt(e,t);else if(e instanceof mt)e.target=e.target||t;else{var i=e;e=new mt(r,t),X(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Wt(s,r,!0,e)&&i}if(s=e.a=t,i=Wt(s,r,!0,e)&&i,i=Wt(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.a=n[o],i=Wt(s,r,!1,e)&&i}function Wt(t,e,n,r){if(e=t.c.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Ct(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}O(Bt,R),Bt.prototype[wt]=!0,g=Bt.prototype,g.addEventListener=function(t,e,n,r){Pt(this,t,e,n,r)},g.removeEventListener=function(t,e,n,r){Dt(this,t,e,n,r)},g.G=function(){if(Bt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Tt(n[r]);delete e.a[t],e.b--}}this.C=null},g.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},g.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var zt=_.JSON.stringify;function Gt(){this.b=this.a=null}var Kt,Qt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Xt}),(function(t){t.reset()}));function Yt(){var t=ee,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Xt(){this.next=this.b=this.a=null}function Jt(t){_.setTimeout((function(){throw t}),0)}function $t(t,e){Kt||Zt(),te||(Kt(),te=!0),ee.add(t,e)}function Zt(){var t=_.Promise.resolve(void 0);Kt=function(){t.then(ne)}}Gt.prototype.add=function(t,e){var n=Qt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Xt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Xt.prototype.reset=function(){this.next=this.b=this.a=null};var te=!1,ee=new Gt;function ne(){for(var t;t=Yt();){try{t.a.call(t.b)}catch(n){Jt(n)}var e=Qt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}te=!1}function re(t,e){Bt.call(this),this.b=t||1,this.a=e||_,this.f=A(this.Za,this),this.g=x()}function ie(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function oe(t,e,n){if("function"===typeof t)n&&(t=A(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=A(t.handleEvent,t)}return 2147483647<Number(e)?-1:_.setTimeout(t,e||0)}function se(t){t.a=oe((function(){t.a=null,t.c&&(t.c=!1,se(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}O(re,Bt),g=re.prototype,g.aa=!1,g.M=null,g.Za=function(){if(this.aa){var t=x()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ht(this,"tick"),this.aa&&(ie(this),this.start()))}},g.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=x())},g.G=function(){re.X.G.call(this),ie(this),delete this.a};var ae=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return v(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:se(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(_.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(R);function ue(t){R.call(this),this.b=t,this.a={}}O(ue,R);var ce=[];function he(t,e,n,r){Array.isArray(n)||(n&&(ce[0]=n.toString()),n=ce);for(var i=0;i<n.length;i++){var o=Pt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function le(t){K(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Lt(t)}),t),t.a={}}function fe(){this.a=!0}function pe(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");s=2<=l.length&&"type"==l[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}function de(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}function ve(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+ge(t,n)+(r?" "+r:"")}))}function ye(t,e){t.info((function(){return"TIMEOUT: "+e}))}function ge(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return zt(n)}catch(a){return e}}ue.prototype.G=function(){ue.X.G.call(this),le(this)},ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fe.prototype.info=function(){};var me={},be=null;function _e(){return be=be||new Bt}function we(t){mt.call(this,me.Fa,t)}function Ie(t){var e=_e();Ht(e,new we(e,t))}function Ee(t,e){mt.call(this,me.STAT_EVENT,t),this.stat=e}function Te(t){var e=_e();Ht(e,new Ee(e,t))}function Se(t){mt.call(this,me.Ga,t)}function Ce(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return _.setTimeout((function(){t()}),e)}me.Fa="serverreachability",O(we,mt),me.STAT_EVENT="statevent",O(Ee,mt),me.Ga="timingevent",O(Se,mt);var ke={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ne={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ae(){}function Pe(t){var e;return(e=t.a)||(e=t.a={}),e}function xe(){}Ae.prototype.a=null;var Oe,Re={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function De(){mt.call(this,"d")}function Le(){mt.call(this,"c")}function Me(){}function je(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ue(this),this.P=Fe,t=rt?125:void 0,this.R=new re(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}O(De,mt),O(Le,mt),O(Me,Ae),Oe=new Me;var Fe=45e3,Ue={},Ve={};function qe(t,e,n){t.H=1,t.i=fn(sn(e)),t.j=n,t.I=!0,Be(t,null)}function Be(t,e){t.u=x(),ze(t),t.l=sn(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),kn(n.b,"t",r),t.D=0,t.a=Cr(t.g,t.g.C?e:null),0<t.O&&(t.F=new ae(A(t.Ca,t,t.a),t.O)),he(t.J,t.a,"readystatechange",t.Xa),e=t.B?Q(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ie(1),pe(t.c,t.m,t.l,t.f,t.S,t.j)}function He(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=We(t,n);if(i==Ve){4==e&&(t.h=4,Te(14),r=!1),ve(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ue){t.h=4,Te(15),ve(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ve(t.c,t.f,i,null),Xe(t,i)}4==e&&0==n.length&&(t.h=1,Te(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,e=t.g,e.a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),mr(e),e.F=!0,Te(11))):(ve(t.c,t.f,n,"[Invalid Chunked Response]"),Ye(t),Qe(t))}function We(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Ve:(n=Number(e.substring(n,r)),isNaN(n)?Ue:(r+=1,r+n>e.length?Ve:(e=e.substr(r,n),t.D=r+n,e)))}function ze(t){t.T=x()+t.P,Ge(t,t.P)}function Ge(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ce(A(t.Va,t),e)}function Ke(t){t.o&&(_.clearTimeout(t.o),t.o=null)}function Qe(t){0==t.g.v||t.A||wr(t.g,t)}function Ye(t){Ke(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,ie(t.R),le(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Xe(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Ln(n.b,t)))if(n.I=t.N,!t.C&&Ln(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Sp){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;_r(n),ur(n)}gr(n),Te(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Ce(A(n.Sa,n),6e3));if(1>=Dn(n.b)&&n.ea){try{n.ea()}catch(Sp){}n.ea=void 0}}else Er(n,11)}else if((t.C||n.a==t)&&_r(n),!V(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"===typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=u.b;!l.a&&(H(h,"spdy")||H(h,"quic")||H(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(Mn(l,l.b),l.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,ln(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=x()-t.u,n.c.info("Handshake RTT: "+n.N+"ms")),u=n;var p=t;if(u.la=Sr(u,u.C?u.ga:null,u.fa),p.C){jn(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Ke(d),ze(d)),u.a=p}else yr(u);0<n.g.length&&lr(n)}else"stop"!=i[0]&&"close"!=i[0]||Er(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Er(n,7):ar(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Ie(4)}catch(Sp){}}function Je(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"===typeof t)return t.split("");if(I(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function $e(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(I(t)||"string"===typeof t)M(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(I(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=Je(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ze(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ze)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function tn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];en(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],en(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function en(t,e){return Object.prototype.hasOwnProperty.call(t,e)}g=je.prototype,g.setTimeout=function(t){this.P=t},g.Xa=function(t){t=t.target;var e=this.F;e&&3==nr(t)?e.f():this.Ca(t)},g.Ca=function(t){try{if(t==this.a)t:{var e=nr(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!rt&&!this.a.$())){this.A||4!=e||7==n||Ie(8==n||0>=r?3:2),Ke(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,de(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Te(12),Ye(this),Qe(this);break t}ve(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Xe(this,u)}this.I?(He(this,e,o),rt&&this.b&&3==e&&(he(this.J,this.R,"tick",this.Wa),this.R.start())):(ve(this.c,this.f,o,null),Xe(this,o)),4==e&&Ye(this),this.b&&!this.A&&(4==e?wr(this.g,this):(this.b=!1,ze(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Te(12)):(this.h=0,Te(13)),Ye(this),Qe(this)}}}catch(c){}},g.Wa=function(){if(this.a){var t=nr(this.a),e=this.a.$();this.D<e.length&&(Ke(this),He(this,t,e),this.b&&4!=t&&ze(this))}},g.cancel=function(){this.A=!0,Ye(this)},g.Va=function(){this.o=null;var t=x();0<=t-this.T?(ye(this.c,this.l),2!=this.H&&(Ie(3),Te(17)),Ye(this),this.h=2,Qe(this)):Ge(this,this.T-t)},g=Ze.prototype,g.K=function(){tn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},g.L=function(){return tn(this),this.a.concat()},g.get=function(t,e){return en(this.b,t)?this.b[t]:e},g.set=function(t,e){en(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},g.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var nn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function rn(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function on(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof on){this.a=void 0!==e?e:t.a,an(this,t.f),this.j=t.j,un(this,t.c),cn(this,t.h),this.g=t.g,e=t.b;var n=new En;n.c=e.c,e.a&&(n.a=new Ze(e.a),n.b=e.b),hn(this,n),this.i=t.i}else t&&(n=String(t).match(nn))?(this.a=!!e,an(this,n[1]||"",!0),this.j=vn(n[2]||""),un(this,n[3]||"",!0),cn(this,n[4]),this.g=vn(n[5]||"",!0),hn(this,n[6]||"",!0),this.i=vn(n[7]||"")):(this.a=!!e,this.b=new En(null,this.a))}function sn(t){return new on(t)}function an(t,e,n){t.f=n?vn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function un(t,e,n){t.c=n?vn(e,!0):e}function cn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function hn(t,e,n){e instanceof En?(t.b=e,An(t.b,t.a)):(n||(e=yn(e,wn)),t.b=new En(e,t.a))}function ln(t,e,n){t.b.set(e,n)}function fn(t){return ln(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^x()).toString(36)),t}function pn(t){return t instanceof on?sn(t):new on(t,void 0)}function dn(t,e,n,r){var i=new on(null,void 0);return t&&an(i,t),e&&un(i,e),n&&cn(i,n),r&&(i.g=r),i}function vn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function yn(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,gn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function gn(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}on.prototype.toString=function(){var t=[],e=this.f;e&&t.push(yn(e,mn,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(yn(e,mn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.h,null!=n&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(yn(n,"/"==n.charAt(0)?_n:bn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",yn(n,In)),t.join("")};var mn=/[#\/\?@]/g,bn=/[#\?:]/g,_n=/[#\?]/g,wn=/[#\?@]/g,In=/#/g;function En(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Tn(t){t.a||(t.a=new Ze,t.b=0,t.c&&rn(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Sn(t,e){Tn(t),e=Nn(t,e),en(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,en(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&tn(t)))}function Cn(t,e){return Tn(t),e=Nn(t,e),en(t.a.b,e)}function kn(t,e,n){Sn(t,e),0<n.length&&(t.c=null,t.a.set(Nn(t,e),U(n)),t.b+=n.length)}function Nn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function An(t,e){e&&!t.f&&(Tn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Sn(this,e),kn(this,n,t))}),t)),t.f=e}g=En.prototype,g.add=function(t,e){Tn(this),this.c=null,t=Nn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},g.forEach=function(t,e){Tn(this),this.a.forEach((function(n,r){M(n,(function(n){t.call(e,n,r,this)}),this)}),this)},g.L=function(){Tn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},g.K=function(t){Tn(this);var e=[];if("string"===typeof t)Cn(this,t)&&(e=F(e,this.a.get(Nn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=F(e,t[n])}return e},g.set=function(t,e){return Tn(this),this.c=null,t=Nn(this,t),Cn(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},g.get=function(t,e){return t?(t=this.K(t),0<t.length?String(t[0]):e):e},g.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Pn=function(){function t(t,e){this.b=t,this.a=e}return t}();function xn(t){this.g=t||On,_.PerformanceNavigationTiming?(t=_.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(_.ia&&_.ia.ya&&_.ia.ya()&&_.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var On=10;function Rn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Dn(t){return t.b?1:t.a?t.a.size:0}function Ln(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Mn(t,e){t.a?t.a.add(e):t.b=e}function jn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Fn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=y(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return U(t.c)}function Un(){}function Vn(){this.a=new Un}function qn(t,e,n){var r=n||"";try{$e(t,(function(t,n){var i=t;E(t)&&(i=zt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Bn(t,e){var n=new fe;if(_.Image){var r=new Image;r.onload=P(Hn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=P(Hn,n,r,"TestLoadImage: error",!1,e),r.onabort=P(Hn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=P(Hn,n,r,"TestLoadImage: timeout",!1,e),_.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}function Hn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}xn.prototype.cancel=function(){var t,e;if(this.c=Fn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=y(this.a.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Un.prototype.stringify=function(t){return _.JSON.stringify(t,void 0)},Un.prototype.parse=function(t){return _.JSON.parse(t,void 0)};var Wn=_.JSON.parse;function zn(t){Bt.call(this),this.headers=new Ze,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Gn,this.D=this.F=!1}O(zn,Bt);var Gn="",Kn=/^https?$/i,Qn=["POST","PUT"];function Yn(t){return et&&ft(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function Xn(t){return"content-type"==t.toLowerCase()}function Jn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,$n(t),tr(t)}function $n(t){t.u||(t.u=!0,Ht(t,"complete"),Ht(t,"error"))}function Zn(t){if(t.b&&"undefined"!=typeof b&&(!t.s[1]||4!=nr(t)||2!=t.W()))if(t.l&&4==nr(t))oe(t.za,0,t);else if(Ht(t,"readystatechange"),4==nr(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(nn)[1]||null;if(!o&&_.self&&_.self.location){var s=_.self.location.protocol;o=s.substr(0,s.length-1)}i=!Kn.test(o?o.toLowerCase():"")}e=i}var a=e;if(a)Ht(t,"complete"),Ht(t,"success");else{t.h=6;try{var u=2<nr(t)?t.a.statusText:""}catch(n){u=""}t.f=u+" ["+t.W()+"]",$n(t)}}finally{tr(t)}}}function tr(t,e){if(t.a){er(t);var n=t.a,r=t.s[0]?w:null;t.a=null,t.s=null,e||Ht(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function er(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(_.clearTimeout(t.m),t.m=null)}function nr(t){return t.a?t.a.readyState:0}function rr(t){var e="";return K(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function ir(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=rr(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):ln(t,e,n))}function or(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function sr(t){this.pa=0,this.g=[],this.c=new fe,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=or("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=or("baseRetryDelayMs",5e3,t),this.Ra=or("retryDelaySeedMs",1e4,t),this.Ma=or("forwardChannelMaxRetries",2,t),this.ma=or("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new xn(t&&t.concurrentRequestLimit),this.ka=new Vn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function ar(t){if(cr(t),3==t.v){var e=t.R++,n=sn(t.B);ln(n,"SID",t.J),ln(n,"RID",e),ln(n,"TYPE","terminate"),dr(t,n),e=new je(t,t.c,e,void 0),e.H=2,e.i=fn(sn(n)),n=!1,_.navigator&&_.navigator.sendBeacon&&(n=_.navigator.sendBeacon(e.i.toString(),"")),!n&&_.Image&&((new Image).src=e.i,n=!0),n||(e.a=Cr(e.g,null),e.a.ba(e.i)),e.u=x(),ze(e)}Tr(t)}function ur(t){t.a&&(mr(t),t.a.cancel(),t.a=null)}function cr(t){ur(t),t.j&&(_.clearTimeout(t.j),t.j=null),_r(t),t.b.cancel(),t.h&&("number"===typeof t.h&&_.clearTimeout(t.h),t.h=null)}function hr(t,e){t.g.push(new Pn(t.Oa++,e)),3==t.v&&lr(t)}function lr(t){Rn(t.b)||t.h||(t.h=!0,$t(t.Ba,t),t.u=0)}function fr(t,e){return!(Dn(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.g=e.s.concat(t.g),!0):!(1==t.v||2==t.v||t.u>=(t.La?0:t.Ma))&&(t.h=Ce(A(t.Ba,t,e),Ir(t,t.u)),t.u++,!0))}function pr(t,e){var n;n=e?e.f:t.R++;var r=sn(t.B);ln(r,"SID",t.J),ln(r,"RID",n),ln(r,"AID",t.P),dr(t,r),t.i&&t.l&&ir(r,t.i,t.l),n=new je(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=vr(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Mn(t.b,n),qe(n,r,e)}function dr(t,e){t.f&&$e({},(function(t,n){ln(e,n,t)}))}function vr(t,e,n){n=Math.min(t.g.length,n);var r=t.f?A(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(c-=o,0>c)o=Math.max(0,i[u].b-100),a=!1;else try{qn(h,s,"req"+c+"_")}catch(vi){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function yr(t){t.a||t.j||(t.T=1,$t(t.Aa,t),t.o=0)}function gr(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=Ce(A(t.Aa,t),Ir(t,t.o)),t.o++,!0)}function mr(t){null!=t.s&&(_.clearTimeout(t.s),t.s=null)}function br(t){t.a=new je(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=sn(t.la);ln(e,"RID","rpc"),ln(e,"SID",t.J),ln(e,"CI",t.H?"0":"1"),ln(e,"AID",t.P),dr(t,e),ln(e,"TYPE","xmlhttp"),t.i&&t.l&&ir(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=fn(sn(e)),n.j=null,n.I=!0,Be(n,t)}function _r(t){null!=t.m&&(_.clearTimeout(t.m),t.m=null)}function wr(t,e){var n=null;if(t.a==e){_r(t),mr(t),t.a=null;var r=2}else{if(!Ln(t.b,e))return;n=e.s,jn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=x()-e.u;var i=t.u;r=_e(),Ht(r,new Se(r,n,e,i)),lr(t)}else yr(t);else if(i=e.h,3==i||0==i&&0<t.I||!(1==r&&fr(t,e)||2==r&&gr(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Er(t,5);break;case 4:Er(t,10);break;case 3:Er(t,6);break;default:Er(t,2)}}function Ir(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Er(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=A(t.Ya,t);n||(n=new on("//www.google.com/images/cleardot.gif"),_.location&&"http"==_.location.protocol||an(n,"https"),fn(n)),Bn(n.toString(),r)}else Te(2);t.v=0,t.f&&t.f.ra(e),Tr(t),cr(t)}function Tr(t){t.v=0,t.I=-1,t.f&&(0==Fn(t.b).length&&0==t.g.length||(t.b.c.length=0,U(t.g),t.g.length=0),t.f.qa())}function Sr(t,e,n){var r=pn(n);if(""!=r.c)e&&un(r,e+"."+r.c),cn(r,r.h);else{var i=_.location;r=dn(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&K(t.V,(function(t,e){ln(r,e,t)})),e=t.A,n=t.na,e&&n&&ln(r,e,n),ln(r,"VER",t.ha),dr(t,r),r}function Cr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return e=new zn(t.Na),e.F=t.C,e}function kr(){}function Nr(){if(et&&!(10<=Number(dt)))throw Error("Environmental error: no available transport.")}function Ar(t,e){Bt.call(this),this.a=new sr(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!V(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!V(e)&&(this.a.A=e,t=this.b,null!==t&&e in t&&(t=this.b,e in t&&delete t[e])),this.f=new Or(this)}function Pr(t){De.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function xr(){Le.call(this),this.status=1}function Or(t){this.a=t}g=zn.prototype,g.ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Pe(this.H):Pe(Oe),this.a.onreadystatechange=A(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Jn(this,o)}t=n||"";var i=new Ze(this.headers);r&&$e(r,(function(t,e){i.set(e,t)})),r=j(i.L()),n=_.FormData&&t instanceof _.FormData,!(0<=L(Qn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{er(this),0<this.o&&((this.D=Yn(this.a))?(this.a.timeout=this.o,this.a.ontimeout=A(this.xa,this)):this.m=oe(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Jn(this,o)}},g.xa=function(){"undefined"!=typeof b&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ht(this,"timeout"),this.abort(8))},g.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ht(this,"complete"),Ht(this,"abort"),tr(this))},g.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),tr(this,!0)),zn.X.G.call(this)},g.za=function(){this.j||(this.A||this.l||this.g?Zn(this):this.Ua())},g.Ua=function(){Zn(this)},g.W=function(){try{return 2<nr(this)?this.a.status:-1}catch(t){return-1}},g.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},g.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Wn(e)}},g.ua=function(){return this.h},g.Qa=function(){return"string"===typeof this.f?this.f:String(this.f)},g=sr.prototype,g.ha=8,g.v=1,g.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new je(this,this.c,t,void 0),r=this.l;if(this.O&&(r?(r=Q(r),X(r,this.O)):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(o="__data__"in o.a&&(o=o.a.__data__,"string"===typeof o)?o.length:void 0,void 0===o)break;if(e+=o,4096<e){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=vr(this,n,e),i=sn(this.B),ln(i,"RID",t),ln(i,"CVER",22),this.A&&ln(i,"X-HTTP-Session-Id",this.A),dr(this,i),this.i&&r&&ir(i,this.i,r),Mn(this.b,n),this.Ia&&ln(i,"TYPE","init"),this.da?(ln(i,"$req",e),ln(i,"SID","null"),n.U=!0,qe(n,i,null)):qe(n,i,e),this.v=2}}else 3==this.v&&(t?pr(this,t):0==this.g.length||Rn(this.b)||pr(this))},g.Aa=function(){if(this.j=null,br(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Ce(A(this.Ta,this),t)}},g.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Te(10),ur(this),br(this))},g.Sa=function(){null!=this.m&&(this.m=null,ur(this),gr(this),Te(19))},g.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Te(2)):(this.c.info("Failed to ping google.com"),Te(1))},g=kr.prototype,g.ta=function(){},g.sa=function(){},g.ra=function(){},g.qa=function(){},g.Ja=function(){},Nr.prototype.a=function(t,e){return new Ar(t,e)},O(Ar,Bt),Ar.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Te(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Sr(t,null,t.fa),lr(t)},Ar.prototype.close=function(){ar(this.a)},Ar.prototype.h=function(t){if("string"===typeof t){var e={};e.__data__=t,hr(this.a,e)}else this.l?(e={},e.__data__=zt(t),hr(this.a,e)):hr(this.a,t)},Ar.prototype.G=function(){this.a.f=null,delete this.f,ar(this.a),delete this.a,Ar.X.G.call(this)},O(Pr,De),O(xr,Le),O(Or,kr),Or.prototype.ta=function(){Ht(this.a,"a")},Or.prototype.sa=function(t){Ht(this.a,new Pr(t))},Or.prototype.ra=function(t){Ht(this.a,new xr(t))},Or.prototype.qa=function(){Ht(this.a,"b")},Nr.prototype.createWebChannel=Nr.prototype.a,Ar.prototype.send=Ar.prototype.h,Ar.prototype.open=Ar.prototype.g,Ar.prototype.close=Ar.prototype.close,ke.NO_ERROR=0,ke.TIMEOUT=8,ke.HTTP_ERROR=6,Ne.COMPLETE="complete",xe.EventType=Re,Re.OPEN="a",Re.CLOSE="b",Re.ERROR="c",Re.MESSAGE="d",Bt.prototype.listen=Bt.prototype.va,zn.prototype.listenOnce=zn.prototype.wa,zn.prototype.getLastError=zn.prototype.Qa,zn.prototype.getLastErrorCode=zn.prototype.ua,zn.prototype.getStatus=zn.prototype.W,zn.prototype.getResponseJson=zn.prototype.Pa,zn.prototype.getResponseText=zn.prototype.$,zn.prototype.send=zn.prototype.ba;var Rr=function(){return new Nr},Dr=function(){return _e()},Lr=ke,Mr=Ne,jr=me,Fr={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},Ur=xe,Vr=zn,qr=(n(2801),n(2262),n(4506),function(t,e){return qr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},qr(t,e)});function Br(t,e){function n(){this.constructor=t}qr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Hr(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Wr(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function zr(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Gr=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},Kr=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Qr=new f.Yd("@firebase/firestore");function Yr(){return Qr.logLevel}function Xr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Qr.logLevel<=f["in"].DEBUG){var r=e.map(Zr);Qr.debug.apply(Qr,zr(["Firestore (8.2.9): "+t],r))}}function Jr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Qr.logLevel<=f["in"].ERROR){var r=e.map(Zr);Qr.error.apply(Qr,zr(["Firestore (8.2.9): "+t],r))}}function $r(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Qr.logLevel<=f["in"].WARN){var r=e.map(Zr);Qr.warn.apply(Qr,zr(["Firestore (8.2.9): "+t],r))}}function Zr(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.9) INTERNAL ASSERTION FAILED: "+t;throw Jr(e),new Error(e)}function ei(t,e){t||ti()}function ni(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ii=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=ri(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function oi(t,e){return t<e?-1:t>e?1:0}function si(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function ai(t){return t+"\0"}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ui=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.h,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return oi(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();ui.T=new ui("");var ci={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},hi=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Br(e,t),e}(Error),li=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(ui.fromBase64String(e))}catch(e){throw new hi(ci.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(ui.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),fi=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();fi.UNAUTHENTICATED=new fi(null),fi.R=new fi("google-credentials-uid"),fi.P=new fi("first-party-uid");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pi=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},di=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(fi.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),vi=function(){function t(t){var e=this;this.D=null,this.currentUser=fi.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then((function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.N!==e?(Xr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ei("string"==typeof n.accessToken),new pi(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return ei(null===t||"string"==typeof t),new fi(t)},t}(),yi=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=fi.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),gi=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new yi(this.F,this.O))},t.prototype.v=function(t){t(fi.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),mi=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();mi.q=-1;var bi=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new hi(ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new hi(ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new hi(ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new hi(ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?oi(this.nanoseconds,t.nanoseconds):oi(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),_i=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new bi(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),wi=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ti(),void 0===n?n=t.length-e:n>t.length-e&&ti(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return t=void 0===t?1:t,this.J(this.segments,this.offset+t,this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ii=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Br(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new hi(ci.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.ct=function(){return new e([])},e}(wi),Ei=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ti=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Br(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return Ei.test(t)},e.prototype.rt=function(){return this.it().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new hi(ci.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new hi(ci.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new hi(ci.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new hi(ci.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(wi),Si=function(){function t(t){this.path=t}return t._t=function(e){return new t(Ii.ot(e))},t.ft=function(e){return new t(Ii.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ii.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return Ii.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new Ii(e.slice()))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ki(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ni(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ai=function(){function t(t){this.fields=t,t.sort(Ti.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return si(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Pi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t){if(ei(!!t),"string"==typeof t){var e=0,n=Pi.exec(t);if(ei(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Oi(t.seconds),nanos:Oi(t.nanos)}}function Oi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ri(t){return"string"==typeof t?ui.fromBase64String(t):ui.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Li(t){var e=t.mapValue.fields.__previous_value__;return Di(e)?Li(e):e}function Mi(t){var e=xi(t.mapValue.fields.__local_write_time__.timestampValue);return new bi(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(t){return null==t}function Fi(t){return 0===t&&1/t==-1/0}function Ui(t){return"number"==typeof t&&Number.isInteger(t)&&!Fi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Di(t)?4:10:ti()}function qi(t,e){var n=Vi(t);if(n!==Vi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Mi(t).isEqual(Mi(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=xi(t.timestampValue),r=xi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ri(t.bytesValue).isEqual(Ri(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Oi(t.geoPointValue.latitude)===Oi(e.geoPointValue.latitude)&&Oi(t.geoPointValue.longitude)===Oi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Oi(t.integerValue)===Oi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Oi(t.doubleValue),r=Oi(e.doubleValue);return n===r?Fi(n)===Fi(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return si(t.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ci(n)!==Ci(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!qi(n[i],r[i])))return!1;return!0}(t,e);default:return ti()}}function Bi(t,e){return void 0!==(t.values||[]).find((function(t){return qi(t,e)}))}function Hi(t,e){var n=Vi(t),r=Vi(e);if(n!==r)return oi(n,r);switch(n){case 0:return 0;case 1:return oi(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Oi(t.integerValue||t.doubleValue),r=Oi(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Wi(t.timestampValue,e.timestampValue);case 4:return Wi(Mi(t),Mi(e));case 5:return oi(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ri(t),r=Ri(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=oi(n[i],r[i]);if(0!==o)return o}return oi(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=oi(Oi(t.latitude),Oi(e.latitude));return 0!==n?n:oi(Oi(t.longitude),Oi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Hi(n[i],r[i]);if(o)return o}return oi(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=oi(r[s],o[s]);if(0!==a)return a;var u=Hi(n[r[s]],i[o[s]]);if(0!==u)return u}return oi(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ti()}}function Wi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return oi(t,e);var n=xi(t),r=xi(e),i=oi(n.seconds,r.seconds);return 0!==i?i:oi(n.nanos,r.nanos)}function zi(t){return Gi(t)}function Gi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=xi(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ri(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Si.ft(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Gi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Gi(t.fields[o])}return e+"}"}(t.mapValue):ti();var e,n}function Ki(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function Qi(t){return!!t&&"integerValue"in t}function Yi(t){return!!t&&"arrayValue"in t}function Xi(t){return!!t&&"nullValue"in t}function Ji(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $i(t){return!!t&&"mapValue"in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zi=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!$i(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return qi(this.proto,t.proto)},t}(),to=function(){function t(t){void 0===t&&(t=Zi.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Vi(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(Ti.ct(),this.At);return null!=t?new Zi(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=$i(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function eo(t){var e=[];return ki(t.fields||{},(function(t,n){var r=new Ti([t]);if($i(n)){var i=eo(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Ai(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var no=function(t,e){this.key=t,this.version=e},ro=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Br(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(no),io=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Br(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(no),oo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Br(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(no),so=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function ao(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new so(t,e,n,r,i,o,s)}function uo(t){var e=ni(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.rt()+t.op.toString()+zi(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.rt()+t.dir}(t)})).join(","),ji(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Io(e.startAt)),e.endAt&&(n+="|ub:",n+=Io(e.endAt)),e.vt=n}return e.vt}function co(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!To(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!qi(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Co(t.startAt,e.startAt)&&Co(t.endAt,e.endAt)}function ho(t){return Si.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var lo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Br(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new fo(t,n,r):"array-contains"===n?new go(t,r):"in"===n?new mo(t,r):"not-in"===n?new bo(t,r):"array-contains-any"===n?new _o(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new po(t,n):new vo(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(Hi(e,this.value)):null!==e&&Vi(this.value)===Vi(e)&&this.Dt(Hi(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ti()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),fo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Si.ft(r.referenceValue),i}return Br(e,t),e.prototype.matches=function(t){var e=Si.H(t.key,this.key);return this.Dt(e)},e}(lo),po=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=yo("in",n),r}return Br(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(lo),vo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=yo("not-in",n),r}return Br(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(lo);function yo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Si.ft(t.referenceValue)}))}var go=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Br(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Yi(e)&&Bi(e.arrayValue,this.value)},e}(lo),mo=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Br(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Bi(this.value.arrayValue,e)},e}(lo),bo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Br(e,t),e.prototype.matches=function(t){if(Bi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Bi(this.value.arrayValue,e)},e}(lo),_o=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Br(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Yi(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Bi(e.value.arrayValue,t)}))},e}(lo),wo=function(t,e){this.position=t,this.before=e};function Io(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return zi(t)})).join(",")}var Eo=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function To(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function So(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?Si.H(Si.ft(s.referenceValue),n.key):Hi(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Co(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!qi(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ko=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null,this.startAt,this.endAt};function No(t,e,n,r,i,o,s,a){return new ko(t,e,n,r,i,o,s,a)}function Ao(t){return new ko(t)}function Po(t){return!ji(t.limit)&&"F"===t.limitType}function xo(t){return!ji(t.limit)&&"L"===t.limitType}function Oo(t){return t.xt.length>0?t.xt[0].field:null}function Ro(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function Do(t){return null!==t.collectionGroup}function Lo(t){var e=ni(t);if(null===e.Nt){e.Nt=[];var n=Ro(e),r=Oo(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new Eo(n)),e.Nt.push(new Eo(Ti.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var a=s[o];e.Nt.push(a),a.field.ut()&&(i=!0)}if(!i){var u=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new Eo(Ti.ht(),u))}}}return e.Nt}function Mo(t){var e=ni(t);if(!e.$t)if("F"===e.limitType)e.$t=ao(e.path,e.collectionGroup,Lo(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Lo(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Eo(o.field,s))}var a=e.endAt?new wo(e.endAt.position,!e.endAt.before):null,u=e.startAt?new wo(e.startAt.position,!e.startAt.before):null;e.$t=ao(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.$t}function jo(t,e,n){return new ko(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fo(t,e){return co(Mo(t),Mo(e))&&t.limitType===e.limitType}function Uo(t){return uo(Mo(t))+"|lt:"+t.limitType}function Vo(t){return"Query(target="+function(t){var e=t.path.rt();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.rt()+" "+e.op+" "+zi(e.value);var e})).join(", ")+"]"),ji(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.rt()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Io(t.startAt)),t.endAt&&(e+=", endAt: "+Io(t.endAt)),"Target("+e+")"}(Mo(t))+"; limitType="+t.limitType+")"}function qo(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.dt(t.collectionGroup)&&t.path.nt(n):Si.wt(t.path)?t.path.isEqual(n):t.path.st(n)}(t,e)&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!So(t.startAt,Lo(t),e))&&(!t.endAt||!So(t.endAt,Lo(t),e))}(t,e)}function Bo(t){return function(e,n){for(var r=!1,i=0,o=Lo(t);i<o.length;i++){var s=o[i],a=Ho(s,e,n);if(0!==a)return a;r=r||s.field.ut()}return 0}}function Ho(t,e,n){var r=t.field.ut()?Si.H(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Hi(r,i):ti()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ti()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wo=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=_i.min()),void 0===o&&(o=_i.min()),void 0===s&&(s=ui.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fi(e)?"-0":e}}function Go(t){return{integerValue:""+t}}function Ko(t,e){return Ui(e)?Go(e):zo(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qo=function(){this.qt=void 0};function Yo(t,e,n){return t instanceof $o?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Zo?ts(t,e):t instanceof es?ns(t,e):function(t,e){var n=Jo(t,e),r=is(n)+is(t.Ut);return Qi(n)&&Qi(t.Ut)?Go(r):zo(t.Qt,r)}(t,e)}function Xo(t,e,n){return t instanceof Zo?ts(t,e):t instanceof es?ns(t,e):n}function Jo(t,e){return t instanceof rs?Qi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var $o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Br(e,t),e}(Qo),Zo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Br(e,t),e}(Qo);function ts(t,e){for(var n=os(e),r=function(t){n.some((function(e){return qi(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var es=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Br(e,t),e}(Qo);function ns(t,e){for(var n=os(e),r=function(t){n=n.filter((function(e){return!qi(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var rs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return Br(e,t),e}(Qo);function is(t){return Oi(t.integerValue||t.doubleValue)}function os(t){return Yi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ss=function(t,e){this.field=t,this.transform=e},as=function(t,e){this.version=t,this.transformResults=e},us=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function cs(t,e){return void 0!==t.updateTime?e instanceof ro&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof ro}var hs=function(){};function ls(t,e,n){return t instanceof ys?function(t,e,n){var r=t.value;if(n.transformResults){var i=bs(t.fieldTransforms,e,n.transformResults);r=ws(t.fieldTransforms,r,i)}return new ro(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof gs?function(t,e,n){if(!cs(t.jt,e))return new oo(t.key,n.version);var r=ms(t,e,n.transformResults?bs(t.fieldTransforms,e,n.transformResults):[]);return new ro(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new io(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function fs(t,e,n){return t instanceof ys?function(t,e,n){if(!cs(t.jt,e))return e;var r=t.value,i=_s(t.fieldTransforms,n,e);r=ws(t.fieldTransforms,r,i);var o=vs(e);return new ro(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof gs?function(t,e,n){if(!cs(t.jt,e))return e;var r=vs(e),i=ms(t,e,_s(t.fieldTransforms,n,e));return new ro(t.key,r,i,{Vt:!0})}(t,e,n):function(t,e){return cs(t.jt,e)?new io(t.key,_i.min()):e}(t,e)}function ps(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof ro?e.field(o.field):void 0,a=Jo(o.transform,s||null);null!=a&&(n=null==n?(new to).set(o.field,a):n.set(o.field,a))}return n?n.Pt():null}(t.fieldTransforms,e)}function ds(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&si(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Zo&&e instanceof Zo||t instanceof es&&e instanceof es?si(t.elements,e.elements,qi):t instanceof rs&&e instanceof rs?qi(t.Ut,e.Ut):t instanceof $o&&e instanceof $o}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt))}function vs(t){return t instanceof ro?t.version:_i.min()}var ys=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return Br(e,t),e}(hs),gs=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return Br(e,t),e}(hs);function ms(t,e,n){var r;return r=function(t,e){var n=new to(e);return t.Gt.fields.forEach((function(e){if(!e.et()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Pt()}(t,r=e instanceof ro?e.data():Zi.empty()),ws(t.fieldTransforms,r,n)}function bs(t,e,n){var r=[];ei(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof ro&&(a=e.field(o.field)),r.push(Xo(s,a,n[i]))}return r}function _s(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof ro&&(u=n.field(s.field)),r.push(Yo(a,u,e))}return r}function ws(t,e,n){for(var r=new to(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Pt()}var Is,Es,Ts=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return Br(e,t),e}(hs),Ss=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return Br(e,t),e}(hs),Cs=function(t){this.count=t};function ks(t){switch(t){case ci.OK:return ti();case ci.CANCELLED:case ci.UNKNOWN:case ci.DEADLINE_EXCEEDED:case ci.RESOURCE_EXHAUSTED:case ci.INTERNAL:case ci.UNAVAILABLE:case ci.UNAUTHENTICATED:return!1;case ci.INVALID_ARGUMENT:case ci.NOT_FOUND:case ci.ALREADY_EXISTS:case ci.PERMISSION_DENIED:case ci.FAILED_PRECONDITION:case ci.ABORTED:case ci.OUT_OF_RANGE:case ci.UNIMPLEMENTED:case ci.DATA_LOSS:return!0;default:return ti()}}function Ns(t){if(void 0===t)return Jr("GRPC error has no .code"),ci.UNKNOWN;switch(t){case Is.OK:return ci.OK;case Is.CANCELLED:return ci.CANCELLED;case Is.UNKNOWN:return ci.UNKNOWN;case Is.DEADLINE_EXCEEDED:return ci.DEADLINE_EXCEEDED;case Is.RESOURCE_EXHAUSTED:return ci.RESOURCE_EXHAUSTED;case Is.INTERNAL:return ci.INTERNAL;case Is.UNAVAILABLE:return ci.UNAVAILABLE;case Is.UNAUTHENTICATED:return ci.UNAUTHENTICATED;case Is.INVALID_ARGUMENT:return ci.INVALID_ARGUMENT;case Is.NOT_FOUND:return ci.NOT_FOUND;case Is.ALREADY_EXISTS:return ci.ALREADY_EXISTS;case Is.PERMISSION_DENIED:return ci.PERMISSION_DENIED;case Is.FAILED_PRECONDITION:return ci.FAILED_PRECONDITION;case Is.ABORTED:return ci.ABORTED;case Is.OUT_OF_RANGE:return ci.OUT_OF_RANGE;case Is.UNIMPLEMENTED:return ci.UNIMPLEMENTED;case Is.DATA_LOSS:return ci.DATA_LOSS;default:return ti()}}(Es=Is||(Is={}))[Es.OK=0]="OK",Es[Es.CANCELLED=1]="CANCELLED",Es[Es.UNKNOWN=2]="UNKNOWN",Es[Es.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Es[Es.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Es[Es.NOT_FOUND=5]="NOT_FOUND",Es[Es.ALREADY_EXISTS=6]="ALREADY_EXISTS",Es[Es.PERMISSION_DENIED=7]="PERMISSION_DENIED",Es[Es.UNAUTHENTICATED=16]="UNAUTHENTICATED",Es[Es.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Es[Es.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Es[Es.ABORTED=10]="ABORTED",Es[Es.OUT_OF_RANGE=11]="OUT_OF_RANGE",Es[Es.UNIMPLEMENTED=12]="UNIMPLEMENTED",Es[Es.INTERNAL=13]="INTERNAL",Es[Es.UNAVAILABLE=14]="UNAVAILABLE",Es[Es.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var As=function(){function t(t,e){this.H=t,this.root=e||xs.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,xs.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,xs.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Xt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new Ps(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new Ps(this.root,t,this.H,!1)},t.prototype.ne=function(){return new Ps(this.root,null,this.H,!0)},t.prototype.se=function(t){return new Ps(this.root,t,this.H,!0)},t}(),Ps=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),xs=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw ti();if(this.right.le())throw ti();var t=this.left.Ie();if(t!==this.right.Ie())throw ti();return t+(this.le()?0:1)},t}();xs.EMPTY=null,xs.RED=!0,xs.Ht=!1,xs.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ti()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ti()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ti()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ti()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ti()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new xs(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Os=function(){function t(t){this.H=t,this.data=new As(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt((function(e,n){return t(e),!1}))},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new Rs(this.data.te())},t.prototype.ee=function(t){return new Rs(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),Rs=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),Ds=new As(Si.H);function Ls(){return Ds}function Ms(){return Ls()}var js=new As(Si.H);function Fs(){return js}var Us=new As(Si.H);function Vs(){return Us}var qs=new Os(Si.H);function Bs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=qs,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Hs=new Os(oi);function Ws(){return Hs}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zs=function(){function t(t){this.H=t?function(e,n){return t(e,n)||Si.H(e.key,n.key)}:function(t,e){return Si.H(t.key,e.key)},this.ge=Fs(),this.Ve=new As(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),Gs=function(){function t(){this.be=new As(Si.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):ti():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt((function(e,n){t.push(n)})),t},t}(),Ks=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}return t.Ne=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,zs.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&Fo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Qs=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,Ys.Le(e,n)),new t(_i.min(),r,Ws(),Ls(),Bs())},t}(),Ys=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(ui.T,n,Bs(),Bs(),Bs())},t}(),Xs=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},Js=function(t,e){this.targetId=t,this.je=e},$s=function(t,e,n,r){void 0===n&&(n=ui.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Zs=function(){function t(){this.Ge=0,this.ze=na(),this.He=ui.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=Bs(),e=Bs(),n=Bs();return this.ze.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ti()}})),new Ys(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=na()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),ta=function(){function t(t){this.un=t,this.hn=new Map,this.ln=Ls(),this._n=ea(),this.fn=new Os(oi)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof ro?this.wn(r,t.We):t.We instanceof io&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.En(r,t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,(function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:ti()}}))},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach((function(t,r){n.An(r)&&e(r)}))},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(ho(i))if(0===n){var o=new Si(i.path);this.En(e,o,new io(o,_i.min()))}else ei(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach((function(r,i){var o=e.yn(i);if(o){if(r.Be&&ho(o.target)){var s=new Si(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new io(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}}));var r=Bs();this._n.forEach((function(t,n){var i=!0;n.Ae((function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Qs(t,n,this.fn,this.ln,r);return this.ln=Ls(),this._n=ea(),this.fn=new Os(oi),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new Zs,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new Os(oi),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||Xr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new Zs),this.un.vn(t).forEach((function(n){e.En(t,n,null)}))},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(){return new As(Si.H)}function na(){return new As(Si.H)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ra={asc:"ASCENDING",desc:"DESCENDING"},ia={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oa=function(t,e){this.t=t,this.Bt=e};function sa(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function aa(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function ua(t,e){return sa(t,e.j())}function ca(t){return ei(!!t),_i.K(function(t){var e=xi(t);return new bi(e.seconds,e.nanos)}(t))}function ha(t,e){return function(t){return new Ii(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).rt()}function la(t){var e=Ii.ot(t);return ei(La(e)),e}function fa(t,e){return ha(t.t,e.path)}function pa(t,e){var n=la(e);if(n.get(1)!==t.t.projectId)throw new hi(ci.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new hi(ci.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new Si(ga(n))}function da(t,e){return ha(t.t,e)}function va(t){var e=la(t);return 4===e.length?Ii.ct():ga(e)}function ya(t){return new Ii(["projects",t.t.projectId,"databases",t.t.database]).rt()}function ga(t){return ei(t.length>4&&"documents"===t.get(4)),t.Y(5)}function ma(t,e,n){return{name:fa(t,e),fields:n.proto.mapValue.fields}}function ba(t,e,n){var r=pa(t,e.name),i=ca(e.updateTime),o=new Zi({mapValue:{fields:e.fields}});return new ro(r,i,o,{hasCommittedMutations:!!n})}function _a(t,e){var n;if(e instanceof ys)n={update:ma(t,e.key,e.value)};else if(e instanceof Ts)n={delete:fa(t,e.key)};else if(e instanceof gs)n={update:ma(t,e.key,e.data),updateMask:Da(e.Gt)};else{if(!(e instanceof Ss))return ti();n={verify:fa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof $o)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof Zo)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof es)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof rs)return{fieldPath:e.field.rt(),increment:n.Ut};throw ti()}(0,t)}))),e.jt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:ua(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ti()}(t,e.jt)),n}function wa(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?us.updateTime(ca(t.updateTime)):void 0!==t.exists?us.exists(t.exists):us.Kt()}(e.currentDocument):us.Kt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)ei("REQUEST_TIME"===e.setToServerValue),n=new $o;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Zo(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new es(i)}else"increment"in e?n=new rs(t,e.increment):ti();var o=Ti.lt(e.fieldPath);return new ss(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=pa(t,e.update.name),o=new Zi({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new Ai(e.map((function(t){return Ti.lt(t)})))}(e.updateMask);return new gs(i,o,s,n,r)}return new ys(i,o,n,r)}if(e.delete){var a=pa(t,e.delete);return new Ts(a,n)}if(e.verify){var u=pa(t,e.verify);return new Ss(u,n)}return ti()}function Ia(t,e){return{documents:[da(t,e.path)]}}function Ea(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=da(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=da(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Ji(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NAN"}};if(Xi(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ji(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NOT_NAN"}};if(Xi(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pa(t.field),op:Aa(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Pa(t.field),direction:Na(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Bt||ji(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Ca(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ca(e.endAt)),n}function Ta(t){var e=va(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ei(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Sa(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Eo(xa(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return ji(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=ka(n.startAt));var h=null;return n.endAt&&(h=ka(n.endAt)),No(e,i,a,s,u,"F",c,h)}function Sa(t){return t?void 0!==t.unaryFilter?[Ra(t)]:void 0!==t.fieldFilter?[Oa(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Sa(t)})).reduce((function(t,e){return t.concat(e)})):ti():[]}function Ca(t){return{before:t.before,values:t.position}}function ka(t){var e=!!t.before,n=t.values||[];return new wo(n,e)}function Na(t){return ra[t]}function Aa(t){return ia[t]}function Pa(t){return{fieldPath:t.rt()}}function xa(t){return Ti.lt(t.fieldPath)}function Oa(t){return lo.create(xa(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ti()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ra(t){switch(t.unaryFilter.op){case"IS_NAN":var e=xa(t.unaryFilter.field);return lo.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=xa(t.unaryFilter.field);return lo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=xa(t.unaryFilter.field);return lo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=xa(t.unaryFilter.field);return lo.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ti()}}function Da(t){var e=[];return t.fields.forEach((function(t){return e.push(t.rt())})),{fieldPaths:e}}function La(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ma=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},ja=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t((function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)}),(function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&ti(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t((function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}}))},t.prototype.On=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Fn=function(e,n){return e?this.kn((function(){return e(n)})):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Mn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Mn(r)},t}(),Fa=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new Ma,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new qa(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=Ga(e.target.error);n.Bn.reject(new qa(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new qa(n,e)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(Xr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Ha(e)},t}(),Ua=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn((0,p.z$)())&&Jr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Xr("SimpleDb","Removing database:",t),Wa(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=(0,p.z$)(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t={NODE_ENV:"production",BASE_URL:"/"})||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return Hr(this,void 0,void 0,(function(){var e,n=this;return Wr(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Xr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new qa(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new hi(ci.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new qa(t,n))},i.onupgradeneeded=function(t){Xr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Un.Jn(e,i.transaction,t.oldVersion,n.version).next((function(){Xr("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}}))}))},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Hr(this,void 0,void 0,(function(){var i,o,s,a,u;return Wr(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,h;return Wr(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,a.Hn(t)];case 2:return a.db=l.sent(),e=Fa.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),ja.reject(t)})).On(),u={},s.catch((function(){})),[4,e.qn];case 3:return[2,(u.value=(l.sent(),s),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,Xr("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),a.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Va=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return Wa(this.Zn.delete())},t}(),qa=function(t){function e(e,n){var r=this;return(r=t.call(this,ci.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Br(e,t),e}(hi);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(t){return"IndexedDbTransactionError"===t.name}var Ha=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Xr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Xr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Wa(n)},t.prototype.add=function(t){return Xr("SimpleDb","ADD",this.store.name,t,t),Wa(this.store.add(t))},t.prototype.get=function(t){var e=this;return Wa(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Xr("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Xr("SimpleDb","DELETE",this.store.name,t),Wa(this.store.delete(t))},t.prototype.count=function(){return Xr("SimpleDb","COUNT",this.store.name),Wa(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.cs=function(t,e){Xr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,(function(t,e,n){return n.delete()}))},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new ja((function(n,r){e.onerror=function(t){var e=Ga(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.os=function(t,e){var n=[];return new ja((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Va(i),s=e(i.primaryKey,i.value,o);if(s instanceof ja){var a=s.catch((function(t){return o.done(),ja.reject(t)}));n.push(a)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}})).next((function(){return ja.Mn(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Wa(t){return new ja((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Ga(t.target.error);n(e)}}))}var za=!1;function Ga(t){var e=Ua.Qn((0,p.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new hi("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return za||(za=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ka=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new Ma,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch((function(t){}))}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout((function(){return e.As()}),t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new hi(ci.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps((function(){return null!==t.Is?(t.clearTimeout(),t.op().then((function(e){return t.Es.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function Qa(t,e){if(Jr("AsyncQueue",e+": "+t),Ba(t))return new hi(ci.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ya="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Xa=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Za(e)),e=$a(t.get(n),e);return Za(e)}function $a(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Za(t){return t+""}function tu(t){var e=t.length;if(ei(e>=2),2===e)return ei(""===t.charAt(0)&&""===t.charAt(1)),Ii.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&ti(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:ti()}o=s+2}return new Ii(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eu=function(t,e){this.seconds=t,this.nanoseconds=e},nu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};nu.store="owner",nu.key="owner";var ru=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ru.store="mutationQueues",ru.keyPath="userId";var iu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};iu.store="mutations",iu.keyPath="batchId",iu.userMutationsIndex="userMutationsIndex",iu.userMutationsKeyPath=["userId","batchId"];var ou=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ja(e)]},t.key=function(t,e,n){return[t,Ja(e),n]},t}();ou.store="documentMutations",ou.PLACEHOLDER=new ou;var su=function(t,e){this.path=t,this.readTime=e},au=function(t,e){this.path=t,this.version=e},uu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};uu.store="remoteDocuments",uu.readTimeIndex="readTimeIndex",uu.readTimeIndexPath="readTime",uu.collectionReadTimeIndex="collectionReadTimeIndex",uu.collectionReadTimeIndexPath=["parentPath","readTime"];var cu=function(t){this.byteSize=t};cu.store="remoteDocumentGlobal",cu.key="remoteDocumentGlobalKey";var hu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};hu.store="targets",hu.keyPath="targetId",hu.queryTargetsIndexName="queryTargetsIndex",hu.queryTargetsKeyPath=["canonicalId","targetId"];var lu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};lu.store="targetDocuments",lu.keyPath=["targetId","path"],lu.documentTargetsIndex="documentTargetsIndex",lu.documentTargetsKeyPath=["path","targetId"];var fu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};fu.key="targetGlobalKey",fu.store="targetGlobal";var pu=function(t,e){this.collectionId=t,this.parent=e};pu.store="collectionParents",pu.keyPath=["collectionId","parent"];var du=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};du.store="clientMetadata",du.keyPath="clientId";var vu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};vu.store="bundles",vu.keyPath="bundleId";var yu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};yu.store="namedQueries",yu.keyPath="name";var gu=zr(zr(zr(zr([ru.store,iu.store,ou.store,uu.store,hu.store,nu.store,fu.store,lu.store],[du.store]),[cu.store]),[pu.store]),[vu.store,yu.store]),mu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return Br(e,t),e}(Xa);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t,e){var n=ni(t);return Ua.zn(n.ps,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _u=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=ls(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=fs(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=fs(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Bs())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&si(this.mutations,t.mutations,(function(t,e){return ds(t,e)}))&&si(this.baseMutations,t.baseMutations,(function(t,e){return ds(t,e)}))},t}(),wu=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){ei(e.mutations.length===r.length);for(var i=Vs(),o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Iu=function(t){this.Fs=t};function Eu(t,e){if(e.document)return ba(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Si.Et(e.noDocument.path),r=Nu(e.noDocument.readTime);return new io(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Si.Et(e.unknownDocument.path);return r=Nu(e.unknownDocument.version),new oo(i,r)}return ti()}function Tu(t,e,n){var r=Su(n),i=e.key.path.X().it();if(e instanceof ro){var o=function(t,e){return{name:fa(t,e.key),fields:e.bt().mapValue.fields,updateTime:sa(t,e.version.j())}}(t.Fs,e),s=e.hasCommittedMutations;return new uu(null,null,o,s,r,i)}if(e instanceof io){var a=e.key.path.it(),u=ku(e.version);return s=e.hasCommittedMutations,new uu(null,new su(a,u),null,s,r,i)}if(e instanceof oo){var c=e.key.path.it(),h=ku(e.version);return new uu(new au(c,h),null,null,!0,r,i)}return ti()}function Su(t){var e=t.j();return[e.seconds,e.nanoseconds]}function Cu(t){var e=new bi(t[0],t[1]);return _i.K(e)}function ku(t){var e=t.j();return new eu(e.seconds,e.nanoseconds)}function Nu(t){var e=new bi(t.seconds,t.nanoseconds);return _i.K(e)}function Au(t,e){for(var n=(e.baseMutations||[]).map((function(e){return wa(t.Fs,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return wa(t.Fs,e)})),a=bi.fromMillis(e.localWriteTimeMs);return new _u(e.batchId,a,n,s)}function Pu(t){var e,n,r=Nu(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Nu(t.lastLimboFreeSnapshotVersion):_i.min();return void 0!==t.query.documents?(ei(1===(n=t.query).documents.length),e=Mo(Ao(va(n.documents[0])))):e=function(t){return Mo(Ta(t))}(t.query),new Wo(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ui.fromBase64String(t.resumeToken))}function xu(t,e){var n,r=ku(e.Ot),i=ku(e.lastLimboFreeSnapshotVersion);n=ho(e.target)?Ia(t.Fs,e.target):Ea(t.Fs,e.target);var o=e.resumeToken.toBase64();return new hu(e.targetId,uo(e.target),r,o,e.sequenceNumber,i,n)}function Ou(t){var e=Ta({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?jo(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ru=function(){function t(){}return t.prototype.Os=function(t,e){return Du(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Nu(e.createTime),version:e.version};var e}))},t.prototype.ks=function(t,e){return Du(t).put({bundleId:(n=e).id,createTime:ku(ca(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return Lu(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Ou(e.bundledQuery),readTime:Nu(e.readTime)};var e}))},t.prototype.Ls=function(t,e){return Lu(t).put(function(t){return{name:t.name,readTime:ku(ca(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Du(t){return bu(t,vu.store)}function Lu(t){return bu(t,yu.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mu=function(){function t(){this.Bs=new ju}return t.prototype.qs=function(t,e){return this.Bs.add(e),ja.resolve()},t.prototype.Us=function(t,e){return ja.resolve(this.Bs.getEntries(e))},t}(),ju=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new Os(Ii.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Os(Ii.H)).it()},t}(),Fu=function(){function t(){this.Qs=new ju}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs((function(){n.Qs.add(e)}));var o={collectionId:r,parent:Ja(i)};return Uu(t).put(o)}return ja.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ai(e),""],!1,!0);return Uu(t).rs(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(tu(o.parent))}return n}))},t}();function Uu(t){return bu(t,pu.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vu={Ks:!1,Ws:0,js:0,Gs:0},qu=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(t){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(e){if(t.code!==ci.FAILED_PRECONDITION||t.message!==Ya)throw t;return Xr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qu.Xs=10,qu.Zs=1e3,qu.ti=new qu(41943040,qu.Xs,qu.Zs),qu.ei=new qu(-1,0,0);var Hu=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.si(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){ki(this.ii,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.et=function(){return Ni(this.ii)},t}(),Wu=function(){function t(){this.ri=new Hu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:_i.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?ja.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t,e,n){var r=t.store(iu.store),i=t.store(ou.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.hs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){ei(1===a)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=ou.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return ja.Mn(o).next((function(){return c}))}function Gu(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ti();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ku=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return ei(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yu(t).hs({index:iu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Ri=function(t,e,n,r){var i=this,o=Xu(t),s=Yu(t);return s.add({}).next((function(a){ei("number"==typeof a);for(var u=new _u(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return _a(t.Fs,e)})),i=n.mutations.map((function(e){return _a(t.Fs,e)}));return new iu(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,u),h=[],l=new Os((function(t,e){return oi(t.rt(),e.rt())})),f=0,p=r;f<p.length;f++){var d=p[f],v=ou.key(i.userId,d.key.path,a);l=l.add(d.key.path.X()),h.push(s.put(c)),h.push(o.put(v,ou.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ei.qs(t,e))})),t.gs((function(){i.Ii[a]=u.keys()})),ja.Mn(h).next((function(){return u}))}))},t.prototype.Pi=function(t,e){var n=this;return Yu(t).get(e).next((function(t){return t?(ei(t.userId===n.userId),Au(n.Qt,t)):null}))},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?ja.resolve(this.Ii[e]):this.Pi(t,e).next((function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null}))},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Yu(t).hs({index:iu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(ei(e.batchId>=r),o=Au(n.Qt,e)),i.done()})).next((function(){return o}))},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Yu(t).hs({index:iu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yu(t).rs(iu.userMutationsIndex,n).next((function(t){return t.map((function(t){return Au(e.Qt,t)}))}))},t.prototype.bi=function(t,e){var n=this,r=ou.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Xu(t).hs({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=tu(u);if(a===n.userId&&e.path.isEqual(h))return Yu(t).get(c).next((function(t){if(!t)throw ti();ei(t.userId===n.userId),o.push(Au(n.Qt,t))}));s.done()})).next((function(){return o}))},t.prototype.vi=function(t,e){var n=this,r=new Os(oi),i=[];return e.forEach((function(e){var o=ou.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Xu(t).hs({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=tu(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),ja.Mn(i).next((function(){return n.Si(t,r)}))},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=ou.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Os(oi);return Xu(t).hs({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=tu(u);s===n.userId&&r.nt(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Si(t,a)}))},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Yu(t).get(e).next((function(t){if(null===t)throw ti();ei(t.userId===n.userId),r.push(Au(n.Qt,t))})))})),ja.Mn(i).next((function(){return r}))},t.prototype.Ci=function(t,e){var n=this;return zu(t.ps,this.userId,e).next((function(r){return t.gs((function(){n.xi(e.batchId)})),ja.forEach(r,(function(e){return n.Ti.Ni(t,e)}))}))},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next((function(n){if(!n)return ja.resolve();var r=IDBKeyRange.lowerBound(ou.prefixForUser(e.userId)),i=[];return Xu(t).hs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=tu(t[1]);i.push(o)}else r.done()})).next((function(){ei(0===i.length)}))}))},t.prototype.Fi=function(t,e){return Qu(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return Ju(t).get(this.userId).next((function(t){return t||new ru(e.userId,-1,"")}))},t}();function Qu(t,e,n){var r=ou.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Xu(t).hs({range:o,us:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Yu(t){return bu(t,iu.store)}function Xu(t){return bu(t,ou.store)}function Ju(t){return bu(t,ru.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $u=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),Zu=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next((function(n){var r=new $u(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Qi=function(t){return this.qi(t).next((function(t){return _i.K(new bi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ki=function(t){return this.qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)}))},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next((function(){return n.qi(t).next((function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)}))}))},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next((function(){return tc(t).delete(e.targetId)})).next((function(){return n.qi(t)})).next((function(e){return ei(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)}))},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return tc(t).hs((function(s,a){var u=Pu(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Ji(t,u)))})).next((function(){return ja.Mn(o)})).next((function(){return i}))},t.prototype.In=function(t,e){return tc(t).hs((function(t,n){var r=Pu(n);e(r)}))},t.prototype.qi=function(t){return ec(t).get(fu.key).next((function(t){return ei(null!==t),t}))},t.prototype.Ui=function(t,e){return ec(t).put(fu.key,e)},t.prototype.Gi=function(t,e){return tc(t).put(xu(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next((function(t){return t.targetCount}))},t.prototype.tr=function(t,e){var n=uo(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return tc(t).hs({range:r,index:hu.queryTargetsIndexName},(function(t,n,r){var o=Pu(n);co(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.er=function(t,e,n){var r=this,i=[],o=nc(t);return e.forEach((function(e){var s=Ja(e.path);i.push(o.put(new lu(n,s))),i.push(r.Ti.nr(t,n,e))})),ja.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=nc(t);return ja.forEach(e,(function(e){var o=Ja(e.path);return ja.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])}))},t.prototype.Yi=function(t,e){var n=nc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=nc(t),i=Bs();return r.hs({range:n,us:!0},(function(t,e,n){var r=tu(t[1]),o=new Si(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Fi=function(t,e){var n=Ja(e.path),r=IDBKeyRange.bound([n],[ai(n)],!1,!0),i=0;return nc(t).hs({index:lu.documentTargetsIndex,us:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Sn=function(t,e){return tc(t).get(e).next((function(t){return t?Pu(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t){return bu(t,hu.store)}function ec(t){return bu(t,fu.store)}function nc(t){return bu(t,lu.store)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=oi(n,i);return 0===s?oi(r,o):s}var ic=function(){function t(t){this.cr=t,this.buffer=new Os(rc),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();rc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),oc=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;Xr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,(function(){return Hr(e,void 0,void 0,(function(){var e;return Wr(this,(function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return Ba(e=n.sent())?(Xr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Bu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),sc=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Pr=function(t,e){var n=this;if(0===e)return ja.resolve(mi.q);var r=new ic(e);return this.mr.In(t,(function(t){return r.hr(t.sequenceNumber)})).next((function(){return n.mr.yr(t,(function(t){return r.hr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(Xr("LruGarbageCollector","Garbage collection skipped; disabled"),ja.resolve(Vu)):this.pr(t).next((function(r){return r<n.params.zs?(Xr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),Vu):n.br(t,e)}))},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.Ar(t,this.params.Hs).next((function(e){return e>c.params.Js?(Xr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Xi(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.gr(t,n)})).next((function(t){return u=Date.now(),Yr()<=f["in"].DEBUG&&Xr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),ja.resolve({Ks:!0,Ws:r,js:i,Gs:t})}))},t}(),ac=function(){function t(t,e){this.db=t,this.lr=function(t,e){return new sc(t,e)}(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.vr=function(t){var e=0;return this.yr(t,(function(t){e++})).next((function(){return e}))},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,(function(t,n){return e(n)}))},t.prototype.nr=function(t,e,n){return uc(t,n)},t.prototype.ir=function(t,e,n){return uc(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return uc(t,e)},t.prototype.Cr=function(t,e){return function(t,e){var n=!1;return Ju(t).ls((function(r){return Qu(t,r,e).next((function(t){return t&&(n=!0),ja.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,(function(s,a){if(a<=e){var u=n.Cr(t,s).next((function(e){if(!e)return o++,r._i(t,s).next((function(){return r.li(s),nc(t).delete([0,Ja(s.path)])}))}));i.push(u)}})).next((function(){return ja.Mn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return uc(t,e)},t.prototype.Dr=function(t,e){var n,r=nc(t),i=mi.q;return r.hs({index:lu.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==mi.q&&e(new Si(tu(n)),i),i=a,n=s):i=mi.q})).next((function(){i!==mi.q&&e(new Si(tu(n)),i)}))},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function uc(t,e){return nc(t).put(function(t,e){return new lu(0,Ja(t.path),e)}(e,t.bs))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cc=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return fc(t).put(pc(e),n)},t.prototype.li=function(t,e){var n=fc(t),r=pc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.kr(t,r)}))},t.prototype._i=function(t,e){var n=this;return fc(t).get(pc(e)).next((function(t){return n.Mr(t)}))},t.prototype.Lr=function(t,e){var n=this;return fc(t).get(pc(e)).next((function(t){var e=n.Mr(t);return e?{hi:e,size:Gu(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Ms();return this.Br(t,e,(function(t,e){var i=n.Mr(e);r=r.zt(t,i)})).next((function(){return r}))},t.prototype.qr=function(t,e){var n=this,r=Ms(),i=new As(Si.H);return this.Br(t,e,(function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,Gu(e))):(r=r.zt(t,null),i=i.zt(t,0))})).next((function(){return{Ur:r,Qr:i}}))},t.prototype.Br=function(t,e,n){if(e.et())return ja.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return fc(t).hs({range:r},(function(t,e,r){for(var s=Si.Et(t);o&&Si.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ce()?i.oe():null}))},t.prototype.Kr=function(t,e,n){var r=this,i=Fs(),o=e.path.length+1,s={};if(n.isEqual(_i.min())){var a=e.path.it();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.it(),c=Su(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=uu.collectionReadTimeIndex}return fc(t).hs(s,(function(t,n,s){if(t.length===o){var a=Eu(r.Qt,n);e.path.nt(a.key.path)?a instanceof ro&&qo(e,a)&&(i=i.zt(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Nr=function(t){return new hc(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return lc(t).get(cu.key).next((function(t){return ei(!!t),t}))},t.prototype.kr=function(t,e){return lc(t).put(cu.key,e)},t.prototype.Mr=function(t){if(t){var e=Eu(this.Qt,t);return e instanceof io&&e.version.isEqual(_i.min())?null:e}return null},t}(),hc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new Hu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Br(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new Os((function(t,e){return oi(t.rt(),e.rt())}));return this.ri.forEach((function(o,s){var a=e.Gr.get(o);if(s.hi){var u=Tu(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=Gu(u);r+=c-a,n.push(e.jr.ai(t,o,u))}else if(r-=a,e.Wr){var h=Tu(e.jr.Qt,new io(o,_i.min()),e.ci(o));n.push(e.jr.ai(t,o,h))}else n.push(e.jr.li(t,o))})),i.forEach((function(r){n.push(e.jr.Ei.qs(t,r))})),n.push(this.jr.updateMetadata(t,r)),ja.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next((function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)}))},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next((function(t){var e=t.Ur;return t.Qr.forEach((function(t,e){n.Gr.set(t,e)})),e}))},e}(Wu);function lc(t){return bu(t,cu.store)}function fc(t){return bu(t,uu.store)}function pc(t){return t.path.it()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dc=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;ei(n<r&&n>=0&&r<=11);var o=new Fa("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(nu.store)}(t),function(t){t.createObjectStore(ru.store,{keyPath:ru.keyPath}),t.createObjectStore(iu.store,{keyPath:iu.keyPath,autoIncrement:!0}).createIndex(iu.userMutationsIndex,iu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ou.store)}(t),vc(t),function(t){t.createObjectStore(uu.store)}(t));var s=ja.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(lu.store),t.deleteObjectStore(hu.store),t.deleteObjectStore(fu.store)}(t),vc(t)),s=s.next((function(){return function(t){var e=t.store(fu.store),n=new fu(0,0,_i.min().j(),0);return e.put(fu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(iu.store).rs().next((function(n){t.deleteObjectStore(iu.store),t.createObjectStore(iu.store,{keyPath:iu.keyPath,autoIncrement:!0}).createIndex(iu.userMutationsIndex,iu.userMutationsKeyPath,{unique:!0});var r=e.store(iu.store),i=n.map((function(t){return r.put(t)}));return ja.Mn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(du.store,{keyPath:du.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.zr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(cu.store)}(t),i.Hr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Jr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Yr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(uu.store);e.createIndex(uu.readTimeIndex,uu.readTimeIndexPath,{unique:!1}),e.createIndex(uu.collectionReadTimeIndex,uu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Xr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(vu.store,{keyPath:vu.keyPath})}(t),function(t){t.createObjectStore(yu.store,{keyPath:yu.keyPath})}(t)}))),s},t.prototype.Hr=function(t){var e=0;return t.store(uu.store).hs((function(t,n){e+=Gu(n)})).next((function(){var n=new cu(e);return t.store(cu.store).put(cu.key,n)}))},t.prototype.zr=function(t){var e=this,n=t.store(ru.store),r=t.store(iu.store);return n.rs().next((function(n){return ja.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(iu.userMutationsIndex,i).next((function(r){return ja.forEach(r,(function(r){ei(r.userId===n.userId);var i=Au(e.Qt,r);return zu(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Jr=function(t){var e=t.store(lu.store),n=t.store(uu.store);return t.store(fu.store).get(fu.key).next((function(t){var r=[];return n.hs((function(n,i){var o=new Ii(n),s=function(t){return[0,Ja(t)]}(o);r.push(e.get(s).next((function(n){return n?ja.resolve():function(n){return e.put(new lu(0,Ja(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return ja.Mn(r)}))}))},t.prototype.Yr=function(t,e){t.createObjectStore(pu.store,{keyPath:pu.keyPath});var n=e.store(pu.store),r=new ju,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:Ja(i)})}};return e.store(uu.store).hs({us:!0},(function(t,e){var n=new Ii(t);return i(n.X())})).next((function(){return e.store(ou.store).hs({us:!0},(function(t,e){t[0];var n=t[1],r=(t[2],tu(n));return i(r.X())}))}))},t.prototype.Xr=function(t){var e=this,n=t.store(hu.store);return n.hs((function(t,r){var i=Pu(r),o=xu(e.Qt,i);return n.put(o)}))},t}();function vc(t){t.createObjectStore(lu.store,{keyPath:lu.keyPath}).createIndex(lu.documentTargetsIndex,lu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(hu.store,{keyPath:hu.keyPath}).createIndex(hu.queryTargetsIndexName,hu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(fu.store)}var yc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",gc=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=a,this.eo=c,this.no=h,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new hi(ci.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new ac(this,i),this.ho=n+"main",this.Qt=new Iu(u),this.lo=new Ua(this.ho,11,new dc(this.Qt)),this._o=new Zu(this.Ti,this.Qt),this.Ei=new Fu,this.fo=function(t,e){return new cc(t,e)}(this.Qt,this.Ei),this.wo=new Ru,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===h&&Jr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new hi(ci.FAILED_PRECONDITION,yc);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t._o.Ki(e)}))})).then((function(e){t.so=new mi(e,t.eo)})).then((function(){t.io=!0})).catch((function(e){return t.lo&&t.lo.close(),Promise.reject(e)}))},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return Hr(e,void 0,void 0,(function(){return Wr(this,(function(e){return this.Er?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn((function(n){return Hr(e,void 0,void 0,(function(){return Wr(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps((function(){return Hr(e,void 0,void 0,(function(){return Wr(this,(function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return bc(e).put(new du(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Vo(e).next((function(e){e||(t.isPrimary=!1,t.Zr.po((function(){return t.uo(!1)})))}))})).next((function(){return t.bo(e)})).next((function(n){return t.isPrimary&&!n?t.vo(e).next((function(){return!1})):!!n&&t.So(e).next((function(){return!0}))}))})).catch((function(e){if(Ba(e))return Xr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Xr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Zr.po((function(){return t.uo(e)})),t.isPrimary=e}))},t.prototype.Vo=function(t){var e=this;return mc(t).get(nu.key).next((function(t){return ja.resolve(e.Do(t))}))},t.prototype.Co=function(t){return bc(t).delete(this.clientId)},t.prototype.xo=function(){return Hr(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Wr(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=bu(t,du.store);return e.rs().next((function(t){var n=i.$o(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return ja.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)r=n[e],this.Eo.removeItem(this.Fo(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,(function(){return t.To().then((function(){return t.xo()})).then((function(){return t.Ao()}))}))},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?ja.resolve(!0):mc(t).get(nu.key).next((function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new hi(ci.FAILED_PRECONDITION,yc);return!1}}return!(!e.networkEnabled||!e.inForeground)||bc(t).rs().next((function(t){return void 0===e.$o(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Xr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.ko=function(){return Hr(this,void 0,void 0,(function(){var t=this;return Wr(this,(function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[nu.store,du.store],(function(e){var n=new mu(e,mi.q);return t.vo(n).next((function(){return t.Co(n)}))}))];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}}))}))},t.prototype.$o=function(t,e){var n=this;return t.filter((function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)}))},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return bc(e).rs().next((function(e){return t.$o(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return Ku.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;Xr("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.lo.runTransaction(t,o,gu,(function(o){return i=new mu(o,r.so?r.so.next():mi.q),"readwrite-primary"===e?r.Vo(i).next((function(t){return!!t||r.bo(i)})).next((function(e){if(!e)throw Jr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Zr.po((function(){return r.uo(!1)})),new hi(ci.FAILED_PRECONDITION,Ya);return n(i)})).next((function(t){return r.So(i).next((function(){return t}))})):r.jo(i).next((function(){return n(i)}))})).then((function(t){return i.Vs(),t}))},t.prototype.jo=function(t){var e=this;return mc(t).get(nu.key).next((function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new hi(ci.FAILED_PRECONDITION,yc)}))},t.prototype.So=function(t){var e=new nu(this.clientId,this.allowTabSynchronization,Date.now());return mc(t).put(nu.key,e)},t.Kn=function(){return Ua.Kn()},t.prototype.vo=function(t){var e=this,n=mc(t);return n.get(nu.key).next((function(t){return e.Do(t)?(Xr("IndexedDbPersistence","Releasing primary lease."),n.delete(nu.key)):ja.resolve()}))},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Jr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps((function(){return t.inForeground="visible"===t.document.visibilityState,t.To()}))},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps((function(){return e.ko()}))},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return Xr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Jr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){Jr("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function mc(t){return bu(t,nu.store)}function bc(t){return bu(t,du.store)}function _c(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var wc=function(t,e){this.progress=t,this.Go=e},Ic=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next((function(r){return n.Jo(t,e,r)}))},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t}))},t.prototype.Yo=function(t,e,n){var r=Ms();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)})),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next((function(e){return n.Zo(t,e)}))},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next((function(r){var i=n.Yo(t,e,r),o=Ls();return i.forEach((function(t,e){e||(e=new io(t,_i.min())),o=o.zt(t,e)})),o}))},t.prototype.Kr=function(t,e,n){return function(t){return Si.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.tc(t,e.path):Do(e)?this.ec(t,e,n):this.nc(t,e,n)},t.prototype.tc=function(t,e){return this.Ho(t,new Si(e)).next((function(t){var e=Fs();return t instanceof ro&&(e=e.zt(t.key,t)),e}))},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=Fs();return this.Ei.Us(t,i).next((function(s){return ja.forEach(s,(function(s){var a=function(t,e){return new ko(e,null,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.nc(t,a,n).next((function(t){t.forEach((function(t,e){o=o.zt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next((function(n){return r=n,o.zo.Di(t,e)})).next((function(e){return i=e,o.sc(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=fs(u,r.get(c),o.vs);r=h instanceof ro?r.zt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){qo(e,n)||(r=r.remove(t))})),r}))},t.prototype.sc=function(t,e,n){for(var r=Bs(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof gs&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof ro&&(c=c.zt(t,e))})),c}))},t}(),Ec=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=Bs(),i=Bs(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Tc=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.xt.length||1===t.xt.length&&t.xt[0].field.ut())}(e)||n.isEqual(_i.min())?this.uc(t,e):this.ac.Xo(t,r).next((function(o){var s=i.hc(e,o);return(Po(e)||xo(e))&&i.lc(e.limitType,s,r,n)?i.uc(t,e):(Yr()<=f["in"].DEBUG&&Xr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Vo(e)),i.ac.Kr(t,e,n).next((function(t){return s.forEach((function(e){t=t.zt(e.key,e)})),t})))}))},t.prototype.hc=function(t,e){var n=new Os(Bo(t));return e.forEach((function(e,r){r instanceof ro&&qo(t,r)&&(n=n.add(r))})),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return Yr()<=f["in"].DEBUG&&Xr("QueryEngine","Using full collection scan to execute query:",Vo(e)),this.ac.Kr(t,e,_i.min())},t}(),Sc=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new As(oi),this.dc=new Hu((function(t){return uo(t)}),co),this.wc=_i.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new Ic(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Vr(n,e.fc)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(t,e,n,r){return new Sc(t,e,n,r)}function kc(t,e){return Hr(this,void 0,void 0,(function(){var n,r,i,o;return Wr(this,(function(s){switch(s.label){case 0:return n=ni(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.zo.pi(t).next((function(s){return o=s,r=n.persistence.Qo(e),i=new Ic(n.Ec,r,n.persistence.Ko()),r.pi(t)})).next((function(e){for(var n=[],r=[],s=Bs(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.Xo(t,s).next((function(t){return{Ic:t,mc:n,Ac:r}}))}))}))];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}}))}))}function Nc(t,e){var n=ni(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ec.Nr({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=ja.resolve();return o.forEach((function(t){s=s.next((function(){return r._i(e,t)})).next((function(e){var o=e,s=n.$s.get(t);ei(null!==s),(!o||o.version._(s)<0)&&(o=i.Ss(t,o,n))&&r.ai(o,n.Ns)}))})),s.next((function(){return t.zo.Ci(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}function Ac(t){var e=ni(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e._o.Qi(t)}))}function Pc(t,e){var n=ni(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach((function(e,o){var a=i.get(o);if(a){s.push(n._o.sr(t,e.Qe,o).next((function(){return n._o.er(t,e.qe,o)})));var u=e.resumeToken;if(u.l()>0){var c=a.Mt(u,r).kt(t.bs);i=i.zt(o,c),function(t,e,n){return ei(e.resumeToken.l()>0),0===t.resumeToken.l()||e.Ot.W()-t.Ot.W()>=3e8||n.qe.size+n.Ue.size+n.Qe.size>0}(a,c,e)&&s.push(n._o.Hi(t,c))}}}));var a=Ls();if(e.Oe.forEach((function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))})),s.push(xc(t,o,e.Oe,r,void 0).next((function(t){a=t}))),!r.isEqual(_i.min())){var u=n._o.Qi(t).next((function(e){return n._o.Wi(t,t.bs,r)}));s.push(u)}return ja.Mn(s).next((function(){return o.apply(t)})).next((function(){return n.Tc.Zo(t,a)}))})).then((function(t){return n.fc=i,t}))}function xc(t,e,n,r,i){var o=Bs();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Ls();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof io&&s.version.isEqual(_i.min())?(e.li(n,u),o=o.zt(n,s)):null==a||s.version._(a.version)>0||0===s.version._(a.version)&&a.hasPendingWrites?(e.ai(s,u),o=o.zt(n,s)):Xr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Oc(t,e){var n=ni(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)}))}function Rc(t,e){var n=ni(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n._o.tr(t,e).next((function(i){return i?(r=i,ja.resolve(r)):n._o.Bi(t).next((function(i){return r=new Wo(e,i,0,t.bs),n._o.ji(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t}))}function Dc(t,e,n){return Hr(this,void 0,void 0,(function(){var r,i,o,s;return Wr(this,(function(a){switch(a.label){case 0:r=ni(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ti.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Ba(s=a.sent()))throw s;return Xr("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}}))}))}function Lc(t,e,n){var r=ni(t),i=_i.min(),o=Bs();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=ni(t),i=r.dc.get(n);return void 0!==i?ja.resolve(r.fc.get(i)):r._o.tr(e,n)}(r,t,Mo(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r._c.Kr(t,e,n?i:_i.min(),n?o:Bs())})).next((function(t){return{documents:t,Rc:o}}))}))}function Mc(t,e){var n=ni(t),r=ni(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Sn(t,e).next((function(t){return t?t.target:null}))}))}function jc(t){var e=ni(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=ni(t),i=Ls(),o=Su(n),s=fc(e),a=IDBKeyRange.lowerBound(o,!0);return s.hs({index:uu.readTimeIndex,range:a},(function(t,e){var n=Eu(r.Qt,e);i=i.zt(n.key,n),o=e.readTime})).next((function(){return{Go:i,readTime:Cu(o)}}))}(e.Ec,t,e.wc)})).then((function(t){var n=t.Go,r=t.readTime;return e.wc=r,n}))}function Fc(t){return Hr(this,void 0,void 0,(function(){var e;return Wr(this,(function(n){return[2,(e=ni(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=fc(t),n=_i.min();return e.hs({index:uu.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Cu(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.wc=t}))]}))}))}function Uc(t,e,n,r){return Hr(this,void 0,void 0,(function(){var i,o,s,a,u,c,h,l,f,p;return Wr(this,(function(d){switch(d.label){case 0:for(i=ni(t),o=Bs(),s=Ls(),a=Vs(),u=0,c=n;u<c.length;u++)h=c[u],l=e.Pc(h.metadata.name),h.document&&(o=o.add(l)),s=s.zt(l,e.yc(h)),a=a.zt(l,e.gc(h.metadata.readTime));return f=i.Ec.Nr({Wr:!0}),[4,Rc(i,function(t){return Mo(Ao(Ii.ot("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return xc(t,f,s,_i.min(),a).next((function(e){return f.apply(t),e})).next((function(e){return i._o.Yi(t,p.targetId).next((function(){return i._o.er(t,o,p.targetId)})).next((function(){return i.Tc.Zo(t,e)}))}))}))]}}))}))}function Vc(t,e,n){return void 0===n&&(n=Bs()),Hr(this,void 0,void 0,(function(){var r,i;return Wr(this,(function(o){switch(o.label){case 0:return[4,Rc(t,Mo(Ou(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ni(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=ca(e.readTime);if(r.Ot._(o)>=0)return i.wo.Ls(t,e);var s=r.Mt(ui.T,o);return i.fc=i.fc.zt(s.targetId,s),i._o.Hi(t,s).next((function(){return i._o.Yi(t,r.targetId)})).next((function(){return i._o.er(t,n,r.targetId)})).next((function(){return i.wo.Ls(t,e)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var qc=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return ja.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:ca(n.createTime)}),ja.resolve()},t.prototype.Ms=function(t,e){return ja.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,function(t){return{name:t.name,query:Ou(t.bundledQuery),readTime:ca(t.readTime)}}(e)),ja.resolve()},t}(),Bc=function(){function t(){this.vc=new Os(Hc.Sc),this.Dc=new Os(Hc.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new Hc(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach((function(t){return n.nr(t,e)}))},t.prototype.ir=function(t,e){this.Nc(new Hc(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.Fc=function(t){var e=this,n=new Si(new Ii([])),r=new Hc(n,t),i=new Hc(n,t+1),o=[];return this.Dc.me([r,i],(function(t){e.Nc(t),o.push(t.key)})),o},t.prototype.Oc=function(){var t=this;this.vc.forEach((function(e){return t.Nc(e)}))},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new Si(new Ii([])),n=new Hc(e,t),r=new Hc(e,t+1),i=Bs();return this.Dc.me([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Fi=function(t){var e=new Hc(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),Hc=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return Si.H(t.key,e.key)||oi(t.Mc,e.Mc)},t.Cc=function(t,e){return oi(t.Mc,e.Mc)||Si.H(t.key,e.key)},t}(),Wc=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new Os(Hc.Sc)}return t.prototype.Ai=function(t){return ja.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++,this.zo.length>0&&this.zo[this.zo.length-1];var o=new _u(i,e,n,r);this.zo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Bc=this.Bc.add(new Hc(u.key,i)),this.Ei.qs(t,u.key.path.X())}return ja.resolve(o)},t.prototype.Pi=function(t,e){return ja.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=e+1,r=this.Uc(n),i=r<0?0:r;return ja.resolve(this.zo.length>i?this.zo[i]:null)},t.prototype.Vi=function(){return ja.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return ja.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new Hc(e,0),i=new Hc(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],(function(t){var e=n.qc(t.Mc);o.push(e)})),ja.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new Os(oi);return e.forEach((function(t){var e=new Hc(t,0),i=new Hc(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],(function(t){r=r.add(t.Mc)}))})),ja.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;Si.wt(i)||(i=i.child(""));var o=new Hc(new Si(i),0),s=new Os(oi);return this.Bc.Ae((function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)}),o),ja.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.qc(t);null!==r&&n.push(r)})),n},t.prototype.Ci=function(t,e){var n=this;ei(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return ja.forEach(e.mutations,(function(i){var o=new Hc(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)})).next((function(){n.Bc=r}))},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new Hc(e,0),r=this.Bc.Re(n);return ja.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return this.zo.length,ja.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),zc=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new As(Si.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return ja.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=Ms();return e.forEach((function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)})),ja.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=Fs(),i=new Si(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.key,u=s.value,c=u.hi,h=u.readTime;if(!e.path.nt(a.path))break;h._(n)<=0||c instanceof ro&&qo(e,c)&&(r=r.zt(c.key,c))}return ja.resolve(r)},t.prototype.jc=function(t,e){return ja.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Nr=function(t){return new Gc(this)},t.prototype.Or=function(t){return ja.resolve(this.size)},t}(),Gc=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return Br(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach((function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)})),ja.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(Wu),Kc=function(){function t(t){this.persistence=t,this.Gc=new Hu((function(t){return uo(t)}),co),this.lastRemoteSnapshotVersion=_i.min(),this.highestTargetId=0,this.zc=0,this.Hc=new Bc,this.targetCount=0,this.Jc=$u.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach((function(t,n){return e(n)})),ja.resolve()},t.prototype.Qi=function(t){return ja.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return ja.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),ja.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),ja.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new $u(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,ja.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),ja.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,ja.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,a.targetId)),i++)})),ja.Mn(o).next((function(){return i}))},t.prototype.Zi=function(t){return ja.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return ja.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),ja.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach((function(e){i.push(r.Ni(t,e))})),ja.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),ja.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return ja.resolve(n)},t.prototype.Fi=function(t,e){return ja.resolve(this.Hc.Fi(e))},t}(),Qc=function(){function t(t,e){var n=this;this.Yc={},this.so=new mi(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new Kc(this),this.Ei=new Mu,this.fo=function(t,e){return new zc(t,(function(t){return n.Ti.Xc(t)}))}(this.Ei),this.Qt=new Iu(e),this.wo=new qc(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new Wc(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;Xr("MemoryPersistence","Starting transaction:",t);var i=new Yc(this.so.next());return this.Ti.Zc(),n(i).next((function(t){return r.Ti.ta(i).next((function(){return t}))})).On().then((function(t){return i.Vs(),t}))},t.prototype.ea=function(t,e){return ja.Ln(Object.values(this.Yc).map((function(n){return function(){return n.Fi(t,e)}})))},t}(),Yc=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return Br(e,t),e}(Xa),Xc=function(){function t(t){this.persistence=t,this.na=new Bc,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw ti()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),ja.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),ja.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),ja.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach((function(t){return n.ra.add(t.toString())}));var r=this.persistence.Sr();return r.rr(t,e.targetId).next((function(t){t.forEach((function(t){return n.ra.add(t.toString())}))})).next((function(){return r.Ji(t,e)}))},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return ja.forEach(this.ra,(function(r){var i=Si._t(r);return e.oa(t,i).next((function(t){t||n.li(i)}))})).next((function(){return e.sa=null,n.apply(t)}))},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next((function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())}))},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return ja.Ln([function(){return ja.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(t,e){return"firestore_clients_"+t+"_"+e}function $c(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function Zc(t,e){return"firestore_targets_"+t+"_"+e}var th=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new hi(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Jr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),eh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new hi(i.error.code,i.error.message)),o?new t(e,i.state,r):(Jr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),nh=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ws(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ui(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Jr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),rh=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Jr("SharedClientState","Failed to parse online state: "+e),null)},t}(),ih=function(){function t(){this.activeTargetIds=Ws()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),oh=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new As(oi),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=Jc(this.persistenceKey,this.la),this.ma=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new ih),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Hr(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,h,l=this;return Wr(this,(function(f){switch(f.label){case 0:return[4,this._a.Uo()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(Jc(this.persistenceKey,r)))&&(o=nh.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)h=c[u],this.wa(h);return this.Ta=[],this.window.addEventListener("unload",(function(){return l.ko()})),this.Er=!0,[2]}}))}))},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(Zc(this.persistenceKey,t));if(n){var r=eh.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(Zc(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach((function(t){r.$a(t)})),this.currentUser=t,n.forEach((function(t){r.Ca(t)}))},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Xr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Xr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Xr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Xr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void Jr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po((function(){return Hr(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Wr(this,(function(a){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=mi.q;if(null!=t)try{var n=JSON.parse(t);ei("number"==typeof n),e=n}catch(t){Jr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==mi.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new th(this.currentUser,t,e,n),i=$c(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=$c(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){var e={clientId:this.la,onlineState:t};this.storage.setItem(this.ya,JSON.stringify(e))},t.prototype.qa=function(t,e,n){var r=Zc(this.persistenceKey,t),i=new eh(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return nh.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return th.ca(new fi(i),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return eh.ca(r,e)},t.prototype.pa=function(t){return rh.ca(t)},t.prototype.Ya=function(t){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(Xr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this._a.su(s,a).then((function(){n.Ea=r}))},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=Ws();return t.forEach((function(t,n){e=e.Pe(n.activeTargetIds)})),e},t}(),sh=function(){function t(){this.iu=new ih,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new ih,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),ah=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),uh=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){Xr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){Xr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ch={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},hh=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),lh=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Br(e,t),e.prototype.Su=function(t,e,n,r){return new Promise((function(i,o){var s=new Vr;s.listenOnce(Mr.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Lr.NO_ERROR:var e=s.getResponseJson();Xr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Lr.TIMEOUT:Xr("Connection",'RPC "'+t+'" timed out'),o(new hi(ci.DEADLINE_EXCEEDED,"Request time out"));break;case Lr.HTTP_ERROR:var n=s.getStatus();if(Xr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(ci).indexOf(e)>=0?e:ci.UNKNOWN}(r.status);o(new hi(a,r.message))}else o(new hi(ci.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new hi(ci.UNAVAILABLE,"Connection failed."));break;default:ti()}}finally{Xr("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Cu=function(t,e){var n=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Rr(),i=Dr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(o.initMessageHeaders,e),(0,p.uI)()||(0,p.b$)()||(0,p.d)()||(0,p.w1)()||(0,p.Mn)()||(0,p.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Xr("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,h=new hh({fu:function(t){c?Xr("Connection","Not sending because WebChannel is closed:",t):(u||(Xr("Connection","Opening WebChannel transport."),a.open(),u=!0),Xr("Connection","WebChannel sending:",t),a.send(t))},du:function(){return a.close()}}),l=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return l(a,Ur.EventType.OPEN,(function(){c||Xr("Connection","WebChannel transport opened.")})),l(a,Ur.EventType.CLOSE,(function(){c||(c=!0,Xr("Connection","WebChannel transport closed"),h.Ru())})),l(a,Ur.EventType.ERROR,(function(t){c||(c=!0,$r("Connection","WebChannel transport errored:",t),h.Ru(new hi(ci.UNAVAILABLE,"The operation could not be completed")))})),l(a,Ur.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];ei(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Xr("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Is[t];if(void 0!==e)return Ns(e)}(o),u=i.message;void 0===s&&(s=ci.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,h.Ru(new hi(s,u)),a.close()}else Xr("Connection","WebChannel received:",n),h.Pu(n)}})),l(i,jr.STAT_EVENT,(function(t){t.stat===Fr.PROXY?Xr("Connection","Detected buffering proxy"):t.stat===Fr.NOPROXY&&Xr("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Au()}),0),h},e}(function(){function t(t){this.yu=t,this.t=t.t;var e=t.ssl?"https":"http";this.gu=e+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);Xr("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then((function(t){return Xr("RestConnection","Received: ",t),t}),(function(e){throw $r("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.9",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){var n=ch[t];return this.gu+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(){return"undefined"!=typeof window?window:null}function ph(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t){return new oa(t,!0)}var vh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&Xr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,(function(){return e.ku=Date.now(),t()})),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),yh=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new vh(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,(function(){return t.Zu()})))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(t){return this.Hu()?[2,this.close(0)]:[2]}))}))},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===ci.RESOURCE_EXHAUSTED?(Jr(e.toString()),Jr("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===ci.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then((function(e){t.Wu===n&&t.ih(e)}),(function(n){e((function(){var e=new hi(ci.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)}))}))},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu((function(){n((function(){return e.state=2,e.listener.wu()}))})),this.stream.Tu((function(t){n((function(){return e.rh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu((function(){return Hr(t,void 0,void 0,(function(){return Wr(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.rh=function(t){return Xr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps((function(){return e.Wu===t?n():(Xr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),gh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return Br(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ti()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Bt?(ei(void 0===e||"string"==typeof e),ui.fromBase64String(e||"")):(ei(void 0===e||e instanceof Uint8Array),ui.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?ci.UNKNOWN:Ns(t.code);return new hi(e,t.message||"")}(a);n=new $s(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=pa(t,r.document.name),o=ca(r.document.updateTime);var a=new Zi({mapValue:{fields:r.document.fields}}),u=(s=new ro(i,o,a,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new Xs(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=pa(t,r.document),o=r.readTime?ca(r.readTime):_i.min(),a=new io(i,o),s=r.removedTargetIds||[],n=new Xs([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=pa(t,r.document),o=r.removedTargetIds||[],n=new Xs([],o,i,null);else{if(!("filter"in e))return ti();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Cs(r),o=h.targetId,n=new Js(o,i)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return _i.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?_i.min():e.readTime?ca(e.readTime):_i.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e={};e.database=ya(this.Qt),e.addTarget=function(t,e){var n,r=e.target;return(n=ho(r)?{documents:Ia(t,r)}:{query:Ea(t,r)}).targetId=e.targetId,e.resumeToken.l()>0?n.resumeToken=aa(t,e.resumeToken):e.Ot._(_i.min())>0&&(n.readTime=sa(t,e.Ot.j())),n}(this.Qt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ti()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(this.Qt,t);n&&(e.labels=n),this.th(e)},e.prototype.hh=function(t){var e={};e.database=ya(this.Qt),e.removeTarget=t,this.th(e)},e}(yh),mh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return Br(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(ei(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=function(t,e){return t&&t.length>0?(ei(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?ca(t.updateTime):ca(e);n.isEqual(_i.min())&&(n=ca(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new as(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=ca(t.commitTime);return this.listener.dh(n,e)}return ei(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=ya(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return _a(e.Qt,t)}))};this.th(n)},e}(yh),bh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return Br(e,t),e.prototype.Ih=function(){if(this.Th)throw new hi(ci.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.pu(t,e,n,i)})).catch((function(t){throw t.code===ci.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.Du(t,e,n,i)})).catch((function(t){throw t.code===ci.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.terminate=function(){this.Th=!1},e}((function(){})),_h=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,(function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()})))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(Jr(e),this.Rh=!1):Xr("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),wh=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou((function(t){n.Ps((function(){return Hr(o,void 0,void 0,(function(){return Wr(this,(function(t){switch(t.label){case 0:return Ph(this)?(Xr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Hr(this,void 0,void 0,(function(){var e;return Wr(this,(function(n){switch(n.label){case 0:return(e=ni(t)).Nh.add(4),[4,Eh(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,Ih(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Oh=new _h(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t){return Hr(this,void 0,void 0,(function(){var e,n;return Wr(this,(function(r){switch(r.label){case 0:if(!Ph(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Eh(t){return Hr(this,void 0,void 0,(function(){var e,n;return Wr(this,(function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Th(t,e){var n=ni(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),Ah(n)?Nh(n):zh(n).Hu()&&Ch(n,e))}function Sh(t,e){var n=ni(t),r=zh(n);n.xh.delete(e),r.Hu()&&kh(n,e),0===n.xh.size&&(r.Hu()?r.Xu():Ph(n)&&n.Oh.set("Unknown"))}function Ch(t,e){t.kh.on(e.targetId),zh(t).uh(e)}function kh(t,e){t.kh.on(e),zh(t).hh(e)}function Nh(t){t.kh=new ta({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),zh(t).start(),t.Oh.Ph()}function Ah(t){return Ph(t)&&!zh(t).zu()&&t.xh.size>0}function Ph(t){return 0===ni(t).Nh.size}function xh(t){t.kh=void 0}function Oh(t){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(e){return t.xh.forEach((function(e,n){Ch(t,e)})),[2]}))}))}function Rh(t,e){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(n){return xh(t),Ah(t)?(t.Oh.Vh(e),Nh(t)):t.Oh.set("Unknown"),[2]}))}))}function Dh(t,e,n){return Hr(this,void 0,void 0,(function(){var r,i,o;return Wr(this,(function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof $s&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Hr(this,void 0,void 0,(function(){var n,r,i,o;return Wr(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.xh.has(o)?[4,t.Dh.Mh(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Xr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Lh(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Xs?t.kh.dn(e):e instanceof Js?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(_i.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Ac(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,function(t,e){var n=t.kh.Vn(e);return n.$e.forEach((function(n,r){if(n.resumeToken.l()>0){var i=t.xh.get(r);i&&t.xh.set(r,i.Mt(n.resumeToken,e))}})),n.Fe.forEach((function(e){var n=t.xh.get(e);if(n){t.xh.set(e,n.Mt(ui.T,n.Ot)),kh(t,e);var r=new Wo(n.target,e,1,n.sequenceNumber);Ch(t,r)}})),t.Dh.Lh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Xr("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Lh(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Lh(t,e,n){return Hr(this,void 0,void 0,(function(){var r=this;return Wr(this,(function(i){switch(i.label){case 0:if(!Ba(e))throw e;return t.Nh.add(1),[4,Eh(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return Ac(t.bh)}),t._s.po((function(){return Hr(r,void 0,void 0,(function(){return Wr(this,(function(e){switch(e.label){case 0:return Xr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,Ih(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Mh(t,e){return e().catch((function(n){return Lh(t,n,e)}))}function jh(t){return Hr(this,void 0,void 0,(function(){var e,n,r,i,o;return Wr(this,(function(s){switch(s.label){case 0:e=ni(t),n=Gh(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Ph(t)&&t.Ch.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Oc(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=Gh(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Lh(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Fh(e)&&Uh(e),[2]}}))}))}function Fh(t){return Ph(t)&&!Gh(t).zu()&&t.Ch.length>0}function Uh(t){Gh(t).start()}function Vh(t){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(e){return Gh(t).Eh(),[2]}))}))}function qh(t){return Hr(this,void 0,void 0,(function(){var e,n,r,i;return Wr(this,(function(o){for(e=Gh(t),n=0,r=t.Ch;n<r.length;n++)i=r[n],e.fh(i.mutations);return[2]}))}))}function Bh(t,e,n){return Hr(this,void 0,void 0,(function(){var r,i;return Wr(this,(function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=wu.from(r,e,n),[4,Mh(t,(function(){return t.Dh.Bh(i)}))];case 1:return o.sent(),[4,jh(t)];case 2:return o.sent(),[2]}}))}))}function Hh(t,e){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(n){switch(n.label){case 0:return e&&Gh(t)._h?[4,function(t,e){return Hr(this,void 0,void 0,(function(){var n,r;return Wr(this,(function(i){switch(i.label){case 0:return ks(r=e.code)&&r!==ci.ABORTED?(n=t.Ch.shift(),Gh(t).Yu(),[4,Mh(t,(function(){return t.Dh.qh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,jh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Fh(t)&&Uh(t),[2]}}))}))}function Wh(t,e){return Hr(this,void 0,void 0,(function(){var n;return Wr(this,(function(r){switch(r.label){case 0:return n=ni(t),e?(n.Nh.delete(2),[4,Ih(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,Eh(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function zh(t){var e=this;return t.Uh||(t.Uh=function(t,e,n){var r=ni(t);return r.Ih(),new gh(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Oh.bind(null,t),Tu:Rh.bind(null,t),ah:Dh.bind(null,t)}),t.$h.push((function(n){return Hr(e,void 0,void 0,(function(){return Wr(this,(function(e){switch(e.label){case 0:return n?(t.Uh.Yu(),Ah(t)?Nh(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:e.sent(),xh(t),e.label=3;case 3:return[2]}}))}))}))),t.Uh}function Gh(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=ni(t);return r.Ih(),new mh(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Vh.bind(null,t),Tu:Hh.bind(null,t),wh:qh.bind(null,t),dh:Bh.bind(null,t)}),t.$h.push((function(n){return Hr(e,void 0,void 0,(function(){return Wr(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Yu(),[4,jh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:e.sent(),t.Ch.length>0&&(Xr("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qh
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Kh=function(){this.Kh=void 0,this.listeners=[]},Qh=function(){this.queries=new Hu((function(t){return Uo(t)}),Fo),this.onlineState="Unknown",this.Wh=new Set};function Yh(t,e){return Hr(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Wr(this,(function(c){switch(c.label){case 0:if(n=ni(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Kh),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return a=c.sent(),u=Qa(a,"Initialization of query '"+Vo(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&Zh(n),[2]}}))}))}function Xh(t,e){return Hr(this,void 0,void 0,(function(){var n,r,i,o,s;return Wr(this,(function(a){return n=ni(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]}))}))}function Jh(t,e){for(var n=ni(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].zh(s)&&(r=!0);u.Kh=s}}r&&Zh(n)}function $h(t,e,n){var r=ni(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Zh(t){t.Wh.forEach((function(t){t.next()}))}var tl=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ks(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.nl&&n||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){if(t.docChanges.length>0)return!0;var e=this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ce&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=Ks.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),el=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.sl=function(){return"metadata"in this.payload},t}(),nl=function(){function t(t){this.Qt=t}return t.prototype.Pc=function(t){return pa(this.Qt,t)},t.prototype.yc=function(t){return t.metadata.exists?ba(this.Qt,t.document,!1):new io(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},t.prototype.gc=function(t){return ca(t)},t}(),rl=function(){function t(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=il(t)}return t.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.ol=function(t){for(var e=new Map,n=new nl(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||Bs()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return Hr(this,void 0,void 0,(function(){var t,e,n,r,i;return Wr(this,(function(o){switch(o.label){case 0:return[4,Uc(this.bh,new nl(this.Qt),this.documents,this.il.id)];case 1:t=o.sent(),e=this.ol(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Vc(this.bh,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new wc(Object.assign({},this.progress),t))]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ol=function(t){this.key=t},sl=function(t){this.key=t},al=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=Bs(),this.De=Bs(),this.hl=Bo(t),this.ll=new zs(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new Gs,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,a=!1,u=Po(this.query)&&i.size===this.query.limit?i.last():null,c=xo(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt((function(t,e){var h=i.get(t),l=e instanceof ro?e:null;l&&(l=qo(n.query,l)?l:null);var f=!!h&&n.De.has(h.key),p=!!l&&(l.Vt||n.De.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data().isEqual(l.data())?f!==p&&(r.track({type:3,doc:l}),d=!0):n.wl(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.hl(l,u)>0||c&&n.hl(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(l?(s=s.add(l),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Po(this.query)||xo(this.query))for(;s.size>this.query.limit;){var h=Po(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{ll:s,dl:r,lc:a,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ti()}};return n(t)-n(e)}(t.type,e.type)||r.hl(t.doc,e.doc)})),this.El(n);var s=e?this.Tl():[],a=0===this.ul.size&&this.Be?1:0,u=a!==this.al;return this.al=a,0!==o.length||u?{snapshot:new Ks(this.query,t.ll,i,o,t.De,0===a,u,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new Gs,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach((function(t){return e.cl=e.cl.add(t)})),t.Ue.forEach((function(t){})),t.Qe.forEach((function(t){return e.cl=e.cl.delete(t)})),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=Bs(),this.ll.forEach((function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))}));var n=[];return e.forEach((function(e){t.ul.has(e)||n.push(new sl(e))})),this.ul.forEach((function(t){e.has(t)||n.push(new ol(t))})),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=Bs();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return Ks.Ne(this.query,this.ll,this.De,0===this.al)},t}(),ul=function(t,e,n){this.query=t,this.targetId=e,this.view=n},cl=function(t){this.key=t,this.Pl=!1},hl=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new Hu((function(t){return Uo(t)}),Fo),this.Sl=new Map,this.Dl=new Set,this.Cl=new As(Si.H),this.xl=new Map,this.Nl=new Bc,this.$l={},this.Fl=new Map,this.Ol=$u.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();function ll(t,e){return Hr(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Wr(this,(function(u){switch(u.label){case 0:return n=Vl(t),(o=n.vl.get(e))?(r=o.targetId,n.Vl.Fa(r),i=o.view.Rl(),[3,4]):[3,1];case 1:return[4,Rc(n.bh,Mo(e))];case 2:return s=u.sent(),a=n.Vl.Fa(s.targetId),r=s.targetId,[4,fl(n,e,r,"current"===a)];case 3:i=u.sent(),n.Ml&&Th(n.yl,s),u.label=4;case 4:return[2,i]}}))}))}function fl(t,e,n,r){return Hr(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Wr(this,(function(h){switch(h.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return Hr(this,void 0,void 0,(function(){var i,o,s;return Wr(this,(function(a){switch(a.label){case 0:return i=e.view.fl(n),i.lc?[4,Lc(t.bh,e.query,!1).then((function(t){var n=t.documents;return e.view.fl(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(Sl(t,e.targetId,s.Il),s.snapshot)]}}))}))}(t,e,n,r)},[4,Lc(t.bh,e,!0)];case 1:return i=h.sent(),o=new al(e,i.Rc),s=o.fl(i.documents),a=Ys.Le(n,r&&"Offline"!==t.onlineState),u=o.wi(s,t.Ml,a),Sl(t,n,u.Il),c=new ul(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),u.snapshot)]}}))}))}function pl(t,e){return Hr(this,void 0,void 0,(function(){var n,r,i;return Wr(this,(function(o){switch(o.label){case 0:return n=ni(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter((function(t){return!Fo(t,e)}))),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,Dc(n.bh,r.targetId,!1).then((function(){n.Vl.La(r.targetId),Sh(n.yl,r.targetId),El(n,r.targetId)})).catch(Bu)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return El(n,r.targetId),[4,Dc(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function dl(t,e,n){return Hr(this,void 0,void 0,(function(){var r,i,o,s;return Wr(this,(function(a){switch(a.label){case 0:r=ql(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=ni(t),i=bi.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Bs());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Tc.Xo(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=ps(c,n.get(c.key));null!=h&&s.push(new gs(c.key,h,eo(h.proto.mapValue),us.exists(!0)))}return r.zo.Ri(t,i,s,e)}))})).then((function(t){var e=t.xs(n);return{batchId:t.batchId,ri:e}}))}(r.bh,e)];case 2:return i=a.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new As(oi)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,Nl(r,i.ri)];case 3:return a.sent(),[4,jh(r.yl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Qa(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function vl(t,e){return Hr(this,void 0,void 0,(function(){var n,r;return Wr(this,(function(i){switch(i.label){case 0:n=ni(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Pc(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach((function(t,e){var r=n.xl.get(e);r&&(ei(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?ei(r.Pl):t.Qe.size>0&&(ei(r.Pl),r.Pl=!1))})),[4,Nl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Bu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function yl(t,e,n){var r=ni(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach((function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=ni(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)})),r&&Zh(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function gl(t,e,n){return Hr(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Wr(this,(function(c){switch(c.label){case 0:return(r=ni(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new As(Si.H)).zt(o,new io(o,_i.min())),a=Bs().add(o),u=new Qs(_i.min(),new Map,new Os(oi),s,a),[4,vl(r,u)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),kl(r),[3,4];case 2:return[4,Dc(r.bh,e,!1).then((function(){return El(r,e,n)})).catch(Bu)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function ml(t,e){return Hr(this,void 0,void 0,(function(){var n,r,i;return Wr(this,(function(o){switch(o.label){case 0:n=ni(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Nc(n.bh,e)];case 2:return i=o.sent(),Il(n,r,null),wl(n,r),n.Vl.Na(r,"acknowledged"),[4,Nl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Bu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function bl(t,e,n){return Hr(this,void 0,void 0,(function(){var r,i;return Wr(this,(function(o){switch(o.label){case 0:r=ni(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ni(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.zo.Pi(t,e).next((function(e){return ei(null!==e),r=e.keys(),n.zo.Ci(t,e)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}(r.bh,e)];case 2:return i=o.sent(),Il(r,e,n),wl(r,e),r.Vl.Na(e,"rejected",n),[4,Nl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Bu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function _l(t,e){return Hr(this,void 0,void 0,(function(){var n,r,i,o,s;return Wr(this,(function(a){switch(a.label){case 0:Ph((n=ni(t)).yl)||Xr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=ni(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.zo.Vi(t)}))}(n.bh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=a.sent(),s=Qa(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function wl(t,e){(t.Fl.get(e)||[]).forEach((function(t){t.resolve()})),t.Fl.delete(e)}function Il(t,e,n){var r=ni(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function El(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach((function(e){t.Nl.Fi(e)||Tl(t,e)}))}function Tl(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(Sh(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),kl(t))}function Sl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ol?(t.Nl.nr(o.key,e),Cl(t,o)):o instanceof sl?(Xr("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||Tl(t,o.key)):ti()}}function Cl(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(Xr("SyncEngine","New document in limbo: "+n),t.Dl.add(r),kl(t))}function kl(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new Si(Ii.ot(e)),r=t.Ol.next();t.xl.set(r,new cl(n)),t.Cl=t.Cl.zt(n,r),Th(t.yl,new Wo(Mo(Ao(n.path)),r,2,mi.q))}}function Nl(t,e,n){return Hr(this,void 0,void 0,(function(){var r,i,o,s;return Wr(this,(function(a){switch(a.label){case 0:return r=ni(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach((function(t,a){s.push(r.Ll(a,e,n).then((function(t){if(t){r.Ml&&r.Vl.Ba(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ec.oc(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.bl.ah(i),[4,function(t,e){return Hr(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h;return Wr(this,(function(l){switch(l.label){case 0:n=ni(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return ja.forEach(e,(function(e){return ja.forEach(e.ic,(function(r){return n.persistence.Ti.nr(t,e.targetId,r)})).next((function(){return ja.forEach(e.rc,(function(r){return n.persistence.Ti.ir(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!Ba(r=l.sent()))throw r;return Xr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.fc.get(a),c=u.Ot,h=u.Lt(c),n.fc=n.fc.zt(a,h));return[2]}}))}))}(r.bh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Al(t,e){return Hr(this,void 0,void 0,(function(){var n,r;return Wr(this,(function(i){switch(i.label){case 0:return(n=ni(t)).currentUser.isEqual(e)?[3,3]:(Xr("SyncEngine","User change. New user:",e.A()),[4,kc(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fl.forEach((function(t){t.forEach((function(t){t.reject(new hi(ci.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fl.clear()}(n),n.Vl.Ua(e,r.mc,r.Ac),[4,Nl(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Pl(t,e){var n=ni(t),r=n.xl.get(e);if(r&&r.Pl)return Bs().add(r.key);var i=Bs(),o=n.Sl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.vl.get(u);i=i.Pe(c.view._l)}return i}function xl(t,e){return Hr(this,void 0,void 0,(function(){var n,r,i;return Wr(this,(function(o){switch(o.label){case 0:return[4,Lc((n=ni(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&Sl(n,e.targetId,i.Il),i)]}}))}))}function Ol(t){return Hr(this,void 0,void 0,(function(){var e;return Wr(this,(function(n){return[2,jc((e=ni(t)).bh).then((function(t){return Nl(e,t)}))]}))}))}function Rl(t,e,n,r){return Hr(this,void 0,void 0,(function(){var i,o;return Wr(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=ni(t),r=ni(n.zo);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.yi(t,e).next((function(e){return e?n.Tc.Xo(t,e):ja.resolve(null)}))}))}((i=ni(t)).bh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,jh(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Il(i,e,r||null),wl(i,e),function(t,e){ni(ni(t).zo).xi(e)}(i.bh,e)):ti(),s.label=4;case 4:return[4,Nl(i,o)];case 5:return s.sent(),[3,7];case 6:Xr("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Dl(t,e){return Hr(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Wr(this,(function(h){switch(h.label){case 0:return Vl(n=ni(t)),ql(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,Ll(n,r.it())]);case 1:return i=h.sent(),n.kl=!0,[4,Wh(n.yl,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)a=s[o],Th(n.yl,a);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(u=[],c=Promise.resolve(),n.Sl.forEach((function(t,e){n.Vl.Ma(e)?u.push(e):c=c.then((function(){return El(n,e),Dc(n.bh,e,!0)})),Sh(n.yl,e)})),[4,c]);case 4:return h.sent(),[4,Ll(n,u)];case 5:return h.sent(),function(t){var e=ni(t);e.xl.forEach((function(t,n){Sh(e.yl,n)})),e.Nl.Oc(),e.xl=new Map,e.Cl=new As(Si.H)}(n),n.kl=!1,[4,Wh(n.yl,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function Ll(t,e,n){return Hr(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v;return Wr(this,(function(y){switch(y.label){case 0:n=ni(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Sl.get(a))&&0!==c.length?[4,Rc(n.bh,Mo(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),h=0,l=c,y.label=3;case 3:return h<l.length?(f=l[h],p=n.vl.get(f),[4,xl(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Mc(n.bh,a)];case 8:return v=y.sent(),[4,Rc(n.bh,v)];case 9:return u=y.sent(),[4,fl(n,Ml(v),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}}))}))}function Ml(t){return No(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function jl(t){var e=ni(t);return ni(ni(e.bh).persistence).Uo()}function Fl(t,e,n,r){return Hr(this,void 0,void 0,(function(){var i,o,s;return Wr(this,(function(a){switch(a.label){case 0:return(i=ni(t)).kl?(Xr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,jc(i.bh)];case 3:return o=a.sent(),s=Qs.Me(e,"current"===n),[4,Nl(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Dc(i.bh,e,!0)];case 6:return a.sent(),El(i,e,r),[3,8];case 7:ti(),a.label=8;case 8:return[2]}}))}))}function Ul(t,e,n){return Hr(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,l,f;return Wr(this,(function(p){switch(p.label){case 0:if(!(r=Vl(t)).kl)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Sl.has(s)?(Xr("SyncEngine","Adding an already active target "+s),[3,5]):[4,Mc(r.bh,s)]):[3,6];case 2:return a=p.sent(),[4,Rc(r.bh,a)];case 3:return u=p.sent(),[4,fl(r,Ml(a),u.targetId,!1)];case 4:p.sent(),Th(r.yl,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Wr(this,(function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,Dc(r.bh,t,!1).then((function(){Sh(r.yl,t),El(r,t)})).catch(Bu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Vl(t){var e=ni(t);return e.yl.Dh.Lh=vl.bind(null,e),e.yl.Dh.vn=Pl.bind(null,e),e.yl.Dh.Mh=gl.bind(null,e),e.bl.ah=Jh.bind(null,e.gl),e.bl.Bl=$h.bind(null,e.gl),e}function ql(t){var e=ni(t);return e.yl.Dh.Bh=ml.bind(null,e),e.yl.Dh.qh=bl.bind(null,e),e}function Bl(t,e,n){var r=ni(t);(function(t,e,n){return Hr(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Wr(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=ni(t),r=ca(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.wo.Os(t,e.id)})).then((function(t){return!!t&&t.createTime._(r)>=0}))}(t.bh,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n.ql(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n.Ul(il(r)),i=new rl(r,t.bh,e.Qt),[4,e.Ql()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.rl(o)]:[3,10];case 7:return(s=c.sent())&&n.Ul(s),[4,e.Ql()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return a=c.sent(),[4,Nl(t,a.Go,void 0)];case 12:return c.sent(),[4,function(t,e){var n=ni(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.wo.ks(t,e)}))}(t.bh,r)];case 13:return c.sent(),n.ql(a.progress),[3,15];case 14:return $r("SyncEngine","Loading bundle failed with "+(u=c.sent())),n.Kl(u),[3,15];case 15:return[2]}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(r,e,n).then((function(){r.Vl.Wa()}))}var Hl=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(e){switch(e.label){case 0:return this.Qt=dh(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}}))}))},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return Cc(this.persistence,new Tc,t.Jl,this.Qt)},t.prototype.jl=function(t){return new Qc(Xc.ia,this.Qt)},t.prototype.Wl=function(t){return new sh},t.prototype.terminate=function(){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}}))}))},t}(),Wl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Br(e,t),e.prototype.initialize=function(e){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Fc(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,ql(this.Yl._a)];case 4:return n.sent(),[4,jh(this.Yl.yl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Hl=function(t){return Cc(this.persistence,new Tc,t.Jl,this.Qt)},e.prototype.zl=function(t){var e=this.persistence.Ti.lr;return new oc(e,t._s)},e.prototype.jl=function(t){var e=_c(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?qu.Ys(this.cacheSizeBytes):qu.ti;return new gc(this.synchronizeTabs,e,t.clientId,n,t._s,fh(),ph(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new sh},e}(Hl),zl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Br(e,t),e.prototype.initialize=function(e){return Hr(this,void 0,void 0,(function(){var n,r=this;return Wr(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof oh?(this.Vl._a={eu:Rl.bind(null,n),nu:Fl.bind(null,n),su:Ul.bind(null,n),Uo:jl.bind(null,n),tu:Ol.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro((function(t){return Hr(r,void 0,void 0,(function(){return Wr(this,(function(e){switch(e.label){case 0:return[4,Dl(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Wl=function(t){var e=fh();if(!oh.Kn(e))throw new hi(ci.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=_c(t.yu.t,t.yu.persistenceKey);return new oh(e,t._s,n,t.clientId,t.Jl)},e}(Wl),Gl=function(){function t(){}return t.prototype.initialize=function(t,e){return Hr(this,void 0,void 0,(function(){var n=this;return Wr(this,(function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return yl(n._a,t,1)},this.yl.Dh.n_=Al.bind(null,this._a),[4,Wh(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.t_=function(t){return new Qh},t.prototype.Xl=function(t){var e,n=dh(t.yu.t),r=(e=t.yu,new lh(e));return function(t,e,n){return new bh(t,e,n)}(t.credentials,r,n)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return yl(s._a,t,0)},o=uh.Kn()?new uh:new ah,new wh(e,n,r,i,o)},t.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){var a=new hl(t,e,n,r,i,o);return s&&(a.kl=!0),a}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},t.prototype.terminate=function(){return function(t){return Hr(this,void 0,void 0,(function(){var e;return Wr(this,(function(n){switch(n.label){case 0:return e=ni(t),Xr("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,Eh(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}}))}))}(this.yl)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Hr(this,void 0,void 0,(function(){var r;return Wr(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(t){return[2]}))}))},releaseLock:function(){}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ql=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Yl=function(){function t(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new Ma,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then((function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.r_.cancel()},t.prototype.getMetadata=function(){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Ql=function(){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}}))}))},t.prototype.c_=function(){return Hr(this,void 0,void 0,(function(){var t,e,n,r;return Wr(this,(function(i){switch(i.label){case 0:return[4,this.a_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.o_.decode(t),n=Number(e),isNaN(n)&&this.u_("length string ("+e+") is not valid number"),[4,this.h_(n)]);case 2:return r=i.sent(),[2,new el(JSON.parse(r),t.length+n)]}}))}))},t.prototype.l_=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.a_=function(){return Hr(this,void 0,void 0,(function(){var t,e;return Wr(this,(function(n){switch(n.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.h_=function(t){return Hr(this,void 0,void 0,(function(){var e;return Wr(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:n.sent()&&this.u_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.__=function(){return Hr(this,void 0,void 0,(function(){var t,e;return Wr(this,(function(n){switch(n.label){case 0:return[4,this.r_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),Xl=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new hi(ci.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new Ti(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}(),Jl=function(t){this._methodName=t},$l=function(t){this.d_=t};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t,e,n){if(!n)throw new hi(ci.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function tf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new hi(ci.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ef(t,e,n,r){if(!0===e&&!0===r)throw new hi(ci.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function nf(t){if(!Si.wt(t))throw new hi(ci.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function rf(t){if(Si.wt(t))throw new hi(ci.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function of(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ti()}function sf(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new hi(ci.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=of(t);throw new hi(ci.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function af(t,e){if(e<=0)throw new hi(ci.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new hi(ci.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new hi(ci.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,ef("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),cf=new Map,hf=function(){function t(t,e){this.w_="(lite)",this.E_=new uf({}),this.T_=!1,t instanceof Kr?(this.I_=t,this.m_=new di):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new hi(ci.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kr(t.options.projectId)}(t),this.m_=new vi(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new hi(ci.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new hi(ci.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new uf(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new di;switch(t.type){case"gapi":var e=t.client;return ei(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new gi(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new hi(ci.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return t=this,(e=cf.get(t))&&(Xr("ComponentProvider","Removing Datastore"),cf.delete(t),e.terminate()),Promise.resolve();var t,e},t}(),lf=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new pf(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),ff=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),pf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ao(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Br(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new lf(this.firestore,null,new Si(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(ff);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof $l&&(t=t.d_),Zl("collection","path",e),t instanceof hf)return rf(n=Ii.ot.apply(Ii,zr([e],r))),new pf(t,null,n);if(!(t instanceof lf||t instanceof pf))throw new hi(ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return rf(n=Ii.ot.apply(Ii,zr([t.path],r)).child(Ii.ot(e))),new pf(t.firestore,null,n)}function vf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof $l&&(t=t.d_),1===arguments.length&&(e=ii.u()),Zl("doc","path",e),t instanceof hf)return nf(n=Ii.ot.apply(Ii,zr([e],r))),new lf(t,null,new Si(n));if(!(t instanceof lf||t instanceof pf))throw new hi(ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return nf(n=t.D_.child(Ii.ot.apply(Ii,zr([e],r)))),new lf(t.firestore,t instanceof pf?t.v_:null,new Si(n))}function yf(t,e){return t instanceof $l&&(t=t.d_),e instanceof $l&&(e=e.d_),(t instanceof lf||t instanceof pf)&&(e instanceof lf||e instanceof pf)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function gf(t,e){return t instanceof $l&&(t=t.d_),e instanceof $l&&(e=e.d_),t instanceof ff&&e instanceof ff&&t.firestore===e.firestore&&Fo(t.C_,e.C_)&&t.v_===e.v_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var mf=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new hi(ci.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new hi(ci.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return oi(this.x_,t.x_)||oi(this.N_,t.N_)},t}(),bf=/^__.*__$/,_f=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new gs(t,this.data,this.Gt,e,this.fieldTransforms):new ys(t,this.data,e,this.fieldTransforms)},t}(),wf=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new gs(t,this.data,this.Gt,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ti()}}var Ef=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return Hf(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find((function(e){return t.nt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.nt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(If(this.k_)&&bf.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Tf=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||dh(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Ef({k_:t,methodName:e,j_:n,path:Ti.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function Sf(t){var e=t.p_(),n=dh(t.I_);return new Tf(t.I_,!!e.ignoreUndefinedProperties,n)}function Cf(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Uf("Data must be an object, but it was:",s,r);var a,u,c=jf(r,s);if(o.merge)a=new Ai(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=Vf(e,f[l],n);if(!s.contains(p))throw new hi(ci.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Wf(h,p)||h.push(p)}a=new Ai(h),u=s.fieldTransforms.filter((function(t){return a.Tt(t.field)}))}else a=null,u=s.fieldTransforms;return new _f(new Zi(c),a,u)}var kf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Br(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Jl);function Nf(t,e,n){return new Ef({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var Af=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Br(e,t),e.prototype.z_=function(t){return new ss(t.path,new $o)},e.prototype.isEqual=function(t){return t instanceof e},e}(Jl),Pf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Br(e,t),e.prototype.z_=function(t){var e=Nf(this,t,!0),n=this.H_.map((function(t){return Mf(t,e)})),r=new Zo(n);return new ss(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Jl),xf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Br(e,t),e.prototype.z_=function(t){var e=Nf(this,t,!0),n=this.H_.map((function(t){return Mf(t,e)})),r=new es(n);return new ss(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Jl),Of=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Br(e,t),e.prototype.z_=function(t){var e=new rs(t.Qt,Ko(t.Qt,this.J_));return new ss(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Jl);function Rf(t,e,n,r){var i=t.G_(1,e,n);Uf("Data must be an object, but it was:",i,r);var o=[],s=new to;ki(r,(function(t,r){var a=Bf(e,t,n);r instanceof $l&&(r=r.d_);var u=i.U_(a);if(r instanceof kf)o.push(a);else{var c=Mf(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Ai(o);return new wf(s.Pt(),a,i.fieldTransforms)}function Df(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[Vf(e,r,n)],u=[i];if(o.length%2!=0)throw new hi(ci.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Vf(e,o[c])),u.push(o[c+1]);for(var h=[],l=new to,f=a.length-1;f>=0;--f)if(!Wf(h,a[f])){var p=a[f],d=u[f];d instanceof $l&&(d=d.d_);var v=s.U_(p);if(d instanceof kf)h.push(p);else{var y=Mf(d,v);null!=y&&(h.push(p),l.set(p,y))}}var g=new Ai(h);return new wf(l.Pt(),g,s.fieldTransforms)}function Lf(t,e,n,r){return void 0===r&&(r=!1),Mf(n,t.G_(r?4:3,e))}function Mf(t,e){if(t instanceof $l&&(t=t.d_),Ff(t))return Uf("Unsupported field value:",e,t),jf(t,e);if(t instanceof Jl)return function(t,e){if(!If(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Mf(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof $l&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ko(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=bi.fromDate(t);return{timestampValue:sa(e.Qt,n)}}if(t instanceof bi)return n=new bi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:sa(e.Qt,n)};if(t instanceof mf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof li)return{bytesValue:aa(e.Qt,t.I)};if(t instanceof lf){n=e.t;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:ha(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+of(t))}(t,e)}function jf(t,e){var n={};return Ni(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):ki(t,(function(t,r){var i=Mf(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Ff(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof bi||t instanceof mf||t instanceof li||t instanceof lf||t instanceof Jl)}function Uf(t,e,n){if(!Ff(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=of(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function Vf(t,e,n){if(e instanceof $l&&(e=e.d_),e instanceof Xl)return e.f_;if("string"==typeof e)return Bf(t,e);throw Hf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var qf=new RegExp("[~\\*/\\[\\]]");function Bf(t,e,n){if(e.search(qf)>=0)throw Hf("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Xl.bind.apply(Xl,zr([void 0],e.split("."))))).f_}catch(O){throw Hf("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Hf(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new hi(ci.INVALID_ARGUMENT,(a+=". ")+t+u)}function Wf(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zf=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Hr(this,void 0,void 0,(function(){var e,n=this;return Wr(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new hi(ci.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Hr(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Wr(this,(function(u){switch(u.label){case 0:return n=ni(t),r=ya(n.Qt)+"/documents",i={documents:e.map((function(t){return fa(n.Qt,t)}))},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){ei(!!e.found),e.found.name,e.found.updateTime;var n=pa(t,e.found.name),r=ca(e.found.updateTime),i=new Zi({mapValue:{fields:e.found.fields}});return new ro(n,r,i,{})}(t,e):"missing"in e?function(t,e){ei(!!e.missing),ei(!!e.readTime);var n=pa(t,e.missing),r=ca(e.readTime);return new io(n,r)}(t,e):ti()}(n.Qt,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());ei(!!e),a.push(e)})),a)]}}))}))}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof io||t instanceof ro?n.sf(t):ti()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Ts(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Hr(this,void 0,void 0,(function(){var t,e=this;return Wr(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Si._t(n);e.mutations.push(new Ss(r,e.jt(r)))})),[4,function(t,e){return Hr(this,void 0,void 0,(function(){var n,r,i;return Wr(this,(function(o){switch(o.label){case 0:return n=ni(t),r=ya(n.Qt)+"/documents",i={writes:e.map((function(t){return _a(n.Qt,t)}))},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof ro)e=t.version;else{if(!(t instanceof io))throw ti();e=_i.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new hi(ci.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?us.updateTime(e):us.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(_i.min()))throw new hi(ci.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return us.updateTime(e)}return us.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),Gf=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new vh(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu((function(){return Hr(t,void 0,void 0,(function(){var t,e,n=this;return Wr(this,(function(r){return t=new zf(this.Sh),(e=this.uf(t))&&e.then((function(e){n._s.Ps((function(){return t.commit().then((function(){n.Es.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!ji(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps((function(){return e.af(),Promise.resolve()}))):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ks(e)}return!1},t}(),Kf=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=fi.UNAUTHENTICATED,this.clientId=ii.u(),this._f=function(){},this.C=new Ma,this.credentials.v((function(t){Xr("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()}))}return t.prototype.getConfiguration=function(){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this._s.wf)throw new hi(ci.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new Ma;return this._s.Tf((function(){return Hr(t,void 0,void 0,(function(){var t,n;return Wr(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Qa(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t,e){return Hr(this,void 0,void 0,(function(){var n,r,i=this;return Wr(this,(function(o){switch(o.label){case 0:return t._s.Af(),Xr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff((function(n){r.isEqual(n)||(r=n,t._s.po((function(){return Hr(i,void 0,void 0,(function(){return Wr(this,(function(t){switch(t.label){case 0:return[4,kc(e.bh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Po((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function Yf(t,e){return Hr(this,void 0,void 0,(function(){var n,r;return Wr(this,(function(i){switch(i.label){case 0:return t._s.Af(),[4,Xf(t)];case 1:return n=i.sent(),Xr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t._s.po((function(){return function(t,e){return Hr(this,void 0,void 0,(function(){var n,r;return Wr(this,(function(i){switch(i.label){case 0:return(n=ni(t))._s.Af(),Xr("RemoteStore","RemoteStore received new credentials"),r=Ph(n),n.Nh.add(3),[4,Eh(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,Ih(n)];case 3:return i.sent(),[2]}}))}))}(e.yl,n)}))})),t.If=e,[2]}}))}))}function Xf(t){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(Xr("FirestoreClient","Using default OfflineComponentProvider"),[4,Qf(t,new Hl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function Jf(t){return Hr(this,void 0,void 0,(function(){return Wr(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(Xr("FirestoreClient","Using default OnlineComponentProvider"),[4,Yf(t,new Gl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function $f(t){return Xf(t).then((function(t){return t.persistence}))}function Zf(t){return Xf(t).then((function(t){return t.bh}))}function tp(t){return Jf(t).then((function(t){return t.yl}))}function ep(t){return Jf(t).then((function(t){return t._a}))}function np(t){return Hr(this,void 0,void 0,(function(){var e,n;return Wr(this,(function(r){switch(r.label){case 0:return[4,Jf(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=ll.bind(null,e._a),n.Hh=pl.bind(null,e._a),n)]}}))}))}function rp(t,e,n){var r=this;void 0===n&&(n={});var i=new Ma;return t._s.Ps((function(){return Hr(r,void 0,void 0,(function(){var r;return Wr(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ql({next:function(o){e.Ps((function(){return Xh(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new hi(ci.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new hi(ci.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new tl(Ao(n.path),o,{includeMetadataChanges:!0,nl:!0});return Yh(t,s)},[4,np(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}function ip(t,e,n){var r=this;void 0===n&&(n={});var i=new Ma;return t._s.Ps((function(){return Hr(r,void 0,void 0,(function(){var r;return Wr(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ql({next:function(n){e.Ps((function(){return Xh(t,s)})),n.fromCache&&"server"===r.source?i.reject(new hi(ci.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new tl(n,o,{includeMetadataChanges:!0,nl:!0});return Yh(t,s)},[4,np(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}var op=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new vh(this,"async_queue_retry"),this.vf=function(){var e=ph();e&&Xr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=ph();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=ph();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return Hr(this,void 0,void 0,(function(){var t,e=this;return Wr(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!Ba(t=n.sent()))throw t;return Xr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,Jr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Ka.Ts(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&ti()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Hr(this,void 0,void 0,(function(){var t;return Wr(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ds-e.ds}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()}))},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function sp(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var ap=function(){function t(){this.kf={},this.Mf=new Ma,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Mf.promise.catch(t)},t.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},t.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},t.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},t.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)},t}(),up=-1,cp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new op,r.w_="name"in e?e.name:"[DEFAULT]",r}return Br(e,t),e.prototype.b_=function(){return this.qf||lp(this),this.qf.terminate()},e}(hf);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t){return t.qf||lp(t),t.qf.df(),t.qf}function lp(t){var e=t.p_(),n=function(t,e,n){return new Gr(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.qf=new Kf(t.m_,t.Bf,n)}function fp(t,e,n){var r=this,i=new Ma;return t._s.enqueue((function(){return Hr(r,void 0,void 0,(function(){var r;return Wr(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Qf(t,n)];case 1:return o.sent(),[4,Yf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===ci.FAILED_PRECONDITION||t.code===ci.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function pp(t){if(t.R_||t.P_)throw new hi(ci.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dp=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),Vi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Oi(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(Ri(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw ti()}},t.prototype.Hf=function(t,e){var n=this,r={};return ki(t.fields||{},(function(t,i){r[t]=n.Uf(i,e)})),r},t.prototype.Gf=function(t){return new mf(Oi(t.latitude),Oi(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.Uf(t,e)}))},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=Li(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(Mi(t));default:return null}},t.prototype.Qf=function(t){var e=xi(t);return new bi(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=Ii.ot(t);ei(La(n));var r=new Kr(n.get(1),n.get(3)),i=new Si(n.Y(5));return r.isEqual(e)||Jr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),vp=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new lf(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new yp(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(gp("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),yp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Br(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(vp);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t,e){return"string"==typeof e?Bf(t,e):e instanceof $l?e.d_.f_:e.f_}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(t){if(xo(t)&&0===t.xt.length)throw new hi(ci.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bp=function(){};function _p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var wp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return Br(e,t),e.prototype.td=function(t){var e=Sf(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new hi(ci.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Np(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var l=h[c];u.push(kp(r,t,l))}a={arrayValue:{values:u}}}else a=kp(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Np(s,o),a=Lf(n,"where",s,"in"===o||"not-in"===o);var f=lo.create(i,o,a);return function(t,e){if(e.Ct()){var n=Ro(t);if(null!==n&&!n.isEqual(e.field))throw new hi(ci.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Oo(t);null!==r&&Ap(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new hi(ci.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new hi(ci.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t.C_,0,e,t.firestore.I_,this.ed,this.nd,this.sd);return new ff(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new ko(t.path,t.collectionGroup,t.xt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(bp),Ip=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return Br(e,t),e.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new hi(ci.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new hi(ci.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Eo(e,n);return function(t,e){if(null===Oo(t)){var n=Ro(t);null!==n&&Ap(t,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new ff(t.firestore,t.v_,function(t,e){var n=t.xt.concat([e]);return new ko(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(bp),Ep=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return Br(e,t),e.prototype.td=function(t){return new ff(t.firestore,t.v_,jo(t.C_,this.od,this.ad))},e}(bp),Tp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Br(e,t),e.prototype.td=function(t){var e=Cp(t,this.type,this.ud,this.hd);return new ff(t.firestore,t.v_,function(t,e){return new ko(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(bp),Sp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Br(e,t),e.prototype.td=function(t){var e=Cp(t,this.type,this.ud,this.hd);return new ff(t.firestore,t.v_,function(t,e){return new ko(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(bp);function Cp(t,e,n,r){if(n[0]instanceof $l&&(n[0]=n[0].d_),n[0]instanceof vp)return function(t,e,n,r,i){if(!r)throw new hi(ci.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Lo(t);s<a.length;s++){var u=a[s];if(u.field.ut())o.push(Ki(e,r.key));else{var c=r.field(u.field);if(Di(c))throw new hi(ci.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.rt();throw new hi(ci.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new wo(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=Sf(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new hi(ci.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new hi(ci.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Do(t)&&-1!==c.indexOf("/"))throw new hi(ci.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Ii.ot(c));if(!Si.wt(h))throw new hi(ci.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new Si(h);a.push(Ki(e,l))}else{var f=Lf(n,r,c);a.push(f)}}return new wo(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function kp(t,e,n){if(n instanceof $l&&(n=n.d_),"string"==typeof n){if(""===n)throw new hi(ci.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Do(e)&&-1!==n.indexOf("/"))throw new hi(ci.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ii.ot(n));if(!Si.wt(r))throw new hi(ci.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ki(t,new Si(r))}if(n instanceof lf)return Ki(t,n.S_);throw new hi(ci.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+of(n)+".")}function Np(t,e){if(!Array.isArray(t)||0===t.length)throw new hi(ci.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new hi(ci.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Ap(t,e,n){if(!n.isEqual(e))throw new hi(ci.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var xp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Br(e,t),e.prototype.Wf=function(t){return new li(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new lf(this.firestore,null,e)},e}(dp),Op=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Rp=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).Yf=e,a.ld=e,a.metadata=o,a}return Br(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new Dp(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(gp("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(vp),Dp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Br(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Rp),Lp=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new Op(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach((function(r){t.call(e,new Dp(n.Yf,n.Xf,r.key,r,new Op(n._d.De.has(r.key),n._d.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new hi(ci.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map((function(e){var r=new Dp(t.Yf,t.Xf,e.doc.key,e.doc,new Op(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._d.Se;return t._d.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Dp(t.Yf,t.Xf,e.doc.key,e.doc,new Op(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Mp(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.dd=e),this.fd},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ti()}}function jp(t,e){return t instanceof Rp&&e instanceof Rp?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof Lp&&e instanceof Lp&&t.Yf===e.Yf&&gf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Br(e,t),e.prototype.Wf=function(t){return new li(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new lf(this.firestore,null,e)},e}(dp);function Up(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=sf(t,lf);var o=sf(t.firestore,cp),s=Sf(o);return e instanceof $l&&(e=e.d_),qp(o,[("string"==typeof e||e instanceof Xl?Df(s,"updateDoc",t.S_,e,n,r):Rf(s,"updateDoc",t.S_,e)).F_(t.S_,us.exists(!0))])}function Vp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof $l&&(t=t.d_);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||sp(i[a])||(s=i[a],a++);var u,c,h,l={includeMetadataChanges:s.includeMetadataChanges};if(sp(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof lf)c=sf(t.firestore,cp),h=Ao(t.S_.path),u={next:function(e){i[a]&&i[a](Bp(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=sf(t,ff);c=sf(p.firestore,cp),h=p.C_;var d=new Fp(c);u={next:function(t){i[a]&&i[a](new Lp(c,d,p,t))},error:i[a+1],complete:i[a+2]},mp(t.C_)}return function(t,e,n,r){var i=this,o=new Ql(r),s=new tl(e,o,n);return t._s.Ps((function(){return Hr(i,void 0,void 0,(function(){var e;return Wr(this,(function(n){switch(n.label){case 0:return e=Yh,[4,np(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.i_(),t._s.Ps((function(){return Hr(i,void 0,void 0,(function(){var e;return Wr(this,(function(n){switch(n.label){case 0:return e=Xh,[4,np(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(hp(c),h,l,u)}function qp(t,e){return function(t,e){var n=this,r=new Ma;return t._s.Ps((function(){return Hr(n,void 0,void 0,(function(){var n;return Wr(this,(function(i){switch(i.label){case 0:return n=dl,[4,ep(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(hp(t),e)}function Bp(t,e,n){var r=n.docs.get(e.S_),i=new Fp(t);return new Rp(t,i,e.S_,r,new Op(n.hasPendingWrites,n.fromCache),e.v_)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hp=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=Sf(t)}return t.prototype.set=function(t,e,n){this.md();var r=Wp(t,this.Yf),i=Pp(r.v_,e,n),o=Cf(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,us.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=Wp(t,this.Yf);return e instanceof $l&&(e=e.d_),o="string"==typeof e||e instanceof Xl?Df(this.Id,"WriteBatch.update",s.S_,e,n,r):Rf(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,us.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=Wp(t,this.Yf);return this.Ed=this.Ed.concat(new Ts(e.S_,us.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new hi(ci.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Wp(t,e){if(t instanceof $l&&(t=t.d_),t.firestore!==e)throw new hi(ci.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return Br(e,t),e.prototype.get=function(e){var n=this,r=Wp(e,this.Yf),i=new Fp(this.Yf);return t.prototype.get.call(this,e).then((function(t){return new Rp(n.Yf,i,r.S_,t.Zf,new Op(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=Sf(t)}return t.prototype.get=function(t){var e=this,n=Wp(t,this.Yf),r=new xp(this.Yf);return this.Ad.ef([n.S_]).then((function(t){if(!t||1!==t.length)return ti();var i=t[0];if(i instanceof io)return new vp(e.Yf,r,n.S_,null,n.v_);if(i instanceof ro)return new vp(e.Yf,r,i.key,i,n.v_);throw ti()}))},t.prototype.set=function(t,e,n){var r=Wp(t,this.Yf),i=Pp(r.v_,e,n),o=Cf(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Wp(t,this.Yf);return e instanceof $l&&(e=e.d_),o="string"==typeof e||e instanceof Xl?Df(this.Id,"Transaction.update",s.S_,e,n,r):Rf(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=Wp(t,this.Yf);return this.Ad.delete(e.S_),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(){if("undefined"==typeof Uint8Array)throw new hi(ci.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Kp(){if("undefined"==typeof atob)throw new hi(ci.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Qp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Br(e,t),e.fromBase64String=function(t){return Kp(),new e(li.fromBase64String(t))},e.fromUint8Array=function(t){return Gp(),new e(li.fromUint8Array(t))},e.prototype.toBase64=function(){return Kp(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return Gp(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}($l),Yp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){pp(t=sf(t,cp));var n=hp(t),r=t.p_(),i=new Gl;return fp(n,i,new Wl(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){pp(t=sf(t,cp));var e=hp(t),n=t.p_(),r=new Gl;return fp(e,r,new zl(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new hi(ci.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Ma;return t.Bf.Tf((function(){return Hr(e,void 0,void 0,(function(){var e;return Wr(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Hr(this,void 0,void 0,(function(){var e;return Wr(this,(function(n){switch(n.label){case 0:return Ua.Kn()?(e=t+"main",[4,Ua.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(_c(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t.d_)},t}(),Xp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Kr||(i.Pd=e),i}return Br(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=sf(t,hf)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&$r("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this.d_,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return Hr(e,void 0,void 0,(function(){var e,n;return Wr(this,(function(r){switch(r.label){case 0:return[4,$f(t)];case 1:return e=r.sent(),[4,tp(t)];case 2:return n=r.sent(),[2,(e.yo(!0),function(t){var e=ni(t);return e.Nh.delete(0),Ih(e)}(n))]}}))}))}))}(hp(sf(this.d_,cp)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return Hr(e,void 0,void 0,(function(){var e,n;return Wr(this,(function(r){switch(r.label){case 0:return[4,$f(t)];case 1:return e=r.sent(),[4,tp(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return Hr(this,void 0,void 0,(function(){var e;return Wr(this,(function(n){switch(n.label){case 0:return(e=ni(t)).Nh.add(0),[4,Eh(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(hp(sf(this.d_,cp)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&ef("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Ma;return t._s.Ps((function(){return Hr(e,void 0,void 0,(function(){var e;return Wr(this,(function(r){switch(r.label){case 0:return e=_l,[4,ep(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(hp(sf(this.d_,cp)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Ql(e);return t._s.Ps((function(){return Hr(n,void 0,void 0,(function(){var e;return Wr(this,(function(n){switch(n.label){case 0:return e=function(t,e){ni(t).Wh.add(e),e.next()},[4,np(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.i_(),t._s.Ps((function(){return Hr(n,void 0,void 0,(function(){var e;return Wr(this,(function(n){switch(n.label){case 0:return e=function(t,e){ni(t).Wh.delete(e)},[4,np(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(hp(t=sf(t,cp)),sp(e)?e:{next:e})}(this.d_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new hi(ci.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new ld(this,df(this.d_,t))}catch(t){throw rd(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new nd(this,vf(this.d_,t))}catch(t){throw rd(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new ud(this,function(t,e){if(t=sf(t,hf),Zl("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new hi(ci.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ff(t,null,function(t){return new ko(Ii.ct(),t)}(e))}(this.d_,t))}catch(t){throw rd(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Ma;return t._s.Ps((function(){return Hr(n,void 0,void 0,(function(){var n;return Wr(this,(function(i){switch(i.label){case 0:return[4,function(t){return Jf(t).then((function(t){return t.Sh}))}(t)];case 1:return n=i.sent(),new Gf(t._s,n,e,r).run(),[2]}}))}))})),r.promise}(hp(t),(function(n){return e(new zp(t,n))}))}(this.d_,(function(n){return t(new Zp(e,n))}))},e.prototype.batch=function(){var t=this;return hp(this.d_),new td(new Hp(this.d_,(function(e){return qp(t.d_,e)})))},e.prototype.loadBundle=function(t){throw new hi(ci.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new hi(ci.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}($l),Jp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Br(e,t),e.prototype.Wf=function(t){return new Qp(new li(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return nd.yd(e,this.firestore,null)},e}(dp);function $p(t){var e;e=t,Qr.setLogLevel(e)}var Zp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new Jp(e),r}return Br(e,t),e.prototype.get=function(t){var e=this,n=fd(t);return this.d_.get(n).then((function(t){return new sd(e.Yf,new Rp(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=fd(t);return n?(tf("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=fd(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,zr([s,e,n],i)),this},e.prototype.delete=function(t){var e=fd(t);return this.d_.delete(e),this},e}($l),td=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Br(e,t),e.prototype.set=function(t,e,n){var r=fd(t);return n?(tf("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=fd(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,zr([s,e,n],i)),this},e.prototype.delete=function(t){var e=fd(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}($l),ed=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return Br(e,t),e.prototype.fromFirestore=function(t,e){var n=new Dp(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new ad(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Jp(t),n),i.set(n,o)),o},e}($l);ed.Vd=new WeakMap;var nd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Jp(e),r}return Br(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new hi(ci.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new lf(n.d_,r,new Si(t)))},e.yd=function(t,n,r){return new e(n,new lf(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new ld(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new ld(this.firestore,df(this.d_,t))}catch(t){throw rd(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof $l&&(t=t.d_),t instanceof lf&&yf(this.d_,t)},e.prototype.set=function(t,e){e=tf("DocumentReference.set",e);try{return function(t,e,n){t=sf(t,lf);var r=sf(t.firestore,cp),i=Pp(t.v_,e,n);return qp(r,[Cf(Sf(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,us.Kt())])}(this.d_,t,e)}catch(t){throw rd(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Up(this.d_,t):Up.apply(void 0,zr([this.d_,t,e],n))}catch(t){throw rd(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return qp(sf((t=this.d_).firestore,cp),[new Ts(t.S_,us.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=id(e),i=od(e,(function(e){return new sd(t.firestore,new Rp(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))}));return Vp(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=sf(t,lf);var e=sf(t.firestore,cp),n=hp(e),r=new Fp(e);return function(t,e){var n=this,r=new Ma;return t._s.Ps((function(){return Hr(n,void 0,void 0,(function(){var n;return Wr(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Hr(this,void 0,void 0,(function(){var r,i;return Wr(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ni(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Tc.Ho(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof ro?n.resolve(i):i instanceof io?n.resolve(null):n.reject(new hi(ci.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Qa(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Zf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new Rp(e,r,t.S_,n,new Op(n instanceof ro&&n.Vt,!0),t.v_)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=sf(t,lf);var e=sf(t.firestore,cp);return rp(hp(e),t.S_,{source:"server"}).then((function(n){return Bp(e,t,n)}))}(this.d_):function(t){t=sf(t,lf);var e=sf(t.firestore,cp);return rp(hp(e),t.S_).then((function(n){return Bp(e,t,n)}))}(this.d_)).then((function(t){return new sd(e.firestore,new Rp(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(ed.gd(this.firestore,t)))},e}($l);function rd(t,e,n){return t.message=t.message.replace(e,n),t}function id(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!sp(r))return r}return{}}function od(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=sp(t[0])?t[0]:sp(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var sd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Br(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new nd(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return jp(this.d_,t.d_)},e}($l),ad=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Br(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(sd),ud=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Jp(e),r}return Br(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,_p(this.d_,function(t,e,n){var r=e,i=gp("where",t);return new wp(i,r,n)}(t,n,r)))}catch(t){throw rd(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,_p(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=gp("orderBy",t);return new Ip(r,n)}(t,n)))}catch(t){throw rd(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,_p(this.d_,function(t){return af("limit",t),new Ep("limit",t,"F")}(t)))}catch(t){throw rd(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,_p(this.d_,function(t){return af("limitToLast",t),new Ep("limitToLast",t,"L")}(t)))}catch(t){throw rd(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,_p(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Tp("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw rd(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,_p(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Tp("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw rd(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,_p(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sp("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw rd(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,_p(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sp("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw rd(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return gf(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=sf(t,ff);var e=sf(t.firestore,cp),n=hp(e),r=new Fp(e);return function(t,e){var n=this,r=new Ma;return t._s.Ps((function(){return Hr(n,void 0,void 0,(function(){var n;return Wr(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Hr(this,void 0,void 0,(function(){var r,i,o,s,a;return Wr(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Lc(t,e,!0)];case 1:return a=u.sent(),r=new al(e,a.Rc),i=r.fl(a.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Qa(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,Zf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new Lp(e,r,t,n)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=sf(t,ff);var e=sf(t.firestore,cp),n=hp(e),r=new Fp(e);return ip(n,t.C_,{source:"server"}).then((function(n){return new Lp(e,r,t,n)}))}(this.d_):function(t){t=sf(t,ff);var e=sf(t.firestore,cp),n=hp(e),r=new Fp(e);return mp(t.C_),ip(n,t.C_).then((function(n){return new Lp(e,r,t,n)}))}(this.d_)).then((function(t){return new hd(e.firestore,new Lp(e.firestore.d_,e.Xf,e.d_,t._d))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=id(e),i=od(e,(function(e){return new hd(t.firestore,new Lp(t.firestore.d_,t.Xf,t.d_,e._d))}));return Vp(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(ed.gd(this.firestore,t)))},e}($l),cd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Br(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new ad(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}($l),hd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Br(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new ud(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map((function(e){return new ad(t.Yf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map((function(t){return new cd(e.Yf,t)}))},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach((function(r){t.call(e,new ad(n.Yf,r))}))},e.prototype.isEqual=function(t){return jp(this.d_,t.d_)},e}($l),ld=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return Br(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new nd(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new nd(this.firestore,void 0===t?vf(this.d_):vf(this.d_,t))}catch(t){throw rd(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=sf(t.firestore,cp),r=vf(t),i=Pp(t.v_,e);return qp(n,[Cf(Sf(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,us.exists(!1))]).then((function(){return r}))}(this.d_,t).then((function(t){return new nd(e.firestore,t)}))},e.prototype.isEqual=function(t){return yf(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(ed.gd(this.firestore,t)))},e}(ud);function fd(t){return t instanceof $l&&(t=t.d_),sf(t,lf)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pd=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Xl.bind.apply(Xl,zr([void 0],e))))||this}return Br(e,t),e.documentId=function(){return new e(Ti.ht().rt())},e.prototype.isEqual=function(t){return t instanceof $l&&(t=t.d_),t instanceof Xl&&this.d_.f_.isEqual(t.f_)},e}($l),dd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Br(e,t),e.serverTimestamp=function(){var t=new Af("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new kf("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pf("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xf("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Of("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}($l);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(t){return function(t,e){var n=hp(t=sf(t,cp)),r=new ap;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new Yl(t,e)}(function(t,e){if(t instanceof Uint8Array)return Kl(t,e);if(t instanceof ArrayBuffer)return Kl(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,dh(e));t._s.Ps((function(){return Hr(i,void 0,void 0,(function(){var e;return Wr(this,(function(n){switch(n.label){case 0:return e=Bl,[4,ep(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(n,t.I_,e,r),r}(this.d_,t)}function yd(t){var e,n,r=this;return(e=this.d_,n=t,function(t,e){var n=this;return t._s.enqueue((function(){return Hr(n,void 0,void 0,(function(){var n;return Wr(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=ni(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.wo.Ms(t,e)}))},[4,Zf(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(hp(e=sf(e,cp)),n).then((function(t){return t?new ff(e,null,t.query):null}))).then((function(t){return t?new ud(r,t):null}))}var gd=n(5642),md={Firestore:Xp,GeoPoint:mf,Timestamp:bi,Blob:Qp,Transaction:Zp,WriteBatch:td,DocumentReference:nd,DocumentSnapshot:sd,Query:ud,QueryDocumentSnapshot:ad,QuerySnapshot:hd,CollectionReference:ld,FieldPath:pd,FieldValue:dd,setLogLevel:$p,CACHE_SIZE_UNLIMITED:up};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function bd(t){!function(t,e){t.INTERNAL.registerComponent(new gd.wA("firestore",(function(t){var n=t.getProvider("app").getImmediate();return e(n,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},md)))}(t,(function(t,e){return new Xp(t,new cp(t,e),new Yp)})),t.registerVersion("@firebase/firestore","2.1.7")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _d(t){t.prototype.loadBundle=vd,t.prototype.namedQuery=yd}bd(l.Z),_d(Xp);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var wd=function(t,e){return wd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},wd(t,e)};function Id(t,e){function n(){this.constructor=t}wd(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Ed(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Td(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Sd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Cd=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return Id(e,t),e}(Error);function kd(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Nd(t,e,n){var r=kd(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"===typeof a){if(!Sd[a])return new Cd("internal","internal");r=Sd[a],i=a}var u=s.message;"string"===typeof u&&(i=u),o=s.details,void 0!==o&&(o=n.decode(o))}}catch(c){}return"ok"===r?null:new Cd(r,i,o)}var Ad=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return Ed(this,void 0,void 0,(function(){var t;return Td(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return t=e.sent(),t?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return Ed(this,void 0,void 0,(function(){return Td(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(e){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return Ed(this,void 0,void 0,(function(){var t,e;return Td(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}(),Pd="type.googleapis.com/google.protobuf.Int64Value",xd="type.googleapis.com/google.protobuf.UInt64Value";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Rd=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"===typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"===typeof t||"object"===typeof t)return Od(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case Pd:case xd:var n=Number(t["value"]);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"===typeof t||"object"===typeof t?Od(t,(function(t){return e.decode(t)})):t},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new Cd("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}var Ld=function(){function t(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new Rd,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new Ad(e,n),this.cancelAllRequests=new Promise((function(t){o.deleteService=function(){return t()}}));try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(a){this.customDomain=null,this.region=r}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;if(null!==this.emulatorOrigin){var n=this.emulatorOrigin;return n+"/"+e+"/"+this.region+"/"+t}return null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Ed(this,void 0,void 0,(function(){var r,i;return Td(this,(function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},t.prototype.call=function(t,e,n){return Ed(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,l,f,p,d;return Td(this,(function(v){switch(v.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return s=v.sent(),s.authToken&&(o["Authorization"]="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=n.timeout||7e4,u=Dd(a),c=u.timer,h=u.promise,[4,Promise.race([Md(c,this.postJSON(r,i,o)),h,Md(c,this.cancelAllRequests)])];case 2:if(l=v.sent(),!l)throw new Cd("cancelled","Firebase Functions instance was deleted.");if(f=Nd(l.status,l.json,this.serializer),f)throw f;if(!l.json)throw new Cd("internal","Response is not valid JSON object.");if(p=l.json.data,"undefined"===typeof p&&(p=l.json.result),"undefined"===typeof p)throw new Cd("internal","Response is missing data field.");return d=this.serializer.decode(p),[2,{data:d}]}}))}))},t}();function Md(t,e){return Ed(this,void 0,void 0,(function(){var n;return Td(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jd="functions";function Fd(t,e){var n={Functions:Ld};function r(t,n){var r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("messaging");return new Ld(r,i,o,n,e)}t.INTERNAL.registerComponent(new gd.wA(jd,r,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}var Ud="@firebase/functions",Vd="0.6.2";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Fd(l.Z,fetch.bind(self)),l.Z.registerVersion(Ud,Vd);var qd=function(){return qd=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},qd.apply(this,arguments)};function Bd(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Hd(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function Wd(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zd(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return s}function Gd(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(zd(arguments[e]));return t}var Kd,Qd=n(6225),Yd="@firebase/installations",Xd="0.4.20",Jd=1e4,$d="w:"+Xd,Zd="FIS_v2",tv="https://firebaseinstallations.googleapis.com/v1",ev=36e5,nv="installations",rv="Installations",iv=(Kd={},Kd["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Kd["not-registered"]="Firebase Installation is not registered.",Kd["installation-not-found"]="Firebase Installation not found.",Kd["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Kd["app-offline"]="Could not process request. Application offline.",Kd["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Kd),ov=new p.LL(nv,rv,iv);function sv(t){return t instanceof p.ZR&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t){var e=t.projectId;return tv+"/projects/"+e+"/installations"}function uv(t){return{token:t.token,requestStatus:2,expiresIn:pv(t.expiresIn),creationTime:Date.now()}}function cv(t,e){return Bd(this,void 0,void 0,(function(){var n,r;return Hd(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,ov.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function hv(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function lv(t,e){var n=e.refreshToken,r=hv(t);return r.append("Authorization",dv(n)),r}function fv(t){return Bd(this,void 0,void 0,(function(){var e;return Hd(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return e=n.sent(),e.status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function pv(t){return Number(t.replace("s","000"))}function dv(t){return Zd+" "+t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t,e){var n=e.fid;return Bd(this,void 0,void 0,(function(){var e,r,i,o,s,a,u;return Hd(this,(function(c){switch(c.label){case 0:return e=av(t),r=hv(t),i={fid:n,authVersion:Zd,appId:t.appId,sdkVersion:$d},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,fv((function(){return fetch(e,o)}))];case 1:return s=c.sent(),s.ok?[4,s.json()]:[3,3];case 2:return a=c.sent(),u={fid:a.fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:uv(a.authToken)},[2,u];case 3:return[4,cv("Create Installation",s)];case 4:throw c.sent()}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){var e=btoa(String.fromCharCode.apply(String,Gd(t)));return e.replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mv=/^[cdef][\w-]{21}$/,bv="";function _v(){try{var t=new Uint8Array(17),e=self.crypto||self.msCrypto;e.getRandomValues(t),t[0]=112+t[0]%16;var n=wv(t);return mv.test(n)?n:bv}catch(Gf){return bv}}function wv(t){var e=gv(t);return e.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){return t.appName+"!"+t.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ev=new Map;function Tv(t,e){var n=Iv(t);kv(n,e),Nv(n,e)}function Sv(t,e){Pv();var n=Iv(t),r=Ev.get(n);r||(r=new Set,Ev.set(n,r)),r.add(e)}function Cv(t,e){var n=Iv(t),r=Ev.get(n);r&&(r.delete(e),0===r.size&&Ev.delete(n),xv())}function kv(t,e){var n,r,i=Ev.get(t);if(i)try{for(var o=Wd(i),s=o.next();!s.done;s=o.next()){var a=s.value;a(e)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function Nv(t,e){var n=Pv();n&&n.postMessage({key:t,fid:e}),xv()}var Av=null;function Pv(){return!Av&&"BroadcastChannel"in self&&(Av=new BroadcastChannel("[Firebase] FID Change"),Av.onmessage=function(t){kv(t.data.key,t.data.fid)}),Av}function xv(){0===Ev.size&&Av&&(Av.close(),Av=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ov="firebase-installations-database",Rv=1,Dv="firebase-installations-store",Lv=null;function Mv(){return Lv||(Lv=(0,Qd.openDb)(Ov,Rv,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(Dv)}}))),Lv}function jv(t,e){return Bd(this,void 0,void 0,(function(){var n,r,i,o,s;return Hd(this,(function(a){switch(a.label){case 0:return n=Iv(t),[4,Mv()];case 1:return r=a.sent(),i=r.transaction(Dv,"readwrite"),o=i.objectStore(Dv),[4,o.get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||Tv(t,e.fid),[2,e]}}))}))}function Fv(t){return Bd(this,void 0,void 0,(function(){var e,n,r;return Hd(this,(function(i){switch(i.label){case 0:return e=Iv(t),[4,Mv()];case 1:return n=i.sent(),r=n.transaction(Dv,"readwrite"),[4,r.objectStore(Dv).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Uv(t,e){return Bd(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Hd(this,(function(u){switch(u.label){case 0:return n=Iv(t),[4,Mv()];case 1:return r=u.sent(),i=r.transaction(Dv,"readwrite"),o=i.objectStore(Dv),[4,o.get(n)];case 2:return s=u.sent(),a=e(s),void 0!==a?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||Tv(t,a.fid),[2,a]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t){return Bd(this,void 0,void 0,(function(){var e,n,r;return Hd(this,(function(i){switch(i.label){case 0:return[4,Uv(t,(function(n){var r=qv(n),i=Bv(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return n=i.sent(),n.fid!==bv?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function qv(t){var e=t||{fid:_v(),registrationStatus:0};return Gv(e)}function Bv(t,e){if(0===e.registrationStatus){if(!navigator.onLine){var n=Promise.reject(ov.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Hv(t,r);return{installationEntry:r,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Wv(t)}:{installationEntry:e}}function Hv(t,e){return Bd(this,void 0,void 0,(function(){var n,r;return Hd(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,vv(t,e)];case 1:return n=i.sent(),[2,jv(t,n)];case 2:return r=i.sent(),sv(r)&&409===r.customData.serverCode?[4,Fv(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,jv(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}function Wv(t){return Bd(this,void 0,void 0,(function(){var e,n,r,i;return Hd(this,(function(o){switch(o.label){case 0:return[4,zv(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,yv(100)];case 3:return o.sent(),[4,zv(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Vv(t)];case 6:return n=o.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,e]}}))}))}function zv(t){return Uv(t,(function(t){if(!t)throw ov.create("installation-not-found");return Gv(t)}))}function Gv(t){return Kv(t)?{fid:t.fid,registrationStatus:0}:t}function Kv(t){return 1===t.registrationStatus&&t.registrationTime+Jd<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Bd(this,void 0,void 0,(function(){var t,i,o,s,a,u,c,h;return Hd(this,(function(l){switch(l.label){case 0:return t=Yv(n,e),i=lv(n,e),o=r.getImmediate({optional:!0}),o&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:$d}},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,fv((function(){return fetch(t,a)}))];case 1:return u=l.sent(),u.ok?[4,u.json()]:[3,3];case 2:return c=l.sent(),h=uv(c),[2,h];case 3:return[4,cv("Generate Auth Token",u)];case 4:throw l.sent()}}))}))}function Yv(t,e){var n=e.fid;return av(t)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t,e){return void 0===e&&(e=!1),Bd(this,void 0,void 0,(function(){var n,r,i,o;return Hd(this,(function(s){switch(s.label){case 0:return[4,Uv(t.appConfig,(function(r){if(!ty(r))throw ov.create("not-registered");var i=r.authToken;if(!e&&ey(i))return r;if(1===i.requestStatus)return n=Jv(t,e),r;if(!navigator.onLine)throw ov.create("app-offline");var o=ry(r);return n=Zv(t,o),o}))];case 1:return r=s.sent(),n?[4,n]:[3,3];case 2:return o=s.sent(),[3,4];case 3:o=r.authToken,s.label=4;case 4:return i=o,[2,i]}}))}))}function Jv(t,e){return Bd(this,void 0,void 0,(function(){var n,r;return Hd(this,(function(i){switch(i.label){case 0:return[4,$v(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,yv(100)];case 3:return i.sent(),[4,$v(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,0===r.requestStatus?[2,Xv(t,e)]:[2,r]}}))}))}function $v(t){return Uv(t,(function(t){if(!ty(t))throw ov.create("not-registered");var e=t.authToken;return iy(e)?qd(qd({},t),{authToken:{requestStatus:0}}):t}))}function Zv(t,e){return Bd(this,void 0,void 0,(function(){var n,r,i;return Hd(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Qv(t,e)];case 1:return n=o.sent(),i=qd(qd({},e),{authToken:n}),[4,jv(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return r=o.sent(),!sv(r)||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Fv(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=qd(qd({},e),{authToken:{requestStatus:0}}),[4,jv(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}function ty(t){return void 0!==t&&2===t.registrationStatus}function ey(t){return 2===t.requestStatus&&!ny(t)}function ny(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+ev}function ry(t){var e={requestStatus:1,requestTime:Date.now()};return qd(qd({},t),{authToken:e})}function iy(t){return 1===t.requestStatus&&t.requestTime+Jd<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t){return Bd(this,void 0,void 0,(function(){var e,n,r;return Hd(this,(function(i){switch(i.label){case 0:return[4,Vv(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,r=e.registrationPromise,r?r.catch(console.error):Xv(t).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t,e){return void 0===e&&(e=!1),Bd(this,void 0,void 0,(function(){var n;return Hd(this,(function(r){switch(r.label){case 0:return[4,ay(t.appConfig)];case 1:return r.sent(),[4,Xv(t,e)];case 2:return n=r.sent(),[2,n.token]}}))}))}function ay(t){return Bd(this,void 0,void 0,(function(){var e;return Hd(this,(function(n){switch(n.label){case 0:return[4,Vv(t)];case 1:return e=n.sent().registrationPromise,e?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t,e){return Bd(this,void 0,void 0,(function(){var n,r,i,o;return Hd(this,(function(s){switch(s.label){case 0:return n=cy(t,e),r=lv(t,e),i={method:"DELETE",headers:r},[4,fv((function(){return fetch(n,i)}))];case 1:return o=s.sent(),o.ok?[3,3]:[4,cv("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}}))}))}function cy(t,e){var n=e.fid;return av(t)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(t){return Bd(this,void 0,void 0,(function(){var e,n;return Hd(this,(function(r){switch(r.label){case 0:return e=t.appConfig,[4,Uv(e,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(n=r.sent(),!n)return[3,6];if(1!==n.registrationStatus)return[3,2];throw ov.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw ov.create("app-offline");case 3:return[4,uy(e,n)];case 4:return r.sent(),[4,Fv(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(t,e){var n=t.appConfig;return Sv(n,e),function(){Cv(n,e)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t){var e,n;if(!t||!t.options)throw py("App Configuration");if(!t.name)throw py("App Name");var r=["projectId","apiKey","appId"];try{for(var i=Wd(r),o=i.next();!o.done;o=i.next()){var s=o.value;if(!t.options[s])throw py(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function py(t){return ov.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t){var e="installations";t.INTERNAL.registerComponent(new gd.wA(e,(function(t){var e=t.getProvider("app").getImmediate(),n=fy(e),r=t.getProvider("platform-logger"),i={appConfig:n,platformLoggerProvider:r},o={app:e,getId:function(){return oy(i)},getToken:function(t){return sy(i,t)},delete:function(){return hy(i)},onIdChange:function(t){return ly(i,t)}};return o}),"PUBLIC")),t.registerVersion(Yd,Xd)}dy(l.Z);var vy,yy=function(){return yy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},yy.apply(this,arguments)};function gy(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function my(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function by(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _y(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return s}function wy(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_y(arguments[e]));return t}var Iy,Ey=(vy={},vy["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',vy["only-available-in-window"]="This method is available in a Window context.",vy["only-available-in-sw"]="This method is available in a service worker context.",vy["permission-default"]="The notification permission was not granted and dismissed instead.",vy["permission-blocked"]="The notification permission was not granted and blocked instead.",vy["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",vy["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",vy["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",vy["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",vy["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",vy["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",vy["token-update-no-token"]="FCM returned no token when updating the user to push.",vy["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",vy["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",vy["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",vy["invalid-vapid-key"]="The public VAPID key must be a string.",vy["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",vy),Ty=new p.LL("messaging","Messaging",Ey),Sy="/firebase-messaging-sw.js",Cy="/firebase-cloud-messaging-push-scope",ky="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ny="https://fcmregistrations.googleapis.com/v1",Ay="FCM_MSG",Py="FirebaseMessaging: ",xy="google.c.a.e",Oy="google.c.a.c_id",Ry="google.c.a.ts",Dy="google.c.a.c_l",Ly=1e3,My=3e3;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function jy(t){var e=new Uint8Array(t),n=btoa(String.fromCharCode.apply(String,wy(e)));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fy(t){for(var e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t["PUSH_RECEIVED"]="push-received",t["NOTIFICATION_CLICKED"]="notification-clicked"})(Iy||(Iy={}));var Uy="fcm_token_details_db",Vy=5,qy="fcm_token_object_Store";function By(t){return gy(this,void 0,void 0,(function(){var e,n,r,i,o=this;return my(this,(function(s){switch(s.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=s.sent(),n=e.map((function(t){return t.name})),!n.includes(Uy))return[2,null];s.label=2;case 2:return r=null,[4,(0,Qd.openDb)(Uy,Vy,(function(e){return gy(o,void 0,void 0,(function(){var n,i,o,s;return my(this,(function(a){switch(a.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains(qy)?(n=e.transaction.objectStore(qy),[4,n.index("fcmSenderId").get(t)]):[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===e.oldVersion){if(o=i,!o.auth||!o.p256dh||!o.endpoint)return[2];r={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"===typeof o.vapidKey?o.vapidKey:jy(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(o=i,r={token:o.fcmToken,createTime:o.createTime,subscriptionOptions:{auth:jy(o.auth),p256dh:jy(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:jy(o.vapidKey)}});return[2]}}))}))}))];case 3:return i=s.sent(),i.close(),[4,(0,Qd.deleteDb)(Uy)];case 4:return s.sent(),[4,(0,Qd.deleteDb)("fcm_vapid_details_db")];case 5:return s.sent(),[4,(0,Qd.deleteDb)("undefined")];case 6:return s.sent(),[2,Hy(r)?r:null]}}))}))}function Hy(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"===typeof t.createTime&&t.createTime>0&&"string"===typeof t.token&&t.token.length>0&&"string"===typeof e.auth&&e.auth.length>0&&"string"===typeof e.p256dh&&e.p256dh.length>0&&"string"===typeof e.endpoint&&e.endpoint.length>0&&"string"===typeof e.swScope&&e.swScope.length>0&&"string"===typeof e.vapidKey&&e.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wy="firebase-messaging-database",zy=1,Gy="firebase-messaging-store",Ky=null;function Qy(){return Ky||(Ky=(0,Qd.openDb)(Wy,zy,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(Gy)}}))),Ky}function Yy(t){return gy(this,void 0,void 0,(function(){var e,n,r,i;return my(this,(function(o){switch(o.label){case 0:return e=$y(t),[4,Qy()];case 1:return n=o.sent(),[4,n.transaction(Gy).objectStore(Gy).get(e)];case 2:return r=o.sent(),r?[2,r]:[3,3];case 3:return[4,By(t.appConfig.senderId)];case 4:return i=o.sent(),i?[4,Xy(t,i)]:[3,6];case 5:return o.sent(),[2,i];case 6:return[2]}}))}))}function Xy(t,e){return gy(this,void 0,void 0,(function(){var n,r,i;return my(this,(function(o){switch(o.label){case 0:return n=$y(t),[4,Qy()];case 1:return r=o.sent(),i=r.transaction(Gy,"readwrite"),[4,i.objectStore(Gy).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function Jy(t){return gy(this,void 0,void 0,(function(){var e,n,r;return my(this,(function(i){switch(i.label){case 0:return e=$y(t),[4,Qy()];case 1:return n=i.sent(),r=n.transaction(Gy,"readwrite"),[4,r.objectStore(Gy).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function $y(t){var e=t.appConfig;return e.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t,e){return gy(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return my(this,(function(c){switch(c.label){case 0:return[4,rg(t)];case 1:n=c.sent(),r=ig(e),i={method:"POST",headers:n,body:JSON.stringify(r)},c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(ng(t.appConfig),i)];case 3:return s=c.sent(),[4,s.json()];case 4:return o=c.sent(),[3,6];case 5:throw a=c.sent(),Ty.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw u=o.error.message,Ty.create("token-subscribe-failed",{errorInfo:u});if(!o.token)throw Ty.create("token-subscribe-no-token");return[2,o.token]}}))}))}function tg(t,e){return gy(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return my(this,(function(c){switch(c.label){case 0:return[4,rg(t)];case 1:n=c.sent(),r=ig(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(ng(t.appConfig)+"/"+e.token,i)];case 3:return s=c.sent(),[4,s.json()];case 4:return o=c.sent(),[3,6];case 5:throw a=c.sent(),Ty.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw u=o.error.message,Ty.create("token-update-failed",{errorInfo:u});if(!o.token)throw Ty.create("token-update-no-token");return[2,o.token]}}))}))}function eg(t,e){return gy(this,void 0,void 0,(function(){var n,r,i,o,s,a;return my(this,(function(u){switch(u.label){case 0:return[4,rg(t)];case 1:n=u.sent(),r={method:"DELETE",headers:n},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(ng(t.appConfig)+"/"+e,r)];case 3:return i=u.sent(),[4,i.json()];case 4:if(o=u.sent(),o.error)throw s=o.error.message,Ty.create("token-unsubscribe-failed",{errorInfo:s});return[3,6];case 5:throw a=u.sent(),Ty.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function ng(t){var e=t.projectId;return Ny+"/projects/"+e+"/registrations"}function rg(t){var e=t.appConfig,n=t.installations;return gy(this,void 0,void 0,(function(){var t;return my(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function ig(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==ky&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var og=6048e5;function sg(t,e,n){return gy(this,void 0,void 0,(function(){var r,i,o,s;return my(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw Ty.create("permission-blocked");return[4,hg(e,n)];case 1:return r=a.sent(),[4,Yy(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:jy(r.getKey("auth")),p256dh:jy(r.getKey("p256dh"))},i?[3,3]:[2,cg(t,o)];case 3:if(lg(i.subscriptionOptions,o))return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,eg(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,cg(t,o)];case 8:return Date.now()>=i.createTime+og?[2,ug({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}}))}))}function ag(t,e){return gy(this,void 0,void 0,(function(){var n,r;return my(this,(function(i){switch(i.label){case 0:return[4,Yy(t)];case 1:return n=i.sent(),n?[4,eg(t,n.token)]:[3,4];case 2:return i.sent(),[4,Jy(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}}))}))}function ug(t,e,n){return gy(this,void 0,void 0,(function(){var r,i,o;return my(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,tg(e,t)];case 1:return r=s.sent(),i=yy(yy({},t),{token:r,createTime:Date.now()}),[4,Xy(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,ag(e,n)];case 4:throw s.sent(),o;case 5:return[2]}}))}))}function cg(t,e){return gy(this,void 0,void 0,(function(){var n,r;return my(this,(function(i){switch(i.label){case 0:return[4,Zy(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,Xy(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function hg(t,e){return gy(this,void 0,void 0,(function(){var n;return my(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Fy(e)})]}}))}))}function lg(t,e){var n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t){var e={from:t.from,collapseKey:t.collapse_key};return pg(e,t),dg(e,t),vg(e,t),e}function pg(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}function dg(t,e){e.data&&(t.data=e.data)}function vg(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(t){return"object"===typeof t&&!!t&&Oy in t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mg=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!==typeof t)throw Ty.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return gy(this,void 0,void 0,(function(){var n;return my(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Yy(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:ky,r.label=2;case 2:return[2,sg(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return ag(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw Ty.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Ty.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw Ty.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw Ty.create("only-available-in-window")},t.prototype.onMessage=function(){throw Ty.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw Ty.create("only-available-in-window")},t.prototype.onPush=function(t){return gy(this,void 0,void 0,(function(){var e,n,r,i;return my(this,(function(o){switch(o.label){case 0:return e=_g(t),e?[4,Tg()]:(console.debug(Py+"failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return n=o.sent(),Ig(n)?[2,Eg(n,e)]:(r=!1,e.notification?[4,Sg(bg(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=fg(e),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,gg(Ly)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return gy(this,void 0,void 0,(function(){var r,i;return my(this,(function(o){switch(o.label){case 0:return r=t.newSubscription,r?[3,2]:[4,ag(this.firebaseDependencies,self.registration)];case 1:return o.sent(),[2];case 2:return[4,Yy(this.firebaseDependencies)];case 3:return i=o.sent(),[4,ag(this.firebaseDependencies,self.registration)];case 4:return o.sent(),[4,sg(this.firebaseDependencies,self.registration,null!==(n=null===(e=null===i||void 0===i?void 0:i.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:ky)];case 5:return o.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return gy(this,void 0,void 0,(function(){var r,i,o,s,a;return my(this,(function(u){switch(u.label){case 0:return r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n[Ay],r?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),i=Cg(r),i?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,wg(o)]):[2]):[2];case 1:return a=u.sent(),a?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,gg(My)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=Iy.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}}))}))},t}();function bg(t){var e,n=yy({},t.notification);return n.data=(e={},e[Ay]=t,e),n}function _g(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}function wg(t){return gy(this,void 0,void 0,(function(){var e,n,r,i,o,s,a;return my(this,(function(u){switch(u.label){case 0:return[4,Tg()];case 1:e=u.sent();try{for(n=by(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}}))}))}function Ig(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}function Eg(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=Iy.PUSH_RECEIVED;try{for(var i=by(t),o=i.next();!o.done;o=i.next()){var s=o.value;s.postMessage(e)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function Tg(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Sg(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}function Cg(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;return i||(yg(t.data)?self.location.origin:null)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kg=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return gy(this,void 0,void 0,(function(){var e,n;return my(this,(function(r){switch(r.label){case 0:return e=t.data,e.isFirebaseMessaging?(this.onMessageCallback&&e.messageType===Iy.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(Ag(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),n=e.data,yg(n)&&"1"===n[xy]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return gy(this,void 0,void 0,(function(){return my(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw Ty.create("permission-blocked");return[4,this.updateVapidKey(null===t||void 0===t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null===t||void 0===t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,sg(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return gy(this,void 0,void 0,(function(){return my(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=ky),[2]}))}))},t.prototype.updateSwReg=function(t){return gy(this,void 0,void 0,(function(){return my(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Ty.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return gy(this,void 0,void 0,(function(){var t,e;return my(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register(Sy,{scope:Cy})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),Ty.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return gy(this,void 0,void 0,(function(){return my(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,ag(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return gy(this,void 0,void 0,(function(){var t;return my(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if(t=e.sent(),"granted"===t)return[2];throw"denied"===t?Ty.create("permission-blocked"):Ty.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Ty.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw Ty.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Ty.create("invalid-sw-registration");if(this.swRegistration)throw Ty.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw Ty.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw Ty.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return gy(this,void 0,void 0,(function(){var n,r;return my(this,(function(i){switch(i.label){case 0:return n=Ng(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r=i.sent(),r.logEvent(n,{message_id:e[Oy],message_name:e[Dy],message_time:e[Ry],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function Ng(t){switch(t){case Iy.NOTIFICATION_CLICKED:return"notification_open";case Iy.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ag(t){return delete t.messageType,delete t.isFirebaseMessaging,t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t){var e,n;if(!t||!t.options)throw xg("App Configuration Object");if(!t.name)throw xg("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=t.options;try{for(var o=by(r),s=o.next();!s.done;s=o.next()){var a=s.value;if(!i[a])throw xg(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return{appName:t.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function xg(t){return Ty.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Og="messaging";function Rg(t){var e=t.getProvider("app").getImmediate(),n=Pg(e),r=t.getProvider("installations").getImmediate(),i=t.getProvider("analytics-internal"),o={app:e,appConfig:n,installations:r,analyticsProvider:i};if(!Lg())throw Ty.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new mg(o):new kg(o)}var Dg={isSupported:Lg};function Lg(){return self&&"ServiceWorkerGlobalScope"in self?jg():Mg()}function Mg(){return"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function jg(){return"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}l.Z.INTERNAL.registerComponent(new gd.wA(Og,Rg,"PUBLIC").setServiceProps(Dg));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Fg=function(t,e){return Fg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Fg(t,e)};function Ug(t,e){function n(){this.constructor=t}Fg(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Vg=function(){return Vg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Vg.apply(this,arguments)};function qg(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Bg(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function Hg(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Wg="firebasestorage.googleapis.com",zg="storageBucket",Gg=12e4,Kg=6e5,Qg=function(t){function e(n,r){var i=t.call(this,Yg(n),"Firebase Storage: "+r+" ("+Yg(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Ug(e,t),e.prototype._codeEquals=function(t){return Yg(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(p.ZR);function Yg(t){return"storage/"+t}function Xg(){var t="An unknown error occurred, please check the error payload for server response.";return new Qg("unknown",t)}function Jg(t){return new Qg("object-not-found","Object '"+t+"' does not exist.")}function $g(t){return new Qg("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Zg(){var t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qg("unauthenticated",t)}function tm(t){return new Qg("unauthorized","User does not have permission to access '"+t+"'.")}function em(){return new Qg("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function nm(){return new Qg("canceled","User canceled the upload/download.")}function rm(t){return new Qg("invalid-url","Invalid URL '"+t+"'.")}function im(t){return new Qg("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function om(){return new Qg("no-default-bucket","No default bucket found. Did you set the '"+zg+"' property when initializing the app?")}function sm(){return new Qg("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function am(){return new Qg("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function um(){return new Qg("no-download-url","The given file does not have any download URLs.")}function cm(t){return new Qg("invalid-argument",t)}function hm(){return new Qg("app-deleted","The Firebase app was deleted.")}function lm(t){return new Qg("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fm(t,e){return new Qg("invalid-format","String does not match format '"+t+"': "+e)}function pm(t){throw new Qg("internal-error","Internal error: "+t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dm={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},vm=function(){function t(t,e){this.data=t,this.contentType=e||null}return t}();function ym(t,e){switch(t){case dm.RAW:return new vm(gm(e));case dm.BASE64:case dm.BASE64URL:return new vm(bm(t,e));case dm.DATA_URL:return new vm(wm(e),Im(e))}throw Xg()}function gm(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296===(64512&r)){var i=n<t.length-1&&56320===(64512&t.charCodeAt(n+1));if(i){var o=r,s=t.charCodeAt(++n);r=65536|(1023&o)<<10|1023&s,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189)}else 56320===(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function mm(t){var e;try{e=decodeURIComponent(t)}catch(n){throw fm(dm.DATA_URL,"Malformed data URL.")}return gm(e)}function bm(t,e){switch(t){case dm.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r){var i=n?"-":"_";throw fm(t,"Invalid character '"+i+"' found: is it base64url encoded?")}break;case dm.BASE64URL:var o=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(o||s){i=o?"+":"/";throw fm(t,"Invalid character '"+i+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/");break}var a;try{a=atob(e)}catch(h){throw fm(t,"Invalid character found")}for(var u=new Uint8Array(a.length),c=0;c<a.length;c++)u[c]=a.charCodeAt(c);return u}var _m=function(){function t(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw fm(dm.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=Em(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1)}return t}();function wm(t){var e=new _m(t);return e.base64?bm(dm.BASE64,e.rest):mm(e.rest)}function Im(t){var e=new _m(t);return e.contentType}function Em(t,e){var n=t.length>=e.length;return!!n&&t.substring(t.length-e.length)===e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tm,Sm={STATE_CHANGED:"state_changed"},Cm={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function km(t){switch(t){case"running":case"pausing":case"canceling":return Cm.RUNNING;case"paused":return Cm.PAUSED;case"success":return Cm.SUCCESS;case"canceled":return Cm.CANCELED;case"error":return Cm.ERROR;default:return Cm.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["NO_ERROR"]=0]="NO_ERROR",t[t["NETWORK_ERROR"]=1]="NETWORK_ERROR",t[t["ABORT"]=2]="ABORT"})(Tm||(Tm={}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Nm=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Tm.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Tm.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Tm.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw pm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw pm("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw pm("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw pm("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Am=function(){function t(){}return t.prototype.createXhrIo=function(){return new Nm},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Pm(t){return void 0!==t}function xm(t){return"function"===typeof t}function Om(t){return"object"===typeof t&&!Array.isArray(t)}function Rm(t){return"string"===typeof t||t instanceof String}function Dm(t){return Lm()&&t instanceof Blob}function Lm(){return"undefined"!==typeof Blob}function Mm(t,e,n,r){if(r<e)throw cm("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw cm("Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Fm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=jm();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Lm())return new Blob(t);throw new Qg("unsupported-environment","This browser doesn't seem to support creating Blobs")}function Um(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vm=function(){function t(t,e){var n=0,r="";Dm(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Dm(this.data_)){var r=this.data_,i=Um(r,e,n);return null===i?null:new t(i)}var o=new Uint8Array(this.data_.buffer,e,n-e);return new t(o,!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Lm()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(Fm.apply(null,r))}var i=e.map((function(t){return Rm(t)?ym(dm.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),qm=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw im(e)},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)";function i(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}var o="(/(.*))?$",s=new RegExp("^gs://"+r+o,"i"),a={bucket:1,path:3};function u(t){t.path_=decodeURIComponent(t.path)}for(var c="v[A-Za-z0-9_]+",h=Wg.replace(/[.]/g,"\\."),l="(/([^?#]*).*)?$",f=new RegExp("^https?://"+h+"/"+c+"/b/"+r+"/o"+l,"i"),p={bucket:1,path:3},d="(?:storage.googleapis.com|storage.cloud.google.com)",v="([^?#]*)",y=new RegExp("^https?://"+d+"/"+r+"/"+v,"i"),g={bucket:1,path:2},m=[{regex:s,indices:a,postModify:i},{regex:f,indices:p,postModify:u},{regex:y,indices:g,postModify:u}],b=0;b<m.length;b++){var _=m[b],w=_.regex.exec(e);if(w){var I=w[_.indices.bucket],E=w[_.indices.path];E||(E=""),n=new t(I,E),_.postModify(n);break}}if(null==n)throw rm(e);return n},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Bm(t){var e;try{e=JSON.parse(t)}catch(n){return null}return Om(e)?e:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t){if(0===t.length)return null;var e=t.lastIndexOf("/");if(-1===e)return"";var n=t.slice(0,e);return n}function Wm(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}function zm(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t){return"https://"+Wg+"/v0"+t}function Km(t){var e=encodeURIComponent,n="?";for(var r in t)if(t.hasOwnProperty(r)){var i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(t,e){return e}var Ym=function(){function t(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Qm}return t}(),Xm=null;function Jm(t){return!Rm(t)||t.length<2?t:zm(t)}function $m(){if(Xm)return Xm;var t=[];function e(t,e){return Jm(e)}t.push(new Ym("bucket")),t.push(new Ym("generation")),t.push(new Ym("metageneration")),t.push(new Ym("name","fullPath",!0));var n=new Ym("name");function r(t,e){return void 0!==e?Number(e):e}n.xform=e,t.push(n);var i=new Ym("size");return i.xform=r,t.push(i),t.push(new Ym("timeCreated")),t.push(new Ym("updated")),t.push(new Ym("md5Hash",null,!0)),t.push(new Ym("cacheControl",null,!0)),t.push(new Ym("contentDisposition",null,!0)),t.push(new Ym("contentEncoding",null,!0)),t.push(new Ym("contentLanguage",null,!0)),t.push(new Ym("contentType",null,!0)),t.push(new Ym("metadata","customMetadata",!0)),Xm=t,Xm}function Zm(t,e){function n(){var n=t["bucket"],r=t["fullPath"],i=new qm(n,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function tb(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return Zm(r,t),r}function eb(t,e,n){var r=Bm(e);if(null===r)return null;var i=r;return tb(t,i,n)}function nb(t,e){var n=Bm(e);if(null===n)return null;if(!Rm(n["downloadTokens"]))return null;var r=n["downloadTokens"];if(0===r.length)return null;var i=encodeURIComponent,o=r.split(","),s=o.map((function(e){var n=t["bucket"],r=t["fullPath"],o="/b/"+i(n)+"/o/"+i(r),s=Gm(o),a=Km({alt:"media",token:e});return s+a}));return s[0]}function rb(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ib="prefixes",ob="items";function sb(t,e,n){var r={prefixes:[],items:[],nextPageToken:n["nextPageToken"]};if(n[ib])for(var i=0,o=n[ib];i<o.length;i++){var s=o[i],a=s.replace(/\/$/,""),u=t._makeStorageReference(new qm(e,a));r.prefixes.push(u)}if(n[ob])for(var c=0,h=n[ob];c<h.length;c++){var l=h[c];u=t._makeStorageReference(new qm(e,l["name"]));r.items.push(u)}return r}function ab(t,e,n){var r=Bm(n);if(null===r)return null;var i=r;return sb(t,e,i)}var ub=function(){function t(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t){if(!t)throw Xg()}function hb(t,e){function n(n,r){var i=eb(t,r,e);return cb(null!==i),i}return n}function lb(t,e){function n(n,r){var i=ab(t,e,r);return cb(null!==i),i}return n}function fb(t,e){function n(n,r){var i=eb(t,r,e);return cb(null!==i),nb(i,r)}return n}function pb(t){function e(e,n){var r;return r=401===e.getStatus()?Zg():402===e.getStatus()?$g(t.bucket):403===e.getStatus()?tm(t.path):n,r.serverResponse=n.serverResponse,r}return e}function db(t){var e=pb(t);function n(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=Jg(t.path)),i.serverResponse=r.serverResponse,i}return n}function vb(t,e,n){var r=e.fullServerUrl(),i=Gm(r),o="GET",s=t.maxOperationRetryTime,a=new ub(i,o,hb(t,n),s);return a.errorHandler=db(e),a}function yb(t,e,n,r,i){var o={};e.isRoot?o["prefix"]="":o["prefix"]=e.path+"/",n&&n.length>0&&(o["delimiter"]=n),r&&(o["pageToken"]=r),i&&(o["maxResults"]=i);var s=e.bucketOnlyServerUrl(),a=Gm(s),u="GET",c=t.maxOperationRetryTime,h=new ub(a,u,lb(t,e.bucket),c);return h.urlParams=o,h.errorHandler=pb(e),h}function gb(t,e,n){var r=e.fullServerUrl(),i=Gm(r),o="GET",s=t.maxOperationRetryTime,a=new ub(i,o,fb(t,n),s);return a.errorHandler=db(e),a}function mb(t,e,n,r){var i=e.fullServerUrl(),o=Gm(i),s="PATCH",a=rb(n,r),u={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,h=new ub(o,s,hb(t,r),c);return h.headers=u,h.body=a,h.errorHandler=db(e),h}function bb(t,e){var n=e.fullServerUrl(),r=Gm(n),i="DELETE",o=t.maxOperationRetryTime;function s(t,e){}var a=new ub(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=db(e),a}function _b(t,e){return t&&t["contentType"]||e&&e.type()||"application/octet-stream"}function wb(t,e,n){var r=Object.assign({},n);return r["fullPath"]=t.path,r["size"]=e.size(),r["contentType"]||(r["contentType"]=_b(null,e)),r}function Ib(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}var u=a();s["Content-Type"]="multipart/related; boundary="+u;var c=wb(e,r,i),h=rb(c,n),l="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+h+"\r\n--"+u+"\r\nContent-Type: "+c["contentType"]+"\r\n\r\n",f="\r\n--"+u+"--",p=Vm.getBlob(l,r,f);if(null===p)throw sm();var d={name:c["fullPath"]},v=Gm(o),y="POST",g=t.maxUploadRetryTime,m=new ub(v,y,hb(t,n),g);return m.urlParams=d,m.headers=s,m.body=p.uploadData(),m.errorHandler=pb(e),m}var Eb=function(){function t(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}return t}();function Tb(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(i){cb(!1)}var r=e||["active"];return cb(!!n&&-1!==r.indexOf(n)),n}function Sb(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=wb(e,r,i),a={name:s["fullPath"]},u=Gm(o),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s["contentType"],"Content-Type":"application/json; charset=utf-8"},l=rb(s,n),f=t.maxUploadRetryTime;function p(t){var e;Tb(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){cb(!1)}return cb(Rm(e)),e}var d=new ub(u,c,p,f);return d.urlParams=a,d.headers=h,d.body=l,d.errorHandler=pb(e),d}function Cb(t,e,n,r){var i={"X-Goog-Upload-Command":"query"};function o(t){var e=Tb(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){cb(!1)}n||cb(!1);var i=Number(n);return cb(!isNaN(i)),new Eb(i,r.size(),"final"===e)}var s="POST",a=t.maxUploadRetryTime,u=new ub(n,s,o,a);return u.headers=i,u.errorHandler=pb(e),u}var kb=262144;function Nb(t,e,n,r,i,o,s,a){var u=new Eb(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw am();var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,p=h===c?"upload, finalize":"upload",d={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":u.current},v=r.slice(l,f);if(null===v)throw sm();function y(t,n){var i,s=Tb(t,["active","final"]),a=u.current+h,c=r.size();return i="final"===s?hb(e,o)(t,n):null,new Eb(a,c,"final"===s,i)}var g="POST",m=e.maxUploadRetryTime,b=new ub(n,g,y,m);return b.headers=d,b.body=v.uploadData(),b.progressCallback=a||null,b.errorHandler=pb(t),b}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ab=function(){function t(t,e,n){var r=xm(t)||null!=e||null!=n;if(r)this.next=t,this.error=e,this.complete=n;else{var i=t;this.next=i.next,this.error=i.error,this.complete=i.complete}}return t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xb=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=$m(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then((function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused");break}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=Sb(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=Cb(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=kb*this._chunkMultiplier,n=new Eb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=Nb(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(a){return t._error=a,void t._transition("error")}var s=t._ref.storage._makeRequest(o,i);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){var t=kb*this._chunkMultiplier;t<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=vb(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=Ib(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":this._state=t,void 0!==this._request&&this._request.cancel();break;case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=nm(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=km(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Ab(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise();var e=this._observers.slice();e.forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(km(this._state)){case Cm.SUCCESS:Pb(this._resolve.bind(null,this.snapshot))();break;case Cm.CANCELED:case Cm.ERROR:var e=this._reject;Pb(e.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){var e=km(this._state);switch(e){case Cm.RUNNING:case Cm.PAUSED:t.next&&Pb(t.next.bind(t,this.snapshot))();break;case Cm.SUCCESS:t.complete&&Pb(t.complete.bind(t))();break;case Cm.CANCELED:case Cm.ERROR:t.error&&Pb(t.error.bind(t,this._error))();break;default:t.error&&Pb(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Ob=function(){function t(t,e){this._service=t,this._location=e instanceof qm?e:qm.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new qm(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return zm(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=Hm(this._location.path);if(null===e)return null;var n=new qm(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw lm(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new xb(t,new Vm(e),n)}function Db(t){var e={prefixes:[],items:[]};return Lb(t,e).then((function(){return e}))}function Lb(t,e,n){return qg(this,void 0,void 0,(function(){var r,i,o,s;return Bg(this,(function(a){switch(a.label){case 0:return r={pageToken:n},[4,Mb(t,r)];case 1:return i=a.sent(),(o=e.prefixes).push.apply(o,i.prefixes),(s=e.items).push.apply(s,i.items),null==i.nextPageToken?[3,3]:[4,Lb(t,e,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Mb(t,e){return qg(this,void 0,void 0,(function(){var n,r,i;return Bg(this,(function(o){switch(o.label){case 0:return null!=e&&"number"===typeof e.maxResults&&Mm("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=o.sent(),r=e||{},i=yb(t.storage,t._location,"/",r.pageToken,r.maxResults),[2,t.storage._makeRequest(i,n).getPromise()]}}))}))}function jb(t){return qg(this,void 0,void 0,(function(){var e,n;return Bg(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=vb(t.storage,t._location,$m()),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}function Fb(t,e){return qg(this,void 0,void 0,(function(){var n,r;return Bg(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=mb(t.storage,t._location,e,$m()),[2,t.storage._makeRequest(r,n).getPromise()]}}))}))}function Ub(t){return qg(this,void 0,void 0,(function(){var e,n;return Bg(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=gb(t.storage,t._location,$m()),[2,t.storage._makeRequest(n,e).getPromise().then((function(t){if(null===t)throw um();return t}))]}}))}))}function Vb(t){return qg(this,void 0,void 0,(function(){var e,n;return Bg(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=bb(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}function qb(t,e){var n=Wm(t._location.path,e),r=new qm(t._location.bucket,n);return new Ob(t.storage,r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bb=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Hb=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Bb(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Bb(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"===typeof e?function(t){return e(new Bb(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Bb(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Wb=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new zb(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new zb(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),zb=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){var n=qb(this._delegate,e);return new t(n,this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Hb(Rb(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=dm.RAW),this._throwIfRoot("putString");var r=ym(e,t),i=Vg({},n);return null==i["contentType"]&&null!=r.contentType&&(i["contentType"]=r.contentType),new Hb(new xb(this._delegate,new Vm(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return Db(this._delegate).then((function(e){return new Wb(e,t.storage)}))},t.prototype.list=function(t){var e=this;return Mb(this._delegate,t).then((function(t){return new Wb(t,e.storage)}))},t.prototype.getMetadata=function(){return jb(this._delegate)},t.prototype.updateMetadata=function(t){return Fb(this._delegate,t)},t.prototype.getDownloadURL=function(){return Ub(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),Vb(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw lm(t)},t}(),Gb=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Kb(t,e,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function h(e){i=setTimeout((function(){i=null,t(l,a())}),e)}function l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,Hg([null,t],e));else{var i,l=a()||o;if(l)c.call.apply(c,Hg([null,t],e));else r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),h(i)}}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(s=2),clearTimeout(i),h(0)):t||(s=1)))}return h(0),setTimeout((function(){o=!0,p(!0)}),n),p}function Qb(t){t(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yb=function(){function t(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){if(n)e(!1,new Xb(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null,n=n;var r=n.getErrorCode()===Tm.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Xb(s,n))}else{var a=n.getErrorCode()===Tm.ABORT;e(!1,new Xb(!1,null,a))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}function n(e,n){var r=t.resolve_,i=t.reject_,o=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(o,o.getResponseText());Pm(s)?r(s):r()}catch(u){i(u)}else if(null!==o){var a=Xg();a.serverResponse=o.getResponseText(),t.errorCallback_?i(t.errorCallback_(o,a)):i(a)}else if(n.canceled){a=t.appDelete_?hm():nm();i(a)}else{a=em();i(a)}}this.canceled_?n(!1,new Xb(!1,null,!0)):this.backoffId_=Kb(e,n,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&Qb(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=[408,429],r=-1!==n.indexOf(t),i=-1!==this.additionalRetryCodes_.indexOf(t);return e||r||i},t}(),Xb=function(){function t(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}return t}();function Jb(t,e){null!==e&&e.length>0&&(t["Authorization"]="Firebase "+e)}function $b(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}function Zb(t,e){e&&(t["X-Firebase-GMPID"]=e)}function t_(t,e,n,r,i){var o=Km(t.urlParams),s=t.url+o,a=Object.assign({},t.headers);return Zb(a,e),Jb(a,n),$b(a,i),new Yb(s,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(t){return/^[A-Za-z]+:\/\//.test(t)}function n_(t,e){return new Ob(t,e)}function r_(t,e){if(t instanceof s_){var n=t;if(null==n._bucket)throw om();var r=new Ob(n,n._bucket);return null!=e?r_(r,e):r}if(void 0!==e){if(e.includes(".."))throw cm('`path` param cannot contain ".."');return qb(t,e)}return t}function i_(t,e){if(e&&e_(e)){if(t instanceof s_)return n_(t,e);throw cm("To use ref(service, url), the first argument must be a Storage instance.")}return r_(t,e)}function o_(t){var e=null===t||void 0===t?void 0:t[zg];return null==e?null:qm.makeFromBucketSpec(e)}var s_=function(){function t(t,e,n,r,i){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Gg,this._maxUploadRetryTime=Kg,this._requests=new Set,this._bucket=null!=r?qm.makeFromBucketSpec(r):o_(this.app.options)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Mm("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Mm("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return qg(this,void 0,void 0,(function(){var t,e;return Bg(this,(function(n){switch(n.label){case 0:return t=this._authProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:if(e=n.sent(),null!==e)return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Ob(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new Gb(hm());var r=t_(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}(),a_=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(e_(t))throw cm("ref() expected a child path but got a URL, use refFromURL instead.");return new zb(i_(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!e_(t))throw cm("refFromURL() expected a full URL but got a child path, use ref() instead.");try{qm.makeFromUrl(t)}catch(e){throw cm("refFromUrl() expected a valid full URL but got an invalid one.")}return new zb(i_(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}(),u_="@firebase/storage",c_="0.4.3",h_="storage";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=new a_(n,new s_(n,r,new Am,e,l.Z.SDK_VERSION));return i}function f_(t){var e={TaskState:Cm,TaskEvent:Sm,StringFormat:dm,Storage:s_,Reference:zb};t.INTERNAL.registerComponent(new gd.wA(h_,l_,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(u_,c_)}f_(l.Z);var p_=function(){return p_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},p_.apply(this,arguments)};function d_(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var v_,y_,g_,m_="@firebase/performance",b_="0.4.6",__=b_,w_="FB-PERF-TRACE-START",I_="FB-PERF-TRACE-STOP",E_="FB-PERF-TRACE-MEASURE",T_="_wt_",S_="_fp",C_="_fcp",k_="_fid",N_="@firebase/performance/config",A_="@firebase/performance/configexpire",P_="performance",x_="Performance",O_=(v_={},v_["trace started"]="Trace {$traceName} was started before.",v_["trace stopped"]="Trace {$traceName} is not running.",v_["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",v_["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",v_["no window"]="Window is not available.",v_["no app id"]="App id is not available.",v_["no project id"]="Project id is not available.",v_["no api key"]="Api key is not available.",v_["invalid cc log"]="Attempted to queue invalid cc event",v_["FB not default"]="Performance can only start when Firebase app instance is the default one.",v_["RC response not ok"]="RC response is not ok",v_["invalid attribute name"]="Attribute name {$attributeName} is invalid.",v_["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",v_["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",v_["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",v_),R_=new p.LL(P_,x_,O_),D_=new f.Yd(x_);D_.logLevel=f["in"].INFO;var L_,M_=function(){function t(t){if(this.window=t,!t)throw R_.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,p.hl)()||(D_.info("IndexedDB is not supported by current browswer"),!1):(D_.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){if(this.PerformanceObserver){var n=new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}}));n.observe({entryTypes:[t]})}},t.getInstance=function(){return void 0===y_&&(y_=new t(g_)),y_},t}();function j_(t){g_=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(t,e){var n=t.length-e.length;if(n<0||n>1)throw R_.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var U_,V_,q_=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=F_("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=F_("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw R_.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw R_.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw R_.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===L_&&(L_=new t),L_},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(){var t=q_.getInstance().installationsService.getId();return t.then((function(t){U_=t})),t}function H_(){return U_}function W_(){var t=q_.getInstance().installationsService.getToken();return t.then((function(t){})),t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["UNKNOWN"]=0]="UNKNOWN",t[t["VISIBLE"]=1]="VISIBLE",t[t["HIDDEN"]=2]="HIDDEN"})(V_||(V_={}));var z_=["firebase_","google_","ga_"],G_=new RegExp("^[a-zA-Z]\\w*$"),K_=40,Q_=100;function Y_(){var t=M_.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function X_(){var t=M_.getInstance().document,e=t.visibilityState;switch(e){case"visible":return V_.VISIBLE;case"hidden":return V_.HIDDEN;default:return V_.UNKNOWN}}function J_(){var t=M_.getInstance().navigator,e=t.connection,n=e&&e.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function $_(t){if(0===t.length||t.length>K_)return!1;var e=z_.some((function(e){return t.startsWith(e)}));return!e&&!!t.match(G_)}function Z_(t){return 0!==t.length&&t.length<=Q_}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tw="0.0.1",ew={loggingEnabled:!0},nw="FIREBASE_INSTALLATIONS_AUTH";function rw(t){var e=iw();return e?(uw(e),Promise.resolve()):aw(t).then(uw).then((function(t){return ow(t)}),(function(){}))}function iw(){var t=M_.getInstance().localStorage;if(t){var e=t.getItem(A_);if(e&&cw(e)){var n=t.getItem(N_);if(n)try{var r=JSON.parse(n);return r}catch(Gf){return}}}}function ow(t){var e=M_.getInstance().localStorage;t&&e&&(e.setItem(N_,JSON.stringify(t)),e.setItem(A_,String(Date.now()+60*q_.getInstance().configTimeToLive*60*1e3)))}var sw="Could not fetch config, will use default configs";function aw(t){return W_().then((function(e){var n=q_.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+q_.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:nw+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:q_.getInstance().getAppId(),app_version:__,sdk_version:tw})});return fetch(i).then((function(t){if(t.ok)return t.json();throw R_.create("RC response not ok")}))})).catch((function(){D_.info(sw)}))}function uw(t){if(!t)return t;var e=q_.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=ew.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=hw(e.tracesSamplingRate),e.logNetworkAfterSampling=hw(e.networkRequestsSamplingRate),t}function cw(t){return Number(t)>Date.now()}function hw(t){return Math.random()<=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lw,fw=1;function pw(){return fw=2,lw=lw||vw(),lw}function dw(){return 3===fw}function vw(){return yw().then((function(){return B_()})).then((function(t){return rw(t)})).then((function(){return gw()}),(function(){return gw()}))}function yw(){var t=M_.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}function gw(){fw=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mw,bw=1e4,_w=5500,ww=3,Iw=1e3,Ew=ww,Tw=[],Sw=!1;function Cw(){Sw||(kw(_w),Sw=!0)}function kw(t){setTimeout((function(){if(0!==Ew)return Tw.length?void Nw():kw(bw)}),t)}function Nw(){var t=Tw.splice(0,Iw),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:q_.getInstance().logSource,log_event:e};Aw(n,t).catch((function(){Tw=d_(t,Tw),Ew--,D_.info("Tries left: "+Ew+"."),kw(bw)}))}function Aw(t,e){return Pw(t).then((function(t){return t.ok||D_.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=bw;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(Tw=d_(e,Tw),D_.info("Retry transport request later.")),Ew=ww,kw(r)}))}function Pw(t){var e=q_.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}function xw(t){if(!t.eventTime||!t.message)throw R_.create("invalid cc log");Tw=d_(Tw,[t])}function Ow(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(void 0,e);xw({message:r,eventTime:Date.now()})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(t,e){mw||(mw=Ow(jw)),mw(t,e)}function Dw(t){var e=q_.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&M_.getInstance().requiredApisAvailable()&&(t.isAuto&&X_()!==V_.VISIBLE||(dw()?Lw(t):pw().then((function(){return Lw(t)}),(function(){return Lw(t)}))))}function Lw(t){if(H_()){var e=q_.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return Rw(t,1)}),0)}}function Mw(t){var e=q_.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return Rw(t,0)}),0)}}function jw(t,e){return 0===e?Fw(t):Uw(t)}function Fw(t){var e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:Vw(),network_request_metric:e};return JSON.stringify(n)}function Uw(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:Vw(),trace_metric:e};return JSON.stringify(r)}function Vw(){return{google_app_id:q_.getInstance().getAppId(),app_instance_id:H_(),web_app_info:{sdk_version:__,page_url:M_.getInstance().getUrl(),service_worker_status:Y_(),visibility_state:X_(),effective_connection_type:J_()},application_process_state:0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qw=100,Bw="_",Hw=[S_,C_,k_];function Ww(t,e){return!(0===t.length||t.length>qw)&&(e&&e.startsWith(T_)&&Hw.indexOf(t)>-1||!t.startsWith(Bw))}function zw(t){var e=Math.floor(t);return e<t&&D_.info("Metric value should be an Integer, setting the value as : "+e+"."),e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gw=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=M_.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=w_+"-"+this.randomId+"-"+this.name,this.traceStopMark=I_+"-"+this.randomId+"-"+this.name,this.traceMeasure=n||E_+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw R_.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw R_.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Dw(this)},t.prototype.record=function(t,e,n){if(t<=0)throw R_.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw R_.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=p_({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}Dw(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!Ww(t,this.name))throw R_.create("invalid custom metric name",{customMetricName:t});this.counters[t]=zw(e)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=$_(t),r=Z_(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw R_.create("invalid attribute name",{attributeName:t});if(!r)throw R_.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return p_({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=M_.getInstance().getUrl();if(i){var o=new t(T_+i,!0),s=Math.floor(1e3*M_.getInstance().getTimeOrigin());o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));var a="first-paint",u="first-contentful-paint";if(n){var c=n.find((function(t){return t.name===a}));c&&c.startTime&&o.putMetric(S_,Math.floor(1e3*c.startTime));var h=n.find((function(t){return t.name===u}));h&&h.startTime&&o.putMetric(C_,Math.floor(1e3*h.startTime)),r&&o.putMetric(k_,Math.floor(1e3*r))}Dw(o)}},t.createUserTimingTrace=function(e){var n=new t(e,!1,e);Dw(n)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t){var e=t;if(e&&void 0!==e.responseStart){var n=M_.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime)),s=e.name&&e.name.split("?")[0],a={url:s,responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o};Mw(a)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qw=5e3;function Yw(){H_()&&(setTimeout((function(){return Jw()}),0),setTimeout((function(){return Xw()}),0),setTimeout((function(){return $w()}),0))}function Xw(){for(var t=M_.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){var i=r[n];Kw(i)}t.setupObserver("resource",Kw)}function Jw(){var t=M_.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){Gw.createOobTrace(e,n),r=void 0}),Qw);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),Gw.createOobTrace(e,n,t))}))}else Gw.createOobTrace(e,n)}function $w(){for(var t=M_.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){var i=r[n];Zw(i)}t.setupObserver("measure",Zw)}function Zw(t){var e=t.name;e.substring(0,E_.length)!==E_&&Gw.createUserTimingTrace(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tI=function(){function t(t){this.app=t,M_.getInstance().requiredApisAvailable()&&(0,p.eu)().then((function(t){t&&(Cw(),pw().then(Yw,Yw))})).catch((function(t){D_.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new Gw(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return q_.getInstance().instrumentationEnabled},set:function(t){q_.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return q_.getInstance().dataCollectionEnabled},set:function(t){q_.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}(),eI="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(t){var e=function(t,e){if(t.name!==eI)throw R_.create("FB not default");if("undefined"===typeof window)throw R_.create("no window");return j_(window),q_.getInstance().firebaseAppInstance=t,q_.getInstance().installationsService=e,new tI(t)};t.INTERNAL.registerComponent(new gd.wA("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion(m_,b_)}nI(l.Z);var rI=function(){return rI=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},rI.apply(this,arguments)};function iI(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function oI(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var sI,aI,uI="firebase_id",cI="origin",hI=6e4,lI="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",fI="https://www.googletagmanager.com/gtag/js";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function pI(t,e,n,r,i){return iI(this,void 0,void 0,(function(){var o,s;return oI(this,(function(a){switch(a.label){case 0:return i&&i.global?(t(sI.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=rI(rI({},r),{send_to:o}),t(sI.EVENT,n,s),a.label=3;case 3:return[2]}}))}))}function dI(t,e,n,r){return iI(this,void 0,void 0,(function(){var i;return oI(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(sI.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(sI.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))}function vI(t,e,n,r){return iI(this,void 0,void 0,(function(){var i;return oI(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(sI.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(sI.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))}function yI(t,e,n,r){return iI(this,void 0,void 0,(function(){var i,o,s,a,u;return oI(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)a=s[o],i["user_properties."+a]=n[a];return t(sI.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(sI.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))}function gI(t,e){return iI(this,void 0,void 0,(function(){var n;return oI(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t["EVENT"]="event",t["SET"]="set",t["CONFIG"]="config"})(sI||(sI={})),function(t){t["ADD_SHIPPING_INFO"]="add_shipping_info",t["ADD_PAYMENT_INFO"]="add_payment_info",t["ADD_TO_CART"]="add_to_cart",t["ADD_TO_WISHLIST"]="add_to_wishlist",t["BEGIN_CHECKOUT"]="begin_checkout",t["CHECKOUT_PROGRESS"]="checkout_progress",t["EXCEPTION"]="exception",t["GENERATE_LEAD"]="generate_lead",t["LOGIN"]="login",t["PAGE_VIEW"]="page_view",t["PURCHASE"]="purchase",t["REFUND"]="refund",t["REMOVE_FROM_CART"]="remove_from_cart",t["SCREEN_VIEW"]="screen_view",t["SEARCH"]="search",t["SELECT_CONTENT"]="select_content",t["SELECT_ITEM"]="select_item",t["SELECT_PROMOTION"]="select_promotion",t["SET_CHECKOUT_OPTION"]="set_checkout_option",t["SHARE"]="share",t["SIGN_UP"]="sign_up",t["TIMING_COMPLETE"]="timing_complete",t["VIEW_CART"]="view_cart",t["VIEW_ITEM"]="view_item",t["VIEW_ITEM_LIST"]="view_item_list",t["VIEW_PROMOTION"]="view_promotion",t["VIEW_SEARCH_RESULTS"]="view_search_results"}(aI||(aI={}));var mI,bI=new f.Yd("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(t,e){var n=document.createElement("script");n.src=fI+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}function wI(t){var e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function II(t,e,n,r,i,o){return iI(this,void 0,void 0,(function(){var s,a,u,c;return oI(this,(function(h){switch(h.label){case 0:s=r[i],h.label=1;case 1:return h.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return h.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=h.sent(),u=a.find((function(t){return t.measurementId===i})),u?[4,e[u.appId]]:[3,6];case 5:h.sent(),h.label=6;case 6:return[3,8];case 7:return c=h.sent(),bI.error(c),[3,8];case 8:return t(sI.CONFIG,i,o),[2]}}))}))}function EI(t,e,n,r,i){return iI(this,void 0,void 0,(function(){var o,s,a,u,c,h,l,f,p;return oI(this,(function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),o=[],i&&i["send_to"]?(s=i["send_to"],Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=d.sent(),u=function(t){var n=a.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,h=s;c<h.length;c++)if(l=h[c],f=u(l),"break"===f)break;d.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return d.sent(),t(sI.EVENT,r,i||{}),[3,5];case 4:return p=d.sent(),bI.error(p),[3,5];case 5:return[2]}}))}))}function TI(t,e,n,r){function i(i,o,s){return iI(this,void 0,void 0,(function(){var a;return oI(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==sI.EVENT?[3,2]:[4,EI(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==sI.CONFIG?[3,4]:[4,II(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(sI.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),bI.error(a),[3,7];case 7:return[2]}}))}))}return i}function SI(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=TI(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function CI(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(fI))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kI=(mI={},mI["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",mI["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",mI["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",mI["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",mI["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",mI["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",mI["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",mI["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',mI["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',mI),NI=new p.LL("analytics","Analytics",kI),AI=30,PI=1e3,xI=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=PI),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}(),OI=new xI;function RI(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function DI(t){var e;return iI(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return oI(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:RI(r)},o=lI.replace("{app-id}",n),[4,fetch(o,i)];case 1:if(s=c.sent(),200===s.status||304===s.status)return[3,6];a="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,s.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(a=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw NI.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a});case 6:return[2,s.json()]}}))}))}function LI(t,e,n){return void 0===e&&(e=OI),iI(this,void 0,void 0,(function(){var r,i,o,s,a,u,c=this;return oI(this,(function(h){if(r=t.options,i=r.appId,o=r.apiKey,s=r.measurementId,!i)throw NI.create("no-app-id");if(!o){if(s)return[2,{measurementId:s,appId:i}];throw NI.create("no-api-key")}return a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new UI,setTimeout((function(){return iI(c,void 0,void 0,(function(){return oI(this,(function(t){return u.abort(),[2]}))}))}),void 0!==n?n:hI),[2,MI({appId:i,apiKey:o,measurementId:s},a,u,e)]}))}))}function MI(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=OI),iI(this,void 0,void 0,(function(){var e,s,a,u,c,h,l;return oI(this,(function(f){switch(f.label){case 0:e=t.appId,s=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,jI(n,i)];case 2:return f.sent(),[3,4];case 3:if(a=f.sent(),s)return bI.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return f.trys.push([4,6,,7]),[4,DI(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(c=f.sent(),!FI(c)){if(r.deleteThrottleMetadata(e),s)return bI.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return h=503===Number(c.customData.httpStatus)?(0,p.$s)(o,r.intervalMillis,AI):(0,p.$s)(o,r.intervalMillis),l={throttleEndTimeMillis:Date.now()+h,backoffCount:o+1},r.setThrottleMetadata(e,l),bI.debug("Calling attemptFetch again in "+h+" millis"),[2,MI(t,l,n,r)];case 7:return[2]}}))}))}function jI(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(NI.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}function FI(t){if(!(t instanceof p.ZR)||!t.customData)return!1;var e=Number(t.customData["httpStatus"]);return 429===e||500===e||503===e||504===e}var UI=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(){return iI(this,void 0,void 0,(function(){var t;return oI(this,(function(e){switch(e.label){case 0:return(0,p.hl)()?[3,1]:(bI.warn(NI.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,(0,p.eu)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),bI.warn(NI.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}function qI(t,e,n,r,i,o){return iI(this,void 0,void 0,(function(){var s,a,u,c,h,l,f;return oI(this,(function(p){switch(p.label){case 0:return s=LI(t),s.then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&bI.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return bI.error(t)})),e.push(s),a=VI().then((function(t){return t?r.getId():void 0})),[4,Promise.all([s,a])];case 1:return u=p.sent(),c=u[0],h=u[1],CI()||_I(o,c.measurementId),i("js",new Date),f={},f[cI]="firebase",f.update=!0,l=f,null!=h&&(l[uI]=h),i(sI.CONFIG,c.measurementId,l),[2,c.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BI,HI,WI={},zI=[],GI={},KI="dataLayer",QI="gtag",YI=!1;function XI(t){if(YI)throw NI.create("already-initialized");t.dataLayerName&&(KI=t.dataLayerName),t.gtagName&&(QI=t.gtagName)}function JI(){var t=[];if((0,p.ru)()&&t.push("This is a browser extension environment."),(0,p.zI)()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=NI.create("invalid-analytics-context",{errorInfo:e});bI.warn(n.message)}}function $I(t,e){JI();var n=t.options.appId;if(!n)throw NI.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw NI.create("no-api-key");bI.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=WI[n])throw NI.create("already-exists",{id:n});if(!YI){wI(KI);var r=SI(WI,zI,GI,KI,QI),i=r.wrappedGtag,o=r.gtagCore;HI=i,BI=o,YI=!0}WI[n]=qI(t,zI,GI,e,BI,KI);var s={app:t,logEvent:function(t,e,r){pI(HI,WI[n],t,e,r).catch((function(t){return bI.error(t)}))},setCurrentScreen:function(t,e){dI(HI,WI[n],t,e).catch((function(t){return bI.error(t)}))},setUserId:function(t,e){vI(HI,WI[n],t,e).catch((function(t){return bI.error(t)}))},setUserProperties:function(t,e){yI(HI,WI[n],t,e).catch((function(t){return bI.error(t)}))},setAnalyticsCollectionEnabled:function(t){gI(WI[n],t).catch((function(t){return bI.error(t)}))},INTERNAL:{delete:function(){return delete WI[n],Promise.resolve()}}};return s}var ZI="@firebase/analytics",tE="0.6.4",eE="analytics";function nE(t){function e(t){try{var e=t.getProvider(eE).getImmediate();return{logEvent:e.logEvent}}catch(n){throw NI.create("interop-component-reg-failed",{reason:n})}}t.INTERNAL.registerComponent(new gd.wA(eE,(function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("installations").getImmediate();return $I(e,n)}),"PUBLIC").setServiceProps({settings:XI,EventName:aI,isSupported:rE})),t.INTERNAL.registerComponent(new gd.wA("analytics-internal",e,"PRIVATE")),t.registerVersion(ZI,tE)}function rE(){return iI(this,void 0,void 0,(function(){var t;return oI(this,(function(e){switch(e.label){case 0:if((0,p.ru)())return[2,!1];if(!(0,p.zI)())return[2,!1];if(!(0,p.hl)())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,(0,p.eu)()];case 2:return t=e.sent(),[2,t];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))}nE(l.Z);var iE=function(){return iE=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},iE.apply(this,arguments)};function oE(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function sE(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var aE,uE=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return oE(this,void 0,void 0,(function(){var e,n,r,i,o;return sE(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],r=e[1],r&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}}))}))},t}(),cE=(aE={},aE["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",aE["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",aE["registration-api-key"]="Undefined API key. Check Firebase app initialization.",aE["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",aE["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",aE["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",aE["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",aE["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",aE["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",aE["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',aE["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',aE["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",aE["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",aE),hE=new p.LL("remoteconfig","Remote Config",cE);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(t,e){return t instanceof p.ZR&&-1!==t.code.indexOf(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t){return void 0===t&&(t=navigator),t.languages&&t.languages[0]||t.language}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pE=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return oE(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,h,l,f,p,d,v,y,g,m,b;return sE(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=_.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:fE()},u={method:"POST",headers:s,body:JSON.stringify(a)},c=fetch(o,u),h=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([c,h])];case 3:return _.sent(),[4,c];case 4:return l=_.sent(),[3,6];case 5:throw f=_.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),hE.create(p,{originalErrorMessage:f.message});case 6:if(d=l.status,v=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];m=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,l.json()];case 8:return m=_.sent(),[3,10];case 9:throw b=_.sent(),hE.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:y=m["entries"],g=m["state"],_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===g?d=500:"NO_CHANGE"===g?d=304:"NO_TEMPLATE"!==g&&"EMPTY_CONFIG"!==g||(y={}),304!==d&&200!==d)throw hE.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:v,config:y}]}}))}))},t}(),dE=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),vE=!1,yE="",gE=0,mE=["1","true","t","yes","y","on"],bE=function(){function t(t,e){void 0===e&&(e=yE),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"===this._source?vE:mE.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return gE;var t=Number(this._value);return isNaN(t)&&(t=gE),t},t.prototype.getSource=function(){return this._source},t}(),_E=6e4,wE=432e5,IE=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:_E,minimumFetchIntervalMillis:wE},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=f["in"].DEBUG;break;case"silent":this._logger.logLevel=f["in"].SILENT;break;default:this._logger.logLevel=f["in"].ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return oE(this,void 0,void 0,(function(){var t,e,n;return sE(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return oE(this,void 0,void 0,(function(){var t,e,n,r=this;return sE(this,(function(i){switch(i.label){case 0:t=new dE,setTimeout((function(){return oE(r,void 0,void 0,(function(){return sE(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=lE(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return oE(this,void 0,void 0,(function(){return sE(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return EE(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new bE("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new bE("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new bE("static"))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(iE(iE({},t),e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(t,e){var n=t.target.error||void 0;return hE.create(e,{originalErrorMessage:n&&n.message})}var SE="app_namespace_store",CE="firebase_remote_config",kE=1;function NE(){return new Promise((function(t,e){var n=indexedDB.open(CE,kE);n.onerror=function(t){e(TE(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(SE,{keyPath:"compositeKey"})}}}))}var AE=function(){function t(t,e,n,r){void 0===r&&(r=NE()),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return oE(this,void 0,void 0,(function(){var e,n=this;return sE(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([SE],"readonly"),s=o.objectStore(SE),a=n.createCompositeKey(t);try{var u=s.get(a);u.onerror=function(t){i(TE(t,"storage-get"))},u.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(c){i(hE.create("storage-get",{originalErrorMessage:c&&c.message}))}}))]}}))}))},t.prototype.set=function(t,e){return oE(this,void 0,void 0,(function(){var n,r=this;return sE(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var s=n.transaction([SE],"readwrite"),a=s.objectStore(SE),u=r.createCompositeKey(t);try{var c=a.put({compositeKey:u,value:e});c.onerror=function(t){o(TE(t,"storage-set"))},c.onsuccess=function(){i()}}catch(h){o(hE.create("storage-set",{originalErrorMessage:h&&h.message}))}}))]}}))}))},t.prototype.delete=function(t){return oE(this,void 0,void 0,(function(){var e,n=this;return sE(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([SE],"readwrite"),s=o.objectStore(SE),a=n.createCompositeKey(t);try{var u=s.delete(a);u.onerror=function(t){i(TE(t,"storage-delete"))},u.onsuccess=function(){r()}}catch(c){i(hE.create("storage-delete",{originalErrorMessage:c&&c.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),PE=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return oE(this,void 0,void 0,(function(){var t,e,n,r,i,o;return sE(this,(function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return r=s.sent(),r&&(this.lastFetchStatus=r),[4,e];case 2:return i=s.sent(),i&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return o=s.sent(),o&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xE(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(hE.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}function OE(t){if(!(t instanceof p.ZR)||!t.customData)return!1;var e=Number(t.customData["httpStatus"]);return 429===e||500===e||503===e||504===e}var RE=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return oE(this,void 0,void 0,(function(){var e;return sE(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return oE(this,void 0,void 0,(function(){var e,i,o;return sE(this,(function(s){switch(s.label){case 0:return[4,xE(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(i=s.sent(),!OE(i))throw i;return o={throttleEndTimeMillis:Date.now()+(0,p.$s)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),DE="@firebase/remote-config",LE="0.1.31";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ME(t){function e(e,n){var r=e.getProvider("app").getImmediate(),i=e.getProvider("installations").getImmediate();if("undefined"===typeof window)throw hE.create("registration-window");var o=r.options,s=o.projectId,a=o.apiKey,u=o.appId;if(!s)throw hE.create("registration-project-id");if(!a)throw hE.create("registration-api-key");if(!u)throw hE.create("registration-app-id");n=n||"firebase";var c=new AE(u,r.name,n),h=new PE(c),l=new f.Yd(DE);l.logLevel=f["in"].ERROR;var p=new pE(i,t.SDK_VERSION,n,s,a,u),d=new RE(p,c),v=new uE(d,c,h,l),y=new IE(r,v,h,c,l);return y.ensureInitialized(),y}t.INTERNAL.registerComponent(new gd.wA("remoteConfig",e,"PUBLIC").setMultipleInstances(!0)),t.registerVersion(DE,LE)}ME(l.Z);var jE="firebase",FE="8.2.9";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
l.Z.registerVersion(jE,FE,"app");var UE="firebase",VE="8.2.9";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),l.Z.registerVersion(UE,VE);const qE={apiKey:"AIzaSyDMq3A7By9ta-qqbzvEO_4NlarfGzdZKDY",authDomain:"chat-c5b5c.firebaseapp.com",projectId:"chat-c5b5c",storageBucket:"chat-c5b5c.appspot.com",messagingSenderId:"950527293092",appId:"1:950527293092:web:bb6b17e9aabdaeeb31d831",databaseURL:"https://chat-c5b5c-default-rtdb.firebaseio.com/"},BE=l.Z.initializeApp(qE);var HE=BE,WE={name:"chat",data(){return{userName:"",showMessage:"",to:null,participants:[{id:"user1",name:"Matteo",imageUrl:"https://avatars3.githubusercontent.com/u/1915989?s=230&v=4"},{id:"user2",name:"Support",imageUrl:"https://avatars3.githubusercontent.com/u/37018832?s=200&v=4"},{id:"user2",name:"eslam",imageUrl:"https://avatars3.githubusercontent.com/u/37018832?s=200&v=4"}],titleImageUrl:"https://a.slack-edge.com/66f9/img/avatars-teams/ava_0001-34.png",messageList:[{type:"text",author:"me",data:{text:"Say yes!"}},{type:"text",author:"user1",data:{text:"No."}},{type:"text",author:"user2",data:{text:"Wow."}}],newMessagesCount:0,isChatOpen:!1,showTypingIndicator:"",colors:{header:{bg:"#6366f1",text:"#ffffff"},launcher:{bg:"#6366f1"},messageList:{bg:"#ffffff"},sentMessage:{bg:"#6366f1",text:"#ffffff"},receivedMessage:{bg:"#eaeaea",text:"#222222"},userInput:{bg:"#f4f7f9",text:"#565867"}},alwaysScrollToBottom:!1,messageStyling:!0}},methods:{updateUsername(){this.name=this.userName,console.log(this.userName),this.userName=""},sendMessage2(){const t={text:this.showMessage,from:this.name,to:this.to};HE.database().ref("messages").push(t),this.showMessage=""},sendMessage(t){t.length>0&&(this.newMessagesCount=this.isChatOpen?this.newMessagesCount:this.newMessagesCount+1,this.onMessageWasSent({author:"support",type:"text",data:{text:t}}))},onMessageWasSent(t){HE.database().ref("messages").push(t),this.showMessage="",this.messageList=[...this.messageList,t]},openChat(){this.isChatOpen=!0,this.newMessagesCount=0},closeChat(){this.isChatOpen=!1},handleScrollToTop(){},handleOnType(){console.log("Emit typing event")},editMessage(t){const e=this.messageList.find((e=>e.id===t.id));e.isEdited=!0,e.data.text=t.data.text}},created(){const t=HE.database().ref("messages");t.on("value",(t=>{let e=t.val(),n=[];Object.keys(e).forEach((t=>{n.push({id:t,username:e[t].from?e[t].from:e[t].username||"test",to:e[t].to,text:e[t].text})})),this.messageList=[...this.messageList,n]}))}},zE=WE,GE=n(3736),KE=(0,GE.Z)(zE,c,h,!1,null,null,null),QE=KE.exports,YE={props:["singleProjectHeader"],data(){return{open:!1}},components:{Chat:QE},methods:{openChat(){this.$refs.open.openChat()}}},XE=YE,JE=(0,GE.Z)(XE,a,u,!1,null,null,null),$E=JE.exports,ZE=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"active flex justify-start mt-7"},[n("img",{staticClass:"rounded-xl cursor-pointer shadow-lg",attrs:{src:t.selected,alt:"Real Estate"}})]),n("div",{staticClass:"thum-img flex justify-start"},t._l(t.projectImages,(function(e){return n("img",{key:e.id,staticClass:"rounded-xl cursor-pointer shadow-lg",class:{active:e.img==t.selected},attrs:{src:e.img,alt:e.title},on:{click:function(n){return t.choose(e.img)}}})})),0)])},tT=[],eT={name:"swiper",data(){return{selected:"http://holrmagazine.com/wp-content/uploads/2022/05/folksgrowth.com-real-estate-business.jpg",projectImages:[{id:1,title:"Real Estate",img:"https://blog.hubspot.com/hubfs/Sales_Blog/real-estate-business-compressor.jpg"},{id:2,title:"Real Estate",img:"https://c3c5e8m9.stackpathcdn.com/sites/g/files/aatuss191/files/2018-10/Edelman_Website_Real_Estate_Image_0.jpg"},{id:3,title:"Real Estate",img:"http://holrmagazine.com/wp-content/uploads/2022/05/folksgrowth.com-real-estate-business.jpg"}]}},methods:{choose(t){this.selected=t}}},nT=eT,rT=(0,GE.Z)(nT,ZE,tT,!1,null,null,null),iT=rT.exports,oT=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block sm:flex gap-0 sm:gap-10 mt-14"},[n("div",{staticClass:"w-full sm:w-1/3 text-left"},[n("div",{staticClass:"mb-7"},[n("p",{staticClass:"font-general-medium text-base sm:text-2xl text-secondary-dark dark:text-secondary-light mb-2"},[t._v(" "+t._s(t.projectInfo.clientHeading)+" ")]),n("ul",{staticClass:"leading-loose"},t._l(t.projectInfo.companyInfos,(function(e){return n("li",{key:e,staticClass:"font-general-regular text-xs sm:text-lg text-ternary-dark dark:text-ternary-light"},[n("span",[t._v(t._s(e.title)+": ")]),n("a",{class:"Website"==e.title||"Phone"==e.title?"hover:underline cursor-pointer":"",attrs:{href:"#","aria-label":"Project Website and Phone"}},[t._v(t._s(e.details))])])})),0)]),n("div",[n("p",{staticClass:"font-general-medium text-base sm:text-2xl text-ternary-dark dark:text-ternary-light mb-2"},[t._v(" "+t._s(t.projectInfo.socialSharingsHeading)+" ")]),n("div",{staticClass:"flex items-center gap-3 mt-5"},t._l(t.projectInfo.socialSharings,(function(t){return n("a",{key:t.id,staticClass:"bg-ternary-light dark:bg-ternary-dark text-gray-400 hover:text-primary-dark dark:hover:text-primary-light p-2 rounded-lg shadow-sm duration-500",attrs:{href:t.url,target:"__blank","aria-label":"Share Project"}},[n("i",{staticClass:"w-4 lg:w-5 h-4 lg:h-5",attrs:{"data-feather":t.icon}})])})),0)])]),n("div",{staticClass:"w-full sm:w-2/3 text-left mt-10 sm:mt-0"},[n("p",{staticClass:"font-general-medium text-primary-dark dark:text-primary-light text-base sm:text-2xl font-bold mb-7"},[t._v(" "+t._s(t.projectInfo.projectDetailsHeading)+" ")]),t._l(t.projectInfo.projectDetails,(function(e){return n("p",{key:e.id,staticClass:"font-general-regular mb-5 text-xs sm:text-lg text-ternary-dark dark:text-ternary-light"},[t._v(" "+t._s(e.details)+" ")])})),n("div",{staticClass:"mb-7"},[n("p",{staticClass:"font-general-medium text-primary-dark dark:text-primary-light text-base sm:text-2xl font-bold mb-7"},[t._v(" "+t._s(t.projectInfo.objectivesHeading)+" ")]),n("p",{staticClass:"font-general-regular text-primary-dark dark:text-primary-light text-base sm:text-xl font-bold mb-4 pb-2 text-left border-b"},[t._v(" "+t._s(t.categoryInfo.categoryHeading)+" ")]),n("div",{staticClass:"grid grid-cols-3 sm:grid-cols-4 gap-10"},t._l(t.categoryInfo.categoryProducts,(function(e){return n("div",{key:e.id},[n("img",{staticClass:"rounded-xl cursor-pointer",attrs:{src:e.img,alt:e.title}}),n("h5",{staticClass:"font-general-regular text-primary-dark dark:text-primary-light text-sm font-bold my-1 text-left"},[t._v(" "+t._s(e.title)+" ")]),n("p",{staticClass:"text-sm"},[t._v(t._s(e.desc))])])})),0)])],2)])},sT=[],aT={props:["projectInfo","categoryInfo"],mounted(){s().replace()},updated(){s().replace()}},uT=aT,cT=(0,GE.Z)(uT,oT,sT,!1,null,null,null),hT=cT.exports,lT={name:"Projects",components:{ProjectHeader:$E,Swiper:iT,ProjectInfo:hT},data:()=>({singleProjectHeader:{singleProjectTitle:"Real Estate company",singleProjectDate:"Jul 26, 2021",singleProjectTag:"Real Estate"},projectImages:[{id:1,title:"Real Estate",img:"https://www.google.com/url?sa=i&url=https%3A%2F%2Fblog.hubspot.com%2Fsales%2Freal-estate-business&psig=AOvVaw2VvE66rwutLGEOWEuEDE26&ust=1654239321584000&source=images&cd=vfe&ved=0CAwQjRxqFwoTCKi-1--XjvgCFQAAAAAdAAAAABAO"},{id:2,title:"Real Estate",img:"https://c3c5e8m9.stackpathcdn.com/sites/g/files/aatuss191/files/2018-10/Edelman_Website_Real_Estate_Image_0.jpg"},{id:3,title:"Real Estate",img:"http://holrmagazine.com/wp-content/uploads/2022/05/folksgrowth.com-real-estate-business.jpg"}],projectInfo:{clientHeading:"About Company",companyInfos:[{id:1,title:"Name",details:"Company Ltd"},{id:2,title:"Services",details:"Real Estate"},{id:3,title:"Website",details:"https://company.com"},{id:4,title:"Phone",details:"555 8888 888"}],objectivesHeading:"Categories",objectivesDetails:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Optio, natus! Quibusdam enim quod in esse, mollitia molestias incidunt quas ipsa accusamus veniam.",projectDetailsHeading:"About Us",projectDetails:[{id:1,details:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Nihil vel illum asperiores dignissimos cumque quibusdam et fugiat voluptatem nobis suscipit explicabo, eaque consequatur nesciunt, fugit eligendi corporis laudantium adipisci soluta? Lorem ipsum, dolor sit amet consectetur adipisicing elit. Incidunt totam dolorum, ducimus obcaecati, voluptas facilis molestias nobis ut quam natus similique inventore excepturi optio ipsa deleniti fugit illo. Unde, amet! Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ipsum illo necessitatibus perspiciatis! Aperiam perferendis labore temporibus, eos culpa corporis recusandae quas, fuga voluptatibus nesciunt odit libero tenetur neque consequatur ea."},{id:2,details:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Nihil vel illum asperiores dignissimos cumque quibusdam et fugiat voluptatem nobis suscipit explicabo, eaque consequatur nesciunt, fugit eligendi corporis laudantium adipisci soluta?"}],socialSharingsHeading:"Follow Us",socialSharings:[{id:1,name:"Twitter",icon:"twitter",url:""},{id:2,name:"Instagram",icon:"instagram",url:""},{id:3,name:"Facebook",icon:"facebook",url:""},{id:4,name:"LinkedIn",icon:"linkedin",url:""},{id:5,name:"Youtube",icon:"youtube",url:""}]},categoryInfo:{categoryHeading:"Real Estate",categoryProducts:[{id:1,title:"Modernly Designed Real Estate Surrounded by Nature in Alanya",desc:"Lorem ipsum dolor, sit amet consectetur",img:"https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcQGJuGT6cIvDI7VJAbuddMJkSijQq6vpLpm57dUeUKLMrq974BmN542rjCOSEJ_YYoP5ABVZjDdUOXtiPeJWQOWog8pLq6UG_ZEtfkK1abA&usqp=CAE"},{id:2,title:"Real Estate in a Comprehensive Housing Project in North Cyprus",desc:"Lorem ipsum dolor, sit amet consectetur",img:"https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcQGBTelIkoJR23dDqbJcaKt9GT1-qxEorTQxGTtX4qxiN1TYVUdcEq4mJ7p9uZypW8CFO1CIaeEuCMiZzjdm5EKNoEsxW6UMgxZXC5cZ0E&usqp=CAE"},{id:3,title:"Fully Furnished Real Estate in Belek Kadriya",desc:"Lorem ipsum dolor, sit amet consectetur",img:"https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcSfCjKYW3BVKXG20R9ep2mAFvvzTAphO-MYWvbQ7Q8JmMnHc9e4LAJZL_l25jMNU8w_mHf5GV6ji0Q3JuNdM-su-cqvtr8tSqJ8fik7qsGX&usqp=CAE"},{id:4,title:"Antalya Luxury Real Estate with Rich Complex Features",desc:"Lorem ipsum dolor, sit amet consectetur",img:"https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcQu6xJpYOuq1tvwWi8k28T70UACOK-gyQHojmeIYgLaVMBVWdRrQqC-XsLup6qmYlOADlmmsUkqykLtvb7d-mEpHB65uLmYC0RJcEKqLTmv&usqp=CAE"}]},relatedProject:{relatedProjectsHeading:"Related Companies",relatedProjects:[{id:1,title:"Mobile UI",img:n(3087)},{id:2,title:"Web Application",img:n(597)},{id:3,title:"UI Design",img:n(9952)},{id:4,title:"Kabul Mobile App UI",img:n(4398)}]}}),mounted(){s().replace()},updated(){s().replace()},methods:{}},fT=lT,pT=(0,GE.Z)(fT,r,i,!1,null,"1e17dc6a",null),dT=pT.exports},1223:function(t,e,n){var r=n(5112),i=n(30),o=n(3070),s=r("unscopables"),a=Array.prototype;void 0==a[s]&&o.f(a,s,{configurable:!0,value:i(null)}),t.exports=function(t){a[s][t]=!0}},4019:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,e,n){"use strict";var r,i,o,s=n(4019),a=n(9781),u=n(7854),c=n(614),h=n(111),l=n(2597),f=n(648),p=n(6330),d=n(8880),v=n(1320),y=n(3070).f,g=n(7976),m=n(9518),b=n(7674),_=n(5112),w=n(9711),I=u.Int8Array,E=I&&I.prototype,T=u.Uint8ClampedArray,S=T&&T.prototype,C=I&&m(I),k=E&&m(E),N=Object.prototype,A=u.TypeError,P=_("toStringTag"),x=w("TYPED_ARRAY_TAG"),O=w("TYPED_ARRAY_CONSTRUCTOR"),R=s&&!!b&&"Opera"!==f(u.opera),D=!1,L={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},M={BigInt64Array:8,BigUint64Array:8},j=function(t){if(!h(t))return!1;var e=f(t);return"DataView"===e||l(L,e)||l(M,e)},F=function(t){if(!h(t))return!1;var e=f(t);return l(L,e)||l(M,e)},U=function(t){if(F(t))return t;throw A("Target is not a typed array")},V=function(t){if(c(t)&&(!b||g(C,t)))return t;throw A(p(t)+" is not a typed array constructor")},q=function(t,e,n,r){if(a){if(n)for(var i in L){var o=u[i];if(o&&l(o.prototype,t))try{delete o.prototype[t]}catch(s){try{o.prototype[t]=e}catch(c){}}}k[t]&&!n||v(k,t,n?e:R&&E[t]||e,r)}},B=function(t,e,n){var r,i;if(a){if(b){if(n)for(r in L)if(i=u[r],i&&l(i,t))try{delete i[t]}catch(o){}if(C[t]&&!n)return;try{return v(C,t,n?e:R&&C[t]||e)}catch(o){}}for(r in L)i=u[r],!i||i[t]&&!n||v(i,t,e)}};for(r in L)i=u[r],o=i&&i.prototype,o?d(o,O,i):R=!1;for(r in M)i=u[r],o=i&&i.prototype,o&&d(o,O,i);if((!R||!c(C)||C===Function.prototype)&&(C=function(){throw A("Incorrect invocation")},R))for(r in L)u[r]&&b(u[r],C);if((!R||!k||k===N)&&(k=C.prototype,R))for(r in L)u[r]&&b(u[r].prototype,k);if(R&&m(S)!==k&&b(S,k),a&&!l(k,P))for(r in D=!0,y(k,P,{get:function(){return h(this)?this[x]:void 0}}),L)u[r]&&d(u[r],x,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:R,TYPED_ARRAY_CONSTRUCTOR:O,TYPED_ARRAY_TAG:D&&x,aTypedArray:U,aTypedArrayConstructor:V,exportTypedArrayMethod:q,exportTypedArrayStaticMethod:B,isView:j,isTypedArray:F,TypedArray:C,TypedArrayPrototype:k}},8544:function(t,e,n){var r=n(7293);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},30:function(t,e,n){var r,i=n(9670),o=n(6048),s=n(748),a=n(3501),u=n(490),c=n(317),h=n(6200),l=">",f="<",p="prototype",d="script",v=h("IE_PROTO"),y=function(){},g=function(t){return f+d+l+t+f+"/"+d+l},m=function(t){t.write(g("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){var t,e=c("iframe"),n="java"+d+":";return e.style.display="none",u.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(g("document.F=Object")),t.close(),t.F},_=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}_="undefined"!=typeof document?document.domain&&r?m(r):b():m(r);var t=s.length;while(t--)delete _[p][s[t]];return _()};a[v]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(y[p]=i(t),n=new y,y[p]=null,n[v]=t):n=_(),void 0===e?n:o.f(n,e)}},6048:function(t,e,n){var r=n(9781),i=n(3353),o=n(3070),s=n(9670),a=n(5656),u=n(1956);e.f=r&&!i?Object.defineProperties:function(t,e){s(t);var n,r=a(e),i=u(e),c=i.length,h=0;while(c>h)o.f(t,n=i[h++],r[n]);return t}},9518:function(t,e,n){var r=n(7854),i=n(2597),o=n(614),s=n(7908),a=n(6200),u=n(8544),c=a("IE_PROTO"),h=r.Object,l=h.prototype;t.exports=u?h.getPrototypeOf:function(t){var e=s(t);if(i(e,c))return e[c];var n=e.constructor;return o(n)&&e instanceof n?n.prototype:e instanceof h?l:null}},1956:function(t,e,n){var r=n(6324),i=n(748);t.exports=Object.keys||function(t){return r(t,i)}},4590:function(t,e,n){var r=n(7854),i=n(3002),o=r.RangeError;t.exports=function(t,e){var n=i(t);if(n%e)throw o("Wrong offset");return n}},3002:function(t,e,n){var r=n(7854),i=n(9303),o=r.RangeError;t.exports=function(t){var e=i(t);if(e<0)throw o("The argument can't be less than 0");return e}},2262:function(t,e,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),s=n(9303),a=n(1223);r({target:"Array",proto:!0},{at:function(t){var e=i(this),n=o(e),r=s(t),a=r>=0?r:n+r;return a<0||a>=n?void 0:e[a]}}),a("at")},4506:function(t,e,n){"use strict";var r=n(2109),i=n(1702),o=n(4488),s=n(9303),a=n(1340),u=n(7293),c=i("".charAt),h=u((function(){return"\ud842"!=="𠮷".at(-2)}));r({target:"String",proto:!0,forced:h},{at:function(t){var e=a(o(this)),n=e.length,r=s(t),i=r>=0?r:n+r;return i<0||i>=n?void 0:c(e,i)}})},8675:function(t,e,n){"use strict";var r=n(260),i=n(6244),o=n(9303),s=r.aTypedArray,a=r.exportTypedArrayMethod;a("at",(function(t){var e=s(this),n=i(e),r=o(t),a=r>=0?r:n+r;return a<0||a>=n?void 0:e[a]}))},3462:function(t,e,n){"use strict";var r=n(7854),i=n(6916),o=n(260),s=n(6244),a=n(4590),u=n(7908),c=n(7293),h=r.RangeError,l=r.Int8Array,f=l&&l.prototype,p=f&&f.set,d=o.aTypedArray,v=o.exportTypedArrayMethod,y=!c((function(){var t=new Uint8ClampedArray(2);return i(p,t,{length:1,0:3},1),3!==t[1]})),g=y&&o.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var t=new l(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));v("set",(function(t){d(this);var e=a(arguments.length>1?arguments[1]:void 0,1),n=u(t);if(y)return i(p,this,n,e);var r=this.length,o=s(n),c=0;if(o+e>r)throw h("Wrong length");while(c<o)this[e+c]=n[c++]}),!y||g)},8386:function(t,e,n){"use strict";n.d(e,{Z:function(){return F}});n(1703);var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};var i,o,s=n(3836),a=n(5642),u=n(2864),c=(i={},i["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),h=new s.LL("app","Firebase",c),l="@firebase/app",f="0.6.15",p="@firebase/analytics",d="@firebase/auth",v="@firebase/database",y="@firebase/functions",g="@firebase/installations",m="@firebase/messaging",b="@firebase/performance",_="@firebase/remote-config",w="@firebase/storage",I="@firebase/firestore",E="firebase-wrapper",T="[DEFAULT]",S=(o={},o[l]="fire-core",o[p]="fire-analytics",o[d]="fire-auth",o[v]="fire-rtdb",o[y]="fire-fn",o[g]="fire-iid",o[m]="fire-fcm",o[b]="fire-perf",o[_]="fire-rc",o[w]="fire-gcs",o[I]="fire-fst",o["fire-js"]="fire-js",o[E]="fire-js-all",o),C=new u.Yd("@firebase/app"),k=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=T),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=T),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){C.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();k.prototype.name&&k.prototype.options||k.prototype.delete||console.log("dc");var N="8.2.9";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A(t){var e={},n=new Map,r={__esModule:!0,initializeApp:c,app:o,registerVersion:p,setLogLevel:u.Ub,onLog:d,apps:null,SDK_VERSION:N,INTERNAL:{registerComponent:f,removeApp:i,components:n,useAsService:v}};function i(t){delete e[t]}function o(t){if(t=t||T,!(0,s.r3)(e,t))throw h.create("no-app",{appName:t});return e[t]}function c(n,i){if(void 0===i&&(i={}),"object"!==typeof i||null===i){var o=i;i={name:o}}var a=i;void 0===a.name&&(a.name=T);var u=a.name;if("string"!==typeof u||!u)throw h.create("bad-app-name",{appName:String(u)});if((0,s.r3)(e,u))throw h.create("duplicate-app",{appName:u});var c=new t(n,a,r);return e[u]=c,c}function l(){return Object.keys(e).map((function(t){return e[t]}))}function f(i){var a=i.name;if(n.has(a))return C.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===i.type?r[a]:null;if(n.set(a,i),"PUBLIC"===i.type){var u=function(t){if(void 0===t&&(t=o()),"function"!==typeof t[a])throw h.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==i.serviceProps&&(0,s.ZB)(u,i.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,i.multipleInstances?t:[])}}for(var c=0,l=Object.keys(e);c<l.length;c++){var f=l[c];e[f]._addComponent(i)}return"PUBLIC"===i.type?r[a]:null}function p(t,e,n){var r,i=null!==(r=S[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void C.warn(u.join(" "))}f(new a.wA(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))}function d(t,e){if(null!==t&&"function"!==typeof t)throw h.create("invalid-log-argument");(0,u.Am)(t,e)}function v(t,e){if("serverAuth"===e)return null;var n=e;return n}return r["default"]=r,Object.defineProperty(r,"apps",{get:l}),o["App"]=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P(){var t=A(k);function e(e){(0,s.ZB)(t,e)}return t.INTERNAL=r(r({},t.INTERNAL),{createFirebaseNamespace:P,extendNamespace:e,createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),t}var x=P(),O=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map((function(t){if(R(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",(function(t){return new O(t)}),"PRIVATE")),t.registerVersion(l,f,e),t.registerVersion("fire-js","")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if((0,s.jU)()&&void 0!==self.firebase){C.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var L=self.firebase.SDK_VERSION;L&&L.indexOf("LITE")>=0&&C.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var M=x.initializeApp;x.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&C.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),M.apply(void 0,t)};var j=x;D(j);var F=j},5642:function(t,e,n){"use strict";n.d(e,{wA:function(){return h},H0:function(){return v},zt:function(){return f}});n(1703);var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};function i(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function o(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function s(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return s}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}var c=n(3836),h=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),l="[DEFAULT]",f=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=l);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new c.BH;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r({identifier:l,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(a){if(i)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,d(t))try{this.getOrInitializeService(l)}catch(p){}try{for(var r=s(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=a(i.value,2),u=o[0],c=o[1],h=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService(h);c.resolve(f)}catch(p){}}}catch(v){e={error:v}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=l),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return i(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(u(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=l),this.instances.has(t)},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,p(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:l:t},t}();function p(t){return t===l?void 0:t}function d(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){var e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new f(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},598:function(t,e,n){"use strict";n(1703);var r=n(8386),i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},i(t,e)};function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},s.apply(this,arguments)};function a(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function c(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)s.push(r.value)}catch(A){i={error:A}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}var f=n(3836),p=n(2864),d=n(5642);t=n.hmd(t);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var v=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,f.Pz)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,f.cI)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),y=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,f.r3)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),g=function(t){try{if("undefined"!==typeof window&&"undefined"!==typeof window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new v(e)}}catch(n){}return new y},m=g("localStorage"),b=g("sessionStorage"),_=new p.Yd("@firebase/database"),w=function(){var t=1;return function(){return t++}}(),I=function(t){var e=(0,f.dS)(t),n=new f.gQ;n.update(e);var r=n.digest();return f.US.encodeByteArray(r)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"===typeof i&&"number"===typeof i.length?n+=E.apply(null,i):n+="object"===typeof i?(0,f.Pz)(i):i,n+=" "}return n},T=null,S=!0,C=function(t,e){(0,f.hu)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(_.logLevel=p["in"].VERBOSE,T=_.log.bind(_),e&&b.set("logging_enabled",!0)):"function"===typeof t?T=t:(T=null,b.remove("logging_enabled"))},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===S&&(S=!1,null===T&&!0===b.get("logging_enabled")&&C(!0)),T){var n=E.apply(null,t);T(n)}},N=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];k.apply(void 0,l([t],e))}},A=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+E.apply(void 0,l(t));_.error(n)},P=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+E.apply(void 0,l(t));throw _.error(n),new Error(n)},x=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+E.apply(void 0,l(t));_.warn(n)},O=function(){"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&x("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},R=function(t){return"number"===typeof t&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},D=function(t){if((0,f.Yr)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}},L="[MIN_NAME]",M="[MAX_NAME]",j=function(t,e){if(t===e)return 0;if(t===L||e===M)return-1;if(e===L||t===M)return 1;var n=X(t),r=X(e);return null!==n?null!==r?n-r===0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},F=function(t,e){return t===e?0:t<e?-1:1},U=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,f.Pz)(e))},V=function(t){if("object"!==typeof t||null===t)return(0,f.Pz)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=(0,f.Pz)(e[i]),r+=":",r+=V(t[e[i]]);return r+="}",r},q=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var H=function(t){(0,f.hu)(!R(t),"Invalid JSON number");var e,n,r,i,o,s=11,a=52,u=(1<<s-1)-1;0===t?(n=0,r=0,e=1/t===-1/0?1:0):(e=t<0,t=Math.abs(t),t>=Math.pow(2,1-u)?(i=Math.min(Math.floor(Math.log(t)/Math.LN2),u),n=i+u,r=Math.round(t*Math.pow(2,a-i)-Math.pow(2,a))):(n=0,r=Math.round(t/Math.pow(2,1-u-a))));var c=[];for(o=a;o;o-=1)c.push(r%2?1:0),r=Math.floor(r/2);for(o=s;o;o-=1)c.push(n%2?1:0),n=Math.floor(n/2);c.push(e?1:0),c.reverse();var h=c.join(""),l="";for(o=0;o<64;o+=8){var p=parseInt(h.substr(o,8),2).toString(16);1===p.length&&(p="0"+p),l+=p}return l.toLowerCase()},W=function(){return!("object"!==typeof window||!window["chrome"]||!window["chrome"]["extension"]||/^chrome/.test(window.location.href))},z=function(){return"object"===typeof Windows&&"object"===typeof Windows.UI},G=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r},K=new RegExp("^-?(0*)\\d{1,10}$"),Q=-2147483648,Y=2147483647,X=function(t){if(K.test(t)){var e=Number(t);if(e>=Q&&e<=Y)return e}return null},J=function(t){try{t()}catch(e){setTimeout((function(){var t=e.stack||"";throw x("Exception was thrown by user callback.",t),e}),Math.floor(0))}},$=function(){var t="object"===typeof window&&window["navigator"]&&window["navigator"]["userAgent"]||"";return t.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Z=function(t,e){var n=setTimeout(t,e);return"object"===typeof n&&n["unref"]&&n["unref"](),n},tt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function et(){return new tt("")}function nt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function rt(t){return t.pieces_.length-t.pieceNum_}function it(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new tt(t.pieces_,e)}function ot(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function st(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function at(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function ut(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new tt(e,0)}function ct(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof tt)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new tt(n,0)}function ht(t){return t.pieceNum_>=t.pieces_.length}function lt(t,e){var n=nt(t),r=nt(e);if(null===n)return e;if(n===r)return lt(it(t),it(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ft(t,e){for(var n=at(t,0),r=at(e,0),i=0;i<n.length&&i<r.length;i++){var o=j(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function pt(t,e){if(rt(t)!==rt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function dt(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(rt(t)>rt(e))return!1;while(n<t.pieces_.length){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var vt=function(){function t(t,e){this.errorPrefix_=e,this.parts_=at(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,f.ug)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=(0,f.ug)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=(0,f.ug)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),yt="5",gt="v",mt="s",bt="r",_t="f",wt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,It="ls",Et="p",Tt="websocket",St="long_polling",Ct=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=m.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&m.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if((0,f.hu)("string"===typeof t,"typeof type must == string"),(0,f.hu)("object"===typeof e,"typeof params must == object"),t===Tt)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==St)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e["ns"]=this.namespace);var r=[];return B(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function kt(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}function Nt(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=c(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):x("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}var At,Pt,xt=function(t,e){var n=Ot(t),r=n.namespace;"firebase.com"===n.domain&&P(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||P("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||O();var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Ct(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new tt(n.pathString)}},Ot=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"===typeof t){var c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(h,l)),h<l&&(i=kt(t.substring(h,l)));var f=Nt(t.substring(Math.min(t.length,l)));c=e.indexOf(":"),c>=0?(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f["ns"])}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},Rt=/[\[\].#$\/\u0000-\u001F\u007F]/,Dt=/[\[\].#$\u0000-\u001F\u007F]/,Lt=10485760,Mt=function(t){return"string"===typeof t&&0!==t.length&&!Rt.test(t)},jt=function(t){return"string"===typeof t&&0!==t.length&&!Dt.test(t)},Ft=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),jt(t)},Ut=function(t){return null===t||"string"===typeof t||"number"===typeof t&&!R(t)||t&&"object"===typeof t&&(0,f.r3)(t,".sv")},Vt=function(t,e,n,r,i){i&&void 0===n||qt((0,f.gK)(t,e,i),n,r)},qt=function(t,e,n){var r=n instanceof tt?new vt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"===typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(R(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"===typeof e&&e.length>Lt/3&&(0,f.ug)(e)>Lt)throw new Error(t+"contains a string greater than "+Lt+" utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"===typeof e){var i=!1,o=!1;if(B(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!Mt(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),qt(t,n,r),r.pop()})),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Bt=function(t,e){var n,r;for(n=0;n<e.length;n++){r=e[n];for(var i=at(r),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Mt(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(ft);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&dt(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},Ht=function(t,e,n,r,i){if(!i||void 0!==n){var o=(0,f.gK)(t,e,i);if(!n||"object"!==typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];B(n,(function(t,e){var n=new tt(t);if(qt(o,e,ct(r,n)),".priority"===ot(n)&&!Ut(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),Bt(o,s)}},Wt=function(t,e,n,r){if(!r||void 0!==n){if(R(n))throw new Error((0,f.gK)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ut(n))throw new Error((0,f.gK)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},zt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,f.gK)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Gt=function(t,e,n,r){if((!r||void 0!==n)&&!Mt(n))throw new Error((0,f.gK)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Kt=function(t,e,n,r){if((!r||void 0!==n)&&!jt(n))throw new Error((0,f.gK)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Qt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Kt(t,e,n,r)},Yt=function(t,e){if(".info"===nt(e))throw new Error(t+" failed = Can't modify data under /.info/")},Xt=function(t,e,n){var r=n.path.toString();if("string"!==typeof n.repoInfo.host||0===n.repoInfo.host.length||!Mt(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!Ft(r))throw new Error((0,f.gK)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Jt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error((0,f.gK)(t,e,r)+"must be a boolean.")},$t=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){(0,f.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,f.Wj)("OnDisconnect.cancel",1,t,!0);var e=new f.BH;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){(0,f.Dv)("OnDisconnect.remove",0,1,arguments.length),Yt("OnDisconnect.remove",this.path_),(0,f.Wj)("OnDisconnect.remove",1,t,!0);var e=new f.BH;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){(0,f.Dv)("OnDisconnect.set",1,2,arguments.length),Yt("OnDisconnect.set",this.path_),Vt("OnDisconnect.set",1,t,this.path_,!1),(0,f.Wj)("OnDisconnect.set",2,e,!0);var n=new f.BH;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){(0,f.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),Yt("OnDisconnect.setWithPriority",this.path_),Vt("OnDisconnect.setWithPriority",1,t,this.path_,!1),Wt("OnDisconnect.setWithPriority",2,e,!1),(0,f.Wj)("OnDisconnect.setWithPriority",3,n,!0);var r=new f.BH;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if((0,f.Dv)("OnDisconnect.update",1,2,arguments.length),Yt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,x("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ht("OnDisconnect.update",1,t,this.path_,!1),(0,f.Wj)("OnDisconnect.update",2,e,!0);var i=new f.BH;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),Zt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,f.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),te="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ee="-",ne="z",re=786,ie=function(){var t=0,e=[];return function(n){var r,i=n===t;t=n;var o=new Array(8);for(r=7;r>=0;r--)o[r]=te.charAt(n%64),n=Math.floor(n/64);(0,f.hu)(0===n,"Cannot push at time == 0");var s=o.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)s+=te.charAt(e[r]);return(0,f.hu)(20===s.length,"nextPushId: Length should be 20."),s}}(),oe=function(t){if(t===""+Y)return ee;var e=X(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<re)return n.push(ee),n.join("");var i=n.length-1;while(i>=0&&n[i]===ne)i--;if(-1===i)return M;var o=n[i],s=te.charAt(te.indexOf(o)+1);return n[i]=s,n.slice(0,i+1).join("")},se=function(t){if(t===""+Q)return L;var e=X(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return n[n.length-1]===ee?1===n.length?""+Y:(delete n[n.length-1],n.join("")):(n[n.length-1]=te.charAt(te.indexOf(n[n.length-1])-1),n.join("")+ne.repeat(re-n.length))},ae=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),ue=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new ae(L,t),r=new ae(L,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return ae.MIN},t}(),ce=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return At},set:function(t){At=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return j(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,f.g5)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return ae.MIN},e.prototype.maxPost=function(){return new ae(M,At)},e.prototype.makePost=function(t,e){return(0,f.hu)("string"===typeof t,"KeyIndex indexValue must always be a string."),new ae(t,At)},e.prototype.toString=function(){return".key"},e}(ue),he=new ce;function le(t){Pt=t}var fe,pe,de,ve=function(t){return"number"===typeof t?"number:"+H(t):"string:"+t},ye=function(t){if(t.isLeafNode()){var e=t.val();(0,f.hu)("string"===typeof e||"number"===typeof e||"object"===typeof e&&(0,f.r3)(e,".sv"),"Priority must be a string or number.")}else(0,f.hu)(t===Pt||t.isEmpty(),"priority of unexpected type.");(0,f.hu)(t===Pt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ge=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,f.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ye(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return fe},set:function(t){fe=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return ht(e)?this:".priority"===nt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=nt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,f.hu)(".priority"!==r||1===rt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(it(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+ve(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?H(this.value_):this.value_,this.lazyHash_=I(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,f.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return(0,f.hu)(i>=0,"Unknown leaf type: "+n),(0,f.hu)(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();function me(t){pe=t}function be(t){de=t}var _e,we,Ie=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?j(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return ae.MIN},e.prototype.maxPost=function(){return new ae(M,new ge("[PRIORITY-POST]",de))},e.prototype.makePost=function(t,e){var n=pe(t);return new ae(e,new ge("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(ue),Ee=new Ie,Te=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];var o=1;while(!t.isEmpty())if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_){e=e.left;while(!e.isEmpty())this.nodeStack_.push(e),e=e.right}else{e=e.right;while(!e.isEmpty())this.nodeStack_.push(e),e=e.left}return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Se=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:ke.EMPTY_NODE,this.right=null!=o?o:ke.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return ke.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()},t.prototype.remove=function(t,e){var n,r;if(n=this,e(t,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return ke.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ce=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Se(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),ke=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Se.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Se.BLACK,null,null))},t.prototype.get=function(t){var e,n=this.root_;while(!n.isEmpty()){if(e=this.comparator_(t,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){var e,n=this.root_,r=null;while(!n.isEmpty()){if(e=this.comparator_(t,n.key),0===e){if(n.left.isEmpty())return r?r.key:null;n=n.left;while(!n.right.isEmpty())n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Te(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Te(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Te(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Te(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ce,t}(),Ne=Math.log(2),Ae=function(){function t(t){var e=function(t){return parseInt(Math.log(t)/Ne,10)},n=function(t){return parseInt(Array(t+1).join("1"),2)};this.count=e(t+1),this.current_=this.count-1;var r=n(this.count);this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Pe=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Se(s,o.node,Se.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),h=i(u+1,r);return o=t[u],s=n?n(o):o,new Se(s,o.node,Se.BLACK,c,h)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),h=t[o],l=n?n(h):h;u(new Se(l,h.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var h=e.nextBitIsOne(),l=Math.pow(2,e.count-(c+1));h?a(l,Se.BLACK):(a(l,Se.BLACK),a(l,Se.RED))}return o},s=new Ae(t.length),a=o(s);return new ke(r||e,a)},xe={},Oe=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,f.hu)(xe&&Ee,"ChildrenNode.ts has not been loaded"),_e=_e||new t({".priority":xe},{".priority":Ee}),_e},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,f.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof ke?e:null},t.prototype.hasIndex=function(t){return(0,f.r3)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,f.hu)(e!==he,"KeyIndex always exists and isn't meant to be added to the IndexMap.");var r,i=[],o=!1,a=n.getIterator(ae.Wrap),u=a.getNext();while(u)o=o||e.isDefinedOn(u.node),i.push(u),u=a.getNext();r=o?Pe(i,e.getCompare()):xe;var c=e.toString(),h=s({},this.indexSet_);h[c]=e;var l=s({},this.indexes_);return l[c]=r,new t(l,h)},t.prototype.addToIndexes=function(e,n){var r=this,i=(0,f.UI)(this.indexes_,(function(t,i){var o=(0,f.DV)(r.indexSet_,i);if((0,f.hu)(o,"Missing index implementation for "+i),t===xe){if(o.isDefinedOn(e.node)){var s=[],a=n.getIterator(ae.Wrap),u=a.getNext();while(u)u.name!==e.name&&s.push(u),u=a.getNext();return s.push(e),Pe(s,o.getCompare())}return xe}var c=n.get(e.name),h=t;return c&&(h=h.remove(new ae(e.name,c))),h.insert(e,e.node)}));return new t(i,this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){var r=(0,f.UI)(this.indexes_,(function(t){if(t===xe)return t;var r=n.get(e.name);return r?t.remove(new ae(e.name,r)):t}));return new t(r,this.indexSet_)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Re(t,e){return j(t.name,e.name)}function De(t,e){return j(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ye(this.priorityNode_),this.children_.isEmpty()&&(0,f.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return we||(we=new t(new ke(De),null,Oe.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||we},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?we:e},t.prototype.getChild=function(t){var e=nt(t);return null===e?this:this.getImmediateChild(e).getChild(it(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,f.hu)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new ae(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?we:this.priorityNode_;return new t(i,s,o)},t.prototype.updateChild=function(t,e){var n=nt(t);if(null===n)return e;(0,f.hu)(".priority"!==nt(t)||1===rt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(it(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ee,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+ve(this.getPriority().val())+":"),this.forEachChild(Ee,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":I(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new ae(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new ae(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new ae(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));var r=this.children_.getIteratorFrom(t.name,ae.Wrap),i=r.peek();while(null!=i&&e.compare(i,t)<0)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));var r=this.children_.getReverseIteratorFrom(t.name,ae.Wrap),i=r.peek();while(null!=i&&e.compare(i,t)>0)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===je?-1:0},t.prototype.withIndex=function(e){if(e===he||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===he||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){var n=this.getIterator(Ee),r=e.getIterator(Ee),i=n.getNext(),o=r.getNext();while(i&&o){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===he?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Me=function(t){function e(){return t.call(this,new ke(De),Le.EMPTY_NODE,Oe.Default)||this}return o(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Le.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Le),je=new Me;Object.defineProperties(ae,{MIN:{value:new ae(L,Le.EMPTY_NODE)},MAX:{value:new ae(M,je)}}),ce.__EMPTY_NODE=Le.EMPTY_NODE,ge.__childrenNodeConstructor=Le,le(je),be(je);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Fe=!0;function Ue(t,e){if(void 0===e&&(e=null),null===t)return Le.EMPTY_NODE;if("object"===typeof t&&".priority"in t&&(e=t[".priority"]),(0,f.hu)(null===e||"string"===typeof e||"number"===typeof e||"object"===typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"===typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!==typeof t||".sv"in t){var n=t;return new ge(n,Ue(e))}if(t instanceof Array||!Fe){var r=Le.EMPTY_NODE;return B(t,(function(e,n){if((0,f.r3)(t,e)&&"."!==e.substring(0,1)){var i=Ue(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(e,i))}})),r.updatePriority(Ue(e))}var i=[],o=!1,s=t;if(B(s,(function(t,e){if("."!==t.substring(0,1)){var n=Ue(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),i.push(new ae(t,n)))}})),0===i.length)return Le.EMPTY_NODE;var a=Pe(i,Re,(function(t){return t.name}),De);if(o){var u=Pe(i,Ee.getCompare());return new Le(a,Ue(e),new Oe({".priority":u},{".priority":Ee}))}return new Le(a,Ue(e),Oe.Default)}me(Ue);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ve=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?j(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return ae.MIN},e.prototype.maxPost=function(){return ae.MAX},e.prototype.makePost=function(t,e){var n=Ue(t);return new ae(e,n)},e.prototype.toString=function(){return".value"},e}(ue),qe=new Ve,Be=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,f.hu)(!ht(e)&&".priority"!==nt(e),"Can't create PathIndex with empty path or .priority key"),n}return o(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?j(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Ue(t),r=Le.EMPTY_NODE.updateChild(this.indexPath_,n);return new ae(e,r)},e.prototype.maxPost=function(){var t=Le.EMPTY_NODE.updateChild(this.indexPath_,je);return new ae(M,t)},e.prototype.toString=function(){return at(this.indexPath_,0).join("/")},e}(ue),He=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return(0,f.Dv)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return(0,f.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return(0,f.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return(0,f.Dv)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){(0,f.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Kt("DataSnapshot.child",1,e,!1);var n=new tt(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Ee)},t.prototype.hasChild=function(t){(0,f.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Kt("DataSnapshot.hasChild",1,t,!1);var e=new tt(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return(0,f.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if((0,f.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,f.Wj)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Ee))}))},t.prototype.hasChildren=function(){return(0,f.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,f.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return(0,f.Dv)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),We=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,f.Pz)(this.snapshot.exportVal())},t}(),ze=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ge=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new We("value",this,new He(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){(0,f.hu)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ze(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Ke=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,(0,f.r3)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ze(this,t,e):null},t.prototype.createEvent=function(t,e){(0,f.hu)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new We(t.type,this,new He(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){(0,f.hu)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length,s=i.length;if(o===s){if(1===o){var a=r[0],u=i[0];return u===a&&(!e.callbacks_[a]||!this.callbacks_[u]||e.callbacks_[a]===this.callbacks_[u])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Qe(t){return{type:"value",snapshotNode:t}}function Ye(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Xe(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Je(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function $e(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,tn=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){(0,f.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Xe(e,s)):(0,f.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Ye(e,n)):o.trackChildChange(Je(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Ee,(function(t,r){e.hasChild(t)||n.trackChildChange(Xe(t,r))})),e.isLeafNode()||e.forEachChild(Ee,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Je(e,r,i))}else n.trackChildChange(Ye(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Le.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),en=function(){function t(e){this.indexedFilter_=new tn(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new ae(e,n))||(n=Le.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Le.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Le.EMPTY_NODE);var i=this;return e.forEachChild(Ee,(function(t,e){i.matches(new ae(t,e))||(r=r.updateImmediateChild(t,Le.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),nn=function(){function t(t){this.rangedFilter_=new en(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new ae(e,n))||(n=Le.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Le.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Le.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);var o=0;while(i.hasNext()&&o<this.limit_){var s=i.getNext(),a=void 0;if(a=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0,!a)break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=e.withIndex(this.index_),r=r.updatePriority(Le.EMPTY_NODE);var u=void 0,c=void 0,h=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();h=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();o=0;var f=!1;while(i.hasNext()){s=i.getNext();!f&&h(u,s)<=0&&(f=!0);a=f&&o<this.limit_&&h(s,c)<=0;a?o++:r=r.updateImmediateChild(s.name,Le.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;(0,f.hu)(a.numChildren()===this.limit_,"");var u=new ae(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){var l=a.getImmediateChild(e),p=r.getChildAfterChild(this.index_,c,this.reverse_);while(null!=p&&(p.name===e||a.hasChild(p.name)))p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:o(p,u),v=h&&!n.isEmpty()&&d>=0;if(v)return null!=i&&i.trackChildChange(Je(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Xe(e,l));var y=a.updateImmediateChild(e,Le.EMPTY_NODE),g=null!=p&&this.rangedFilter_.matches(p);return g?(null!=i&&i.trackChildChange(Ye(p.name,p.node)),y.updateImmediateChild(p.name,p.node)):y}return n.isEmpty()?t:h&&o(c,u)>=0?(null!=i&&(i.trackChildChange(Xe(c.name,c.node)),i.trackChildChange(Ye(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,Le.EMPTY_NODE)):t},t}(),rn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ee}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return(0,f.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,f.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:L},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,f.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,f.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:M},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,f.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ee},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t){return t.loadsAllData()?new tn(t.getIndex()):t.hasLimit()?new nn(t):new en(t)}function sn(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function an(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function un(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function cn(t,e,n){var r;if(t.index_===he)"string"===typeof e&&(e=oe(e)),r=un(t,e,n);else{var i=void 0;i=null==n?M:oe(n),r=un(t,e,i)}return r.startAfterSet_=!0,r}function hn(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function ln(t,e,n){var r,i;return t.index_===he?("string"===typeof e&&(e=se(e)),i=hn(t,e,n)):(r=null==n?L:se(n),i=hn(t,e,r)),i.endBeforeSet_=!0,i}function fn(t,e){var n=t.copy();return n.index_=e,n}function pn(t){var e,n={};return t.isDefault()||(t.index_===Ee?e="$priority":t.index_===qe?e="$value":t.index_===he?e="$key":((0,f.hu)(t.index_ instanceof Be,"Unrecognized index type!"),e=t.index_.toString()),n["orderBy"]=(0,f.Pz)(e),t.startSet_&&(n["startAt"]=(0,f.Pz)(t.indexStartValue_),t.startNameSet_&&(n["startAt"]+=","+(0,f.Pz)(t.indexStartName_))),t.endSet_&&(n["endAt"]=(0,f.Pz)(t.indexEndValue_),t.endNameSet_&&(n["endAt"]+=","+(0,f.Pz)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n["limitToFirst"]=t.limit_:n["limitToLast"]=t.limit_)),n}function dn(t){var e={};if(t.startSet_&&(e["sp"]=t.indexStartValue_,t.startNameSet_&&(e["sn"]=t.indexStartName_)),t.endSet_&&(e["ep"]=t.indexEndValue_,t.endNameSet_&&(e["en"]=t.indexEndName_)),t.limitSet_){e["l"]=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e["vf"]=n}return t.index_!==Ee&&(e["i"]=t.index_.toString()),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return(0,f.hu)(Ze,"Reference.ts has not been loaded"),Ze},set:function(t){Ze=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===he){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){var o=t.getIndexStartName();if(o!==L)throw new Error(r);if("string"!==typeof e)throw new Error(i)}if(t.hasEnd()){var s=t.getIndexEndName();if(s!==M)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(t.getIndex()===Ee){if(null!=e&&!Ut(e)||null!=n&&!Ut(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,f.hu)(t.getIndex()instanceof Be||t.getIndex()===qe,"unknown index type."),null!=e&&"object"===typeof e||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return(0,f.Dv)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){(0,f.Dv)("Query.on",2,4,arguments.length),zt("Query.on",1,e,!1),(0,f.Wj)("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[e]=n,this.onChildEvent(s,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Ge(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Ke(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){(0,f.Dv)("Query.off",0,3,arguments.length),zt("Query.off",1,t,!0),(0,f.Wj)("Query.off",2,e,!0),(0,f.lb)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new Ge(o,null,n||null)}else t&&(e&&(i={},i[t]=e),r=new Ke(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var o=this;(0,f.Dv)("Query.once",1,4,arguments.length),zt("Query.once",1,e,!1),(0,f.Wj)("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),a=!0,u=new f.BH;u.promise.catch((function(){}));var c=function(t){a&&(a=!1,o.off(e,c),n&&n.bind(s.context)(t),u.resolve(t))};return this.on(e,c,(function(t){o.off(e,c),s.cancel&&s.cancel.bind(s.context)(t),u.reject(t)})),u.promise},t.prototype.limitToFirst=function(e){if((0,f.Dv)("Query.limitToFirst",1,1,arguments.length),"number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,sn(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if((0,f.Dv)("Query.limitToLast",1,1,arguments.length),"number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,an(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if((0,f.Dv)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Kt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new tt(e);if(ht(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Be(n),i=fn(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){(0,f.Dv)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=fn(this.queryParams_,he);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){(0,f.Dv)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=fn(this.queryParams_,Ee);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){(0,f.Dv)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=fn(this.queryParams_,qe);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),(0,f.Dv)("Query.startAt",0,2,arguments.length),Vt("Query.startAt",1,e,this.path,!0),Gt("Query.startAt",2,n,!0);var r=un(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),(0,f.Dv)("Query.startAfter",0,2,arguments.length),Vt("Query.startAfter",1,e,this.path,!1),Gt("Query.startAfter",2,n,!0);var r=cn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),(0,f.Dv)("Query.endAt",0,2,arguments.length),Vt("Query.endAt",1,e,this.path,!0),Gt("Query.endAt",2,n,!0);var r=hn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),(0,f.Dv)("Query.endBefore",0,2,arguments.length),Vt("Query.endBefore",1,e,this.path,!1),Gt("Query.endBefore",2,n,!0);var r=ln(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if((0,f.Dv)("Query.equalTo",1,2,arguments.length),Vt("Query.equalTo",1,t,this.path,!1),Gt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return(0,f.Dv)("Query.toString",0,0,arguments.length),this.repo.toString()+st(this.path)},t.prototype.toJSON=function(){return(0,f.Dv)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return dn(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=V(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if((0,f.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=pt(this.path,e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,(0,f.Wj)(t,3,r.cancel,!0),r.context=n,(0,f.lb)(t,4,r.context,!0);else if(e)if("object"===typeof e&&null!==e)r.context=e;else{if("function"!==typeof e)throw new Error((0,f.gK)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),yn=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){var n=this.node_.getImmediateChild(e);return new t(n)},t.prototype.node=function(){return this.node_},t}(),gn=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=ct(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),mn=function(t){return t=t||{},t["timestamp"]=t["timestamp"]||(new Date).getTime(),t},bn=function(t,e,n){return t&&"object"===typeof t?((0,f.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"===typeof t[".sv"]?_n(t[".sv"],e,n):"object"===typeof t[".sv"]?wn(t[".sv"],e):void(0,f.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},_n=function(t,e,n){switch(t){case"timestamp":return n["timestamp"];default:(0,f.hu)(!1,"Unexpected server value: "+t)}},wn=function(t,e,n){t.hasOwnProperty("increment")||(0,f.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t["increment"];"number"!==typeof r&&(0,f.hu)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,f.hu)(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i,s=o.getValue();return"number"!==typeof s?r:s+r},In=function(t,e,n,r){return Tn(e,new gn(n,t),r)},En=function(t,e,n){return Tn(t,new yn(e),n)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(t,e,n){var r,i=t.getPriority().val(),o=bn(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=bn(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new ge(a,Ue(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new ge(o))),u.forEachChild(Ee,(function(t,i){var o=Tn(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sn,Cn=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!ht(t)&&this.children.size>0){var e=nt(t);if(t=it(t),this.children.has(e)){var n=this.children.get(e);return n.find(t)}return null}return null},t.prototype.remember=function(e,n){if(ht(e))this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=nt(e);this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=it(e),i.remember(e,n)}},t.prototype.forget=function(t){if(ht(t))return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Ee,(function(t,e){n.remember(new tt(t),e)})),this.forget(t)}if(this.children.size>0){var r=nt(t);if(t=it(t),this.children.has(r)){var i=this.children.get(r).forget(t);i&&this.children.delete(r)}return 0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new tt(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Nn(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function An(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["OVERWRITE"]=0]="OVERWRITE",t[t["MERGE"]=1]="MERGE",t[t["ACK_USER_WRITE"]=2]="ACK_USER_WRITE",t[t["LISTEN_COMPLETE"]=3]="LISTEN_COMPLETE"})(Sn||(Sn={}));var Pn,xn=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Sn.ACK_USER_WRITE,this.source=kn()}return t.prototype.operationForChild=function(e){if(ht(this.path)){if(null!=this.affectedTree.value)return(0,f.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new tt(e));return new t(et(),n,this.revert)}return(0,f.hu)(nt(this.path)===e,"operationForChild called for unrelated child."),new t(it(this.path),this.affectedTree,this.revert)},t}(),On=function(){return Pn||(Pn=new ke(F)),Pn},Rn=function(){function t(t,e){void 0===e&&(e=On()),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return B(e,(function(t,e){n=n.set(new tt(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:et(),value:this.value};if(ht(t))return null;var n=nt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(it(t),e);if(null!=i){var o=ct(new tt(n),i.path);return{path:o,value:i.value}}return null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(ht(e))return this;var n=nt(e),r=this.children.get(n);return null!==r?r.subtree(it(e)):new t(null)},t.prototype.set=function(e,n){if(ht(e))return new t(n,this.children);var r=nt(e),i=this.children.get(r)||new t(null),o=i.set(it(e),n),s=this.children.insert(r,o);return new t(this.value,s)},t.prototype.remove=function(e){if(ht(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=nt(e),r=this.children.get(n);if(r){var i=r.remove(it(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(ht(t))return this.value;var e=nt(t),n=this.children.get(e);return n?n.get(it(t)):null},t.prototype.setTree=function(e,n){if(ht(e))return n;var r=nt(e),i=this.children.get(r)||new t(null),o=i.setTree(it(e),n),s=void 0;return s=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new t(this.value,s)},t.prototype.fold=function(t){return this.fold_(et(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(ct(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,et(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(ht(t))return null;var i=nt(t),o=this.children.get(i);return o?o.findOnPath_(it(t),ct(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,et(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(ht(e))return this;this.value&&r(n,this.value);var i=nt(e),o=this.children.get(i);return o?o.foreachOnPath_(it(e),ct(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(et(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(ct(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Dn=function(){function t(t,e){this.source=t,this.path=e,this.type=Sn.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return ht(this.path)?new t(this.source,et()):new t(this.source,it(this.path))},t}(),Ln=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Sn.OVERWRITE}return t.prototype.operationForChild=function(e){return ht(this.path)?new t(this.source,et(),this.snap.getImmediateChild(e)):new t(this.source,it(this.path),this.snap)},t}(),Mn=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Sn.MERGE}return t.prototype.operationForChild=function(e){if(ht(this.path)){var n=this.children.subtree(new tt(e));return n.isEmpty()?null:n.value?new Ln(this.source,et(),n.value):new t(this.source,et(),n)}return(0,f.hu)(nt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,it(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),jn=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(ht(t))return this.isFullyInitialized()&&!this.filtered_;var e=nt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Fn=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new jn(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new jn(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t}(),Un=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,f.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,f.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Je(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Xe(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Ye(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,f.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Je(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Vn=function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}(),qn=new Vn,Bn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new jn(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Hn=function(){function t(t,e){this.viewCache=t,this.changes=e}return t}(),Wn=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){(0,f.hu)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),(0,f.hu)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,s,a=new Un;if(n.type===Sn.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,a):((0,f.hu)(u.source.fromServer,"Unknown source."),s=u.source.tagged||e.getServerCache().isFiltered()&&!ht(u.path),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,s,a))}else if(n.type===Sn.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,a):((0,f.hu)(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,s,a))}else if(n.type===Sn.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(e,h.path,r,i,a):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,a)}else{if(n.type!==Sn.LISTEN_COMPLETE)throw(0,f.g5)("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,a)}var l=a.getChanges();return t.maybeAddValueEvent_(e,o,l),new Hn(o,l)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Qe(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,a=void 0;if(ht(e))if((0,f.hu)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof Le?u:Le.EMPTY_NODE,h=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var p=nt(e);if(".priority"===p){(0,f.hu)(1===rt(e),"Can't have a priority with additional path components");var d=o.getNode();a=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,d,a);s=null!=v?this.filter_.updatePriority(d,v):o.getNode()}else{var y=it(e),g=void 0;if(o.isCompleteForChild(p)){a=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),a);g=null!=m?o.getNode().getImmediateChild(p).updateChild(y,m):o.getNode().getImmediateChild(p)}else g=n.calcCompleteChild(p,t.getServerCache());s=null!=g?this.filter_.updateChild(o.getNode(),p,g,y,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||ht(e),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(ht(e))a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),h,null)}else{var l=nt(e);if(!u.isCompleteForPath(e)&&rt(e)>1)return t;var f=it(e),p=u.getNode().getImmediateChild(l),d=p.updateChild(f,n);a=".priority"===l?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),l,d,f,qn,null)}var v=t.updateServerSnap(a,u.isFullyInitialized()||ht(e),c.filtersNodes()),y=new Bn(r,v,i);return this.generateEventCacheAfterServerEvent_(v,e,r,y,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Bn(r,t,i);if(ht(e))a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var h=nt(e);if(".priority"===h)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var l=it(e),f=u.getNode().getImmediateChild(h),p=void 0;if(ht(l))p=n;else{var d=c.getCompleteChild(h);p=null!=d?".priority"===ot(l)&&d.getChild(ut(l)).isEmpty()?d:d.updateChild(l,n):Le.EMPTY_NODE}if(f.equals(p))s=t;else{var v=this.filter_.updateChild(u.getNode(),h,p,l,c,o);s=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var h=ct(n,r);t.cacheHasChild_(e,nt(h))&&(u=a.applyUserOverwrite_(u,h,c,i,o,s))})),r.foreach((function(r,c){var h=ct(n,r);t.cacheHasChild_(e,nt(h))||(u=a.applyUserOverwrite_(u,h,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=ht(e)?n:new Rn(null).setTree(e,n);var h=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(h.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),l=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new tt(e),l,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!h.hasChild(e)&&!u){var l=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(l,n);c=a.applyServerOverwrite_(c,new tt(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(ht(e)&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(ht(e)){var u=new Rn(null);return a.getNode().forEachChild(he,(function(t,e){u=u.set(new tt(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=new Rn(null);return n.foreach((function(t,n){var r=ct(e,t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||ht(e),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,qn,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new Bn(n,t,r),a=t.getEventCache().getNode(),u=void 0;if(ht(e)||".priority"===nt(e)){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();(0,f.hu)(h instanceof Le,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(a,c,i)}else{var l=nt(e),p=n.calcCompleteChild(l,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(l)&&(p=a.getImmediateChild(l)),u=null!=p?this.filter_.updateChild(a,l,p,it(e),s,i):t.getEventCache().getNode().hasChild(l)?this.filter_.updateChild(a,l,Le.EMPTY_NODE,it(e),s,i):a,u.isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap()),o.isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i)))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(et()),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),zn=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t,e,n,r){var i=[],o=[];return e.forEach((function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push($e(e.childName,e.snapshotNode))})),Kn(t,i,"child_removed",e,r,n),Kn(t,i,"child_added",e,r,n),Kn(t,i,"child_moved",o,r,n),Kn(t,i,"child_changed",e,r,n),Kn(t,i,"value",e,r,n),i}function Kn(t,e,n,r,i,o){var s=r.filter((function(t){return t.type===n}));s.sort((function(e,n){return Yn(t,e,n)})),s.forEach((function(n){var r=Qn(t,n,o);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function Qn(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Yn(t,e,n){if(null==e.childName||null==n.childName)throw(0,f.g5)("Should only compare child_ events.");var r=new ae(e.childName,e.snapshotNode),i=new ae(n.childName,n.snapshotNode);return t.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xn,Jn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new tn(n.getIndex()),i=on(n);this.processor_=new Wn(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Le.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Le.EMPTY_NODE,s.getNode(),null),c=new jn(a,o.isFullyInitialized(),r.filtersNodes()),h=new jn(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Fn(h,c),this.eventGenerator_=new zn(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!ht(t)&&!e.getImmediateChild(nt(t)).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){(0,f.hu)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===Sn.MERGE&&null!==t.source.queryId&&((0,f.hu)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),(0,f.hu)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),(0,f.hu)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];if(!e.getNode().isLeafNode()){var r=e.getNode();r.forEachChild(Ee,(function(t,e){n.push(Ye(t,e))}))}return e.isFullyInitialized()&&n.push(Qe(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return Gn(this.eventGenerator_,t,e,r)},t}(),$n=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return(0,f.hu)(Xn,"Reference.ts has not been loaded"),Xn},set:function(t){(0,f.hu)(!Xn,"__referenceConstructor has already been defined"),Xn=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return(0,f.hu)(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=c(this.views.values()),h=u.next();!h.done;h=u.next()){s=h.value;a=a.concat(s.applyOperation(t,e,n))}}catch(l){r={error:l}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},t.prototype.getView=function(t,e,n,r){var i=t.queryIdentifier(),o=this.views.get(i);if(!o){var s=e.calcCompleteEventCache(r?n:null),a=!1;s?a=!0:n instanceof Le?(s=e.calcCompleteEventChildren(n),a=!1):(s=Le.EMPTY_NODE,a=!1);var u=new Fn(new jn(s,a,!1),new jn(n,r,!1));return new Jn(t,u)}return o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=this.getView(t,n,r,i);return this.views.has(t.queryIdentifier())||this.views.set(t.queryIdentifier(),o),o.addEventRegistration(e),o.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,s=e.queryIdentifier(),a=[],u=[],l=this.hasCompleteView();if("default"===s)try{for(var f=c(this.views.entries()),p=f.next();!p.done;p=f.next()){var d=h(p.value,2),v=d[0],y=d[1];u=u.concat(y.removeEventRegistration(n,r)),y.isEmpty()&&(this.views.delete(v),y.getQuery().getQueryParams().loadsAllData()||a.push(y.getQuery()))}}catch(g){i={error:g}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}else{y=this.views.get(s);y&&(u=u.concat(y.removeEventRegistration(n,r)),y.isEmpty()&&(this.views.delete(s),y.getQuery().getQueryParams().loadsAllData()||a.push(y.getQuery())))}return l&&!this.hasCompleteView()&&a.push(new t.__referenceConstructor(e.repo,e.path)),{removed:a,events:u}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=c(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=c(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(t)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){var e=t.getQueryParams();if(e.loadsAllData())return this.getCompleteView();var n=t.queryIdentifier();return this.views.get(n)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=c(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Zn=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Rn(null))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t,e,n){if(ht(e))return new Zn(new Rn(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=lt(i,e);return o=o.updateChild(s,n),new Zn(t.writeTree_.set(i,o))}var a=new Rn(n),u=t.writeTree_.setTree(e,a);return new Zn(u)}function er(t,e,n){var r=t;return B(n,(function(t,n){r=tr(r,ct(e,t),n)})),r}function nr(t,e){if(ht(e))return Zn.empty();var n=t.writeTree_.setTree(e,new Rn(null));return new Zn(n)}function rr(t,e){return null!=ir(t,e)}function ir(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(lt(n.path,e)):null}function or(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ee,(function(t,n){e.push(new ae(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new ae(t,n.value))})),e}function sr(t,e){if(ht(e))return t;var n=ir(t,e);return new Zn(null!=n?new Rn(n):t.writeTree_.subtree(e))}function ar(t){return t.writeTree_.isEmpty()}function ur(t,e){return cr(et(),t.writeTree_,e)}function cr(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?((0,f.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=cr(ct(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(ct(t,".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hr=function(){function t(){this.visibleWrites_=Zn.empty(),this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new lr(t,this)},t.prototype.addOverwrite=function(t,e,n,r){(0,f.hu)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=tr(this.visibleWrites_,t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){(0,f.hu)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=er(this.visibleWrites_,t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));(0,f.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);var i=r.visible,o=!1,s=this.allWrites_.length-1;while(i&&s>=0){var a=this.allWrites_[s];a.visible&&(s>=n&&this.recordContainsPath_(a,r.path)?i=!1:dt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return this.resetTree_(),!0;if(r.snap)this.visibleWrites_=nr(this.visibleWrites_,r.path);else{var u=r.children;B(u,(function(t){e.visibleWrites_=nr(e.visibleWrites_,ct(r.path,t))}))}return!0}return!1},t.prototype.getCompleteWriteData=function(t){return ir(this.visibleWrites_,t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=sr(this.visibleWrites_,e);if(!i&&ar(o))return n;if(i||null!=n||rr(o,et())){var s=function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(dt(t.path,e)||dt(e,t.path))},a=t.layerTree_(this.allWrites_,s,e);h=n||Le.EMPTY_NODE;return ur(a,h)}return null}var u=ir(this.visibleWrites_,e);if(null!=u)return u;var c=sr(this.visibleWrites_,e);if(ar(c))return n;if(null!=n||rr(c,et())){var h=n||Le.EMPTY_NODE;return ur(c,h)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Le.EMPTY_NODE,r=ir(this.visibleWrites_,t);if(r)return r.isLeafNode()||r.forEachChild(Ee,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=sr(this.visibleWrites_,t);return e.forEachChild(Ee,(function(t,e){var r=ur(sr(i,new tt(t)),e);n=n.updateImmediateChild(t,r)})),or(i).forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}var o=sr(this.visibleWrites_,t);return or(o).forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){(0,f.hu)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=ct(t,e);if(rr(this.visibleWrites_,i))return null;var o=sr(this.visibleWrites_,i);return ar(o)?r.getChild(e):ur(o,r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=ct(t,e),i=ir(this.visibleWrites_,r);if(null!=i)return i;if(n.isCompleteForChild(e)){var o=sr(this.visibleWrites_,r);return ur(o,n.getNode().getImmediateChild(e))}return null},t.prototype.shadowingWrite=function(t){return ir(this.visibleWrites_,t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=sr(this.visibleWrites_,t),u=ir(a,et());if(null!=u)s=u;else{if(null==e)return[];s=ur(a,e)}if(s=s.withIndex(o),s.isEmpty()||s.isLeafNode())return[];var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();while(f&&c.length<r)0!==h(f,n)&&c.push(f),f=l.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return dt(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&dt(ct(t.path,n),e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,et()),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Zn.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)dt(n,s)?(a=lt(n,s),r=tr(r,a,o.snap)):dt(s,n)&&(a=lt(s,n),r=tr(r,et(),o.snap.getChild(a)));else{if(!o.children)throw(0,f.g5)("WriteRecord should have .snap or .children");if(dt(n,s))a=lt(n,s),r=er(r,a,o.children);else if(dt(s,n))if(a=lt(s,n),ht(a))r=er(r,et(),o.children);else{var u=(0,f.DV)(o.children,nt(a));if(u){var c=u.getChild(it(a));r=tr(r,et(),c)}}}}}return r},t}(),lr=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(ct(this.treePath_,t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(ct(this.treePath_,e),this.writeTree_)},t}(),fr=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=new Rn(null),this.pendingWriteTree_=new hr,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Ln(kn(),t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Rn.fromObject(e);return this.applyOperationToSyncPoints_(new Mn(kn(),t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t),r=this.pendingWriteTree_.removeWrite(t);if(r){var i=new Rn(null);return null!=n.snap?i=i.set(et(),!0):B(n.children,(function(t){i=i.set(new tt(t),!0)})),this.applyOperationToSyncPoints_(new xn(n.path,i,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Ln(Nn(),t,e))},t.prototype.applyServerMerge=function(t,e){var n=Rn.fromObject(e);return this.applyOperationToSyncPoints_(new Mn(Nn(),t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Dn(Nn(),t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=lt(s,e),c=new Ln(An(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=lt(s,e),c=Rn.fromObject(n),h=new Mn(An(a),u,c);return this.applyTaggedOperation_(s,h)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=lt(o,e),u=new Dn(An(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=lt(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var s,a=this.syncPointTree_.get(r);if(a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(et())):(a=new $n,this.syncPointTree_=this.syncPointTree_.set(r,a)),null!=i)s=!0;else{s=!1,i=Le.EMPTY_NODE;var u=this.syncPointTree_.subtree(r);u.foreachChild((function(t,e){var n=e.getCompleteServerCache(et());n&&(i=i.updateImmediateChild(t,n))}))}var c=a.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var h=t.makeQueryKey_(e);(0,f.hu)(!this.queryToTagMap.has(h),"View does not exist, but we have a tag");var l=t.getNextQueryTag_();this.queryToTagMap.set(h,l),this.tagToQueryMap.set(l,h)}var p=this.pendingWriteTree_.childWrites(r),d=a.addEventRegistration(e,n,p,i,s);if(!c&&!o){var v=a.viewForQuery(e);d=d.concat(this.setupListener_(e,v))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var h=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),l=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(h&&!l){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var v=p[d],y=v.getQuery(),g=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),g.hashFn,g.onComplete)}}if(!l&&c.length>0&&!r)if(h){var m=null;this.listenProvider_.stopListening(t.queryForListening_(e),m)}else c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}));this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=!0,r=this.pendingWriteTree_,i=this.syncPointTree_.findOnPath(t,(function(e,n){var r=lt(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return r.calcCompleteEventCache(t,i,e,n)},t.prototype.getServerValue=function(t){var e=t.path,n=null;this.syncPointTree_.foreachOnPath(e,(function(t,r){var i=lt(t,e);n=n||r.getCompleteServerCache(i)}));var r=this.syncPointTree_.get(e);r?n=n||r.getCompleteServerCache(et()):(r=new $n,this.syncPointTree_=this.syncPointTree_.set(e,r));var i=null!=n,o=i?new jn(n,!0,!1):null,s=this.pendingWriteTree_.childWrites(t.path),a=r.getView(t,s,i?o.getNode():Le.EMPTY_NODE,i);return a.getCompleteNode()},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView()){var r=e.getCompleteView();return[r]}var i=[];return e&&(i=e.getQueryViews()),B(n,(function(t,e){i=i.concat(e)})),i}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),s=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),a=this.syncPointTree_.subtree(r);if(i)(0,f.hu)(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=a.fold((function(t,e,n){if(!ht(t)&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),B(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var h=u[c];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return s},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){var e=t.getServerCache()||Le.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=G(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return(0,f.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new tt(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);(0,f.hu)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(et()))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(ht(t.path))return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(et());null==n&&null!=i&&(n=i.getCompleteServerCache(et()));var o=[],s=nt(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,h=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(et());null==n&&null!=o&&(n=o.getCompleteServerCache(et()));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),pr=function(){function t(){this.rootNode_=Le.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),dr=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,f.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,f.p$)(this.counters_)},t}(),vr=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new dr),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),yr=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=s({},t);return this.last_&&B(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),gr=1e4,mr=3e4,br=3e5,_r=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new yr(t);var n=gr+(mr-gr)*Math.random();Z(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;B(e,(function(e,i){i>0&&(0,f.r3)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),Z(this.reportStats_.bind(this),Math.floor(2*Math.random()*br))},t}(),wr=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t}();function Ir(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||pt(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Er(t,e,n){Ir(t,n),Sr(t,(function(t){return pt(t,e)}))}function Tr(t,e,n){Ir(t,n),Sr(t,(function(t){return dt(t,e)||dt(e,t)}))}function Sr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];if(i){var o=i.path;e(o)?(Cr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Cr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();T&&k("event: "+n.toString()),J(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kr=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,f.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=l(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,f.hu)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Nr=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document["hidden"]?(n="visibilitychange",e="hidden"):"undefined"!==typeof document["mozHidden"]?(n="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document["msHidden"]?(n="msvisibilitychange",e="msHidden"):"undefined"!==typeof document["webkitHidden"]&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return o(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,f.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(kr),Ar=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||(0,f.uI)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return o(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,f.hu)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(kr),Pr=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&J((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;while(this.pendingResponses[this.currentResponseNum]){var o=r();if("break"===o)break}},t}(),xr="start",Or="close",Rr="pLPCommand",Dr="pRTLPCB",Lr="id",Mr="pw",jr="ser",Fr="cb",Ur="seg",Vr="ts",qr="d",Br="dframe",Hr=1870,Wr=30,zr=Hr-Wr,Gr=25e3,Kr=3e4,Qr=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=N(t),this.stats_=vr.getCollection(e),this.urlFn=function(t){return e.connectionURL(St,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Pr(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(Kr)),D((function(){if(!n.isClosed_){n.scriptTagHolder=new Yr((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=h(t,5),i=r[0],o=r[1],s=r[2];r[3],r[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===xr)n.id=o,n.password=s;else{if(i!==Or)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=h(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={};t[xr]="t",t[jr]=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t[Fr]=n.scriptTagHolder.uniqueCallbackIdentifier),t[gt]=yt,n.transportSessionId&&(t[mt]=n.transportSessionId),n.lastSessionId&&(t[It]=n.lastSessionId),n.applicationId&&(t[Et]=n.applicationId),"undefined"!==typeof location&&location.hostname&&wt.test(location.hostname)&&(t[bt]=_t);var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(0,f.Yr)()&&(!!t.forceAllow_||!t.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!W()&&!z())},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,f.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,f.h$)(e),r=q(n,zr),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,f.Yr)()){this.myDisconnFrame=document.createElement("iframe");var n={};n[Br]="t",n[Lr]=t,n[Mr]=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,f.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Yr=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,f.Yr)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=w(),window[Rr+this.uniqueCallbackIdentifier]=e,window[Dr+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){var s=document.domain;o='<script>document.domain="'+s+'";<\/script>'}var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){k("frame writing exception"),u.stack&&k(u.stack),k(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{var e=t.contentWindow.document;e||k("No IE domain setting required")}catch(r){var n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){this.myID=t,this.myPW=e,this.alive=!0;while(this.newRequest_());},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[Lr]=this.myID,t[Mr]=this.myPW,t[jr]=this.currentSerial;var e=this.urlFn(t),n="",r=0;while(this.pendingSegs.length>0){var i=this.pendingSegs[0];if(!(i.d.length+Wr+n.length<=Hr))break;var o=this.pendingSegs.shift();n=n+"&"+Ur+r+"="+o.seg+"&"+Vr+r+"="+o.ts+"&"+qr+r+"="+o.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(Gr)),o=function(){clearTimeout(i),r()};this.addTag(t,o)},t.prototype.addTag=function(t,e){var n=this;(0,f.Yr)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){k("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),Xr="";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t){Xr=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $r=16384,Zr=45e3,ti=null;"undefined"!==typeof MozWebSocket?ti=MozWebSocket:"undefined"!==typeof WebSocket&&(ti=WebSocket);var ei,ni=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=N(this.connId),this.stats_=vr.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={};return r[gt]=yt,!(0,f.Yr)()&&"undefined"!==typeof location&&location.hostname&&wt.test(location.hostname)&&(r[bt]=_t),e&&(r[mt]=e),n&&(r[It]=n),t.connectionURL(Tt,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,m.set("previous_websocket_failure",!0);try{if((0,f.Yr)()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/"+yt+"/"+Xr+"/"+process.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}},o={NODE_ENV:"production",BASE_URL:"/"},s=0===this.connURL.indexOf("wss://")?o["HTTPS_PROXY"]||o["https_proxy"]:o["HTTP_PROXY"]||o["http_proxy"];s&&(i["proxy"]={origin:s}),this.mySock=new ti(this.connURL,[],i)}else{i={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new ti(this.connURL,[],i)}}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==ti&&!t.forceDisallow_},t.previouslyFailed=function(){return m.isInMemoryStorage||!0===m.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){m.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,f.cI)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,f.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t["data"];if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,f.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=q(e,$r);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(Zr))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),ri=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Qr,ni]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=ni&&ni["isAvailable"](),o=i&&!ni.previouslyFailed();if(e.webSocketOnly&&(i||x("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[ni];else{var s=this.transports_=[];try{for(var a=c(t.ALL_TRANSPORTS),u=a.next();!u.done;u=a.next()){var h=u.value;h&&h["isAvailable"]()&&s.push(h)}}catch(l){n={error:l}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),ii=6e4,oi=5e3,si=10240,ai=102400,ui="t",ci="d",hi="s",li="r",fi="e",pi="o",di="a",vi="n",yi="p",gi="h",mi=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=N("c:"+this.id+":"),this.transportManager_=new ri(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e["responsesRequiredToBeHealthy"]||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e["healthyTimeout"]||0;i>0&&(this.healthyTimeout_=Z((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>ai?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>si?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if(ui in t){var e=t[ui];e===di?this.upgradeIfSecondaryHealthy_():e===li?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):e===pi&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=U("t",t),n=U("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:yi,d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:di,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:vi,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=U("t",t),n=U("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=U(ui,t);if(ci in t){var n=t[ci];if(e===gi)this.onHandshake_(n);else if(e===vi){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===hi?this.onConnectionShutdown_(n):e===li?this.onReset_(n):e===fi?A("Server Error: "+n):e===pi?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):A("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),yt!==n&&x("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t["responsesRequiredToBeHealthy"]||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Z((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(ii))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Z((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(oi))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:yi,d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(m.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),bi=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),_i=1e3,wi=3e5,Ii=3e3,Ei=3e4,Ti=1.3,Si=3e4,Ci="server_kill",ki=3,Ni=function(t){function e(n,r,i,o,s,a,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=o,c.onServerInfoUpdate_=s,c.authTokenProvider_=a,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=N("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=_i,c.maxReconnectDelay_=wi,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!(0,f.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),Nr.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&Ar.getInstance().on("online",c.onOnline_,c),c}return o(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_((0,f.Pz)(i)),(0,f.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new f.BH,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t["d"];"ok"===t["s"]?(e.onDataUpdate_(r["p"],i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),Ii),this.connected_&&this.sendGet_(o),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),(0,f.hu)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),(0,f.hu)(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i},a="q";t.tag&&(s["q"]=r.queryObject(),s["t"]=t.tag),s["h"]=t.hashFn(),this.sendRequest(a,s,(function(s){var a=s["d"],u=s["s"];e.warnOnListenWarnings_(a,r);var c=n.listens.get(i)&&n.listens.get(i).get(o);c===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"===typeof t&&(0,f.r3)(t,"w")){var n=(0,f.DV)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();x("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e=t&&40===t.length;(e||(0,f.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ei)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,f.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r["noauth"]=!0:"object"===typeof this.authOverride_&&(r["authvar"]=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n["s"],i=n["d"]||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),(0,f.hu)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query");var i=this.removeListen_(n,r);i&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t},o="n";r&&(i["q"]=n,i["t"]=r),this.sendRequest(o,i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t["s"],t["d"])}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o["h"]=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r["s"],r["d"])}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){var n=t["s"];if("ok"!==n){var r=t["d"];e.log_("reportStats","Error sending stats: "+r)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,f.Pz)(t));var e=t["r"],n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t["b"]))}else{if("error"in t)throw"A server-side error has occurred: "+t["error"];"a"in t&&this.onDataPush_(t["a"],t["b"])}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e["p"],e["d"],!1,e["t"]):"m"===t?this.onDataUpdate_(e["p"],e["d"],!0,e["t"]):"c"===t?this.onListenRevoked_(e["p"],e["q"]):"ac"===t?this.onAuthRevoked_(e["s"],e["d"]):"sd"===t?this.onSecurityDebugPacket_(e):A("Unrecognized action received from server: "+(0,f.Pz)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,f.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_i,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=_i,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){var t=(new Date).getTime()-this.lastConnectionEstablishedTime_;t>Si&&(this.reconnectDelay_=_i),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Ti)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this,a=this.lastSessionId,u=!1,c=null,h=function(){c?c.close():(u=!0,i())},l=function(t){(0,f.hu)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)};this.realtime_={close:h,sendRequest:l};var p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(p).then((function(t){u?k("getToken() completed but was canceled"):(k("getToken() completed. Creating connection."),s.authToken_=t&&t.accessToken,c=new mi(o,s.repoInfo_,s.applicationId_,n,r,i,(function(t){x(t+" ("+s.repoInfo_.toString()+")"),s.interrupt(Ci)}),a))})).then(null,(function(e){s.log_("Failed to get token: "+e),u||(t.repoInfo_.nodeAdmin&&x(e),h())}))}},e.prototype.interrupt=function(t){k("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){k("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,f.xb)(this.interruptReasons_)&&(this.reconnectDelay_=_i,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return V(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new tt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){k("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ki&&(this.reconnectDelay_=Ei,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t["msg"].replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=c(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,c(s.values())),u=a.next();!u.done;u=a.next()){var h=u.value;this.sendListen_(h)}}catch(p){n={error:p}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);while(this.onDisconnectRequestQueue_.length){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,f.Yr)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Xr.replace(/\./g,"-")]=1,(0,f.uI)()?t["framework.cordova"]=1:(0,f.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Ar.getInstance().currentlyOnline();return(0,f.xb)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(bi),Ai=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=N("p:rest:"),i.listens_={},i}return o(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,f.hu)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=e.getListenId_(t,r),u={};this.listens_[a]=u;var c=pn(t.getQueryParams());this.restRequest_(s+".json",c,(function(t,e){var n,c=e;(404===t&&(c=null,t=null),null===t&&o.onDataUpdate_(s,c,!1,r),(0,f.DV)(o.listens_,a)===u)&&(n=t?401===t?"permission_denied":"rest_error:"+t:"ok",i(n,null))}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=pn(t.getQueryParams()),r=t.path.toString(),i=new f.BH;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e["format"]="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e["auth"]=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,f.xO)(e);r.log_("Sending REST request for "+s);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(n&&4===a.readyState){r.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);var t=null;if(a.status>=200&&a.status<300){try{t=(0,f.cI)(a.responseText)}catch(e){x("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&x("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))},e}(bi),Pi=function(){function t(){this.children={},this.childCount=0,this.value=null}return t}(),xi=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Pi),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){var n=e instanceof tt?e:new tt(e),r=this,i=nt(n);while(null!==i){var o=(0,f.DV)(r.node_.children,i)||new Pi;r=new t(i,r,o),n=it(n),i=nt(n)}return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){(0,f.hu)("undefined"!==typeof t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;B(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){var n=e?this:this.parent();while(null!==n){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new tt(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=(0,f.r3)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),Oi="repo_interrupt",Ri=25;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["RUN"]=0]="RUN",t[t["SENT"]=1]="SENT",t[t["COMPLETED"]=2]="COMPLETED",t[t["SENT_NEEDS_ABORT"]=3]="SENT_NEEDS_ABORT",t[t["NEEDS_ABORT"]=4]="NEEDS_ABORT"})(ei||(ei={}));var Di=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Cn,this.transactionQueueTree_=new xi,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=vr.getCollection(this.repoInfo_),this.forceRestClient_||$())this.server_=new Ai(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options["databaseAuthVariableOverride"];if("undefined"!==typeof e&&null!==e){if("object"!==typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,f.Pz)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new Ni(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=vr.getOrCreateReporter(this.repoInfo_,(function(){return new _r(t.stats_,t.server_)})),this.infoData_=new pr,this.infoSyncTree_=new fr({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new fr({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);Tr(t.eventQueue_,e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new tt(".info/serverTimeOffset")),e=t.val()||0;return(new Date).getTime()+e},t.prototype.generateServerValues=function(){return mn({timestamp:this.serverTime()})},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new tt(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=(0,f.UI)(e,(function(t){return Ue(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=Ue(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=(0,f.UI)(e,(function(t){return Ue(t)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=Ue(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),Tr(this.eventQueue_,h,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;B(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new tt("/.info/"+t),r=Ue(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);Tr(this.eventQueue_,n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this,n=this.serverSyncTree_.getServerValue(t);return null!=n?Promise.resolve(new He(n,t.getRef(),t.getQueryParams().getIndex())):this.server_.get(t).then((function(n){var r=Ue(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return Er(e.eventQueue_,t.path,i),Promise.resolve(new He(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){return e.log_("get for query "+(0,f.Pz)(t)+" failed: "+n),Promise.reject(new Error(n))}))},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Ue(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=En(s,a,o),c=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);Ir(this.eventQueue_,h),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||x("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);Tr(i.eventQueue_,t,s),i.callOnCompleteCallback(r,e,n)}));var l=this.abortTransactions_(t);this.rerunTransactions_(l),Tr(this.eventQueue_,l,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(B(e,(function(e,n){i=!1,s[e]=In(ct(t,e),Ue(n),r.serverSyncTree_,o)})),i)k("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);Ir(this.eventQueue_,u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||x("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;Tr(r.eventQueue_,u,s),r.callOnCompleteCallback(n,e,i)})),B(e,(function(e){var n=r.abortTransactions_(ct(t,e));r.rerunTransactions_(n)})),Tr(this.eventQueue_,t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new Cn;this.onDisconnect_.forEachTree(et(),(function(r,i){var o=In(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(et(),(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new Cn,Tr(this.eventQueue_,et(),r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Ue(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Ue(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if((0,f.xb)(e))return k("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&B(e,(function(e,n){var i=Ue(n);r.onDisconnect_.remember(ct(t,e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===nt(t.path)?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),Er(this.eventQueue_,t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===nt(t.path)?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),Er(this.eventQueue_,t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Oi)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Oi)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!==typeof console){var e;t?(this.statsListener_||(this.statsListener_=new yr(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);B(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),k.apply(void 0,l([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&J((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new qi(this))},enumerable:!1,configurable:!0}),t.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new Li(this,t);o.on("value",i);var s=function(){o.off("value",i)},a={path:t,update:e,onComplete:n,status:null,order:w(),applyLocally:r,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var h=new He(a.currentInputSnapshot,new Li(this,a.path),Ee);a.onComplete(null,!1,h)}}else{qt("transaction failed: Data returned ",c,a.path),a.status=ei.RUN;var l=this.transactionQueueTree_.subTree(t),p=l.getValue()||[];p.push(a),l.setValue(p);var d=void 0;if("object"===typeof c&&null!==c&&(0,f.r3)(c,".priority"))d=(0,f.DV)(c,".priority"),(0,f.hu)(Ut(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var v=this.serverSyncTree_.calcCompleteEventCache(t)||Le.EMPTY_NODE;d=v.getPriority().val()}var y=this.generateServerValues(),g=Ue(c,d),m=En(g,u,y);a.currentOutputSnapshotRaw=g,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_();var b=this.serverSyncTree_.applyUserOverwrite(t,m,a.currentWriteId,a.applyLocally);Tr(this.eventQueue_,t,b),this.sendReadyTransactions_()}},t.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Le.EMPTY_NODE},t.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);(0,f.hu)(n.length>0,"Sending zero length transaction queue");var r=n.every((function(t){return t.status===ei.RUN}));r&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},t.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,s=i.hash(),a=0;a<e.length;a++){var u=e[a];(0,f.hu)(u.status===ei.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=ei.SENT,u.retryCount++;var c=lt(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var h=o.val(!0),l=t;this.server_.put(l.toString(),h,(function(r){n.log_("transaction put response",{path:l.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=ei.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new Li(n,e[s].path),c=new He(a,u,Ee);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),Tr(n.eventQueue_,t,i);for(s=0;s<o.length;s++)J(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status===ei.SENT_NEEDS_ABORT?e[s].status=ei.NEEDS_ABORT:e[s].status=ei.RUN;else{x("transaction at "+l.toString()+" failed: "+r);for(s=0;s<e.length;s++)e[s].status=ei.NEEDS_ABORT,e[s].abortReason=r}n.rerunTransactions_(t)}}),s)},t.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},t.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===ei.RUN})),o=i.map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var a=t[s],u=lt(e,a.path),c=!1,h=void 0;if((0,f.hu)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===ei.NEEDS_ABORT)c=!0,h=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===ei.RUN)if(a.retryCount>=Ri)c=!0,h="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var l=this.getLatestState_(a.path,o);a.currentInputSnapshot=l;var p=t[s].update(l.val());if(void 0!==p){qt("transaction failed: Data returned ",p,a.path);var d=Ue(p),v="object"===typeof p&&null!=p&&(0,f.r3)(p,".priority");v||(d=d.updatePriority(l.getPriority()));var y=a.currentWriteId,g=this.generateServerValues(),m=En(d,l,g);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(y),1),r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,m,a.currentWriteId,a.applyLocally)),r=r.concat(this.serverSyncTree_.ackUserWrite(y,!0))}else c=!0,h="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(Tr(this.eventQueue_,e,r),r=[],c&&(t[s].status=ei.COMPLETED,function(t){setTimeout(t,Math.floor(0))}(t[s].unwatcher),t[s].onComplete))if("nodata"===h){var b=new Li(this,t[s].path),_=t[s].currentInputSnapshot,w=new He(_,b,Ee);n.push(t[s].onComplete.bind(null,null,!1,w))}else n.push(t[s].onComplete.bind(null,new Error(h),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<n.length;s++)J(n[s]);this.sendReadyTransactions_()}},t.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;e=nt(t);while(null!==e&&null===n.getValue())n=n.subTree(e),t=it(t),e=nt(t);return n},t.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},t.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},t.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==ei.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},t.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},t.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===ei.SENT_NEEDS_ABORT);else if(e[o].status===ei.SENT)(0,f.hu)(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=ei.SENT_NEEDS_ABORT,e[o].abortReason="set";else if((0,f.hu)(e[o].status===ei.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){var s=null;n.push(e[o].onComplete.bind(null,new Error("set"),!1,s))}-1===i?t.setValue(null):e.length=i+1,Tr(this.eventQueue_,t.path(),r);for(o=0;o<n.length;o++)J(n[o])}},t}(),Li=function(t){function e(e,n){var r=this;if(!(e instanceof Di))throw new Error("new Reference() no longer supported - use app.database().");return r=t.call(this,e,n,new rn,!1)||this,r}return o(e,t),e.prototype.getKey=function(){return(0,f.Dv)("Reference.key",0,0,arguments.length),ht(this.path)?null:ot(this.path)},e.prototype.child=function(t){return(0,f.Dv)("Reference.child",1,1,arguments.length),"number"===typeof t?t=String(t):t instanceof tt||(null===nt(this.path)?Qt("Reference.child",1,t,!1):Kt("Reference.child",1,t,!1)),new e(this.repo,ct(this.path,t))},e.prototype.getParent=function(){(0,f.Dv)("Reference.parent",0,0,arguments.length);var t=ut(this.path);return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){(0,f.Dv)("Reference.root",0,0,arguments.length);var t=this;while(null!==t.getParent())t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){(0,f.Dv)("Reference.set",1,2,arguments.length),Yt("Reference.set",this.path),Vt("Reference.set",1,t,this.path,!1),(0,f.Wj)("Reference.set",2,e,!0);var n=new f.BH;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if((0,f.Dv)("Reference.update",1,2,arguments.length),Yt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,x("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ht("Reference.update",1,t,this.path,!1),(0,f.Wj)("Reference.update",2,e,!0);var i=new f.BH;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if((0,f.Dv)("Reference.setWithPriority",2,3,arguments.length),Yt("Reference.setWithPriority",this.path),Vt("Reference.setWithPriority",1,t,this.path,!1),Wt("Reference.setWithPriority",2,e,!1),(0,f.Wj)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new f.BH;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return(0,f.Dv)("Reference.remove",0,1,arguments.length),Yt("Reference.remove",this.path),(0,f.Wj)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if((0,f.Dv)("Reference.transaction",1,3,arguments.length),Yt("Reference.transaction",this.path),(0,f.Wj)("Reference.transaction",1,t,!1),(0,f.Wj)("Reference.transaction",2,e,!0),Jt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new f.BH;"function"===typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new Zt(n,i)),"function"===typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){(0,f.Dv)("Reference.setPriority",1,2,arguments.length),Yt("Reference.setPriority",this.path),Wt("Reference.setPriority",1,t,!1),(0,f.Wj)("Reference.setPriority",2,e,!0);var n=new f.BH;return this.repo.setWithPriority(ct(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){(0,f.Dv)("Reference.push",0,2,arguments.length),Yt("Reference.push",this.path),Vt("Reference.push",1,t,this.path,!0),(0,f.Wj)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=ie(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"===typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return Yt("Reference.onDisconnect",this.path),new $t(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(vn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.__referenceConstructor=Li,$n.__referenceConstructor=Li;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Mi,ji=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(k("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',x(t)},t}(),Fi=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),Ui="FIREBASE_DATABASE_EMULATOR_HOST",Vi=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return Mi||(Mi=new t),Mi},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=c(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,c(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var h=u.value;this.repos_[s][h].interrupt()}}catch(l){n={error:l}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=c(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,c(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var h=u.value;this.repos_[s][h].resume()}}catch(l){n={error:l}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new Ct(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new Fi)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||P("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),k("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=xt(i,r),a=s.repoInfo,u=void 0;"undefined"!==typeof process&&(u={NODE_ENV:"production",BASE_URL:"/"}[Ui]),u?(o=!0,i="http://"+u+"?ns="+a.namespace,s=xt(i,r),a=s.repoInfo):o=!s.repoInfo.secure;var c=r&&o?new Fi:new ji(t,e);Xt("Invalid Firebase Database URL",1,s),ht(s.path)||P("Database URL must point to the root of a Firebase Database (not including a child path).");var h=this.createRepo(a,t,c);return h.database},t.prototype.deleteRepo=function(t){var e=(0,f.DV)(this.repos_,t.app.name);e&&(0,f.DV)(e,t.key)===t||P("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=(0,f.DV)(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=(0,f.DV)(r,t.toURLString());return i&&P("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Di(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),qi=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return a(e,void 0,void 0,(function(){return u(this,(function(t){return this.checkDeleted_("delete"),Vi.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof Di||P("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Li(this.repo_,et())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?P("Cannot call useEmulator() after instance has already been initialized."):Vi.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),(0,f.Dv)("database.ref",0,1,arguments.length),t instanceof Li?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),(0,f.Dv)(e,1,1,arguments.length);var n=xt(t,this.repo_.repoInfo_.nodeAdmin);Xt(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||P(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&P("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){(0,f.Dv)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){(0,f.Dv)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Bi=function(){ni.forceDisallow(),Qr.forceAllow()},Hi=function(){Qr.forceDisallow()},Wi=function(){return ni["isAvailable"]()},zi=function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},Gi=function(t,e){t.repo.stats(e)},Ki=function(t,e){t.repo.statsIncrementCounter(e)},Qi=function(t){return t.repo.dataUpdateCount},Yi=function(t,e){return t.repo.interceptServerData_(e)};function Xi(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;Jr(r);var u=new d.zt("auth-internal",new d.H0("database-standalone"));return u.setComponent(new d.wA("auth-internal",(function(){return i}),"PRIVATE")),{instance:Vi.getInstance().databaseFromApp(e,u,n,a),namespace:o}}var Ji=Object.freeze({__proto__:null,forceLongPolling:Bi,forceWebSockets:Hi,isWebSocketsAvailable:Wi,setSecurityDebugCallback:zi,stats:Gi,statsIncrementCounter:Ki,dataUpdateCount:Qi,interceptServerData:Yi,initStandalone:Xi}),$i=Ni;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Ni.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Zi=mi,to=function(t){var e=Ni.prototype.put;return Ni.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Ni.prototype.put=e}},eo=Ct,no=function(t){return t.queryIdentifier()},ro=function(t){Vi.getInstance().forceRestClient(t)},io=Object.freeze({__proto__:null,DataConnection:$i,RealTimeConnection:Zi,hijackHash:to,ConnectionTarget:eo,queryIdentifier:no,forceRestClient:ro}),oo="@firebase/database",so="0.9.4",ao=qi.ServerValue;function uo(e){Jr(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new d.wA("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Vi.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:Li,Query:vn,Database:qi,DataSnapshot:He,enableLogging:C,INTERNAL:Ji,ServerValue:ao,TEST_ACCESS:io}).setMultipleInstances(!0));e.registerVersion(oo,so),(0,f.Yr)()&&(t.exports=n)}uo(r.Z)},2864:function(t,e,n){"use strict";n.d(e,{Am:function(){return p},Ub:function(){return f},Yd:function(){return l},in:function(){return o}});var r;n(1703);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function i(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var o,s=[];(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(o||(o={}));var a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=(r={},r[o.DEBUG]="log",r[o.VERBOSE]="log",r[o.INFO]="info",r[o.WARN]="warn",r[o.ERROR]="error",r),h=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,i(["["+o+"]  "+t.name+":"],n))}},l=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.DEBUG],t)),this._logHandler.apply(this,i([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.VERBOSE],t)),this._logHandler.apply(this,i([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.INFO],t)),this._logHandler.apply(this,i([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.WARN],t)),this._logHandler.apply(this,i([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.ERROR],t)),this._logHandler.apply(this,i([this,o.ERROR],t))},t}();function f(t){s.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++){var u=i[r];n(u)}}},3836:function(t,e,n){"use strict";n.d(e,{BH:function(){return y},LL:function(){return O},ZR:function(){return x},gQ:function(){return z},zI:function(){return A},hu:function(){return s},g5:function(){return a},US:function(){return h},h$:function(){return l},$s:function(){return st},r3:function(){return V},ne:function(){return G},p$:function(){return p},ZB:function(){return d},gK:function(){return J},z$:function(){return g},GJ:function(){return U},jU:function(){return _},ru:function(){return w},d:function(){return E},xb:function(){return B},w1:function(){return T},hl:function(){return k},uI:function(){return m},UG:function(){return b},Yr:function(){return C},b$:function(){return I},Mn:function(){return S},w9:function(){return F},cI:function(){return L},UI:function(){return H},xO:function(){return W},DV:function(){return q},ug:function(){return et},dS:function(){return tt},Pz:function(){return M},Dv:function(){return X},Wj:function(){return $},lb:function(){return Z},eu:function(){return N}});n(1703),n(2801);var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},s=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},u=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},c=function(t){var e=[],n=0,r=0;while(n<t.length){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){o=t[n++];var s=t[n++],a=t[n++],u=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&a)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")},h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(u(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):c(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length,a=s?n[t.charAt(i)]:0;++i;var u=i<t.length,c=u?n[t.charAt(i)]:64;++i;var h=i<t.length,l=h?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==c||null==l)throw Error();var f=o<<2|a>>4;if(r.push(f),64!==c){var p=a<<4&240|c>>2;if(r.push(p),64!==l){var d=c<<6&192|l;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},l=function(t){var e=u(t);return h.encodeByteArray(e,!0)},f=function(t){try{return h.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function p(t){return d(void 0,t)}function d(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&v(r)&&(t[r]=d(t[r],e[r]));return t}function v(t){return"__proto__"!==t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var y=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function m(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function b(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function _(){return"object"===typeof self&&self.self===self}function w(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function I(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function E(){return g().indexOf("Electron/")>=0}function T(){var t=g();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function S(){return g().indexOf("MSAppHost/")>=0}function C(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN}function k(){return"indexedDB"in self&&null!=indexedDB}function N(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))}function A(){return!(!navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P="FirebaseError",x=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name=P,Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,O.prototype.create),o}return i(e,t),e}(Error),O=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?R(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new x(i,a,r);return u},t}();function R(t,e){return t.replace(D,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var D=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(t){return JSON.parse(t)}function M(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var j=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=L(f(o[0])||""),n=L(f(o[1])||""),i=o[2],r=n["d"]||{},delete n["d"]}catch(s){}return{header:e,claims:n,data:r,signature:i}},F=function(t){var e=j(t),n=e.claims;return!!n&&"object"===typeof n&&n.hasOwnProperty("iat")},U=function(t){var e=j(t).claims;return"object"===typeof e&&!0===e["admin"]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function V(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function q(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function B(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function H(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r],s=o[0],a=o[1];n(s,a)}return e.length?"&"+e.join("&"):""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var z=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;while(r<e){if(0===o)while(r<=n)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){while(r<e)if(i[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else while(r<e)if(i[o]=t[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function G(t,e){var n=new K(t,e);return n.subscribe.bind(n)}var K=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=Q(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=Y),void 0===r.error&&(r.error=Y),void 0===r.complete&&(r.complete=Y);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function Q(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}function Y(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i){var o=t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}};function J(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument ",i}function $(t,e,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(J(t,e,r)+"must be a valid function.")}function Z(t,e,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(J(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,s(r<t.length,"Surrogate pair missing trail surrogate.");var a=t.charCodeAt(r)-56320;i=65536+(o<<10)+a}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},et=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},nt=1e3,rt=2,it=144e5,ot=.5;function st(t,e,n){void 0===e&&(e=nt),void 0===n&&(n=rt);var r=e*Math.pow(n,t),i=Math.round(ot*r*(Math.random()-.5)*2);return Math.min(it,r+i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */},6225:function(t,e){(function(t,n){n(e)})(0,(function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,s){i=t[e].apply(t,r),n(i).then(o,s)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new h(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function s(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function a(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function h(t,e){this._cursor=t,this._request=e}function l(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}function v(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))}function y(t){return r(indexedDB,"deleteDatabase",[t])}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(h,"_cursor",["direction","key","primaryKey","value"]),s(h,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(h.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new h(t,e._request)}))}))})})),l.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},l.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(l,"_store",["name","keyPath","indexNames","autoIncrement"]),s(l,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(l,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(l,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new l(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new l(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[l,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,l].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=v,t.deleteDb=y,Object.defineProperty(t,"__esModule",{value:!0})}))},3087:function(t,e,n){"use strict";t.exports=n.p+"img/mobile-project-1.8b4f9e2f.jpg"},4398:function(t,e,n){"use strict";t.exports=n.p+"img/mobile-project-2.9bd76372.jpg"},9952:function(t,e,n){"use strict";t.exports=n.p+"img/ui-project-2.afd87ce7.jpg"},597:function(t,e,n){"use strict";t.exports=n.p+"img/web-project-1.d1debdf5.jpg"}}]);
//# sourceMappingURL=260.751960b1.js.map