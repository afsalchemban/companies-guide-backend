"use strict";(self["webpackChunkcompany_guide"]=self["webpackChunkcompany_guide"]||[]).push([[329],{7329:function(t,e,s){s.r(e),s.d(e,{default:function(){return v}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-5"},[s("div",{staticClass:"mb-4 card2"},[t._m(0),s("div",{staticClass:"p-3 card2-body"},[s("div",{staticClass:"grid sm:grid-cols-1 xs:grid-cols-1 md:grid-cols-3 lg:grid-cols-3 gap-7"},t._l(t.council_companies,(function(e,i){return s("div",{key:i,staticClass:"mb-4 mb-xl-0"},[s("div",{staticClass:"card2 card-blog card-plain"},[s("div",{staticClass:"relative"},[s("a",{staticClass:"shadow-xl block rounded-xl"},[s("img",{staticClass:"shadow img-fluid rounded-xl",attrs:{src:t.cc_logo?t.cc_logo:e.logo_image_path,alt:"img-blur-shadow"}})]),t.councilId==t.$route.query.id?s("div",{staticClass:"action"},[s("div",{staticClass:"action-icon",attrs:{role:"button"},on:{click:function(s){return t.selectItem(e.id)}}},[s("svg",{staticClass:"h-6 w-6",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"}})])]),s("div",{staticClass:"options shadow-xl rounded-xl hidden",class:{show:e.id===t.activeItem&&t.isshow}},[s("ul",{staticClass:"list-group"},[s("li",{staticClass:"pt-0 text-sm border-0 list-group-item ps-0 text-dark mb-2"},[s("router-link",{attrs:{to:{path:"/council/settings/edit-company",query:{id:t.$route.query.id,name:t.$route.query.name,company_id:e.id,company_name:e.business_name}}}},[t._v("Edit")])],1),s("li",{staticClass:"pt-0 text-sm border-0 list-group-item ps-0 text-dark"},[s("router-link",{attrs:{to:""}},[t._v("Delete")])],1)])])]):t._e(),t.councilId==t.$route.query.id?s("UpdateCCLogo",{staticClass:"update_clogo",attrs:{company_id:e.id},on:{cclogo:function(e){return t.getLogo(e)}}}):t._e()],1),s("div",{staticClass:"px-1 pb-0 card2-body"},[s("ul",{staticClass:"list-group"},[s("li",{staticClass:"pt-0 border-0 list-group-item ps-0 text-dark mb-2"},[s("h4",{staticClass:"text-dark text-xl"},[s("strong",[t._v(t._s(e.business_name))])])]),s("li",{staticClass:"text-sm border-0 list-group-item ps-0 text-dark mb-2"},[s("strong",{},[t._v("Mobile:")]),t._v("   "+t._s(e.phone_number)+" ")]),s("li",{staticClass:"text-sm border-0 list-group-item ps-0 text-dark mb-2"},[s("strong",{staticClass:"text-dark"},[t._v("Email:")]),t._v("   "+t._s(e.email)+" ")]),t._m(1,!0)])])])])})),0)])])])},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-5 pb-0 card-header"},[s("h5",{staticClass:"mb-1 text-dark"},[t._v("Our Companies")]),s("p",{staticClass:"text-sm text-dark"},[t._v("Activity name")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"text-sm border-0 list-group-item ps-0 text-dark mb-2"},[s("strong",{staticClass:"text-dark"},[t._v("Companies:")]),t._v("   SmartID,BusinessID,Gold Star ")])}],a=s(6931),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"uploadWrap"},[s("div",[t.isCropped?s("div",{staticClass:"img-container"},[s("div",{staticClass:"img-holder"},[t.isCropped?s("div",[s("Cropper",{attrs:{src:t.img},on:{change:t.change}}),s("div",{staticClass:"save-image flex justify-between"},[s("button",{staticClass:"text-sm sm:text-base text-white tracking-wider bg-indigo-500 hover:bg-indigo-600 focus:ring-1 focus:ring-indigo-900 rounded-lg duration-500",on:{click:function(e){return t.saveImage()}}},[t._v(" Save ")]),s("button",{staticClass:"text-sm sm:text-base text-white tracking-wider bg-indigo-500 hover:bg-indigo-600 focus:ring-1 focus:ring-indigo-900 rounded-lg duration-500",on:{click:t.CancelCrop}},[t._v(" Cancel ")])])],1):t._e(),t.before_crop?s("div",{staticClass:"mb-3"},[s("div",{staticClass:"img-selected-wrapper"},t._l(t.InitialArray,(function(e,i){return s("div",{key:i,staticClass:"selected-images"},[s("img",{attrs:{src:e}}),s("span",{staticClass:"material-icons removeIco",on:{click:function(e){return t.delete_image(i)}}},[t._v("X")])])})),0)]):t._e()])]):t._e(),s("div",{staticClass:"uploader-box"},[t.ShowChooseFile?s("div",{on:{click:t.chooseFile}},[s("div",{staticClass:"upload",attrs:{role:"button"}},[s("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(e){return t.chooseImage(e)}}}),s("svg",{staticClass:"h-6 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}}),s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"}})])])]):t._e()])])])])},l=[],c=s(6867),n={data(){return{before_crop:!0,isCropped:!1,ShowChooseFile:!0,IsDisabledUpload:!1,files:[],InitialArray:[],RealArray:[],temp:"",cclogo:null,updatedLogo:null,mapMarkers:{}}},props:{company_id:String},components:{Cropper:c.fl},methods:{getimglogo(){this.$emit("cclogo",this.updatedLogo)},chooseFile(){this.$refs.file.click()},CancelCrop(){this.before_crop=!0,this.isCropped=!1,this.ShowChooseFile=!0},saveImage(){this.update_cclogo(this.$route.query.id,this.company_id),this.before_crop=!0,this.isCropped=!1,this.ShowChooseFile=!0},update_cclogo(t,e){let s=new FormData;s.append("file",this.cclogo),a.Z.post("/council/change_company_logo/"+t+"/"+e,s,{headers:{"Content-Type":"multipart/form-data"}}).then((t=>{console.log(t.data),this.updatedLogo=t.data.logo_image_path,this.getimglogo()})).catch((t=>{console.log(t.message)}))},change({canvas:t}){t.toBlob((t=>{this.blobUrl=URL.createObjectURL(t),this.cclogo=new File([t],"image",{lastModified:(new Date).getTime(),type:t.type},"image/jpeg",.3)}))},chooseImage(t){const e=t.target.files[0];this.logo=e,this.img=URL.createObjectURL(e);var s=new FileReader,i=this;s.readAsDataURL(t.target.files[0]),s.onload=function(t){console.log(i.isCropped);var e=new Image;e.src=t.target.result,e.onload=function(){var t=this.height,e=this.width;return t<210||e<210?(alert("Please choose file which has minimum height of 210 and width of 210"),!1):(i.ShowChooseFile=!1,i.isCropped=!0,!0)}}},delete_image(t){this.InitialArray.splice(t,1),this.RealArray.splice(t,1),console.log(this.InitialArray),console.log(this.RealArray)}}},d=n,u=s(3736),g=(0,u.Z)(d,r,l,!1,null,null,null),p=g.exports,m=s(4665),h={name:"our-companies",data(){return{council_companies:null,activeItem:null,isshow:!1,cc_logo:null}},components:{UpdateCCLogo:p},computed:{currentRouteName(){return this.$route.name},...(0,m.rn)({councilId:t=>t.auth.council_id})},methods:{getLogo(t){this.cc_logo=t},selectItem(t){this.activeItem=t,this.isshow=!this.isshow},get_council_companies(t){a.Z.get("public/council_company/"+t).then((t=>{console.log(t.data),this.council_companies=t.data})).catch((t=>{console.log(t)}))}},created(){this.get_council_companies(this.$route.query.id)}},_=h,C=(0,u.Z)(_,i,o,!1,null,null,null),v=C.exports}}]);
//# sourceMappingURL=329.15b77e15.js.map